{"version":3,"sources":["scripts/app-fc58263f5e.js"],"names":["carleonLiquidsoapController","$scope","$sce","$q","$window","$translatePartialLoader","$translate","$interval","angharadConfig","carleonFactory","carleonLiquidsoapFactory","sagremorService","sagremorParams","toaster","init","getLiquidsoapService","ctrl","element","name","then","result","radio","pop","instant","this","status","onAir","title","artist","albumartist","year","album","list","listSelected","onAirAccordionOpen","listAccordionOpen","commandRadio","command","refreshStatus","$watch","isOpen","refreshOnAir","refreshList","value","carleonMockController","carleonMockFactory","adminMode","param","param1","param2","param3","commandList","messages","commandMock","error","carleonMotionController","$http","angharadFactory","carleonMotionFactory","urlBaseImages","baseUrl","prefixCarleon","urlBaseStream","images","fileListName","fileList","selectedFileList","offset","streamList","selectedStream","streamUri","online","profileParams","refresh","getFromProfile","currentProfile","_","has","carleon","serviceMotion","openPopupImage","imgArray","index","imagePopup","response","file_list","forEach","push","changeSelectedFileList","length","stream_list","stream","image","uri","snapshotUri","snapshot_uri","canPrevious","canNext","previousList","nextList","file","thumb","img","saveCurrentProfile","openStream","$on","carleonMpdController","carleonMpdFactory","benoicFactory","sharedData","mpdElement","find","get","mpd","promises","getMpdStatus","getMpdPlaylists","all","responses","playlists","state","startRefreshStatusInterval","_interval","hasFocus","selectedPlaylist","cancel","displayVolume","volume","setVolume","delta","newVolume","setMpdVolume","displayVolumeCommand","setAction","action","actionUrl","repeat","random","device","setElement","setMpdAction","loadPlaylist","loadMpdPlaylist","onblur","onfocus","sagContainerController","$rootScope","tag","type","scripts","filter","script","options","tags","oneTag","runScript","loaderToast","body","timeout","showCloseButton","$broadcast","clear","menuSelect","menuItem","sagDimmerController","valueChecked","newDisplay","display","setDimmer","addDimmer","Dimmervalue","sagSchedulerController","enableScheduler","enabled","add","sagTriggerController","enableTrigger","sagHeaterController","availableModes","setHeater","mode","displayCommandValue","Math","round","unit","displayCommand","modeDisplay","toLowerCase","sagMonitorController","sagremorConstant","updateDevices","displayMonitor","devices","deviceName","switches","monitored","elt","elementList","dimmers","heaters","sensors","elementListDisplayed","colorList","newElement","newElementColor","durationList","duration","data","labels","series","datasetOverride","fill","chart","interpolate","x","d","timestamp","y","showValues","valueFormat","d3","format","transitionDuration","xScale","time","scale","xAxis","axisLabel","yAxis","axisLabelDistance","tr","addElement","color","elements","from","Date","setTime","getTime","setMonth","getMonth","angular","copy","httpMonitor","getMonitor","results","key","remove","curElement","myData","values","monitor","curDate","parseFloat","newElementValid","removeSerie","serie","indexOf","splice","sagScriptController","self","sagSensorController","elementDisplayValue","isNaN","isFinite","sagSwitchController","toggleSwitcher","topLeftMenuCtrl","sagGenericInjectorManager","loadMenu","serviceList","components","inject","service","carleonService","leftMenu","menu","icon","target","selectTab","tabName","$","removeClass","addClass","topRightMenuCtrl","$location","$cookies","selectedLang","use","langList","profiles","currentProfileName","oauth2","search","responseType","changeLang","changeProfile","profile","now","exp","getFullYear","getDate","put","expires","reconnect","$inject","module","constant","window","scriptActionElements","label","submodule","conditionList","monitoredEveryEnum","schedulerRepeatEveryEnum","style","config","$translateProvider","$translatePartialLoaderProvider","useLoader","urlTemplate","addPart","registerAvailableLanguageKeys","en_US","en_UK","en_CA","fr_FR","fr_CA","fr_BE","*","fallbackLanguage","determinePreferredLanguage","useCookieStorage","useSanitizeValueStrategy","factory","share","removeAll","params","$uibModal","open","message","modalInstance","animation","templateUrl","controller","controllerAs","size","resolve","placeholder","component","$locationProvider","html5Mode","hashPrefix","$stateProvider","$urlRouterProvider","url","otherwise","$timeout","sagremorEdit","getDashboardElements","dashboardWidgetsDisplay","profileName","addTo","D","getDashboardElementsCurrentProfile","dashboardWidgets","benoicEnabled","addBenoicElementToDashboard","addScriptToDashboard","addEventToDashboard","addDashboardSeparator","addMonitorToDashboard","carleonEnabled","addCarleonElementToDashboard","isInit","tagParams","split","curHeight","found","widget","bElt","getBenoicElement","dashboardElement","width","height","monitorList","injector","cElt","widgetHeight","curWidth","widgetWidth","newDashboardSeparator","setProfile","updateTag","newTag","e","_timeout","connected","cellHeight","verticalHargin","disableResize","removeFromDashboard","addTitleLine","w","onChange","event","items","changed","item","el","attr","chain","sortBy","splitted","token","fn","errorMessage","schedulerList","triggerList","menuScheduler","edit","editEvent","removeScheduler","add_to_dashboard","next_time","addToDashboard","menuTrigger","removeTrigger","updateSchedulers","updateTriggers","events","refreshEvents","schedulers","scheduler","triggers","trigger","newEvent","heaterList","loggedIn","path","menuSensor","editHeater","updateHeaters","se","refreshElements","heater","eltName","$uibModalInstance","DTOptionsBuilder","garethFactory","filterList","AlertSmtpList","AlertHttpList","editFilter","addFilter","newClause","newAlertSmtp","newAlertHttp","newAlertHttpHeader","displayAlert","customFilter","description","filter_clauses","filter_alerts","smtp","http","addAlertSmtp","addAlertHttp","customClause","operator","customHttpAlert","method","http_headers","customHttpAlertHeader","existingHttpAlert","customHttpAlertMethodSelect","customSmtpAlert","host","port","tls","check_ca","user","password","to","cc","bcc","subject","existingSmtpAlert","AlertList","newFilter","addClause","isClauseValid","addNewClause","parseInt","removeClause","cancelAddClause","getClauseElement","getClauseOperator","getClauseValue","clause","isSmtpAlertValid","alert","cancelAddSmtpAlert","postNewSmtpAlert","addAlert","addAlertHttpHeader","cancelAddAlertHttpHeader","addNewAlertHttpHeader","isHttpAlertValid","postNewHttpAlert","cancelAddHttpAlert","removeAlert","isFilterValid","cancelNewFilter","postNewFilter","promise","setFilter","removeCustomFilter","removeFilter","editCustomFilter","showAlerts","showFilters","removeSmtpAlert","removeHttpAlert","close","messageList","searchOptions","limit","getFilters","newOptions","withLanguageSource","withOption","getPriority","priority","getFilteredMessages","getAllMessages","filterManagement","addMonitor","exist","removeMonitor","updateMonitors","newMonitor","sagremorConfirm","submodules","deviceList","deviceTypes","deviceTypesEnabled","deviceAdded","deviceUpdated","newDeviceName","newDeviceDescription","newDeviceType","newDeviceConnect","deviceOptionList","deviceOptionListDisplay","profileList","profileAdded","initDeviceTypes","addDevice","isDeviceValid","option","optional","postNewDevice","curOptions","type_uid","connectDevice","cancelNewDevice","setDeviceOptions","uid","getDeviceOverview","disconnectDevice","curDevice","editDevice","newDescription","update","saveDevice","setDevice","cancelEditDevice","removeDevice","translate","reloadBenoicDeviceTypes","reloadDeviceTypes","deviceType","reloadCarleonServices","reloadServiceList","submoduleEnable","enableSubmodule","benoic","gareth","garethEnabled","addProfile","newProfileName","newProfileDescription","newProfileDefault","cancelNewProfile","isProfileValid","saveNewProfile","newProfile","default","removeProfile","curProfile","cleanProfile","editProfile","newName","cancelEditProfile","isUpdateProfileValid","saveProfile","savedName","savedDescription","setDefaultProfile","useProfile","enableCarleonService","enableService","input","types","scriptList","menuScript","editScript","removeScript","bindToElement","updateScripts","refreshScripts","newScript","sensorList","editSensor","updateSensors","sensor","$stateParams","loadServices","currentInjectors","currentInjector","cService","serviceGroup","groupTitle","editService","removeService","serviceElt","addService","switchList","dimmerList","menuSwitcher","editSwitcher","menuDimmer","editDimmer","updateSwitchers","updateDimmers","sw","switcher","di","dimmer","userList","tokenList","newUser","login","usersEnabled","getUserList","getTokenList","addUser","cancelNewUser","isNewUserValid","createNewUser","displayChangePassword","changePassword","cancelChangePassword","setUser","enableUser","removeUser","displayToken","substring","revokeToken","directive","$compile","template","templateNotFound","templateDisabled","scope","link","content","replace","append","bindings","restrict","src","newVal","oldVal","undefined","trustAsResourceUrl","angharadBackendService","urlBase","getLiquidsoapServiceList","httpRequest","addLiquidsoapService","liquidsoapService","setLiquidsoapService","removeLiquidsoapService","run","commands","radio_url","radio_type","control_enabled","control_host","control_port","control_request_name","isLiquidsoapValid","save","dismiss","mockFactory","getMockList","getMock","addMock","mock","setMock","removeMock","exec1","parameters","value1","value2","exec2","exec3","exec4","mocks","getMotionServiceList","getMotionService","addMotionService","motionService","setMotionService","removeMotionService","file_name","thumbnail","urlParam","stream_name","snapshot","motion","currentImage","displayTitle","changeImage","showIndex","addFileList","addStream","newFileList","newStream","addNewFileList","removeFileList","saveNewFileList","cancelNewFileList","isFileListValid","thumbnail_path","addNewStream","removeStream","saveNewStream","cancelNewStream","isStreamValid","isCameraValid","config_uri","getMpdServiceList","getMpdService","addMpdService","mpdService","setMpdService","removeMpdService","playlist","load_playlist","set_volume","switchAttached","switch","isMpdValid","changeSwitch","transclude","dashboard","sagParams","AccessToken","angharadBackendFactory","deferred","defer","expires_at","valueOf","forceRefresh","defaults","headers","common","Authorization","access_token","reject","prefixAngharad","dataFactory","getSumboduleList","getSubmodule","getScriptList","getScript","addScript","setScript","getSchedulerList","getScheduler","addScheduler","setScheduler","getTriggerList","getTrigger","addTrigger","setTrigger","getProfileList","getProfile","profile_id","prefixBenoic","getDeviceTypes","getDeviceList","getDevice","pingDevice","elementType","elementName","elementValue","additionalOptions","updateElement","addTag","removeTag","getServiceList","service_name","enable","elementCleanup","prefixGareth","getFilterList","getFilter","getAlertList","getAlert","setAlert","closeLoader","popLoader","initParameters","getApiData","refreshTimeout","startRefreshTimeout","refreshData","devicePromises","promiseList","sc","sh","initAngharadSubmodules","initAngharad","initBenoic","initCarleon","initGareth","initComplete","shouldRefresh","benoicInitError","shoudRefresh","deviceTypesResult","deviceResult","qList","filters","alerts","defaultProfile","profile_name","closeSagremor","isLogged","sagremorFactory","eventType","getCarleonElement","curMonitor","monitorEveryEnum","monitorEvery","trLabel","id","saveDimmer","monitorChecked","repeatSwitch","repeatEveryDayOfWeek","sunday","monday","tuesday","wednesday","thursday","friday","saturday","repeat_value","myDate","source","conditions","globalTriggerElementList","benoicElements","serviceName","commandName","newAction","globalElementList","carleonConditionElementsList","carleonConditionCommandsParameters","serviceParameter","serviceParameterName","commandParameter","required","carleonConditionResultParameters","serviceResult","serviceResultName","commandResult","resultName","newCondition","curResult","curResultName","field","nameInvalid","globalScriptList","remove_after","tmpElement","tmpResult","condition","newTrigger","newTriggerTag","datePickerOptions","buttonBar","show","text","today","date","openCalendar","preventDefault","stopPropagation","trackBenoicElement","trackCarleonElement","trackTriggerElement","isConditionValid","newConditionType","commandMode","commandHeat","res","parameter","heaterModeDisplay","setConditionBenoicElement","element_type","addCondition","nameSplitted","removeCondition","displayCondition","curSwitch","curDimmer","curHeater","curSensor","curCondition","cond","fieldName","isEventValid","gridstack","removeItem","removeWidget","addItem","makeWidget","onDragStart","onDragStop","onResizeStart","onResizeStop","attrs","ngModel","on","$apply","ui","require","gridstackItem","onItemAdded","onItemRemoved","gsItemX","gsItemY","gsItemWidth","gsItemHeight","gsItemAutopos","val","bind","saveHeater","ok","reason","selected","typeTitle","tmpCheck","selectRow","startsWith","selectedElements","actions","newActionType","setActionBenoicElement","setActionCarleonElement","addAction","changeActionType","newActionTypeSplitted","removeAction","$index","getBenoicElementDisplay","getCarleonElementDisplay","getCarleonElementParameters","toReturn","getBenoicElementValue","cancelAddAction","saveNewAction","isScriptValid","isActionValid","ret","parameterName","carleonCommand","curCommand","carleonParameter","curParameter","saveSensor","saveSwitcher","$templateCache"],"mappings":"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","file":"scripts/app-fc58263f5e.js","sourcesContent":["angular.module(\"sagremorApp\", [\n\"ui.bootstrap\",\n\"ui.router\", \n\"ngCookies\",\n\"angularMoment\",\n\"frapontillo.bootstrap-switch\", \n\"toaster\", \n\"ui.bootstrap.contextMenu\", \n\"pascalprecht.translate\",\n\"ngSanitize\",\n\"ui.bootstrap.datetimepicker\",\n\"datatables\",\n\"angular.img\",\n\"nvd3\",\n\"oauth\"\n])\n.constant(\"_\", window._)\n.constant(\"sagremorConstant\", {\n    scriptActionElements: [\n        {name: \"switch\", label: \"script_action_benoic_switch\", submodule: \"benoic\"},\n        {name: \"dimmer\", label: \"script_action_benoic_dimmer\", submodule: \"benoic\"},\n        {name: \"heater\", label: \"script_action_benoic_heater\", submodule: \"benoic\"}\n    ],\n    conditionList: [\n        {name: \"switch\", label: \"event_condition_benoic_switch\", submodule: \"benoic\"},\n        {name: \"dimmer\", label: \"event_condition_benoic_dimmer\", submodule: \"benoic\"},\n        {name: \"heater\", label: \"event_condition_benoic_heater\", submodule: \"benoic\"},\n        {name: \"sensor\", label: \"event_condition_benoic_sensor\", submodule: \"benoic\"}\n    ],\n    monitoredEveryEnum: [\n        {value: 60, label: \"monitor_1_minute\"},\n        {value: 120, label: \"monitor_2_minutes\"},\n        {value: 300, label: \"monitor_5_minutes\"},\n        {value: 600, label: \"monitor_10_minutes\"},\n        {value: 900, label: \"monitor_15_minutes\"},\n        {value: 1200, label: \"monitor_20_minutes\"},\n        {value: 1800, label: \"monitor_30_minutes\"},\n        {value: 3600, label: \"monitor_1_hour\"},\n        {value: 7200, label: \"monitor_2_hours\"},\n        {value: 10800, label: \"monitor_3_hours\"},\n        {value: 14400, label: \"monitor_4_hours\"},\n        {value: 18000, label: \"monitor_5_hours\"},\n        {value: 21600, label: \"monitor_6_hours\"},\n        {value: 43200, label: \"monitor_12_hours\"},\n        {value: 86400, label: \"monitor_1_day\"}\n    ],\n    schedulerRepeatEveryEnum: [\n        {value: 0, label: \"event_scheduler_repeat_every_minutes\"},\n        {value: 1, label: \"event_scheduler_repeat_every_hours\"},\n        {value: 2, label: \"event_scheduler_repeat_every_days\"},\n        {value: 3, label: \"event_scheduler_repeat_every_days_of_week\"},\n        {value: 4, label: \"event_scheduler_repeat_every_months\"},\n        {value: 5, label: \"event_scheduler_repeat_every_year\"},\n    ],\n    langList: [\n        {name: \"fr\", display: \"Fr\"},\n        {name: \"en\", display: \"En\"}\n    ],\n    durationList: [\n        {value: 0, label: \"duration_last_hour\"},\n        {value: 1, label: \"duration_last_2_hours\"},\n        {value: 2, label: \"duration_last_6_hours\"},\n        {value: 3, label: \"duration_last_12_hours\"},\n        {value: 4, label: \"duration_last_day\"},\n        {value: 5, label: \"duration_last_2_days\"},\n        {value: 6, label: \"duration_last_3_days\"},\n        {value: 7, label: \"duration_last_7_days\"},\n        {value: 8, label: \"duration_last_month\"},\n    ],\n    colorList: [\n\t\t{ style:\"background:Aqua\", value:\"#00FFFF\", label:\"Aqua\"},\n\t\t{ style:\"background:Brown\", value:\"#A52A2A\", label:\"Brown\"},\n\t\t{ style:\"background:Blue\", value:\"#0000FF\", label:\"Blue\"},\n\t\t{ style:\"background:Chartreuse\", value:\"#7FFF00\", label:\"Chartreuse\"},\n\t\t{ style:\"background:DarkGreen\", value:\"#006400\", label:\"Dark Green\"},\n\t\t{ style:\"background:DarkOrange\", value:\"#FF8C00\", label:\"Dark Orange\"},\n\t\t{ style:\"background:DarkRed\", value:\"#8B0000\", label:\"Dark Red\"},\n\t\t{ style:\"background:DarkTurquoise\", value:\"#00CED1\", label:\"Dark Turquoise\"},\n\t\t{ style:\"background:DarkViolet\", value:\"#9400D3\", label:\"Dark Violet\"},\n\t\t{ style:\"background:Green\", value:\"#008000\", label:\"Green\"},\n\t\t{ style:\"background:LawnGreen\", value:\"#7CFC00\", label:\"Lawn Green\"},\n\t\t{ style:\"background:LightGreen\", value:\"#90EE90\", label:\"Light Green\"},\n\t\t{ style:\"background:LightSeaGreen\", value:\"#20B2AA\", label:\"Light Sea Green\"},\n\t\t{ style:\"background:LightSlateGray\", value:\"#778899\", label:\"Light Slate Gray\"},\n\t\t{ style:\"background:Lime\", value:\"#00FF00\", label:\"Lime\"},\n\t\t{ style:\"background:Magenta\", value:\"#FF00FF\", label:\"Magenta\"},\n\t\t{ style:\"background:MediumBlue\", value:\"#0000CD\", label:\"Medium Blue\"},\n\t\t{ style:\"background:MediumSpringGreen\", value:\"#00FA9A\", label:\"Medium Spring Green\"},\n\t\t{ style:\"background:Navy\", value:\"#000080\", label:\"Navy\"},\n\t\t{ style:\"background:Orange\", value:\"#FFA500\", label:\"Orange\"},\n\t\t{ style:\"background:Purple\", value:\"#800080\", label:\"Purple\"},\n\t\t{ style:\"background:Red\", value:\"#FF0000\", label:\"Red\"},\n\t\t{ style:\"background:Teal\", value:\"#008080\", label:\"Teal\"},\n\t\t{ style:\"background:Turquoise\", value:\"#40E0D0\", label:\"Turquoise\"},\n\t\t{ style:\"background:Violet\", value:\"#EE82EE\", label:\"Violet\"},\n\t\t{ style:\"background:Yellow\", value:\"#FFFF00\", label:\"Yellow\"},\n\t\t{ style:\"background:YellowGreen\", value:\"#9ACD32\", label:\"Yellow Green\"}\n    ]\n\n})\n.config(function ($translateProvider, $translatePartialLoaderProvider) {\n\t$translateProvider.useLoader(\"$translatePartialLoader\", {\n\t\turlTemplate: \"components/{part}/i18n/{lang}.json\"\n\t});\n\t$translatePartialLoaderProvider.addPart(\"core\");\n\t$translateProvider\n\t// see: http://angular-translate.github.io/docs/#/guide/09_language-negotiation\n\t.registerAvailableLanguageKeys(['en', 'fr'], {\n\t  'en_US': 'en',\n\t  'en_UK': 'en',\n\t  'en_CA': 'en',\n\t  'fr_FR': 'fr',\n\t  'fr_CA': 'fr',\n\t  'fr_BE': 'fr',\n\t  '*': 'en'\n\t  })\n\t.fallbackLanguage('en')\n\t.determinePreferredLanguage();\n\n\t// interpolation for pluralization\n\t$translateProvider.useCookieStorage();\n\t$translateProvider.useSanitizeValueStrategy(\"escape\");\n})\n.factory(\"sharedData\", function() {\n    var sharedData = {};\n    \n    var add = function(share, name, data) {\n        if (!sharedData[share]) {\n            sharedData[share] = {};\n        }\n        sharedData[share][name] = data;\n    };\n    \n    var get = function(share, name) {\n        if (!!sharedData[share] && !!sharedData[share][name]) {\n            return sharedData[share][name];\n        } else {\n            return undefined;\n        }\n    };\n    \n    var remove = function(share, name) {\n        return delete sharedData[share][name];\n    };\n    \n    var removeAll = function (share) {\n\t\tsharedData[share] = {};\n\t};\n    \n    var all = function(share) {\n        return sharedData[share];\n    };\n    \n    return {\n        all: all,\n        get: get,\n        add: add,\n        remove: remove,\n        removeAll: removeAll\n    };\n})\n.factory(\"sagremorParams\", function () {\n    var params = {};\n    \n    return params;\n})\n.factory(\"sagremorConfirm\", function ($uibModal) {\n    \n    var open = function (title, message) {\n        return modalInstance = $uibModal.open({\n            animation: true,\n            templateUrl: \"components/modals/confirm.modal.html\",\n            controller: \"ConfirmModalCtrl\",\n            controllerAs: \"ConfirmModalCtrl\",\n            size: \"sm\",\n            resolve: {\n                title: function () {\n                    return title;\n                },\n                message: function () {\n                    return message;\n                }\n            }\n        }).result;\n    };\n    \n    return {open: open};\n})\n.factory(\"sagremorEdit\", function ($uibModal) {\n    \n    var open = function (title, message, placeholder) {\n        return modalInstance = $uibModal.open({\n            animation: true,\n            templateUrl: \"components/modals/edit.modal.html\",\n            controller: \"EditModalCtrl\",\n            controllerAs: \"EditModalCtrl\",\n            size: \"sm\",\n            resolve: {\n                title: function () {\n                    return title;\n                },\n                message: function () {\n                    return message;\n                },\n                placeholder: function () {\n                    return placeholder;\n                }\n            }\n        }).result;\n    };\n    \n    return {open: open};\n})\n.service(\"sagGenericInjectorManager\", function () {\n    var self = this;\n    self.components = [];\n    \n    this.add = function (config) {\n\t\tif (!self.get(config.type)) {\n\t\t\tself.components.push(config);\n\t\t}\n    };\n    \n    this.get = function (type) {\n\t\treturn _.find(self.components, function (component) {\n\t\t\treturn component.type === type;\n\t\t});\n\t};\n});\n\nangular.module(\"sagremorApp\")\n    .config(function($locationProvider) {\n        $locationProvider.html5Mode(true).hashPrefix('!');\n    })\n    .config(function ($stateProvider, $urlRouterProvider) {\n        \n        $stateProvider\n            .state(\"dashboard\", {\n                url: \"/\",\n                templateUrl: \"app/dashboard/dashboard.html\",\n                controller: \"DashboardCtrl\",\n                controllerAs: \"DashboardCtrl\"\n            })\n            .state(\"error\", {\n                url: \"/error\",\n                templateUrl: \"app/error/error.html\",\n                controller: \"ErrorCtrl\",\n                controllerAs: \"ErrorCtrl\"\n            })\n            .state(\"switches\", {\n                url: \"/switches\",\n                templateUrl: \"app/switches/switches.html\",\n                controller: \"switchesCtrl\",\n                controllerAs: \"switchesCtrl\"\n            })\n            .state(\"heaters\", {\n                url: \"/heaters\",\n                templateUrl: \"app/heaters/heaters.html\",\n                controller: \"heatersCtrl\",\n                controllerAs: \"heatersCtrl\"\n            })\n            .state(\"sensors\", {\n                url: \"/sensors\",\n                templateUrl: \"app/sensors/sensors.html\",\n                controller: \"sensorsCtrl\",\n                controllerAs: \"sensorsCtrl\"\n            })\n            .state(\"service\", {\n                url: \"/service/:service\",\n                templateUrl: \"app/service/service.html\",\n                controller: \"serviceCtrl\",\n                controllerAs: \"serviceCtrl\"\n            })\n            .state(\"scripts\", {\n                url: \"/scripts\",\n                templateUrl: \"app/scripts/scripts.html\",\n                controller: \"scriptsCtrl\",\n                controllerAs: \"scriptsCtrl\"\n            })\n            .state(\"events\", {\n                url: \"/events\",\n                templateUrl: \"app/events/events.html\",\n                controller: \"eventsCtrl\",\n                controllerAs: \"eventsCtrl\"\n            })\n            .state(\"monitors\", {\n                url: \"/monitors\",\n                templateUrl: \"app/monitors/monitors.html\",\n                controller: \"monitorsCtrl\",\n                controllerAs: \"monitorsCtrl\"\n            })\n            .state(\"logs\", {\n                url: \"/logs\",\n                templateUrl: \"app/logs/logs.html\",\n                controller: \"logsCtrl\",\n                controllerAs: \"logsCtrl\"\n            })\n            .state(\"parameters\", {\n                url: \"/parameters\",\n                templateUrl: \"app/parameters/parameters.html\",\n                controller: \"ParametersCtrl\",\n                controllerAs: \"ParametersCtrl\"\n            });\n            \n        $urlRouterProvider.otherwise(\"/\");\n    });\n\nangular.module(\"sagremorApp\")\n    .controller(\"DashboardCtrl\",\n        function($scope, $location, $translate, $timeout, toaster, sharedData, sagremorParams, sagremorService, sagremorEdit, angharadFactory, benoicFactory, carleonFactory, sagGenericInjectorManager) {\n\n            var self = this;\n\n            this._timeout = null;\n            this.sagremorParams = sagremorParams;\n            this.dashboardWidgets = [];\n            this.dashboardWidgetsDisplay = [];\n            this.profileName = \"\";\n            this.isInit = true;\n            this.connected = false;\n\n            this.options = {\n                cellHeight: 100,\n                verticalHargin: 10,\n                disableResize: false\n            };\n\n            this.init = function() {\n                self.isInit = true;\n                getDashboardElements();\n                self.menu = [{\n                    name: \"remove_from_dashboard\",\n                    display: $translate.instant(\"remove_from_dashboard\"),\n                    action: function(param) {\n                        self.removeFromDashboard(param);\n                    }\n                }];\n            };\n\n            this.menuSelect = function(menuItem, element) {\n                menuItem.action(element);\n            };\n\n            this.addTitleLine = function() {\n                return sagremorEdit.open($translate.instant(\"dashboard_add_line\"), $translate.instant(\"dashboard_add_line_value\"), $translate.instant(\"dashboard_add_line_placeholder\")).then(function(result) {\n                    newDashboardSeparator(result.value);\n                });\n            };\n\n            function getDashboardElements() {\n                self.dashboardWidgetsDisplay = [];\n                var profile = sagremorParams.currentProfile;\n                if (!!profile) {\n                    self.profileName = profile.name;\n                    if (!!profile.addTo && !!profile.addTo.D && profile.addTo.D.length > 0) {\n                        getDashboardElementsCurrentProfile();\n                    }\n                } else {\n                    self.profileName = \"\";\n                }\n                for (key in self.dashboardWidgets) {\n                    if (!!self.dashboardWidgets[key]) {\n                        self.dashboardWidgetsDisplay.push(self.dashboardWidgets[key]);\n                    }\n                }\n            }\n\n            function getDashboardElementsCurrentProfile() {\n                var profile = sagremorParams.currentProfile;\n                if (!!profile && !!profile.addTo && !!profile.addTo.D) {\n                    _.forEach(profile.addTo.D, function(element) {\n                        if (!!element.device) {\n                            if (sagremorParams.benoicEnabled) {\n                                addBenoicElementToDashboard(element, element.tag);\n                            }\n                        } else if (element.type === \"script\") {\n                            addScriptToDashboard(element, element.tag);\n                        } else if (element.type === \"scheduler\" || element.type === \"trigger\") {\n                            addEventToDashboard(element, element.tag);\n                        } else if (element.type === \"separator\") {\n                            addDashboardSeparator(element.name, element.tag);\n                        } else if (element.type === \"monitor\") {\n                            addMonitorToDashboard(element, element.tag);\n                        } else if (sagremorParams.carleonEnabled) {\n                            addCarleonElementToDashboard(element, element.tag);\n                        }\n                    });\n                }\n                self.isInit = false;\n            }\n\n            function addBenoicElementToDashboard(element, tag) {\n                var tagParams = tag.split(\"$\");\n                if (tagParams.length >= 4) {\n                    var x = tagParams[2];\n                    var y = tagParams[3];\n                    var curHeight = 1;\n                    if (element.type === \"dimmer\" || element.type === \"heater\") {\n                        curHeight = 2;\n                    }\n                    var found = _.find(self.dashboardWidgets, function(widget) {\n                        return widget && widget.type === element.type && widget.device === element.device && widget.name === element.name;\n                    });\n                    var bElt = sagremorService.getBenoicElement(element.device, element.type, element.name);\n                    if (!!bElt) {\n                        if (!found) {\n                            var icon = \"\";\n                            switch (element.type) {\n                                case \"switch\":\n                                    icon = \"toggle-on\";\n                                    break;\n                                case \"dimmer\":\n                                    icon = \"lightbulb-o\";\n                                    break;\n                                case \"heater\":\n                                    icon = \"fire\";\n                                    break;\n                                case \"sensor\":\n                                    icon = \"line-chart\";\n                                    break;\n                            }\n                            bElt.device = element.device;\n                            bElt.name = element.name;\n                            var index = y * 10 + x;\n                            var dashboardElement = {\n                                type: element.type,\n                                device: element.device,\n                                name: element.name,\n                                element: bElt,\n                                x: x,\n                                y: y,\n                                width: 3,\n                                height: curHeight,\n                                tag: tag,\n                                icon: icon\n                            };\n                            self.dashboardWidgets.push(dashboardElement);\n                        } else {\n                            _.forEach(self.dashboardWidgets, function(widget) {\n                                if (widget && widget.type === element.type && widget.device === element.device && widget.name === element.name) {\n                                    bElt.device = element.device;\n                                    bElt.name = element.name;\n                                    widget.element = bElt;\n                                }\n                            });\n                        }\n                    }\n                }\n            }\n\n            function addScriptToDashboard(element, tag) {\n                var elt = sharedData.get(\"angharadScripts\", element.name);\n                var found = _.find(self.dashboardWidgets, function(widget) {\n                    return widget && widget.type === element.type && widget.name === element.name;\n                });\n                if (!!elt && !found) {\n                    var tagParams = tag.split(\"$\");\n                    if (tagParams.length >= 4) {\n                        var x = tagParams[2];\n                        var y = tagParams[3];\n                        var curHeight = 1;\n                        var icon = \"tasks\";\n                        var index = y * 10 + x;\n                        var dashboardElement = {\n                            type: element.type,\n                            name: element.name,\n                            element: elt,\n                            x: x,\n                            y: y,\n                            width: 3,\n                            height: curHeight,\n                            tag: tag,\n                            icon: icon\n                        };\n                        self.dashboardWidgets.push(dashboardElement);\n                    }\n                }\n            }\n\n            function addEventToDashboard(element, tag) {\n                var elt = false;\n                var icon = \"\";\n                var found = _.find(self.dashboardWidgets, function(widget) {\n                    return widget.type === element.type && widget.name === element.name;\n                });\n                if (element.type === \"scheduler\") {\n                    elt = sharedData.get(\"angharadSchedulers\", element.name);\n                    icon = \"calendar\";\n                } else {\n                    elt = sharedData.get(\"angharadTriggers\", element.name);\n                    icon = \"bell\";\n                }\n                if (!!elt && !found) {\n                    var tagParams = tag.split(\"$\");\n                    if (tagParams.length >= 4) {\n                        var x = tagParams[2];\n                        var y = tagParams[3];\n                        var curHeight = element.type === \"scheduler\" ? 2 : 1;\n                        var index = y * 10 + x;\n                        var dashboardElement = {\n                            type: element.type,\n                            name: element.name,\n                            element: elt,\n                            x: x,\n                            y: y,\n                            width: 3,\n                            height: curHeight,\n                            tag: tag,\n                            icon: icon\n                        };\n                        self.dashboardWidgets.push(dashboardElement);\n                    }\n                }\n            }\n\n            function addMonitorToDashboard(element, tag) {\n                var elt = _.find(sagremorParams.currentProfile.monitorList, function(monitor) {\n                    return monitor.name === element.name;\n                });\n                var found = _.find(self.dashboardWidgets, function(widget) {\n                    return widget && widget.type === element.type && widget.name === element.name;\n                });\n                if (!!elt && !found) {\n                    var tagParams = tag.split(\"$\");\n                    if (tagParams.length >= 4) {\n                        var x = tagParams[2];\n                        var y = tagParams[3];\n                        var curHeight = 4;\n                        var icon = \"bar-chart\";\n                        var index = y * 10 + x;\n                        var dashboardElement = {\n                            type: element.type,\n                            name: element.name,\n                            element: elt,\n                            x: x,\n                            y: y,\n                            width: 6,\n                            height: curHeight,\n                            tag: tag,\n                            icon: icon\n                        };\n                        self.dashboardWidgets.push(dashboardElement);\n                    }\n                }\n            }\n\n            function addCarleonElementToDashboard(element, tag) {\n                var injector = _.find(sagGenericInjectorManager.components, function(inject) {\n                    return inject.type === element.type;\n                });\n                var service = sharedData.get(\"carleonServices\", element.type);\n                var elt = !!service && !!service.element && _.find(service.element, function(cElt) {\n                    return cElt.name === element.name;\n                });\n                var found = _.find(self.dashboardWidgets, function(widget) {\n                    return widget && widget.type === element.type && widget.name === element.name;\n                });\n                if (!!elt && !found) {\n                    var tagParams = tag.split(\"$\");\n                    if (tagParams.length >= 4) {\n                        var x = tagParams[2];\n                        var y = tagParams[3];\n                        var curHeight = injector.widgetHeight;\n                        var curWidth = injector.widgetWidth;\n                        var icon = injector.icon;\n                        var index = y * 10 + x;\n                        var dashboardElement = {\n                            type: element.type,\n                            name: element.name,\n                            element: element,\n                            x: x,\n                            y: y,\n                            width: curWidth,\n                            height: curHeight,\n                            tag: tag,\n                            icon: icon\n                        };\n                        self.dashboardWidgets.push(dashboardElement);\n                    }\n                }\n            }\n\n            function addDashboardSeparator(value, tag) {\n                var tagParams = tag.split(\"$\");\n                if (tagParams.length >= 4) {\n                    var y = tagParams[3];\n                    var index = y * 10;\n                    var dashboardElement = {\n                        type: \"separator\",\n                        name: value,\n                        x: 0,\n                        y: y,\n                        width: 20,\n                        height: 1,\n                        tag: tag\n                    };\n                    self.dashboardWidgets.push(dashboardElement);\n                }\n            }\n\n            function newDashboardSeparator(value) {\n                var dashboardElement = {\n                    type: \"separator\",\n                    name: value,\n                    x: 0,\n                    y: 0,\n                    width: 10,\n                    height: 1\n                };\n                var profile = sagremorParams.currentProfile;\n                if (!profile.addTo) {\n                    profile.addTo = {\n                        D: []\n                    };\n                }\n                if (!profile.addTo.D) {\n                    profile.addTo.D = [];\n                }\n                self.dashboardWidgetsDisplay.push(dashboardElement);\n                var newElement = {\n                    type: \"separator\",\n                    name: value,\n                    tag: \"SGMR$D$0$0\"\n                };\n                profile.addTo.D.push(newElement);\n                angharadFactory.setProfile(profile.name, profile).then(function() {\n                    toaster.pop({\n                        type: \"success\",\n                        title: $translate.instant(\"angharad_add_to_dashboard\"),\n                        body: $translate.instant(\"angharad_add_to_dashboard_success\")\n                    });\n                }, function() {\n                    toaster.pop({\n                        type: \"error\",\n                        title: $translate.instant(\"angharad_add_to_dashboard\"),\n                        body: $translate.instant(\"angharad_add_to_dashboard_error\")\n                    });\n                });\n            }\n\n            this.removeFromDashboard = function(w) {\n                var profile = sagremorParams.currentProfile;\n                if (!!profile && !!profile.addTo && !!profile.addTo.D) {\n                    _.forEach(profile.addTo.D, function(element, key) {\n                        if (element && element.type === w.type && element.name === w.name && w.tag === element.tag) {\n                            profile.addTo.D.splice(key, 1);\n                        }\n                    });\n                }\n                var index = self.dashboardWidgetsDisplay.indexOf(w);\n                self.dashboardWidgetsDisplay.splice(index, 1);\n                sagremorParams.currentProfile = profile;\n                angharadFactory.setProfile(profile.name, profile).then(function() {\n                    toaster.pop(\"success\", $translate.instant(\"profile_save\"), $translate.instant(\"profile_save_success\"));\n                }, function() {\n                    toaster.pop(\"error\", $translate.instant(\"profile_save\"), $translate.instant(\"profiles_save_error\"));\n                });\n            };\n\n            this.onChange = function(event, items) {\n                if (self._timeout) {\n                    // if there is already a timeout in process cancel it\n                    $timeout.cancel(self._timeout);\n                }\n                self._timeout = $timeout(function() {\n                    if (!self.isInit) {\n                        if (sagremorParams.carleonEnabled) {\n                            var changed = false;\n                            _.forEach(items, function(item) {\n                                var element = _.find(self.dashboardWidgetsDisplay, function(widget) {\n                                    return widget.type === $(item.el).attr(\"data-sag-type\") &&\n                                        widget.name === $(item.el).attr(\"data-sag-name\") &&\n                                        (!widget.device || widget.device === $(item.el).attr(\"data-sag-device\"));\n                                });\n                                if (!!element) {\n                                    var newTag = \"SGMR$D$\" + item.x + \"$\" + item.y;\n                                    if (updateTag(element, newTag)) {\n                                        changed = true;\n                                        element.tag = newTag;\n                                    }\n                                }\n                            });\n                            if (changed) {\n                                var dashboardWidgetsDisplay = _(sagremorParams.currentProfile.addTo.D).chain().sortBy(function(widget) {\n                                    var splitted = widget.tag.split(\"$\");\n                                    return splitted[2];\n                                }).sortBy(function(widget) {\n                                    var splitted = widget.tag.split(\"$\");\n                                    return splitted[3];\n                                }).value();\n                                sagremorParams.currentProfile.addTo.D = dashboardWidgetsDisplay;\n\n                                angharadFactory.setProfile(sagremorParams.currentProfile.name, sagremorParams.currentProfile).then(function() {\n                                    toaster.pop(\"success\", $translate.instant(\"profile_save\"), $translate.instant(\"profile_save_success\"));\n                                }, function() {\n                                    toaster.pop(\"error\", $translate.instant(\"profile_save\"), $translate.instant(\"profiles_save_error\"));\n                                });\n                            }\n                        }\n                    }\n                    self._timeout = null;\n                }, 5000);\n            };\n\n            function updateTag(element, newTag) {\n                if (newTag !== element.tag) {\n                    var profile = sagremorParams.currentProfile;\n                    if (!!profile) {\n                        if (!profile.addTo) {\n                            profile.addTo = {\n                                D: []\n                            };\n                        }\n                        if (!profile.addTo.D) {\n                            profile.addTo.D = [];\n                        }\n                        var elt = _.find(profile.addTo.D, function(e) {\n                            return element.tag == e.tag;\n                        });\n                        if (!!elt) {\n                            elt.tag = newTag;\n                        } else {\n                            element.tag = newTag;\n                            profile.addTo.D.push(element);\n                        }\n                        return true;\n                    }\n                }\n                return false;\n            }\n\n            function getProfileElementFromTag(tag) {\n                var profile = sagremorParams.currentProfile;\n                if (!!profile && !!profile.addTo && !!profile.addTo.D) {\n                    var elt = _.find(profile.addTo.D, function(element) {\n                        return element.tag == tag;\n                    });\n                    return elt || false;\n                }\n                return false;\n            }\n\n            $scope.$on(\"angharadProfileUpdated\", function() {\n                self.isInit = true;\n                self.dashboardWidgets = [];\n                getDashboardElements();\n            });\n\n            $scope.$on(\"refreshDashboard\", function() {\n                self.isInit = true;\n                getDashboardElements();\n            });\n\n            $scope.$on(\"benoicDevicesChanged\", function() {\n                self.isInit = true;\n                getDashboardElements();\n            });\n\n            $scope.$on(\"carleonServicesChanged\", function() {\n                self.isInit = true;\n                getDashboardElements();\n            });\n\n            $scope.$on(\"oauth:login\", function(event, token) {\n              self.connected = true;\n            });\n\n            $scope.$on('oauth:refresh', function(event, token) {\n              self.connected = true;\n            });\n\n            $scope.$on('oauth:denied', function(event, token) {\n              self.connected = false;\n            });\n\n            $scope.$on('oauth:expired', function(event, token) {\n              self.connected = false;\n            });\n\n            $scope.$on('oauth:invalid', function(event, token) {\n              self.connected = false;\n            });\n\n            this.init();\n\n        });\n\n/**\n * Workaround for using jquery 3 with gridstack (I F****ing hate bower !)\n */\n$.fn.size = function() {\n    return this.length;\n};\n\nangular.module(\"sagremorApp\")\n\t.controller(\"ErrorCtrl\",\n\tfunction($scope, sagremorParams) {\n\n\t\tvar self = this;\n\n\t\tthis.errorMessage = \"\";\n\n\t\tthis.init = function() {\n\t\t\tif (!!sagremorParams.errorMessage) {\n\t\t\t\tself.errorMessage = sagremorParams.errorMessage;\n\t\t\t}\n\t\t};\n\n\t\t$scope.$on(\"generalError\", function () {\n\t\t\tself.init();\n\t\t});\n\n\t\tself.init();\n\t}\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"eventsCtrl\",\n    function($scope, $translate, sagremorService, angharadFactory, sharedData, sagremorParams) {\n      \n        var self = this;\n        \n        this.schedulerList = [];\n        this.triggerList = [];\n        this.sagremorParams = sagremorParams;\n        \n        this.init = function () {\n\n\t\t\t$translate([\"edit\", \"remove\", \"add_to_dashboard\"]).then(function (results) {\n\t\t\t\tself.menuScheduler = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"edit\", \n\t\t\t\t\t\tdisplay: results.edit, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.editEvent(param, \"scheduler\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"remove\", \n\t\t\t\t\t\tdisplay: results.remove, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.removeScheduler(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"angharadSchedulersChanged\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\tdisplay: results.add_to_dashboard, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tparam.type = !!param.next_time?\"scheduler\":\"trigger\";\n\t\t\t\t\t\t\tsagremorService.addToDashboard(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\tself.menuTrigger = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"edit\", \n\t\t\t\t\t\tdisplay: results.edit, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.editEvent(param, \"trigger\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"remove\", \n\t\t\t\t\t\tdisplay: results.remove, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.removeTrigger(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"angharadTriggersChanged\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\tdisplay: results.add_to_dashboard, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tparam.type = !!param.next_time?\"scheduler\":\"trigger\";\n\t\t\t\t\t\t\tsagremorService.addToDashboard(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\t\n\t\t\t\tself.updateSchedulers();\n\t\t\t\tself.updateTriggers();\n\t\t\t});\n\t\t};\n        \n        this.updateSchedulers = function () {\n            var events = sharedData.all(\"angharadSchedulers\");\n            self.schedulerList = [];\n            for (key in events) {\n\t\t\t\tself.schedulerList.push(events[key]);\n            }\n        };\n        \n        this.updateTriggers = function () {\n            var events = sharedData.all(\"angharadTriggers\");\n            self.triggerList = [];\n            for (key in events) {\n\t\t\t\tself.triggerList.push(events[key]);\n            }\n        };\n        \n        this.refreshEvents = function () {\n\t\t\tvar schedulers = sharedData.all(\"angharadSchedulers\");\n            for (key in schedulers) {\n\t\t\t\tvar found = _.find(self.schedulerList, function (scheduler) {\n\t\t\t\t\treturn scheduler.name === key;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!found) {\n\t\t\t\t\tself.schedulerList.push(schedulers[key]);\n\t\t\t\t}\n            }\n            \n            for (var index = self.schedulerList.length - 1; index >= 0; index--) {\n\t\t\t\tif (!sharedData.get(\"angharadSchedulers\", self.schedulerList[index].name)) {\n\t\t\t\t\tself.schedulerList.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar triggers = sharedData.all(\"angharadTriggers\");\n            for (key in triggers) {\n\t\t\t\tvar found = _.find(self.triggerList, function (trigger) {\n\t\t\t\t\treturn trigger.name === key;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!found) {\n\t\t\t\t\tself.triggerList.push(triggers[key]);\n\t\t\t\t}\n            }\n            \n            for (var index = self.triggerList.length - 1; index >= 0; index--) {\n\t\t\t\tif (!sharedData.get(\"angharadTriggers\", self.triggerList[index].name)) {\n\t\t\t\t\tself.triggerList.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n        \n        this.newEvent = function () {\n\t\t\tsagremorService.editEvent(null);\n\t\t};\n\t\t\n        $scope.$on(\"angharadSchedulersChanged\", function () {\n            self.updateSchedulers();\n        });\n        \n        $scope.$on(\"angharadTriggersChanged\", function () {\n            self.updateTriggers();\n        });\n        \n        $scope.$on(\"refreshAngharadEvents\", function () {\n            self.refreshEvents();\n        });\n        \n        this.init();\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"heatersCtrl\",\n    function($scope, $location, $translate, sagremorService, benoicFactory, sharedData, sagremorParams) {\n      \n        var self = this;\n        \n        this.heaterList = [];\n        this.sagremorParams = sagremorParams;\n        \n        this.init = function () {\n\t\t\tif (!sagremorParams.loggedIn) {\n\t\t\t\t$location.path(\"/login\");\n\t\t\t}\n\t\t\t$translate([\"edit\", \"monitor\", \"add_to_dashboard\"]).then(function (results) {\n\t\t\t\tself.menuSensor = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"edit\", \n\t\t\t\t\t\tdisplay: results.edit, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.editHeater(param);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"monitor\", \n\t\t\t\t\t\tdisplay: results.monitor, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.monitor(param);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\tdisplay: results.add_to_dashboard, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.addToDashboard(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\t\n\t\t\t\tself.updateHeaters();\n\t\t\t});\n\t\t};\n        \n        $scope.$on(\"benoicDevicesChanged\", function () {\n            self.updateHeaters();\n        });\n        \n        $scope.$on(\"benoicHeatersChanged\", function () {\n            self.updateHeaters();\n        });\n        \n        this.updateHeaters = function () {\n            var devices = sharedData.all(\"benoicDevices\");\n\t\t\tself.heaterList = [];\n            for (key in devices) {\n                var deviceName = devices[key].name;\n                if (devices[key].connected && devices[key].enabled) {\n                    for (se in devices[key].element.heaters) {\n                        var heaters = devices[key].element.heaters[se];\n                        heaters.device = deviceName;\n                        heaters.name = se;\n                        self.heaterList.push(heaters);\n                    }\n                }\n            }\n        };\n        \n        $scope.$on(\"refreshDevices\", function () {\n            self.refreshElements();\n        });\n        \n        this.refreshElements = function () {\n\t\t\t// Add all elements that are not in self.heaterList\n\t\t\tvar devices = sharedData.all(\"benoicDevices\");\n            for (key in devices) {\n                var deviceName = devices[key].name;\n                if (devices[key].connected && devices[key].enabled) {\n                    for (se in devices[key].element.heaters) {\n\t\t\t\t\t\tvar index = 0;\n\t\t\t\t\t\tvar found = _.find(self.heaterList, function (element) {\n\t\t\t\t\t\t\treturn element.name === se && element.device === deviceName;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tvar heater = devices[key].element.heaters[se];\n\t\t\t\t\t\t\theater.device = deviceName;\n\t\t\t\t\t\t\theater.name = se;\n\t\t\t\t\t\t\tself.heaterList.push(heater);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar heater = devices[key].element.heaters[se];\n\t\t\t\t\t\t\theater.device = deviceName;\n\t\t\t\t\t\t\theater.name = se;\n\t\t\t\t\t\t\tvar index = _.indexOf(self.heaterList, _.find(self.heaterList, {device: deviceName, name: se}));\n\t\t\t\t\t\t\tself.heaterList.splice(index, 1, heater);\n\t\t\t\t\t\t}\n                    }\n                }\n            }\n            \n            // Remove all elements from self.heaterList that are no longer in devices\n            _.remove(self.heaterList, function (heater) {\n\t\t\t\tvar found = _.find(sharedData.all(\"benoicDevices\"), function (device, deviceName) {\n\t\t\t\t\treturn !device.element || _.find(device.element.heaters, function (element, eltName) {\n\t\t\t\t\t\treturn eltName === heater.name && deviceName === heater.device;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!found) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n        \n        this.init();\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"FiltersModalCtrl\",\n    function($scope, $q, $uibModalInstance, $translate, toaster, DTOptionsBuilder, garethFactory, sharedData) {\n        var self = this;\n        \n        this.filterList = sharedData.all(\"garethFilters\");\n        this.AlertSmtpList = sharedData.all(\"garethAlertsSmtp\");\n        this.AlertHttpList = sharedData.all(\"garethAlertsHttp\");\n        this.editFilter = false;\n        this.addFilter = false;\n        this.newClause = false;\n        this.newAlertSmtp = false;\n        this.newAlertHttp = false;\n        this.newAlertHttpHeader = false;\n        this.displayAlert = false;\n        this.customFilter = {\n\t\t\tname: \"\",\n\t\t\tdescription: \"\",\n\t\t\tfilter_clauses: [\n\t\t\t],\n\t\t\tfilter_alerts: {\n\t\t\t\tsmtp: [],\n\t\t\t\thttp: []\n\t\t\t}\n\t\t};\n\t\t\n\t\tself.menu = [\n\t\t\t{\n\t\t\t\tname: \"smtp\", \n\t\t\t\tdisplay: $translate.instant(\"logs_menu_smtp\"), \n\t\t\t\taction: function () {\n\t\t\t\t\tself.addAlertSmtp();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"http\", \n\t\t\t\tdisplay: $translate.instant(\"logs_menu_http\"), \n\t\t\t\taction: function () {\n\t\t\t\t\tself.addAlertHttp();\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\t\n\t\tself.menuSelect = function(menuItem, element) {\n\t\t\tmenuItem.action(element);\n\t\t};\n    \n\t\tthis.customClause = {\n\t\t\telement: \"\",\n\t\t\toperator: \"\",\n\t\t\tvalue: \"\"\n\t\t};\n\t\t\n\t\tthis.customHttpAlert = {\n\t\t\tname: \"\",\n\t\t\tmethod: \"\",\n\t\t\turl: \"\",\n\t\t\tbody: \"\",\n\t\t\thttp_headers: [\n\t\t\t]\n\t\t};\n\t\tthis.customHttpAlertHeader = {\n\t\t\tkey: \"\",\n\t\t\tvalue: \"\"\n\t\t};\n\t\tthis.existingHttpAlert = \"\";\n\t\tthis.customHttpAlertMethodSelect = \"GET\";\n\t\t\n\t\tthis.customSmtpAlert = {\n\t\t\tname: \"\",\n\t\t\thost: \"\",\n\t\t\tport: 0,\n\t\t\ttls: false,\n\t\t\tcheck_ca: false,\n\t\t\tuser: \"\",\n\t\t\tpassword: \"\",\n\t\t\tfrom: \"\",\n\t\t\tto: \"\",\n\t\t\tcc: \"\",\n\t\t\tbcc: \"\",\n\t\t\tsubject: \"\",\n\t\t\tbody: \"\"\n\t\t};\n\t\tthis.existingSmtpAlert = \"\";\n        \n        function init() {\n        }\n        \n\t\t$scope.$on(\"garethChange\", function () {\n\t\t\tself.filterList = sharedData.all(\"garethFilters\");\n\t\t\tself.AlertList = sharedData.all(\"garethAlerts\");\n\t\t});\n        \n        this.newFilter = function () {\n\t\t\tself.editFilter = true;\n\t\t\tself.addFilter = true;\n\t\t\tself.customFilter = {\n\t\t\t\tname: \"\",\n\t\t\t\tdescription: \"\",\n\t\t\t\tfilter_clauses: [\n\t\t\t\t],\n\t\t\t\tfilter_alerts: {\n\t\t\t\t\tsmtp: [],\n\t\t\t\t\thttp: []\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\t\n\t\tthis.addClause = function () {\n\t\t\tself.newClause = true;\n\t\t};\n\t\t\n\t\tthis.isClauseValid = function () {\n\t\t\treturn !!self.customClause.element && !!self.customClause.operator && !!self.customClause.value;\n\t\t};\n\t\t\n\t\tthis.addNewClause = function () {\n\t\t\tif (self.customClause.element === \"priority\") {\n\t\t\t\tself.customClause.value = parseInt(self.customClause.value);\n\t\t\t}\n\t\t\tself.customFilter.filter_clauses.push(self.customClause);\n\t\t\tself.customClause = {\n\t\t\t\telement: \"\",\n\t\t\t\toperator: \"\",\n\t\t\t\tvalue: \"\"\n\t\t\t};\n\t\t\tself.newClause = false;\n\t\t};\n\t\t\n\t\tthis.removeClause = function (index){\n\t\t\tself.customFilter.filter_clauses.splice(index, 1);\n\t\t};\n\t\t\n\t\tthis.cancelAddClause = function () {\n\t\t\tself.newClause = false;\n\t\t};\n\t\t\n\t\tthis.getClauseElement = function (element) {\n\t\t\treturn $translate.instant(\"clause_option_\" + element);\n\t\t};\n        \n\t\tthis.getClauseOperator = function (operator) {\n\t\t\tswitch (operator) {\n\t\t\t\tcase \"=\":\n\t\t\t\t\treturn $translate.instant(\"clause_operator_equal\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"!=\":\n\t\t\t\t\treturn $translate.instant(\"clause_operator_different\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"<\":\n\t\t\t\t\treturn $translate.instant(\"clause_operator_lower\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"<=\":\n\t\t\t\t\treturn $translate.instant(\"clause_operator_lower_equal\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \">\":\n\t\t\t\t\treturn $translate.instant(\"clause_operator_higher\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \">=\":\n\t\t\t\t\treturn $translate.instant(\"clause_operator_higher_equal\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"contains\":\n\t\t\t\t\treturn $translate.instant(\"clause_operator_contains\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"notcontains\":\n\t\t\t\t\treturn $translate.instant(\"clause_operator_notcontains\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.getClauseValue = function (clause) {\n\t\t\tif (clause.element === \"priority\") {\n\t\t\t\tswitch (clause.value) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturn $translate.instant(\"logs_priority_none\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn $translate.instant(\"logs_priority_low\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn $translate.instant(\"logs_priority_medium\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturn $translate.instant(\"logs_priority_high\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\treturn $translate.instant(\"logs_priority_critical\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn clause.value;\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.addAlertSmtp = function () {\n\t\t\tself.newAlertSmtp = true;\n\t\t};\n\t\t\n\t\tthis.addAlertHttp = function () {\n\t\t\tself.newAlertHttp = true;\n\t\t};\n\t\t\n\t\tthis.isSmtpAlertValid = function () {\n\t\t\tif (!!self.existingSmtpAlert) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar found = _.find(self.AlertSmtpList, function (alert) {\n\t\t\t\treturn alert.name === self.customSmtpAlert.name;\n\t\t\t});\n\t\t\tif (found) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn !!self.customSmtpAlert.name && \n\t\t\t\t\t!!self.customSmtpAlert.host && \n\t\t\t\t\t!!self.customSmtpAlert.from && \n\t\t\t\t\t!!self.customSmtpAlert.to && \n\t\t\t\t\t!!self.customSmtpAlert.subject && \n\t\t\t\t\t!!self.customSmtpAlert.body;\n\t\t};\n\t\t\n\t\tthis.cancelAddSmtpAlert = function () {\n\t\t\tself.newAlertSmtp = false;\n\t\t};\n\t\t\n\t\tthis.postNewSmtpAlert = function () {\n\t\t\tif (!!self.existingSmtpAlert) {\n\t\t\t\tself.customFilter.filter_alerts.smtp.push(self.existingSmtpAlert.name);\n\t\t\t\tself.existingSmtpAlert = \"\";\n\t\t\t\tself.newAlertSmtp = false;\n\t\t\t} else {\n\t\t\t\tgarethFactory.addAlert(\"smtp\", self.customSmtpAlert).then(function () {\n\t\t\t\t\tself.customFilter.filter_alerts.smtp.push(self.customSmtpAlert.name);\n\t\t\t\t\tsharedData.add(\"garethAlertsSmtp\", self.customSmtpAlert.name, self.customSmtpAlert);\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"logs_alert\"), $translate.instant(\"logs_alert_save_success\"));\n\t\t\t\t\t$scope.$broadcast(\"garethChange\");\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"logs_alert\"), $translate.instant(\"logs_alert_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\tself.customSmtpAlert = {\n\t\t\t\t\t\tname: \"\",\n\t\t\t\t\t\thost: \"\",\n\t\t\t\t\t\tport: 0,\n\t\t\t\t\t\ttls: false,\n\t\t\t\t\t\tcheck_ca: false,\n\t\t\t\t\t\tuser: \"\",\n\t\t\t\t\t\tpassword: \"\",\n\t\t\t\t\t\tfrom: \"\",\n\t\t\t\t\t\tto: \"\",\n\t\t\t\t\t\tsubject: \"\",\n\t\t\t\t\t\tbody: \"\"\n\t\t\t\t\t};\n\t\t\t\t\tself.newAlertSmtp = false;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.addAlertHttpHeader = function () {\n\t\t\tself.newAlertHttpHeader = true;\n\t\t};\n\t\t\n\t\tthis.cancelAddAlertHttpHeader = function () {\n\t\t\tself.newAlertHttpHeader = false;\n\t\t};\n\t\t\n\t\tthis.addNewAlertHttpHeader = function () {\n\t\t\tself.customHttpAlert.http_headers.push(self.customHttpAlertHeader);\n\t\t\tself.customHttpAlertHeader = {\n\t\t\t\tkey: \"\",\n\t\t\t\tvalue: \"\"\n\t\t\t};\n\t\t\tself.newAlertHttpHeader = false;\n\t\t};\n\t\t\n\t\tthis.isHttpAlertValid = function () {\n\t\t\tif (!!self.existingHttpAlert) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar found = _.find(self.AlertHttpList, function (alert) {\n\t\t\t\treturn alert.name === self.customHttpAlert.name;\n\t\t\t});\n\t\t\tif (found) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn !!self.customHttpAlert.name && \n\t\t\t\t\t(!!self.customHttpAlert.method || !!self.customHttpAlertMethodSelect) && \n\t\t\t\t\t!!self.customHttpAlert.url;\n\t\t};\n\t\t\n\t\tthis.postNewHttpAlert = function () {\n\t\t\tif (!!self.existingHttpAlert) {\n\t\t\t\tself.customFilter.filter_alerts.http.push(self.existingHttpAlert.name);\n\t\t\t\tself.existingHttpAlert = \"\";\n\t\t\t\tself.newAlertHttp = false;\n\t\t\t} else {\n\t\t\t\tif (self.customHttpAlertMethodSelect !== \"custom\") {\n\t\t\t\t\tself.customHttpAlert.method = self.customHttpAlertMethodSelect;\n\t\t\t\t}\n\t\t\t\tgarethFactory.addAlert(\"http\", self.customHttpAlert).then(function () {\n\t\t\t\t\tself.customFilter.filter_alerts.http.push(self.customHttpAlert.name);\n\t\t\t\t\tsharedData.add(\"garethAlertsHttp\", self.customHttpAlert.name, self.customHttpAlert);\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"logs_alert\"), $translate.instant(\"logs_alert_save_success\"));\n\t\t\t\t\t$scope.$broadcast(\"garethChange\");\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"logs_alert\"), $translate.instant(\"logs_alert_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\tself.customHttpAlertHeader = {\n\t\t\t\t\t\tkey: \"\",\n\t\t\t\t\t\tvalue: \"\"\n\t\t\t\t\t};\n\t\t\t\t\tself.customHttpAlert = {\n\t\t\t\t\t\tname: \"\",\n\t\t\t\t\t\tmethod: \"\",\n\t\t\t\t\t\turl: \"\",\n\t\t\t\t\t\tbody: \"\",\n\t\t\t\t\t\thttp_headers: [\n\t\t\t\t\t\t]\n\t\t\t\t\t};\n\t\t\t\t\tself.newAlertHttp = false;\n\t\t\t\t\tself.newAlertHttpHeader = false;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.cancelAddHttpAlert = function () {\n\t\t\tself.newAlertHttp = false;\n\t\t};\n\t\t\n\t\tthis.removeAlert = function (type, index) {\n\t\t\tself.customFilter.filter_alerts[type].splice(index, 1);\n\t\t};\n\t\t\n\t\tthis.isFilterValid = function () {\n\t\t\treturn !!self.customFilter.name && self.customFilter.filter_clauses.length > 0;\n\t\t};\n\t\t\n\t\tthis.cancelNewFilter = function () {\n\t\t\tself.editFilter = false;\n\t\t\tself.addFilter = false;\n\t\t};\n\t\t\n\t\tthis.postNewFilter = function () {\n\t\t\tvar promise = null;\n\t\t\tif (self.addFilter) {\n\t\t\t\tpromise = garethFactory.addFilter(self.customFilter);\n\t\t\t} else {\n\t\t\t\tpromise = garethFactory.setFilter(self.customFilter.name, self.customFilter)\n\t\t\t}\n\t\t\tpromise.then(function () {\n\t\t\t\tsharedData.add(\"garethFilters\", self.customFilter.name, self.customFilter);\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"logs_filter\"), $translate.instant(\"logs_filter_save_success\"));\n\t\t\t\t$scope.$broadcast(\"garethChange\");\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"logs_filter\"), $translate.instant(\"logs_filter_save_error\"));\n\t\t\t})[\"finally\"](function () {\n\t\t\t\tself.editFilter = false;\n\t\t\t\tself.addFilter = false;\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.removeCustomFilter = function (filter) {\n\t\t\tgarethFactory.removeFilter(filter.name).then(function () {\n\t\t\t\tsharedData.remove(\"garethFilters\", filter.name);\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"logs_filter\"), $translate.instant(\"logs_filter_remove_success\"));\n\t\t\t\t$scope.$broadcast(\"garethChange\");\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"logs_filter\"), $translate.instant(\"logs_filter_remove_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.editCustomFilter = function (filter) {\n\t\t\tself.customFilter = filter;\n\t\t\tself.editFilter = true;\n\t\t\tself.addFilter = false;\n\t\t};\n\t\t\n\t\tthis.showAlerts = function () {\n\t\t\tself.displayAlert = true;\n\t\t};\n\t\t\n\t\tthis.showFilters = function () {\n\t\t\tself.displayAlert = false;\n\t\t};\n\t\t\n\t\tthis.removeSmtpAlert = function (alert) {\n\t\t\tgarethFactory.removeAlert(\"smtp\", alert.name).then(function () {\n\t\t\t\tsharedData.remove(\"garethAlertsSmtp\", alert.name);\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"logs_alert\"), $translate.instant(\"logs_alert_remove_success\"));\n\t\t\t\t$scope.$broadcast(\"garethChange\");\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"logs_alert\"), $translate.instant(\"logs_alert_remove_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.removeHttpAlert = function (alert) {\n\t\t\tgarethFactory.removeAlert(\"http\", alert.name).then(function () {\n\t\t\t\tsharedData.remove(\"garethAlertsHttp\", alert.name);\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"logs_alert\"), $translate.instant(\"logs_alert_remove_success\"));\n\t\t\t\t$scope.$broadcast(\"garethChange\");\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"logs_alert\"), $translate.instant(\"logs_alert_remove_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.close = function () {\n\t\t\t$uibModalInstance.close(\"ok\");\n\t\t};\n        \n        init();\n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"logsCtrl\",\n    function($scope, $translate, $uibModal, toaster, DTOptionsBuilder, garethFactory, sharedData) {\n      \n        var self = this;\n        \n        this.messageList = [];\n        this.filterList = [];\n        this.options = {};\n        \n        this.searchOptions = {\n\t\t\tlimit: 20,\n\t\t\toffset: 0\n\t\t};\n\t\t\n\t\t$scope.$on(\"garethChange\", function () {\n\t\t\tself.getFilters();\n\t\t\tself.search();\n\t\t});\n        \n        this.init = function () {\n\t\t\tif ($translate.use()) {\n\t\t\t\tself.options = DTOptionsBuilder.newOptions()\n\t\t\t\t\t\t\t\t.withLanguageSource(\"components/core/i18n/datatables.\"+$translate.use()+\".json\")\n\t\t\t\t\t\t\t\t.withOption(\"order\", [1, \"desc\"]);\n\t\t\t\tself.getFilters();\n\t\t\t\tself.search();\n\t\t\t}\n\t\t};\n\t\t\n\t\t\n\t\tthis.getPriority = function (message) {\n\t\t\tswitch (message.priority) {\n\t\t\t\tcase \"NONE\":\n\t\t\t\t\treturn $translate.instant(\"logs_priority_none\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"LOW\":\n\t\t\t\t\treturn $translate.instant(\"logs_priority_low\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"MEDIUM\":\n\t\t\t\t\treturn $translate.instant(\"logs_priority_medium\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"HIGH\":\n\t\t\t\t\treturn $translate.instant(\"logs_priority_high\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"CRITICAL\":\n\t\t\t\t\treturn $translate.instant(\"logs_priority_critical\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn $translate.instant(\"logs_priority_not_found\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.search = function () {\n\t\t\tif (self.searchOptions.limit > 0 && self.searchOptions.offset >= 0) {\n\t\t\t\tif (!!self.searchOptions.filter) {\n\t\t\t\t\tgarethFactory.getFilteredMessages(self.searchOptions.filter.name, self.searchOptions.limit, self.searchOptions.offset).then(function (result) {\n\t\t\t\t\t\tself.messageList = result;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tgarethFactory.getAllMessages(self.searchOptions.limit, self.searchOptions.offset).then(function (result) {\n\t\t\t\t\t\tself.messageList = result;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"logs_search\"), $translate.instant(\"logs_search_error\"));\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.getFilters = function () {\n\t\t\tself.filterList = sharedData.all(\"garethFilters\");\n\t\t};\n\t\t\n\t\tthis.filterManagement = function () {\n\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\tanimation: true,\n\t\t\t\ttemplateUrl: \"app/logs/filters.modal.html\",\n\t\t\t\tcontroller: \"FiltersModalCtrl\",\n\t\t\t\tcontrollerAs: \"FiltersModalCtrl\",\n\t\t\t\tsize: \"md\",\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.$on(\"changeLang\", function () {\n\t\t\tself.options = DTOptionsBuilder.newOptions()\n\t\t\t\t\t\t\t.withLanguageSource(\"components/core/i18n/datatables.\"+$translate.use()+\".json\");\n\t\t});\n\t\t\n        this.init();\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"monitorsCtrl\",\n    function($scope, $translate, toaster, sagremorService, angharadFactory, carleonFactory, sagremorParams, sagremorEdit) {\n      \n        var self = this;\n        \n        this.monitorList = [];\n        this.sagremorParams = sagremorParams;\n        \n        this.init = function () {\n\n\t\t\t$translate([\"edit\", \"remove\", \"add_to_dashboard\"]).then(function (results) {\n\t\t\t\tself.menu = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"remove\", \n\t\t\t\t\t\tdisplay: results.remove, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.removeMonitor(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\tdisplay: results.add_to_dashboard, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tparam.type = \"monitor\";\n\t\t\t\t\t\t\tsagremorService.addToDashboard(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\tself.updateMonitors();\n\t\t\t});\n\t\t};\n        \n        $scope.$on(\"angharadProfileChanged\", function () {\n            self.updateMonitors();\n        });\n        \n        this.updateMonitors = function () {\n\t\t\tvar profile = sagremorParams.currentProfile;\n\t\t\tif (!!profile && !!profile.monitorList) {\n\t\t\t\tself.monitorList = profile.monitorList;\n\t\t\t}\n        };\n        \n        this.newMonitor = function () {\n\t\t\treturn sagremorEdit.open($translate.instant(\"monitor_new_title\"), $translate.instant(\"monitor_new_value\"), $translate.instant(\"monitor_new_placeholder\")).then(function (result) {\n\t\t\t\taddMonitor(result.value);\n\t\t\t});\n\t\t};\n\t\t\n\t\tfunction addMonitor(name) {\n\t\t\tif (sagremorParams.currentProfile) {\n\t\t\t\tvar exist = _.find(sagremorParams.currentProfile.monitorList, function (monitor) {\n\t\t\t\t\treturn monitor.name === name;\n\t\t\t\t});\n\t\t\t\tif (!sagremorParams.currentProfile.monitorList) {\n\t\t\t\t\tsagremorParams.currentProfile.monitorList = [];\n\t\t\t\t}\n\t\t\t\tif (!exist && !!name) {\n\t\t\t\t\tvar monitor = {name: name, elements: []};\n\t\t\t\t\tsagremorParams.currentProfile.monitorList.push(monitor);\n\t\t\t\t\tangharadFactory.saveCurrentProfile().then(function() {\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"monitor_save\"), $translate.instant(\"monitor_save_success\"));\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"monitor_save\"), $translate.instant(\"monitor_save_error\"));\n\t\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n        \n        this.init();\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"ParametersCtrl\",\n    function($scope, $rootScope, $q, $location, $translate, $cookies, $window, toaster, angharadFactory, benoicFactory, carleonFactory, sharedData, sagremorConfirm, sagremorParams) {\n      \n\t\tvar self = this;\n\n\t\tthis.submodules;\n\n\t\tthis.deviceList = [];\n\t\tthis.deviceTypes = [];\n\t\tthis.deviceTypesEnabled = [];\n\t\tthis.deviceAdded = false;\n\t\tthis.deviceUpdated = false;\n\n\t\tthis.newDeviceName = \"\";\n\t\tthis.newDeviceDescription = \"\";\n\t\tthis.newDeviceType = \"\";\n\t\tthis.newDeviceConnect = true;\n\n\t\tthis.deviceOptionList = [];\n\t\tthis.deviceOptionListDisplay = false;\n\n\t\tthis.profileList = [];\n\t\tthis.currentProfile = false;\n\t\tthis.profileAdded = false;\n\t\t\n\t\tthis.serviceList = [];\n\t\t\n\t\tthis.sagremorParams = sagremorParams;\n\n\t\tthis.init = function() {\n\t\t\tif (!sagremorParams.loggedIn) {\n\t\t\t\t$location.path(\"/login\");\n\t\t\t}\n\n\t\t\tself.submodules = sharedData.all(\"submodules\");\n\t\t\tself.deviceList = sharedData.all(\"benoicDevices\");\n\t\t\tself.initDeviceTypes();\n\t\t\tself.serviceList = sharedData.all(\"carleonServices\");\n\t\t\tself.selectedLang = $translate.use();\n\t\t\tself.profileList = sagremorParams.profiles;\n\t\t\tself.currentProfile = sagremorParams.currentProfile;\n\t\t};\n\n\t\t$scope.$on(\"submodulesChanged\", function () {\n\t\t\tself.submodules = sharedData.all(\"submodules\");\n\t\t});\n\n\t\t$scope.$on(\"benoicDevicesChanged\", function () {\n\t\t\tself.deviceList = sharedData.all(\"benoicDevices\");\n\t\t});\n\n\t\t$scope.$on(\"benoicDeviceTypesChanged\", function () {\n\t\t\tself.initDeviceTypes();\n\t\t});\n\n\t\t$scope.$on(\"carleonServicesChanged\", function () {\n\t\t\tself.serviceList = sharedData.all(\"carleonServices\");\n\t\t});\n\n\t\tthis.addDevice = function () {\n\t\t\tself.deviceAdded = true;\n\t\t};\n\n\t\tthis.isDeviceValid = function () {\n\t\t\tif (!self.newDeviceName || self.newDeviceName.length > 64) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfor (var name in self.deviceList) {\n\t\t\t\tif (self.newDeviceName === name) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!self.newDeviceDescription || self.newDeviceDescription > 128) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!self.newDeviceType) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfor (var key in self.deviceOptionList) {\n\t\t\t\tvar option = self.deviceOptionList[key];\n\n\t\t\t\tif (!option.optional && !option.value) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\tthis.postNewDevice = function () {\n\n\t\t\tvar curOptions = {};\n\t\t\t_.forEach(self.deviceOptionList, function (option) {\n\t\t\t\tif (option.type === \"boolean\") {\n\t\t\t\t\tcurOptions[option.name] = !!option.value;\n\t\t\t\t} else if (option.type === \"numeric\") {\n\t\t\t\t\tcurOptions[option.name] = parseFloat(option.value);\n\t\t\t\t} else {\n\t\t\t\t\tcurOptions[option.name] = option.value;\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar deviceName = self.newDeviceName;\n\t\t\tbenoicFactory.addDevice({name: deviceName, display: self.newDeviceName, description: self.newDeviceDescription, enabled: true, type_uid: self.newDeviceType, options: curOptions}).then(function (response) {\n\t\t\t\tif (self.newDeviceConnect) {\n\t\t\t\t\tself.connectDevice({name: deviceName, connected: true}).then(function(result) {\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"device_add\"), $translate.instant(\"device_add_success\"));\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"device_add\"), $translate.instant(\"device_add_success\"));\n\t\t\t\t}\n\t\t\t}, function (error) {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"device_add\"), $translate.instant(\"device_add_error\"));\n\t\t\t})[\"finally\"](function () {\n\t\t\t\tself.deviceAdded = false;\n\t\t\t\tself.deviceList = sharedData.all(\"benoicDevices\");\n\t\t\t\tself.newDeviceName = \"\";\n\t\t\t\tself.newDeviceDescription = \"\";\n\t\t\t\tself.newDeviceType = \"\";\n\t\t\t\tself.newDeviceConnect = true;\n\t\t\t\tself.deviceOptionList = [];\n\t\t\t\t$rootScope.$broadcast(\"reinitBenoic\");\n\t\t\t});\n\t\t};\n\n\t\tthis.cancelNewDevice = function () {\n\t\t\tself.deviceAdded = false;\n\t\t\tself.newDeviceName = \"\";\n\t\t\tself.newDeviceDescription = \"\";\n\t\t\tself.newDeviceType = \"\";\n\t\t\tself.deviceOptionList = [];\n\t\t};\n\n\t\tthis.setDeviceOptions = function () {\n\t\t\tif (!!self.newDeviceType) {\n\t\t\t\tself.deviceOptionList = _.find(self.deviceTypes, function(type) { return type.uid === self.newDeviceType; }).options;\n\t\t\t\tself.deviceOptionListDisplay = true;\n\t\t\t} else {\n\t\t\t\tself.deviceOptionListDisplay = false;\n\t\t\t}\n\t\t};\n\n\t\tthis.connectDevice = function (device) {\n\t\t\tif (device.connected) {\n\t\t\t\treturn benoicFactory.connectDevice(device.name).then(function (response) {\n\t\t\t\t\tbenoicFactory.getDeviceOverview(device.name).then(function (result) {\n\t\t\t\t\t\tsharedData.get(\"benoicDevices\", device.name).element = result;\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"device_connect\"), $translate.instant(\"device_connect_success\"));\n\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"device_connect\"), $translate.instant(\"device_connect_error\"));\n\t\t\t\t\t});\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"device_connect\"), $translate.instant(\"device_connect_error\"));\n\t\t\t\t\tdevice.connected = false;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn benoicFactory.disconnectDevice(device.name).then(function (response) {\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"device_disconnect\"), $translate.instant(\"device_disconnect_success\"));\n\t\t\t\t\tvar curDevice = sharedData.get(\"benoicDevices\", device.name);\n\t\t\t\t\tif (!!curDevice) {\n\t\t\t\t\t\tcurDevice.element = {};\n\t\t\t\t\t}\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"device_disconnect\"), $translate.instant(\"device_disconnect_error\"));\n\t\t\t\t\tdevice.connected = true;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.editDevice = function (device) {\n\t\t\tdevice.newDescription = device.description;\n\t\t\tdevice.update = true;\n\t\t\tself.deviceUpdated = true;\n\t\t\tself.deviceOptionListDisplay = true;\n\t\t\tself.deviceOptionList = _.find(self.deviceTypes, {uid: device.type_uid}).options;\n\t\t\tself.newDeviceType = device.type_uid;\n\t\t\t_.forEach(self.deviceOptionList, function (option) {\n\t\t\t\toption.value = device.options[option.name];\n\t\t\t});\n\t\t};\n\n\t\tthis.saveDevice = function (device) {\n\t\t\tdevice.description = device.newDescription;\n\t\t\t_.forEach(self.deviceOptionList, function (option) {\n\t\t\t\tdevice.options[option.name] = option.value;\n\t\t\t});\n\t\t\t\n\t\t\tbenoicFactory.setDevice(device).then(function (response) {\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"device_save\"), $translate.instant(\"device_save_success\"));\n\t\t\t}, function (error) {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"device_save\"), $translate.instant(\"device_save_error\"));\n\t\t\t})[\"finally\"](function () {\n\t\t\t\tself.deviceUpdated = false;\n\t\t\t\tself.deviceOptionListDisplay = false;\n\t\t\t\tself.deviceOptionList = [];\n\t\t\t\tdevice.update = false;\n\t\t\t});\n\t\t};\n\n\t\tthis.cancelEditDevice = function (device) {\n\t\t\tdevice.newDescription = device.description;\n\t\t\tself.deviceUpdated = false;\n\t\t\tself.deviceOptionListDisplay = false;\n\t\t\tself.deviceOptionList = [];\n\t\t\tdevice.update = false;\n\t\t};\n\n\t\tthis.removeDevice = function (device) {\n\t\t\tsagremorConfirm.open($translate.instant(\"device_remove\"), $translate.instant(\"device_remove_confirm\")).then (function(result) {\n\t\t\t\tbenoicFactory.removeDevice(device.name).then(function (response) {\n\t\t\t\t\tsharedData.remove(\"benoicDevices\", device.name);\n\t\t\t\t\tself.deviceList = sharedData.all(\"benoicDevices\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"device_remove\"), $translate.instant(\"device_remove_success\"));\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"device_remove\"), $translate.instant(\"device_remove_error\"));\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tthis.initDeviceTypes = function () {\n\t\t\tself.deviceTypes = sharedData.all(\"benoicDeviceTypes\");\n\t\t\tself.deviceTypesEnabled = _.filter(sharedData.all(\"benoicDeviceTypes\"), {enabled: true});\n\t\t\t_.forEach(self.deviceTypes, function (type) {\n\t\t\t\t$translate(type.uid + \"_device_type\").then(function(translate) {\n\t\t\t\t\ttype.translate = translate;\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttype.translate = type.name;\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.reloadBenoicDeviceTypes = function () {\n\t\t\tbenoicFactory.reloadDeviceTypes().then(function (result) {\n\t\t\t\tsharedData.removeAll(\"benoicDeviceTypes\");\n\t\t\t\t_.forEach(result, function (deviceType) {\n\t\t\t\t\tsharedData.add(\"benoicDeviceTypes\", deviceType.uid, deviceType);\n\t\t\t\t});\n\t\t\t\tself.initDeviceTypes();\n\t\t\t\t$rootScope.$broadcast(\"refresh\");\n\t\t\t});\n\t\t};\n\n\t\tthis.reloadCarleonServices = function () {\n\t\t\tcarleonFactory.reloadServiceList().then(function (result) {\n\t\t\t\tsharedData.removeAll(\"carleonServices\");\n\t\t\t\tfor (key in result) {\n\t\t\t\t\t_.forEach(result[key].element, function (element) {\n\t\t\t\t\t\telement.type = result[key].name;\n\t\t\t\t\t});\n\t\t\t\t\tsharedData.add(\"carleonServices\", result[key].name, result[key]);\n\t\t\t\t}\n\t\t\t\t$rootScope.$broadcast(\"refresh\");\n\t\t\t});\n\t\t};\n\n\t\tthis.submoduleEnable = function(submodule) {\n\t\t\treturn sagremorConfirm.open($translate.instant(\"param_submodule_enable\"), $translate.instant(\"param_submodule_enable_confirm\")).then(function () {\n\t\t\t\tif (submodule === \"benoic\") {\n\t\t\t\t\tangharadFactory.enableSubmodule(submodule, self.submodules.benoic.enabled).then(function (response) {\n\t\t\t\t\t\tsagremorParams.benoicEnabled = self.submodules.benoic.enabled;\n\t\t\t\t\t\t$rootScope.$broadcast(\"submodulesChanged\");\n\t\t\t\t\t\t$rootScope.$broadcast(\"refreshDashboard\")\n\t\t\t\t\t\tif (self.submodules.benoic.enabled) {\n\t\t\t\t\t\t\t$rootScope.$broadcast(\"reinitBenoic\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$rootScope.$broadcast(\"closeBenoic\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"submodules\"), $translate.instant(\"submodules_enable_success\"));\n\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"submodules\"), $translate.instant(\"submodules_enable_error\"));\n\t\t\t\t\t});\n\t\t\t\t} else if (submodule === \"carleon\") {\n\t\t\t\t\tangharadFactory.enableSubmodule(submodule, self.submodules.carleon.enabled).then(function (response) {\n\t\t\t\t\t\tsagremorParams.carleonEnabled = self.submodules.carleon.enabled;\n\t\t\t\t\t\t$rootScope.$broadcast(\"submodulesChanged\");\n\t\t\t\t\t\t$rootScope.$broadcast(\"refreshDashboard\")\n\t\t\t\t\t\tif (self.submodules.carleon.enabled) {\n\t\t\t\t\t\t\t$rootScope.$broadcast(\"reinitCarleon\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$rootScope.$broadcast(\"closeCarleon\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"submodules\"), $translate.instant(\"submodules_enable_success\"));\n\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"submodules\"), $translate.instant(\"submodules_enable_error\"));\n\t\t\t\t\t});\n\t\t\t\t} else if (submodule === \"gareth\") {\n\t\t\t\t\tangharadFactory.enableSubmodule(submodule, self.submodules.gareth.enabled).then(function (response) {\n\t\t\t\t\t\tsagremorParams.garethEnabled = self.submodules.gareth.enabled;\n\t\t\t\t\t\t$rootScope.$broadcast(\"submodulesChanged\");\n\t\t\t\t\t\t$rootScope.$broadcast(\"refreshDashboard\")\n\t\t\t\t\t\tif (self.submodules.gareth.enabled) {\n\t\t\t\t\t\t\t$rootScope.$broadcast(\"reinitGareth\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$rootScope.$broadcast(\"closeGareth\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"submodules\"), $translate.instant(\"submodules_enable_success\"));\n\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"submodules\"), $translate.instant(\"submodules_enable_error\"));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, function () {\n\t\t\t\tself.submodules[submodule].enabled = !self.submodules[submodule].enabled;\n\t\t\t});\n\t\t};\n\n\t\tthis.addProfile = function () {\n\t\t\tself.newProfileName = \"\";\n\t\t\tself.newProfileDescription = \"\";\n\t\t\tself.newProfileDefault = false;\n\t\t\tself.profileAdded = true;\n\t\t};\n\n\t\tthis.cancelNewProfile = function () {\n\t\t\tself.profileAdded = false;\n\t\t};\n\t\t\n\t\tthis.isProfileValid = function () {\n\t\t\tvar result = self.newProfileName.length > 0;\n\t\t\t_.forEach(self.profileList, function (profile) {\n\t\t\t\tif (profile.name === self.newProfileName) {\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t};\n\t\t\n\t\tthis.saveNewProfile = function () {\n\t\t\tvar newProfile = {name: self.newProfileName, description: self.newProfileDescription, default: self.newProfileDefault};\n\t\t\tangharadFactory.setProfile(self.newProfileName, newProfile).then(function () {\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_add_success\"));\n\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\tself.profileList.push(newProfile);\n\t\t\t}, function (error) {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_add_error\"));\n\t\t\t})[\"finally\"](function () {\n\t\t\t\tself.profileAdded = false;\n\t\t\t});\n\t\t};\n\n\t\tthis.removeProfile = function (profile) {\n\t\t\tsagremorConfirm.open($translate.instant(\"profile_remove\"), $translate.instant(\"profile_remove_confirm\")).then (function(result) {\n\t\t\t\tangharadFactory.removeProfile(profile.name).then(function () {\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_remove_success\"));\n\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\t_.remove(self.profileList, function (curProfile) {\n\t\t\t\t\t\treturn profile.name === curProfile.name;\n\t\t\t\t\t});\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_remove_error\"));\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.cleanProfile = function (profile) {\n\t\t\tsagremorConfirm.open($translate.instant(\"profile_clean\"), $translate.instant(\"profile_clean_confirm\")).then (function(result) {\n\t\t\t\tvar cleanProfile = {name: profile.name, description: profile.description, default: profile.default};\n\t\t\t\tangharadFactory.setProfile(profile.name, cleanProfile).then(function (result) {\n\t\t\t\t\tfor (key in sagremorParams.profiles) {\n\t\t\t\t\t\tif (sagremorParams.profiles[key].name === cleanProfile.name) {\n\t\t\t\t\t\t\tsagremorParams.profiles[key] = cleanProfile;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (sagremorParams.currentProfile.name === cleanProfile.name) {\n\t\t\t\t\t\tsagremorParams.currentProfile = cleanProfile;\n\t\t\t\t\t}\n\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_success\"));\n\t\t\t\t\tprofile = cleanProfile;\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_error\"));\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tthis.editProfile = function (profile) {\n\t\t\tprofile.update = true;\n\t\t\tprofile.newName = profile.name;\n\t\t\tprofile.newDescription = profile.description;\n\t\t};\n\n\t\tthis.cancelEditProfile = function (profile) {\n\t\t\tprofile.update = false;\n\t\t\tprofile.name = profile.newName;\n\t\t\tprofile.description = profile.newDescription;\n\t\t};\n\n\t\tthis.isUpdateProfileValid = function (profile) {\n\t\t\tvar result = profile.newName.length > 0;\n\t\t\t_.forEach(self.profileList, function (curProfile) {\n\t\t\t\tif (profile.name !== curProfile.name && profile.newName === curProfile.name) {\n\t\t\t\t\t// Duplicate name, avoid\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t};\n\n\t\tthis.saveProfile = function (profile) {\n\t\t\tif (profile.name !== profile.savedName) {\n\t\t\t\t// Remve old profile, then add new one\n\t\t\t\tvar savedName = profile.newName;\n\t\t\t\tprofile.name = profile.newName;\n\t\t\t\tprofile.description = profile.newDescription;\n\t\t\t\tdelete profile.newName;\n\t\t\t\tdelete profile.newDescription;\n\t\t\t\tdelete profile.update;\n\t\t\t\tvar promises = {\n\t\t\t\t\tremove: angharadFactory.removeProfile(savedName),\n\t\t\t\t\tadd: angharadFactory.setProfile(profile.name, profile)\n\t\t\t\t}\n\n\t\t\t\t$q.all(promises).then(function (results) {\n\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_success\"));\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_error\"));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t  // Update profile\n\t\t\t\tdelete profile.savedName;\n\t\t\t\tdelete profile.savedDescription;\n\t\t\t\tdelete profile.update;\n\t\t\t\tangharadFactory.setProfile(profile.name, profile).then(function (result) {\n\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_success\"));\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_error\"));\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.setDefaultProfile = function (profile) {\n\t\t\tif (!profile.default) {\n\t\t\t\t// Update just this one\n\t\t\t\tdelete profile.savedName;\n\t\t\t\tdelete profile.savedDescription;\n\t\t\t\tdelete profile.update;\n\t\t\t\tangharadFactory.setProfile(profile.name, profile).then(function (result) {\n\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_success\"));\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_error\"));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Set this one to default, and set the other default to false\n\t\t\t\tdelete profile.update;\n\t\t\t\tangharadFactory.setProfile(profile.name, profile).then(function (result) {\n\t\t\t\t\t_.forEach(self.profileList, function (curProfile) {\n\t\t\t\t\t\tif (curProfile.default && curProfile.name !== profile.name) {\n\t\t\t\t\t\t\tcurProfile.default = false;\n\t\t\t\t\t\t\tangharadFactory.setProfile(curProfile.name, curProfile).then(function (result) {\n\t\t\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_error\"));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_success\"));\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profiles\"), $translate.instant(\"profiles_save_error\"));\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.useProfile = function (profile) {\n\t\t\tsagremorParams.currentProfile = profile;\n\t\t\tvar exp = new $window.Date();\n\t\t\texp = new $window.Date(exp.getFullYear() + 10, exp.getMonth(), exp.getDate());\n\t\t\t$cookies.put(\"ANGHARAD_PROFILE\", profile.name, {expires: exp});\n\t\t\t$rootScope.$broadcast(\"angharadProfileUpdated\");\n\t\t};\n\t\t\n\t\tthis.enableCarleonService = function (service) {\n\t\t\tcarleonFactory.enableService(service.name, service.enabled).then(function () {\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_services\"), $translate.instant(\"carleon_services_enabled_success\"));\n\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_services\"), $translate.instant(\"carleon_services_enabled_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.$on(\"angharadProfileChanged\", function () {\n\t\t\tself.profileList = sagremorParams.profiles;\n\t\t});\n\n\t\t$scope.$on(\"angharadProfileUpdated\", function () {\n\t\t\tself.currentProfile = sagremorParams.currentProfile;\n\t\t});\n\n\t\tthis.init();\n    }\n).filter(\"deviceTypeName\", [\n    \"sharedData\",\n    function(sharedData) {\n        return function(input) {\n          var types = sharedData.all(\"benoicDeviceTypes\");\n          for (key in types) {\n            if (types[key].uid === input) {\n              return types[key].name;\n            }\n          }\n          return false;\n        };\n    }]);\n\nangular.module(\"sagremorApp\")\n    .controller(\"scriptsCtrl\",\n    function($scope, $translate, sagremorService, angharadFactory, sharedData, sagremorParams) {\n      \n        var self = this;\n        \n        this.scriptList = [];\n        this.sagremorParams = sagremorParams;\n        \n        this.init = function () {\n\t\t\t\t\t$translate([\"edit\", \"monitor\", \"bind_to_element\", \"add_to_dashboard\"]).then(function (results) {\n\t\t\t\t\t\tself.menuScript = [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"edit\", \n\t\t\t\t\t\t\t\tdisplay: $translate.instant(\"edit\"), \n\t\t\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\t\t\tsagremorService.editScript(param);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"remove\", \n\t\t\t\t\t\t\t\tdisplay: $translate.instant(\"remove\"),\n\t\t\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\t\t\tsagremorService.removeScript(param).then(function () {\n\t\t\t\t\t\t\t\t\t\t$scope.$broadcast(\"angharadScriptsChanged\");\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"bind_to_element\", \n\t\t\t\t\t\t\t\tdisplay: $translate.instant(\"bind_to_element\"),\n\t\t\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\t\t\tsagremorService.bindToElement(param);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\t\t\tdisplay: $translate.instant(\"add_to_dashboard\"),\n\t\t\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\t\t\tparam.type = \"script\";\n\t\t\t\t\t\t\t\t\tsagremorService.addToDashboard(param).then(function () {\n\t\t\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t];\n\t\t\t\t\t\tself.updateScripts();\n\t\t\t\t\t});\n\t\t\t\t};\n        \n        $scope.$on(\"angharadScriptsChanged\", function () {\n            self.updateScripts();\n        });\n        \n        this.updateScripts = function () {\n            var scripts = sharedData.all(\"angharadScripts\");\n            self.scriptList = [];\n            for (key in scripts) {\n\t\t\t\tself.scriptList.push(scripts[key]);\n            }\n        };\n        \n        $scope.$on(\"refreshAngharadScripts\", function () {\n            self.refreshScripts();\n        });\n        \n        this.refreshScripts = function () {\n\t\t\t\t\tvar scripts = sharedData.all(\"angharadScripts\");\n\t\t\t\t\t\t\t\tfor (key in scripts) {\n\t\t\t\t\t\tvar found = _.find(self.scriptList, function (script) {\n\t\t\t\t\t\t\treturn script.name === key;\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tself.scriptList.push(scripts[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tfor (var index = self.scriptList.length - 1; index >= 0; index--) {\n\t\t\t\t\t\tif (!sharedData.get(\"angharadScripts\", self.scriptList[index].name)) {\n\t\t\t\t\t\t\tself.scriptList.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n        \n        this.newScript = function () {\n\t\t\t\t\tsagremorService.editScript(null);\n\t\t\t\t};\n\t\t\n        this.init();\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"sensorsCtrl\",\n    function($scope, $location, $translate, sagremorService, benoicFactory, sharedData, sagremorParams) {\n      \n        var self = this;\n        \n        this.sensorList = [];\n        this.sagremorParams = sagremorParams;\n        \n        this.init = function () {\n\t\t\tif (!sagremorParams.loggedIn) {\n\t\t\t\t$location.path(\"/login\");\n\t\t\t}\n\t\t\t$translate([\"edit\", \"monitor\", \"add_to_dashboard\"]).then(function (results) {\n\t\t\t\tself.menuSensor = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"edit\", \n\t\t\t\t\t\tdisplay: results.edit, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.editSensor(param);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"monitor\", \n\t\t\t\t\t\tdisplay: results.monitor, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.monitor(param);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\tdisplay: results.add_to_dashboard, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.addToDashboard(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\t\n\t\t\t\tself.updateSensors();\n\t\t\t});\n\t\t};\n        \n        $scope.$on(\"benoicDevicesChanged\", function () {\n            self.updateSensors();\n        });\n        \n        $scope.$on(\"benoicSensorsChanged\", function () {\n            self.updateSensors();\n        });\n        \n        this.updateSensors = function () {\n            var devices = sharedData.all(\"benoicDevices\");\n\t\t\tself.sensorList = [];\n            for (key in devices) {\n                var deviceName = devices[key].name;\n                if (devices[key].connected && devices[key].enabled) {\n                    for (se in devices[key].element.sensors) {\n                        var sensors = devices[key].element.sensors[se];\n                        sensors.device = deviceName;\n                        sensors.name = se;\n                        self.sensorList.push(sensors);\n                    }\n                }\n            }\n        };\n        \n        $scope.$on(\"refreshDevices\", function () {\n            self.refreshElements();\n        });\n        \n        this.refreshElements = function () {\n\t\t\t// Add all elements that are not in self.sensorList\n\t\t\tvar devices = sharedData.all(\"benoicDevices\");\n            for (key in devices) {\n                var deviceName = devices[key].name;\n                if (devices[key].connected && devices[key].enabled) {\n                    for (se in devices[key].element.sensors) {\n\t\t\t\t\t\tvar index = 0;\n\t\t\t\t\t\tvar found = _.find(self.sensorList, function (element) {\n\t\t\t\t\t\t\treturn element.name === se && element.device === deviceName;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tvar sensor = devices[key].element.sensors[se];\n\t\t\t\t\t\t\tsensor.device = deviceName;\n\t\t\t\t\t\t\tsensor.name = se;\n\t\t\t\t\t\t\tself.sensorList.push(sensor);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar sensor = devices[key].element.sensors[se];\n\t\t\t\t\t\t\tsensor.device = deviceName;\n\t\t\t\t\t\t\tsensor.name = se;\n\t\t\t\t\t\t\tvar index = _.indexOf(self.sensorList, _.find(self.sensorList, {device: deviceName, name: se}));\n\t\t\t\t\t\t\tself.sensorList.splice(index, 1, sensor);\n\t\t\t\t\t\t}\n                    }\n                }\n            }\n            \n            // Remove all elements from self.sensorList that are no longer in devices\n            _.remove(self.sensorList, function (sensor) {\n\t\t\t\tvar found = _.find(sharedData.all(\"benoicDevices\"), function (device, deviceName) {\n\t\t\t\t\treturn !device.element || _.find(device.element.sensors, function (element, eltName) {\n\t\t\t\t\t\treturn eltName === sensor.name && deviceName === sensor.device;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!found) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n        \n        this.init();\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"serviceCtrl\",\n    function($scope, $stateParams, $location, $translate, $uibModal, toaster, sagGenericInjectorManager, sagremorService, carleonFactory, sharedData, sagremorParams) {\n      \n        var self = this;\n        \n        this.serviceList = [];\n        this.title = \"\"\n        \n        this.sagremorParams = sagremorParams;\n        this.currentInjectors = _.filter(sagGenericInjectorManager.components, function (component) {\n\t\t\treturn component.leftMenu && component.leftMenu.target === $stateParams.service;\n\t\t});\n\t\tthis.size = 1;\n        \n        this.init = function () {\n\t\t\tif (!sagremorParams.loggedIn) {\n\t\t\t\t$location.path(\"/login\");\n\t\t\t}\n\t\t\tloadServices();\n\t\t};\n\t\t\n\t\tfunction loadServices () {\n\t\t\t_.forEach(self.currentInjectors, function (currentInjector) {\n\t\t\t\tvar cService = sharedData.get(\"carleonServices\", currentInjector.type);\n\t\t\t\tif (!!cService && cService.enabled && !_.find(self.serviceList, {type: currentInjector.type})) {\n\t\t\t\t\tvar service = {type: currentInjector.type};\n\t\t\t\t\tself.title = currentInjector.leftMenu.title;\n\t\t\t\t\tservice.size = currentInjector.size || 1\n\t\t\t\t\tservice.serviceGroup = {title: currentInjector.groupTitle, list: [], service: currentInjector.service};\n\t\t\t\t\tservice.menu = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"edit\", \n\t\t\t\t\t\t\tdisplay: $translate.instant(\"edit\"), \n\t\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\t\tparam.service.editService(param);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"remove\", \n\t\t\t\t\t\t\tdisplay: $translate.instant(\"remove\"), \n\t\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\t\tparam.service.removeService(param).then(function () {\n\t\t\t\t\t\t\t\t\t$scope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\t\tdisplay: $translate.instant(\"add_to_dashboard\"), \n\t\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\t\tif (sagremorService.addToDashboard(param)) {\n\t\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t\tself.serviceList.push(service);\n\t\t\t\t}\n\t\t\t});\n\t\t\t_.forEach(self.currentInjectors, function (currentInjector) {\n\t\t\t\tvar cService = sharedData.get(\"carleonServices\", currentInjector.type);\n\t\t\t\tif (!!cService && cService.enabled && !!cService.element) {\n\t\t\t\t\tvar serviceGroup = _.find(self.serviceList, {type: currentInjector.type});\n\t\t\t\t\tif (!!serviceGroup && !serviceGroup.list) {\n\t\t\t\t\t\tserviceGroup.list = [];\n\t\t\t\t\t}\n\t\t\t\t\t!serviceGroup || _.forEach(cService.element, function (element) {\n\t\t\t\t\t\tvar exist = _.find(serviceGroup.list, function (elt) {\n\t\t\t\t\t\t\treturn elt.name === element.name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!exist) {\n\t\t\t\t\t\t\tvar elt = {name: element.name, type: element.type, description: element.description, service: currentInjector.service};\n\t\t\t\t\t\t\tserviceGroup.list.push(elt);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t!serviceGroup || _.forEach(serviceGroup.list, function (elt, index) {\n\t\t\t\t\t\tvar exist = _.find(cService.element, function (serviceElt) {\n\t\t\t\t\t\t\treturn serviceElt.name === elt.name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!exist) {\n\t\t\t\t\t\t\tserviceGroup.list.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.addService = function (service) {\n\t\t\tservice.addService();\n\t\t};\n\t\t\n\t\t$scope.$on(\"carleonServicesChanged\", function () {\n\t\t\tloadServices();\n\t\t});\n        \n\t\t$scope.$on(\"refreshCarleonServices\", function () {\n\t\t\tloadServices();\n\t\t});\n\t\n        this.init();\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"switchesCtrl\",\n    function($scope, $location, $translate, sagremorService, benoicFactory, sharedData, sagremorParams) {\n      \n        var self = this;\n        \n        this.switchList = [];\n        this.dimmerList = [];\n        this.sagremorParams = sagremorParams;\n        \n        this.init = function () {\n\t\t\tif (!sagremorParams.loggedIn) {\n\t\t\t\t$location.path(\"/login\");\n\t\t\t}\n\t\t\t$translate([\"edit\", \"monitor\", \"add_to_dashboard\"]).then(function (results) {\n\t\t\t\tself.menuSwitcher = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"edit\", \n\t\t\t\t\t\tdisplay: results.edit, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.editSwitcher(param);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"monitor\", \n\t\t\t\t\t\tdisplay: results.monitor, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.monitor(param);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\tdisplay: results.add_to_dashboard, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.addToDashboard(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\tself.menuDimmer = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"edit\", \n\t\t\t\t\t\tdisplay: results.edit, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.editDimmer(param);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"monitor\", \n\t\t\t\t\t\tdisplay: results.monitor, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.monitor(param);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"add_to_dashboard\", \n\t\t\t\t\t\tdisplay: results.add_to_dashboard, \n\t\t\t\t\t\taction: function (param) {\n\t\t\t\t\t\t\tsagremorService.addToDashboard(param).then(function () {\n\t\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\t\n\t\t\t\tself.updateSwitchers();\n\t\t\t\tself.updateDimmers();\n\t\t\t});\n\t\t};\n        \n        $scope.$on(\"benoicDevicesChanged\", function () {\n            self.updateSwitchers();\n            self.updateDimmers();\n        });\n        \n        $scope.$on(\"benoicSwitchesChanged\", function () {\n            self.updateSwitchers();\n            self.updateDimmers();\n        });\n        \n        this.updateSwitchers = function () {\n            var devices = sharedData.all(\"benoicDevices\");\n\t\t\tself.switchList = [];\n            for (key in devices) {\n                var deviceName = devices[key].name;\n                if (devices[key].connected && devices[key].enabled) {\n                    for (sw in devices[key].element.switches) {\n                        var switcher = devices[key].element.switches[sw];\n                        switcher.device = deviceName;\n                        switcher.name = sw;\n                        self.switchList.push(switcher);\n                    }\n                }\n            }\n        };\n        \n        this.updateDimmers = function () {\n            var devices = sharedData.all(\"benoicDevices\");\n\t\t\tself.dimmerList = [];\n            for (key in devices) {\n                var deviceName = devices[key].name;\n                if (devices[key].connected && devices[key].enabled) {\n                    for (di in devices[key].element.dimmers) {\n                        var dimmer = devices[key].element.dimmers[di];\n                        dimmer.device = deviceName;\n                        dimmer.name = di;\n                        self.dimmerList.push(dimmer);\n                    }\n                }\n            }\n        };\n        \n        $scope.$on(\"refreshDevices\", function () {\n            self.refreshElements();\n        });\n        \n        this.refreshElements = function () {\n\t\t\t// Add all elements that are not in self.dimmerList\n\t\t\tvar devices = sharedData.all(\"benoicDevices\");\n            for (key in devices) {\n                var deviceName = devices[key].name;\n                if (devices[key].connected && devices[key].enabled) {\n                    for (se in devices[key].element.dimmers) {\n\t\t\t\t\t\tvar index = 0;\n\t\t\t\t\t\tvar found = _.find(self.dimmerList, function (element) {\n\t\t\t\t\t\t\treturn element.name === se && element.device === deviceName;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tvar dimmer = devices[key].element.dimmers[se];\n\t\t\t\t\t\t\tdimmer.device = deviceName;\n\t\t\t\t\t\t\tdimmer.name = se;\n\t\t\t\t\t\t\tself.dimmerList.push(dimmer);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar dimmer = devices[key].element.dimmers[se];\n\t\t\t\t\t\t\tdimmer.device = deviceName;\n\t\t\t\t\t\t\tdimmer.name = se;\n\t\t\t\t\t\t\tvar index = _.indexOf(self.dimmerList, _.find(self.dimmerList, {device: deviceName, name: se}));\n\t\t\t\t\t\t\tself.dimmerList.splice(index, 1, dimmer);\n\t\t\t\t\t\t}\n                    }\n                }\n            }\n            \n            // Remove all elements from self.dimmerList that are no longer in devices\n            _.remove(self.dimmerList, function (dimmer) {\n\t\t\t\tvar found = _.find(sharedData.all(\"benoicDevices\"), function (device, deviceName) {\n\t\t\t\t\treturn _.find(device.element.dimmers, function (element, eltName) {\n\t\t\t\t\t\treturn eltName === dimmer.name && deviceName === dimmer.device;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!found) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// Add all elements that are not in self.switchList\n\t\t\tvar devices = sharedData.all(\"benoicDevices\");\n            for (key in devices) {\n                var deviceName = devices[key].name;\n                if (devices[key].connected && devices[key].enabled) {\n                    for (se in devices[key].element.switches) {\n\t\t\t\t\t\tvar index = 0;\n\t\t\t\t\t\tvar found = _.find(self.switchList, function (element) {\n\t\t\t\t\t\t\treturn element.name === se && element.device === deviceName;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t\tvar switcher = devices[key].element.dimmers[se];\n\t\t\t\t\t\t\tswitcher.device = deviceName;\n\t\t\t\t\t\t\tswitcher.name = se;\n\t\t\t\t\t\t\tself.switchList.push(switcher);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar switcher = devices[key].element.switches[se];\n\t\t\t\t\t\t\tswitcher.device = deviceName;\n\t\t\t\t\t\t\tswitcher.name = se;\n\t\t\t\t\t\t\tvar index = _.indexOf(self.switchList, _.find(self.switchList, {device: deviceName, name: se}));\n\t\t\t\t\t\t\tself.switchList.splice(index, 1, switcher);\n\t\t\t\t\t\t}\n                    }\n                }\n            }\n            \n            // Remove all elements from self.switchList that are no longer in devices\n            _.remove(self.switchList, function (switcher) {\n\t\t\t\tvar found = _.find(sharedData.all(\"benoicDevices\"), function (device, deviceName) {\n\t\t\t\t\treturn !device.element || _.find(device.element.dimmers, function (element, eltName) {\n\t\t\t\t\t\treturn eltName === dimmer.name && deviceName === dimmer.device;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!found) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n        \n        this.init();\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"usersCtrl\",\n    function($scope, $translate, toaster, DTOptionsBuilder, angharadFactory, sagremorConfirm) {\n      \n        var self = this;\n        \n        this.userList = [];\n        this.tokenList = [];\n        \n        this.options = {};\n        \n        this.newUser = false;\n        this.user = {\n\t\t\tlogin: \"\",\n\t\t\tpassword: \"\",\n\t\t\tenabled: true\n\t\t};\n\t\tthis.usersEnabled = true;\n\t\t\n\t\tthis.searchOptions = {\n\t\t\tlogin: \"\",\n\t\t\tenabled: \"\",\n\t\t};\n        \n        this.init = function () {\n\t\t\tif ($translate.use()) {\n\t\t\t\tself.options = DTOptionsBuilder.newOptions()\n\t\t\t\t\t\t\t\t.withLanguageSource(\"components/core/i18n/datatables.\"+$translate.use()+\".json\");\n\t\t\t}\n\t\t\tself.getUserList();\n\t\t\tself.getTokenList();\n\t\t};\n\t\t\n\t\tthis.getUserList = function () {\n\t\t\tangharadFactory.getUserList().then(function (result) {\n\t\t\t\tself.userList = result;\n\t\t\t}, function (error) {\n\t\t\t\tif (error.status === 404) {\n\t\t\t\t\tself.usersEnabled = false;\n\t\t\t\t} else {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"users_get_user_list\"), $translate.instant(\"users_get_user_list_error\"));\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.addUser = function () {\n\t\t\tself.newUser = true;\n\t\t};\n\t\t\n\t\tthis.cancelNewUser = function () {\n\t\t\tself.newUser = false;\n\t\t\tself.user = {\n\t\t\t\tlogin: \"\",\n\t\t\t\tpassword: \"\",\n\t\t\t\tenabled: true\n\t\t\t};\n\t\t};\n\t\t\n\t\tthis.isNewUserValid = function () {\n\t\t\tvar found = _.find(self.userList, {login: self.user.login});\n\t\t\t\n\t\t\tif (found) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn !!self.user.login && self.user.login.length > 0 && !!self.user.password && self.user.password.length > 0;\n\t\t};\n\t\t\n\t\tthis.createNewUser = function () {\n\t\t\tangharadFactory.addUser(self.user).then(function () {\n\t\t\t\tself.userList.push(self.user);\n\t\t\t\tself.newUser = false;\n\t\t\t\tself.user = {\n\t\t\t\t\tlogin: \"\",\n\t\t\t\t\tpassword: \"\",\n\t\t\t\t\tenabled: true\n\t\t\t\t};\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"users_save_user\"), $translate.instant(\"users_save_user_success\"));\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"users_save_user\"), $translate.instant(\"users_save_user_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.displayChangePassword = function (user) {\n\t\t\tuser.changePassword = true;\n\t\t};\n\t\t\n\t\tthis.cancelChangePassword = function (user) {\n\t\t\tuser.changePassword = false;\n\t\t\tuser.password = \"\";\n\t\t};\n\t\t\n\t\tthis.changePassword = function (user) {\n\t\t\tangharadFactory.setUser(user.login, user).then(function () {\n\t\t\t\tuser.password = \"\";\n\t\t\t\tuser.changePassword = false;\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"users_save_user\"), $translate.instant(\"users_save_user_success\"));\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"users_save_user\"), $translate.instant(\"users_save_user_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.enableUser = function (user) {\n\t\t\tangharadFactory.setUser(user.login, {enabled: user.enabled}).then(function () {\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"users_save_user\"), $translate.instant(\"users_save_user_success\"));\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"users_save_user\"), $translate.instant(\"users_save_user_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.removeUser = function (user) {\n\t\t\treturn sagremorConfirm.open($translate.instant(\"users_user_remove\"), $translate.instant(\"users_user_remove_confirm\", {login: user.login})).then(function () {\n\t\t\t\treturn angharadFactory.removeUser(user.login).then(function () {\n\t\t\t\t\t_.remove(self.userList, {login: user.login});\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"users_user_remove\"), $translate.instant(\"users_user_remove_success\"));\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"users_user_remove\"), $translate.instant(\"users_user_remove_error\"));\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.getTokenList = function () {\n\t\t\tvar options = {\n\t\t\t\tlogin: self.searchOptions.login\n\t\t\t};\n\t\t\tif (self.searchOptions.enabled === \"true\") {\n\t\t\t\toptions.enabled = true;\n\t\t\t} else if (self.searchOptions.enabled === \"false\") {\n\t\t\t\toptions.enabled = false;\n\t\t\t}\n\t\t\t\n\t\t\tangharadFactory.getTokenList(options).then(function (result) {\n\t\t\t\tself.tokenList = result;\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"users_get_token_list\"), $translate.instant(\"users_get_token_list_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.displayToken = function (token) {\n\t\t\treturn token.substring(0, 4) + \"****-****-****-****-********\" + token.substring(32);\n\t\t};\n\t\t\n\t\tthis.revokeToken = function (token) {\n\t\t\treturn sagremorConfirm.open($translate.instant(\"users_token_revoke\"), $translate.instant(\"users_token_revoke_confirm\")).then(function () {\n\t\t\t\treturn angharadFactory.revokeToken(token.token).then(function () {\n\t\t\t\t\ttoken.enabled = false;\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"users_token_revoke\"), $translate.instant(\"users_token_revoke_success\"));\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"users_token_revoke\"), $translate.instant(\"users_token_revoke_error\"));\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\t\n        this.init();\n        \n\t\t$scope.$on(\"changeLang\", function () {\n\t\t\tself.options = DTOptionsBuilder.newOptions()\n\t\t\t\t\t\t\t.withLanguageSource(\"components/core/i18n/datatables.\"+$translate.use()+\".json\");\n\t\t});\n    }\n);\n\nangular.module(\"sagremorApp\").directive(\"sagGenericInjector\", function ($compile, sagGenericInjectorManager, sharedData) {\n    \n    var template = \"<directive element=\\\"elt\\\"></directive>\";\n    \n    var templateNotFound = \"<div class=\\\"container has-error\\\" data-translate=\\\"injector_not_found\\\"></div>\";\n     \n    var templateDisabled = \"<div class=\\\"container has-error\\\" data-translate=\\\"injector_disabled\\\"></div>\";\n     \n    return{\n        scope: {\n            type: \"=\",\n            elt: \"=\"\n        },\n        link: function(scope, element) {\n            var config = _.find(sagGenericInjectorManager.components, {type: scope.type});\n\t\t\tvar service = sharedData.get(\"carleonServices\", scope.type);\n\t\t\tif (config.carleonService && service && service.enabled) {\n\t\t\t\tcontent = $compile(template.replace(/directive/g, config.directive))(scope);\n\t\t\t} else if (config.carleonService && service && !service.enabled) {\n\t\t\t\tcontent = $compile(templateDisabled)(scope);\n\t\t\t} else if (!config.carleonService) {\n\t\t\t\tcontent = $compile(template.replace(/directive/g, config.directive))(scope);\n\t\t\t} else {\n\t\t\t\tcontent = $compile(templateNotFound)(scope);\n\t\t\t}\n            element.append(content);\n        }\n    }});\n\nfunction carleonLiquidsoapController ($scope, $sce, $q, $window, $translatePartialLoader, $translate, $interval, angharadConfig, carleonFactory, carleonLiquidsoapFactory, sagremorService, sagremorParams, toaster) {\n    var ctrl = this;\n    \n    this.radio = {};\n\tthis.status = \"\";\n    this.onAir = {\n\t\ttitle: \"\",\n\t\tartist: \"\",\n\t\talbumartist: \"\",\n\t\tyear: \"\",\n\t\talbum: \"\"\n\t};\n\tthis.list = [];\n\tthis.listSelected = {\n\t\ttitle: \"\",\n\t\tartist: \"\",\n\t\talbumartist: \"\",\n\t\tyear: \"\",\n\t\talbum: \"\"\n\t};\n    \n    this.onAirAccordionOpen = false;\n    this.listAccordionOpen = false;\n    \n    function init() {\n\t\tcarleonLiquidsoapFactory.getLiquidsoapService(ctrl.element.name).then(function (result) {\n\t\t\tctrl.radio = result;\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_liquidsoap_init\"), $translate.instant(\"carleon_liquidsoap_init_error\"));\n\t\t});\n    }\n    \n    this.commandRadio = function (command) {\n\t\tcarleonLiquidsoapFactory.command(ctrl.element.name, command).then(function (result) {\n\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_liquidsoap_command\"), $translate.instant(\"carleon_liquidsoap_command_success\"));\n\t\t\tctrl.refreshStatus();\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_liquidsoap_command\"), $translate.instant(\"carleon_liquidsoap_command_error\"));\n\t\t});\n\t};\n    \n\t$scope.$watch(\"$ctrl.controlAccordionOpen\", function(isOpen){\n\t\tif (isOpen) {\n\t\t\tctrl.refreshStatus();\n\t\t}\n\t});\n\t\n\t$scope.$watch(\"$ctrl.onAirAccordionOpen\", function(isOpen){\n\t\tif (isOpen) {\n\t\t\tctrl.refreshOnAir();\n\t\t}\n\t});\n\t\n\t$scope.$watch(\"$ctrl.listAccordionOpen\", function(isOpen){\n\t\tif (isOpen) {\n\t\t\tctrl.refreshList();\n\t\t}\n\t});\n\t\n\tthis.refreshStatus = function () {\n\t\tcarleonLiquidsoapFactory.command(ctrl.element.name, \"status\").then(function (result) {\n\t\t\tctrl.status = result.value;\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_liquidsoap_status\"), $translate.instant(\"carleon_liquidsoap_status_error\"));\n\t\t});\n\t};\n\t\n\tthis.refreshOnAir = function () {\n\t\tcarleonLiquidsoapFactory.onAir(ctrl.element.name).then(function (result) {\n\t\t\tctrl.onAir = result;\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_liquidsoap_on_air\"), $translate.instant(\"carleon_liquidsoap_on_air_error\"));\n\t\t});\n\t};\n\t\n\tthis.refreshList = function () {\n\t\tcarleonLiquidsoapFactory.list(ctrl.element.name).then(function (result) {\n\t\t\tctrl.list = result;\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_liquidsoap_list\"), $translate.instant(\"carleon_liquidsoap_list_error\"));\n\t\t});\n\t};\n\t\n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"serviceLiquidsoap\", {\n    templateUrl: \"components/carleonLiquidsoap/carleonLiquidsoap.template.html\",\n    controller: carleonLiquidsoapController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.directive(\"radio\", function($sce) {\n\t// Using directive from Hols: http://stackoverflow.com/a/23663352\n\treturn {\n\t\trestrict: \"A\",\n\t\tscope: { src: \"=\" },\n\t\treplace: true,\n\t\ttemplate: \"<audio data-ng-src=\\\"{{url}}\\\" controls></audio>\",\n\t\tlink: function (scope) {\n\t\t\tscope.$watch(\"src\", function (newVal, oldVal) {\n\t\t\t\tif (newVal !== undefined) {\n\t\t\t\t\tscope.url = $sce.trustAsResourceUrl(newVal);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n})\n.factory(\"carleonLiquidsoapFactory\", function($http, $uibModal, $translate, toaster, angharadConfig, angharadBackendService, sagremorConfirm, sharedData) {\n    var urlBase = angharadConfig.baseUrl + angharadConfig.prefixCarleon;\n    var carleonLiquidsoapFactory = {};\n\n\t/* Liquidsoap service */\n    carleonLiquidsoapFactory.getLiquidsoapServiceList = function () {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-liquidsoap/\");\n    };\n\n    carleonLiquidsoapFactory.getLiquidsoapService = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-liquidsoap/\" + name);\n    };\n\n    carleonLiquidsoapFactory.addLiquidsoapService = function (liquidsoapService) {\n        return angharadBackendService.httpRequest(\"POST\", urlBase + \"service-liquidsoap/\", liquidsoapService);\n    };\n\n    carleonLiquidsoapFactory.setLiquidsoapService = function (name, liquidsoapService) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"service-liquidsoap/\" + name, liquidsoapService);\n    };\n\n    carleonLiquidsoapFactory.removeLiquidsoapService = function (name) {\n        return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"service-liquidsoap/\" + name);\n    };\n\n    carleonLiquidsoapFactory.list = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-liquidsoap/\" + name + \"/list\");\n    };\n\n    carleonLiquidsoapFactory.onAir = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-liquidsoap/\" + name + \"/on_air\");\n    };\n\n    carleonLiquidsoapFactory.command = function (name, command) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-liquidsoap/\" + name + \"/command/\" + command);\n    };\n\n\tcarleonLiquidsoapFactory.addService = function () {\n\t\tvar modalInstance = $uibModal.open({\n\t\t\tanimation: true,\n\t\t\ttemplateUrl: \"components/carleonLiquidsoap/carleonLiquidsoap.modal.html\",\n\t\t\tcontroller: \"carleonLiquidsoapModalCtrl\",\n\t\t\tcontrollerAs: \"carleonLiquidsoapModalCtrl\",\n\t\t\tsize: \"md\",\n\t\t\tresolve: {\n\t\t\t\telement: function () {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t\n\tcarleonLiquidsoapFactory.editService = function (service) {\n\t\tvar modalInstance = $uibModal.open({\n\t\t\tanimation: true,\n\t\t\ttemplateUrl: \"components/carleonLiquidsoap/carleonLiquidsoap.modal.html\",\n\t\t\tcontroller: \"carleonLiquidsoapModalCtrl\",\n\t\t\tcontrollerAs: \"carleonLiquidsoapModalCtrl\",\n\t\t\tsize: \"md\",\n\t\t\tresolve: {\n\t\t\t\telement: function () {\n\t\t\t\t\treturn service;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t\n\tcarleonLiquidsoapFactory.removeService = function (service) {\n\t\treturn sagremorConfirm.open($translate.instant(\"carleon_liquidsoap_remove\"), $translate.instant(\"carleon_liquidsoap_remove_confirm\")).then(function () {\n\t\t\treturn carleonLiquidsoapFactory.removeLiquidsoapService(service.name).then(function () {\n\t\t\t\tvar injector = sharedData.get(\"carleonServices\", \"service-liquidsoap\");\n\t\t\t\t_.remove(injector.element, function (element) {\n\t\t\t\t\treturn element.name === service.name;\n\t\t\t\t});\n\t\t\t\tsharedData.add(\"carleonServices\", \"service-liquidsoap\", injector);\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_liquidsoap_remove\"), $translate.instant(\"carleon_liquidsoap_remove_success\"));\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_liquidsoap_remove\"), $translate.instant(\"carleon_liquidsoap_remove_error\"));\n\t\t\t});\n\t\t});\n\t};\n\t\n    return carleonLiquidsoapFactory;\n\n})\n.config(function run($translatePartialLoaderProvider) {\n\t$translatePartialLoaderProvider.addPart(\"carleonLiquidsoap\");\n})\n.run(function(sagGenericInjectorManager, carleonLiquidsoapFactory) {\n    sagGenericInjectorManager.add({\n        type: \"service-liquidsoap\",\n        directive: \"service-liquidsoap\",\n        groupTitle: \"carleon_liquidsoap_title\",\n        service: carleonLiquidsoapFactory,\n        carleonService: true,\n        size: 2,\n        leftMenu: {\n\t\t\ttitle: \"carleon_music_title\",\n\t\t\ttarget: \"music\"\n\t\t},\n\t\twidgetHeight: 4,\n\t\twidgetWidth: 3,\n\t\ticon: \"music\",\n\t\tcommands: {\n\t\t}\n    });\n});\n\nangular.module(\"sagremorApp\")\n    .controller(\"carleonLiquidsoapModalCtrl\", \n    function($rootScope, $uibModalInstance, $translate, sharedData, toaster, carleonLiquidsoapFactory, element) {\n        var self = this;\n\n        this.messages = {};\n        this.add = true;\n        this.element = {\n\t\t\tname: \"\",\n\t\t\tdescription: \"\",\n\t\t\tradio_url: \"\",\n\t\t\tradio_type: \"\",\n\t\t\tcontrol_enabled: false,\n\t\t\tcontrol_host: \"\",\n\t\t\tcontrol_port: 0,\n\t\t\tcontrol_request_name: \"\"\n\t\t}\n\n        function init() {\n\t\t\tif (!!element) {\n\t\t\t\tself.element = _.find(sharedData.get(\"carleonServices\", \"service-liquidsoap\").element, function (elt) {\n\t\t\t\t\treturn elt.name === element.name;\n\t\t\t\t});\n\t\t\t\tself.add = false;\n\t\t\t}\n        }\n        \n        this.isLiquidsoapValid = function () {\n\t\t\tvar found = _.find(sharedData.get(\"carleonServices\", \"service-liquidsoap\").element, function (element) {\n\t\t\t\treturn element.name === self.element.name;\n\t\t\t});\n\t\t\treturn (!found || !self.add) \n\t\t\t\t\t&& !!self.element.name\n\t\t\t\t\t&& !!self.element.radio_url \n\t\t\t\t\t&& (!self.element.control_enabled \n\t\t\t\t\t\t|| (!!self.element.control_host && !!self.element.control_port && !!self.element.control_request_name));\n\t\t};\n        \n        this.save = function () {\n\t\t\tif (self.add) {\n\t\t\t\tcarleonLiquidsoapFactory.addLiquidsoapService(self.element).then(function () {\n\t\t\t\t\tself.element.type = \"service-liquidsoap\";\n\t\t\t\t\tself.element.service = carleonLiquidsoapFactory;\n\t\t\t\t\tsharedData.get(\"carleonServices\", \"service-liquidsoap\").element.push(self.element);\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_liquidsoap_save\"), $translate.instant(\"carleon_liquidsoap_save_success\"));\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_liquidsoap_save\"), $translate.instant(\"carleon_liquidsoap_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcarleonLiquidsoapFactory.setLiquidsoapService(self.element.name, self.element).then(function () {\n\t\t\t\t\tself.element.type = \"service-liquidsoap\";\n\t\t\t\t\tself.element.service = carleonLiquidsoapFactory;\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_liquidsoap_save\"), $translate.instant(\"carleon_liquidsoap_save_success\"));\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_liquidsoap_save\"), $translate.instant(\"carleon_liquidsoap_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n        this.cancel = function () {\n\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t};\n\n        init();\n    }\n);\n\nfunction carleonMockController ($translatePartialLoader, $translate, carleonMockFactory, sagremorParams, toaster) {\n    var ctrl = this;\n    \n    ctrl.adminMode = sagremorParams.adminMode;\n    ctrl.param = {command: \"exec1\", param1: \"test\", param2: 42, param3: 7.3};\n    ctrl.commandList = [\"exec1\", \"exec2\", \"exec3\", \"exec4\"];\n    ctrl.messages = {};\n    \n    function init() {\n    }\n    \n    ctrl.command = function () {\n\t\tcarleonMockFactory.commandMock(ctrl.element.name, ctrl.param.command, ctrl.param.param1, ctrl.param.param2, ctrl.param.param3).then(function (result) {\n\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_mock_command\"), $translate.instant(\"carleon_mock_command_success\"));\n\t\t}, function (error) {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mock_command\"), $translate.instant(\"carleon_mock_command_error\"));\n\t\t});\n\t};\n\t\n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"carleonMock\", {\n    templateUrl: \"components/carleonMock/carleonMock.template.html\",\n    controller: carleonMockController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.factory(\"carleonMockFactory\", function($http, $uibModal, $translate, toaster, angharadConfig, angharadBackendService, sagremorConfirm, sharedData) {\n    var urlBase = angharadConfig.baseUrl + angharadConfig.prefixCarleon;\n    var mockFactory = {};\n\n\t/* Mock service */\n    mockFactory.getMockList = function () {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"mock-service/\");\n    };\n\n    mockFactory.getMock = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"mock-service/\" + name);\n    };\n\n    mockFactory.addMock = function (mock) {\n        return angharadBackendService.httpRequest(\"POST\", urlBase + \"mock-service/\", mock);\n    };\n\n    mockFactory.setMock = function (name, mock) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"mock-service/\" + name, mock);\n    };\n\n    mockFactory.removeMock = function (name) {\n        return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"mock-service/\" + name);\n    };\n\n    mockFactory.commandMock = function (name, command, param1, param2, param3) {\n\t\tif (command === \"exec3\" || command === \"exec4\") {\n\t\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"mock-service/\" + name + \"/command/\" + command);\n\t\t} else if (command === \"exec2\") {\n\t\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"mock-service/\" + name + \"/command/\" + command + \"/\" + param1);\n\t\t} else {\n\t\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"mock-service/\" + name + \"/command/\" + command + \"/\" + param1 + \"/\" + param2 + \"/\" + param3);\n\t\t}\n    };\n\n\tmockFactory.addService = function () {\n\t\tvar modalInstance = $uibModal.open({\n\t\t\tanimation: true,\n\t\t\ttemplateUrl: \"components/carleonMock/carleonMock.modal.html\",\n\t\t\tcontroller: \"CarleonMockModalCtrl\",\n\t\t\tcontrollerAs: \"CarleonMockModalCtrl\",\n\t\t\tsize: \"sm\",\n\t\t\tresolve: {\n\t\t\t\tmock: function () {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t\n\tmockFactory.editService = function (service) {\n\t\tvar modalInstance = $uibModal.open({\n\t\t\tanimation: true,\n\t\t\ttemplateUrl: \"components/carleonMock/carleonMock.modal.html\",\n\t\t\tcontroller: \"CarleonMockModalCtrl\",\n\t\t\tcontrollerAs: \"CarleonMockModalCtrl\",\n\t\t\tsize: \"sm\",\n\t\t\tresolve: {\n\t\t\t\tmock: function () {\n\t\t\t\t\treturn service;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t\n\tmockFactory.removeService = function (service) {\n\t\treturn sagremorConfirm.open($translate.instant(\"carleon_mock_remove\"), $translate.instant(\"carleon_mock_confirm\")).then(function () {\n\t\t\treturn mockFactory.removeMock(service.name).then(function () {\n\t\t\t\tvar injector = sharedData.get(\"carleonServices\", \"mock-service\");\n\t\t\t\t_.remove(injector.element, function (element) {\n\t\t\t\t\treturn element.name === service.name;\n\t\t\t\t});\n\t\t\t\tsharedData.add(\"carleonServices\", \"mock-service\", injector);\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_mock_remove\"), $translate.instant(\"carleon_mock_remove_success\"));\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mock_remove\"), $translate.instant(\"carleon_mock_remove_error\"));\n\t\t\t});\n\t\t});\n\t};\n\t\n    return mockFactory;\n\n})\n.config(function run($translatePartialLoaderProvider) {\n\t$translatePartialLoaderProvider.addPart(\"carleonMock\");\n})\n.run(function(sagGenericInjectorManager, carleonMockFactory) {\n    sagGenericInjectorManager.add({\n        type: \"mock-service\",\n        directive: \"carleon-mock\",\n        groupTitle: \"carleon_mock_title\",\n        service: carleonMockFactory,\n        carleonService: true,\n        size: 1,\n        leftMenu: {\n\t\t\ttitle: \"carleon_mock_title\",\n\t\t\ttarget: \"carleonMock\"\n\t\t},\n\t\twidgetHeight: 3,\n\t\twidgetWidth: 3,\n\t\ticon: \"thumbs-o-up\",\n\t\tcommands: {\n\t\t\texec1: {\n\t\t\t\ttitle: \"carleon_mock_command_exec1_title\",\n\t\t\t\tparameters: {\n\t\t\t\t\tparam1: \"carleon_mock_command_exec1_parameter_param1_title\",\n\t\t\t\t\tparam2: \"carleon_mock_command_exec1_parameter_param2_title\",\n\t\t\t\t\tparam3: \"carleon_mock_command_exec1_parameter_param3_title\"\n\t\t\t\t},\n\t\t\t\tresult: {\n\t\t\t\t\tvalue1: {\n\t\t\t\t\t\ttype: \"integer\",\n\t\t\t\t\t\ttitle: \"carleon_mock_command_exec1_result_value1_title\"\n\t\t\t\t\t},\n\t\t\t\t\tvalue2: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\ttitle: \"carleon_mock_command_exec1_result_value2_title\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\texec2: {\n\t\t\t\ttitle: \"carleon_mock_command_exec2_title\",\n\t\t\t\tparameters: {\n\t\t\t\t\tparam1: \"carleon_mock_command_exec2_parameter_param1_title\"\n\t\t\t\t},\n\t\t\t\tresult: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\ttitle: \"carleon_mock_command_exec2_result_title\"\n\t\t\t\t}\n\t\t\t},\n\t\t\texec3: {\n\t\t\t\ttitle: \"carleon_mock_command_exec3_title\",\n\t\t\t\tparameters: {},\n\t\t\t\tresult: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\ttitle: \"carleon_mock_command_exec3_result_title\"\n\t\t\t\t}\n\t\t\t},\n\t\t\texec4: {\n\t\t\t\ttitle: \"carleon_mock_command_exec4_title\",\n\t\t\t\tparameters: {},\n\t\t\t\tresult: {\n\t\t\t\t\tvalue1: {\n\t\t\t\t\t\ttype: \"integer\",\n\t\t\t\t\t\ttitle: \"carleon_mock_command_exec4_result_value1_title\"\n\t\t\t\t\t},\n\t\t\t\t\tvalue2: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\ttitle: \"carleon_mock_command_exec4_result_value2_title\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    });\n});\n\nangular.module(\"sagremorApp\")\n    .controller(\"CarleonMockModalCtrl\", \n    function($rootScope, $uibModalInstance, $translate, sharedData, toaster, carleonMockFactory, mock) {\n        var self = this;\n\n        this.messages = {};\n        this.add = true;\n\n        function init() {\n\t\t\tif (!!mock) {\n\t\t\t\tself.mock = mock;\n\t\t\t\tself.add = false;\n\t\t\t} else {\n\t\t\t\tself.mock = {};\n\t\t\t}\n        }\n        \n        this.cancel = function () {\n\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t};\n\n        this.save = function () {\n\t\t\tif (self.add) {\n\t\t\t\tcarleonMockFactory.addMock(self.mock).then(function () {\n\t\t\t\t\tself.mock.type = \"mock-service\";\n\t\t\t\t\tself.mock.service = carleonMockFactory;\n\t\t\t\t\tsharedData.get(\"carleonServices\", \"mock-service\").element.push(self.mock);\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_mock_save\"), $translate.instant(\"carleon_mock_save_success\"));\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mock_save\"), $translate.instant(\"carleon_mock_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcarleonMockFactory.setMock(self.mock.name, self.mock).then(function () {\n\t\t\t\t\tvar mocks = sharedData.get(\"carleonServices\", \"mock-service\").element;\n\t\t\t\t\t_.forEach(mocks, function (mock) {\n\t\t\t\t\t\tif (mock.name === self.mock.name) {\n\t\t\t\t\t\t\tmock.description = self.mock.description;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_mock_save\"), $translate.instant(\"carleon_mock_save_success\"));\n\t\t\t\t}, function (error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mock_save\"), $translate.instant(\"carleon_mock_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n        init();\n    }\n);\n\nfunction carleonMotionController ($scope, $http, $translatePartialLoader, $translate, angharadConfig, angharadFactory, carleonFactory, carleonMotionFactory, sagremorService, sagremorParams, toaster) {\n    var ctrl = this;\n    \n    this.urlBaseImages = angharadConfig.baseUrl + angharadConfig.prefixCarleon + \"service-motion/\" + ctrl.element.name + \"/image/\";\n    this.urlBaseStream = angharadConfig.baseUrl + angharadConfig.prefixCarleon + \"service-motion/\" + ctrl.element.name + \"/stream/\";\n    this.name = ctrl.element.name;\n\n    this.images = [];\n    this.fileListName = [];\n    this.fileList = {};\n    this.selectedFileList = \"\";\n    this.offset = 0;\n    \n    this.streamList = [];\n    this.selectedStream = false;\n    this.streamUri = \"\";\n    \n    this.online = false;\n    \n    this.profileParams = {};\n    \n    this.init = function () {\n\t\tctrl.refresh();\n\t\tctrl.getFromProfile();\n    }\n    \n    this.getFromProfile = function () {\n\t\tif (sagremorParams.currentProfile && _.has(sagremorParams.currentProfile, \"carleon.serviceMotion.\"+ctrl.element.name)) {\n\t\t\tctrl.profileParams = sagremorParams.currentProfile.carleon.serviceMotion[ctrl.element.name];\n\t\t} else if (!!sagremorParams.currentProfile) {\n\t\t\tif (!sagremorParams.currentProfile.carleon) {\n\t\t\t\tsagremorParams.currentProfile.carleon = {};\n\t\t\t}\n\t\t\tif (!sagremorParams.currentProfile.carleon.serviceMotion) {\n\t\t\t\tsagremorParams.currentProfile.carleon.serviceMotion = {};\n\t\t\t}\n\t\t\tif (!sagremorParams.currentProfile.carleon.serviceMotion[ctrl.element.name]) {\n\t\t\t\tsagremorParams.currentProfile.carleon.serviceMotion[ctrl.element.name] = {\n\t\t\t\t\tselectedFileList: \"\",\n\t\t\t\t\tselectedStream: \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n    \n    this.openPopupImage = function (imgArray, index) {\n\t\tcarleonMotionFactory.imagePopup(imgArray, index);\n\t};\n    \n    this.refresh = function () {\n\t\tctrl.fileListName = [];\n\t\tctrl.streamList = [];\n\t\tcarleonMotionFactory.status(ctrl.element.name, ctrl.offset).then(function (response) {\n\t\t\tctrl.online = response.online;\n\t\t\tctrl.fileList = response.file_list;\n\t\t\t_.forEach(response.file_list, function (fileList, name) {\n\t\t\t\tctrl.fileListName.push(name);\n\t\t\t});\n\t\t\tif (!!sagremorParams.currentProfile && !!sagremorParams.currentProfile.carleon.serviceMotion[ctrl.element.name].selectedFileList) {\n\t\t\t\tctrl.selectedFileList = sagremorParams.currentProfile.carleon.serviceMotion[ctrl.element.name].selectedFileList;\n\t\t\t\tctrl.changeSelectedFileList();\n\t\t\t} else if (ctrl.fileListName.length === 1) {\n\t\t\t\tctrl.selectedFileList = ctrl.fileListName[0];\n\t\t\t\tctrl.changeSelectedFileList();\n\t\t\t}\n\t\t\t\n\t\t\t_.forEach(response.stream_list, function (stream) {\n\t\t\t\tvar image = {\n\t\t\t\t\tname: ctrl.element.name,\n\t\t\t\t\ttitle: stream.name,\n\t\t\t\t\tstream: stream.uri,\n\t\t\t\t\tsnapshotUri: stream.snapshot_uri\n\t\t\t\t};\n\t\t\t\tctrl.streamList.push(image);\n\t\t\t});\n\t\t});\n\t};\n\t\n\tthis.canPrevious = function () {\n\t\treturn ctrl.offset > 0;\n\t};\n\t\n\tthis.canNext = function () {\n\t\treturn ctrl.fileList[ctrl.selectedFileList].length == 20;\n\t};\n    \n\tthis.previousList = function () {\n\t\tctrl.offset -= 20;\n\t\tctrl.refresh();\n\t};\n\t\n\tthis.nextList = function () {\n\t\tctrl.offset += 20;\n\t\tctrl.refresh();\n\t};\n\t\n    this.changeSelectedFileList = function () {\n\t\tctrl.images = [];\n\t\t_.forEach(ctrl.fileList[ctrl.selectedFileList], function (file) {\n\t\t\tvar image = {\n\t\t\t\tthumb: ctrl.urlBaseImages + ctrl.selectedFileList + \"/\" + file + \"?thumbnail=true\",\n\t\t\t\timg: ctrl.urlBaseImages + ctrl.selectedFileList + \"/\" + file,\n\t\t\t\ttitle: file\n\t\t\t}\n\t\t\tctrl.images.push(image);\n\t\t});\n\t\tsagremorParams.currentProfile.carleon.serviceMotion[ctrl.element.name].selectedStream = \"\";\n\t\tsagremorParams.currentProfile.carleon.serviceMotion[ctrl.element.name].selectedFileList = ctrl.selectedFileList;\n\t\tangharadFactory.saveCurrentProfile().then(function () {\n\t\t\t//toaster.pop(\"success\", $translate.instant(\"profile_save\"), $translate.instant(\"profile_save_success\"));\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"profile_save\"), $translate.instant(\"profile_save_error\"));\n\t\t});\n\t};\n\t\n\tthis.openStream = function () {\n\t\tcarleonMotionFactory.imagePopup(ctrl.streamList, 0);\n\t};\n\t\n\t$scope.$on(\"refreshCarleonServices\", function () {\n\t\tctrl.refresh();\n\t});\n\t\n\t$scope.$on(\"carleonServicesChanged\", function () {\n\t\tctrl.init();\n\t});\n\t\n\t$scope.$on(\"angharadProfileChanged\", function () {\n\t\tctrl.getFromProfile();\n\t});\n\t\n    this.init();\n}\n\nangular.module(\"sagremorApp\").component(\"serviceMotion\", {\n    templateUrl: \"components/carleonMotion/carleonMotion.template.html\",\n    controller: carleonMotionController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.factory(\"carleonMotionFactory\", function($http, $uibModal, $translate, toaster, angharadConfig, angharadBackendService, sagremorConfirm, sharedData) {\n    var urlBase = angharadConfig.baseUrl + angharadConfig.prefixCarleon;\n    var carleonMotionFactory = {};\n\n\t/* Motion service */\n    carleonMotionFactory.getMotionServiceList = function () {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-motion/\");\n    };\n\n    carleonMotionFactory.getMotionService = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-motion/\" + name);\n    };\n\n    carleonMotionFactory.addMotionService = function (motionService) {\n        return angharadBackendService.httpRequest(\"POST\", urlBase + \"service-motion/\", motionService);\n    };\n\n    carleonMotionFactory.setMotionService = function (name, motionService) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"service-motion/\" + name, motionService);\n    };\n\n    carleonMotionFactory.removeMotionService = function (name) {\n        return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"service-motion/\" + name);\n    };\n\n    carleonMotionFactory.status = function (name, offset) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-motion/\" + name + \"/status\", null, {offset: offset});\n    };\n\n    carleonMotionFactory.image = function (name, file_list, file_name, thumbnail) {\n\t\tvar urlParam = {};\n\t\tif (thumbnail) {\n\t\t\turlParam.thumbnail = \"\";\n\t\t}\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-motion/\" + name + \"/image/\" + file_list + \"/\" + file_name, null, urlParam);\n    };\n\n    carleonMotionFactory.stream = function (name, stream_name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service-motion/\" + name + \"/stream/\" + stream_name);\n    };\n\n    carleonMotionFactory.snapshot = function (name, stream_name) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"service-motion/\" + name + \"/stream/\" + stream_name + \"/snapshot\");\n    };\n\n\tcarleonMotionFactory.addService = function () {\n\t\tvar modalInstance = $uibModal.open({\n\t\t\tanimation: true,\n\t\t\ttemplateUrl: \"components/carleonMotion/carleonMotion.modal.html\",\n\t\t\tcontroller: \"carleonMotionModalCtrl\",\n\t\t\tcontrollerAs: \"carleonMotionModalCtrl\",\n\t\t\tsize: \"md\",\n\t\t\tresolve: {\n\t\t\t\tmotion: function () {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t\n\tcarleonMotionFactory.editService = function (service) {\n\t\tvar modalInstance = $uibModal.open({\n\t\t\tanimation: true,\n\t\t\ttemplateUrl: \"components/carleonMotion/carleonMotion.modal.html\",\n\t\t\tcontroller: \"carleonMotionModalCtrl\",\n\t\t\tcontrollerAs: \"carleonMotionModalCtrl\",\n\t\t\tsize: \"md\",\n\t\t\tresolve: {\n\t\t\t\tmotion: function () {\n\t\t\t\t\treturn service;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t\n\tcarleonMotionFactory.removeService = function (service) {\n\t\treturn sagremorConfirm.open($translate.instant(\"carleon_motion_remove\"), $translate.instant(\"carleon_motion_confirm\")).then(function () {\n\t\t\treturn carleonMotionFactory.removeMotionService(service.name).then(function () {\n\t\t\t\tvar injector = sharedData.get(\"carleonServices\", \"service-motion\");\n\t\t\t\t_.remove(injector.element, function (element) {\n\t\t\t\t\treturn element.name === service.name;\n\t\t\t\t});\n\t\t\t\tsharedData.add(\"carleonServices\", \"service-motion\", injector);\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_motion_remove\"), $translate.instant(\"carleon_motion_remove_success\"));\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_motion_remove\"), $translate.instant(\"carleon_motion_remove_error\"));\n\t\t\t});\n\t\t});\n\t};\n\t\n\tcarleonMotionFactory.imagePopup = function (imgArray, index) {\n\t\tvar modalInstance = $uibModal.open({\n\t\t\tanimation: true,\n\t\t\ttemplateUrl: \"components/carleonMotion/carleonMotion.image.modal.html\",\n\t\t\tcontroller: \"carleonMotionImageModalCtrl\",\n\t\t\tcontrollerAs: \"carleonMotionImageModalCtrl\",\n\t\t\tsize: \"lg\",\n\t\t\tresolve: {\n\t\t\t\timgArray: function () {\n\t\t\t\t\treturn imgArray;\n\t\t\t\t},\n\t\t\t\tindex: function () {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n        \n    return carleonMotionFactory;\n\n})\n.config(function run($translatePartialLoaderProvider) {\n\t$translatePartialLoaderProvider.addPart(\"carleonMotion\");\n})\n.run(function(sagGenericInjectorManager, carleonMotionFactory) {\n    sagGenericInjectorManager.add({\n        type: \"service-motion\",\n        directive: \"service-motion\",\n        groupTitle: \"carleon_motion_title\",\n        service: carleonMotionFactory,\n        carleonService: true,\n        size: 3,\n        leftMenu: {\n\t\t\ttitle: \"carleon_motion_title\",\n\t\t\ttarget: \"carleonMotion\"\n\t\t},\n\t\twidgetHeight: 5,\n\t\twidgetWidth: 6,\n\t\ticon: \"camera\",\n\t\tcommands: {\n\t\t\tonline: {\n\t\t\t\ttitle: \"carleon_motion_command_online_title\",\n\t\t\t\tparameters: {},\n\t\t\t\tresult: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\ttitle: \"carleon_motion_command_online_result_title\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tsnapshot: {\n\t\t\t\ttitle: \"carleon_motion_command_snapshot_title\",\n\t\t\t\tparameters: {\n\t\t\t\t\tstream: \"carleon_motion_command_snapshot_parameter_stream_title\",\n\t\t\t\t},\n\t\t\t\tresult: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\ttitle: \"carleon_motion_command_snapshot_result_title\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    });\n});\n\nangular.module(\"sagremorApp\")\n    .controller(\"carleonMotionImageModalCtrl\",\n    function($scope, $uibModalInstance, $translate, toaster, carleonMotionFactory, imgArray, index) {\n        var self = this;\n        \n        this.imgArray = imgArray;\n        this.index = index;\n        this.currentImage = {\n\t\t\tname: \"\",\n\t\t\ttitle: \"\",\n\t\t\timg: \"\",\n\t\t\tstream: \"\",\n\t\t\tsnapshotUri: \"\"\n\t\t};\n        \n        function init() {\n\t\t\tself.currentImage = self.imgArray[self.index];\n\t\t\t$scope.$broadcast(\"carleonMotionImageIframe\", self.currentImage);\n        }\n        \n        this.close = function () {\n            $uibModalInstance.dismiss(\"close\");\n        };\n        \n        this.displayTitle = function () {\n\t\t\treturn $translate.instant(\"image_title\") + self.currentImage.title;\n\t\t};\n\t\t\n\t\tthis.changeImage = function (delta) {\n\t\t\tself.index += delta;\n\t\t\tself.currentImage = self.imgArray[self.index];\n\t\t\t$scope.$broadcast(\"carleonMotionImageIframe\", self.currentImage);\n\t\t};\n\t\t\n\t\tthis.canPrevious = function () {\n\t\t\treturn self.index > 0;\n\t\t};\n\t\t\n\t\tthis.canNext = function () {\n\t\t\treturn self.index < self.imgArray.length - 1;\n\t\t};\n\t\t\n\t\tthis.snapshot = function () {\n\t\t\tcarleonMotionFactory.snapshot(self.currentImage.name, self.currentImage.title).then(function () {\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_motion_snapshot\"), $translate.instant(\"carleon_motion_snapshot_success\"));\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_motion_snapshot\"), $translate.instant(\"carleon_motion_snapshot_error\"));\n\t\t\t});\n\t\t};\n\t\t\n\t\tthis.showIndex = function () {\n\t\t\treturn (self.index + 1) + \" / \" + self.imgArray.length;\n\t\t};\n\t\t\n        init();\n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"carleonMotionModalCtrl\", \n    function($rootScope, $uibModalInstance, $translate, sharedData, toaster, carleonMotionFactory, motion) {\n        var self = this;\n\n        this.messages = {};\n        this.add = true;\n        this.addFileList = false;\n        this.addStream = false;\n        this.newFileList = {};\n        this.newStream = {};\n\n        function init() {\n\t\t\tif (!!motion) {\n\t\t\t\tself.motion = _.find(sharedData.get(\"carleonServices\", \"service-motion\").element, function (elt) {\n\t\t\t\t\treturn elt.name === motion.name;\n\t\t\t\t});\n\t\t\t\tself.add = false;\n\t\t\t} else {\n\t\t\t\tself.motion = {\n\t\t\t\t\tfile_list: [],\n\t\t\t\t\tstream_list: []\n\t\t\t\t};\n\t\t\t}\n        }\n        \n        this.addNewFileList = function () {\n\t\t\tself.addFileList = true;\n\t\t};\n\t\t\n\t\tthis.removeFileList = function (index) {\n\t\t\tself.motion.file_list.splice(index, 1);\n\t\t};\n\t\t\n\t\tthis.saveNewFileList = function () {\n\t\t\tself.motion.file_list.push(self.newFileList);\n\t\t\tself.newFileList = {};\n\t\t\tself.addFileList = false;\n\t\t};\n\t\t\n\t\tthis.cancelNewFileList = function () {\n\t\t\tself.newFileList = {};\n\t\t\tself.addFileList = false;\n\t\t};\n\t\t\n\t\tthis.isFileListValid = function () {\n\t\t\treturn !!self.newFileList.name && !!self.newFileList.path && !!self.newFileList.thumbnail_path;\n\t\t};\n\t\t\n\t\tthis.addNewStream = function () {\n\t\t\tself.addStream = true;\n\t\t};\n        \n\t\tthis.removeStream = function (index) {\n\t\t\tself.motion.stream_list.splice(index, 1);\n\t\t};\n\t\t\n\t\tthis.saveNewStream = function () {\n\t\t\tself.motion.stream_list.push(self.newStream);\n\t\t\tself.newStream = {};\n\t\t\tself.addStream = false;\n\t\t};\n\t\t\n\t\tthis.cancelNewStream = function () {\n\t\t\tself.newStream = {};\n\t\t\tself.addStream = false;\n\t\t};\n\t\t\n\t\tthis.isStreamValid = function () {\n\t\t\treturn !!self.newStream.name && !!self.newStream.uri;\n\t\t};\n\t\t\n\t\tthis.isCameraValid = function () {\n\t\t\tvar found = _.find(sharedData.get(\"carleonServices\", \"service-motion\").element, function (element) {\n\t\t\t\treturn element.name === self.motion.name;\n\t\t\t});\n\t\t\treturn (!found || !self.add) && !!self.motion.name && !!self.motion.config_uri;\n\t\t};\n\t\t\n        this.cancel = function () {\n\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t};\n\n        this.save = function () {\n\t\t\tif (self.add) {\n\t\t\t\tcarleonMotionFactory.addMotionService(self.motion).then(function () {\n\t\t\t\t\tself.motion.type = \"service-motion\";\n\t\t\t\t\tself.motion.service = carleonMotionFactory;\n\t\t\t\t\tsharedData.get(\"carleonServices\", \"service-motion\").element.push(self.motion);\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_motion_save\"), $translate.instant(\"carleon_motion_save_success\"));\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_motion_save\"), $translate.instant(\"carleon_motion_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcarleonMotionFactory.setMotionService(self.motion.name, self.motion).then(function () {\n\t\t\t\t\tself.motion.type = \"service-motion\";\n\t\t\t\t\tself.motion.service = carleonMotionFactory;\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_motion_save\"), $translate.instant(\"carleon_motion_save_success\"));\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_motion_save\"), $translate.instant(\"carleon_motion_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n        init();\n    }\n);\n\nfunction carleonMpdController($scope, $q, $window, $translatePartialLoader, $translate, $interval, angharadConfig, carleonFactory, carleonMpdFactory, benoicFactory, sagremorParams, sharedData, toaster) {\n\tvar ctrl = this;\n\n\tthis.mpd = {};\n\tthis.mpdElement = {};\n\tthis.playlists = [];\n\tthis.selectedPlaylist = false;\n\tthis._interval = null;\n\tthis.hasFocus = true;\n\n\tfunction init() {\n\t\tctrl.mpdElement = _.find(sharedData.get(\"carleonServices\", \"service-mpd\").element, function (mpd) {\n\t\t\treturn mpd.name === ctrl.element.name;\n\t\t});\n\t\t\n\t\tvar promises = [\n\t\t\tcarleonMpdFactory.getMpdStatus(ctrl.element.name),\n\t\t\tcarleonMpdFactory.getMpdPlaylists(ctrl.element.name)\n\t\t];\n\n\t\t$q.all(promises).then(function(responses) {\n\t\t\tctrl.mpd = responses[0];\n\t\t\tctrl.playlists = responses[1];\n\t\t\tif (ctrl.mpd.state === \"play\" || ctrl.mpd.state === \"pause\") {\n\t\t\t\tstartRefreshStatusInterval();\n\t\t\t}\n\t\t}, function() {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mpd\"), $translate.instant(\"carleon_mpd_load_error\", {\n\t\t\t\tname: ctrl.element.name\n\t\t\t}));\n\t\t});\n\t}\n\n\tfunction startRefreshStatusInterval() {\n\t\tctrl._interval = $interval(function() {\n\t\t\tif (ctrl.hasFocus) {\n\t\t\t\tctrl.refreshStatus();\n\t\t\t}\n\t\t}, 1000 * 10);\n\t}\n\n\tthis.refreshStatus = function() {\n\t\tcarleonMpdFactory.getMpdStatus(ctrl.element.name).then(function(response) {\n\t\t\tctrl.mpd = response;\n\t\t\tif ((ctrl.mpd.state === \"play\" || ctrl.mpd.state === \"pause\") && ctrl._interval == null) {\n\t\t\t\tstartRefreshStatusInterval();\n\t\t\t} else if (ctrl._interval != null && ctrl.mpd.state !== \"play\" && ctrl.mpd.state !== \"pause\") {\n\t\t\t\t$interval.cancel(ctrl._interval);\n\t\t\t\tctrl._interval = null;\n\t\t\t}\n\t\t}, function() {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mpd\"), $translate.instant(\"carleon_mpd_load_error\", {\n\t\t\t\tname: ctrl.element.name\n\t\t\t}));\n\t\t});\n\t};\n\n\tthis.displayVolume = function() {\n\t\treturn ctrl.mpd.volume + \"%\";\n\t};\n\n\tthis.setVolume = function(delta) {\n\t\tvar newVolume = ctrl.mpd.volume + delta;\n\t\tif (newVolume >= 0 && newVolume <= 100) {\n\t\t\tcarleonMpdFactory.setMpdVolume(ctrl.element.name, newVolume).then(function() {\n\t\t\t\tctrl.mpd.volume = newVolume;\n\t\t\t}, function() {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mpd\"), $translate.instant(\"carleon_mpd_volume_error\"));\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.displayVolumeCommand = function(delta) {\n\t\treturn (delta > 0 ? \"+\" : \"\") + delta + \" %\"\n\t};\n\n\tthis.setAction = function(action) {\n\t\tvar actionUrl = action;\n\t\tif (action === \"repeat\") {\n\t\t\tactionUrl += (\"/\" + (ctrl.mpd.repeat?\"0\":\"1\"));\n\t\t\tctrl.mpd.repeat = !ctrl.mpd.repeat;\n\t\t}\n\t\tif (action === \"random\") {\n\t\t\tactionUrl += (\"/\" + (ctrl.mpd.random?\"0\":\"1\"));\n\t\t\tctrl.mpd.random = !ctrl.mpd.random;\n\t\t}\n\t\tif (action === \"play\" && ctrl.mpdElement.device && ctrl.mpdElement.switch) {\n\t\t\tbenoicFactory.setElement(ctrl.mpdElement.device, \"switch\", ctrl.mpdElement.switch, \"1\");\n\t\t}\n\t\tif (action === \"stop\" && ctrl.mpdElement.device && ctrl.mpdElement.switch) {\n\t\t\tbenoicFactory.setElement(ctrl.mpdElement.device, \"switch\", ctrl.mpdElement.switch, \"0\");\n\t\t}\n\t\tcarleonMpdFactory.setMpdAction(ctrl.element.name, actionUrl).then(function() {\n\t\t\tctrl.refreshStatus();\n\t\t}, function() {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mpd\"), $translate.instant(\"carleon_mpd_volume_error\"));\n\t\t});\n\t};\n\n\tthis.loadPlaylist = function() {\n\t\tif (!!ctrl.selectedPlaylist) {\n\t\t\tif (ctrl.mpdElement.device && ctrl.mpdElement.switch) {\n\t\t\t\tbenoicFactory.setElement(ctrl.mpdElement.device, \"switch\", ctrl.mpdElement.switch, \"1\");\n\t\t\t}\n\t\t\tcarleonMpdFactory.loadMpdPlaylist(ctrl.element.name, ctrl.selectedPlaylist).then(function() {\n\t\t\t\tctrl.refreshStatus();\n\t\t\t}, function() {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mpd\"), $translate.instant(\"carleon_mpd_load_playlist_error\"));\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.$on(\"refreshCarleonServices\", function() {\n\t\tctrl.refreshStatus();\n\t});\n\n\t$scope.$on(\"carleonServicesChanged\", function() {\n\t\tinit();\n\t});\n\n\t$scope.$on(\"$destroy\", function() {\n\t\t$interval.cancel(ctrl._interval);\n\t\tctrl._interval = null;\n\t});\n\n\t$window.onblur = function() {\n\t\tctrl.hasFocus = false;\n\t};\n\n\t$window.onfocus = function() {\n\t\tctrl.hasFocus = true;\n\t};\n\n\tinit();\n}\n\nangular.module(\"sagremorApp\").component(\"serviceMpd\", {\n\t\ttemplateUrl: \"components/carleonMpd/carleonMpd.template.html\",\n\t\tcontroller: carleonMpdController,\n\t\tbindings: {\n\t\t\telement: \"=\"\n\t\t}\n\t})\n\t.factory(\"carleonMpdFactory\", function($http, $uibModal, $translate, toaster, angharadConfig, angharadBackendService, sagremorConfirm, sharedData) {\n\t\tvar urlBase = angharadConfig.baseUrl + angharadConfig.prefixCarleon;\n\t\tvar carleonMpdFactory = {};\n\n\t\t/* Mpd service */\n\t\tcarleonMpdFactory.getMpdServiceList = function() {\n\t\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"service-mpd/\");\n\t\t};\n\n\t\tcarleonMpdFactory.getMpdService = function(name) {\n\t\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"service-mpd/\" + name);\n\t\t};\n\n\t\tcarleonMpdFactory.addMpdService = function(mpdService) {\n\t\t\treturn angharadBackendService.httpRequest(\"POST\", urlBase + \"service-mpd/\", mpdService);\n\t\t};\n\n\t\tcarleonMpdFactory.setMpdService = function(name, mpdService) {\n\t\t\treturn angharadBackendService.httpRequest(\"PUT\", urlBase + \"service-mpd/\" + name, mpdService);\n\t\t};\n\n\t\tcarleonMpdFactory.removeMpdService = function(name) {\n\t\t\treturn angharadBackendService.httpRequest(\"DELETE\", urlBase + \"service-mpd/\" + name);\n\t\t};\n\n\t\tcarleonMpdFactory.getMpdStatus = function(name) {\n\t\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"service-mpd/\" + name + \"/status\");\n\t\t};\n\n\t\tcarleonMpdFactory.getMpdPlaylists = function(name) {\n\t\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"service-mpd/\" + name + \"/playlists\");\n\t\t};\n\n\t\tcarleonMpdFactory.setMpdAction = function(name, action) {\n\t\t\treturn angharadBackendService.httpRequest(\"PUT\", urlBase + \"service-mpd/\" + name + \"/action/\" + action);\n\t\t};\n\n\t\tcarleonMpdFactory.loadMpdPlaylist = function(name, playlist) {\n\t\t\treturn angharadBackendService.httpRequest(\"PUT\", urlBase + \"service-mpd/\" + name + \"/playlist/\" + playlist);\n\t\t};\n\n\t\tcarleonMpdFactory.setMpdVolume = function(name, volume) {\n\t\t\treturn angharadBackendService.httpRequest(\"PUT\", urlBase + \"service-mpd/\" + name + \"/volume/\" + volume);\n\t\t};\n\n\t\tcarleonMpdFactory.addService = function() {\n\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\tanimation: true,\n\t\t\t\ttemplateUrl: \"components/carleonMpd/carleonMpd.modal.html\",\n\t\t\t\tcontroller: \"carleonMpdModalCtrl\",\n\t\t\t\tcontrollerAs: \"carleonMpdModalCtrl\",\n\t\t\t\tsize: \"md\",\n\t\t\t\tresolve: {\n\t\t\t\t\tmpd: function() {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tcarleonMpdFactory.editService = function(service) {\n\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\tanimation: true,\n\t\t\t\ttemplateUrl: \"components/carleonMpd/carleonMpd.modal.html\",\n\t\t\t\tcontroller: \"carleonMpdModalCtrl\",\n\t\t\t\tcontrollerAs: \"carleonMpdModalCtrl\",\n\t\t\t\tsize: \"md\",\n\t\t\t\tresolve: {\n\t\t\t\t\tmpd: function() {\n\t\t\t\t\t\treturn service;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tcarleonMpdFactory.removeService = function(service) {\n\t\t\treturn sagremorConfirm.open($translate.instant(\"carleon_mpd_remove\"), $translate.instant(\"carleon_mpd_confirm\")).then(function() {\n\t\t\t\treturn carleonMpdFactory.removeMpdService(service.name).then(function() {\n\t\t\t\t\tvar injector = sharedData.get(\"carleonServices\", \"service-mpd\");\n\t\t\t\t\t_.remove(injector.element, function(element) {\n\t\t\t\t\t\treturn element.name === service.name;\n\t\t\t\t\t});\n\t\t\t\t\tsharedData.add(\"carleonServices\", \"service-mpd\", injector);\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_mpd_remove\"), $translate.instant(\"carleon_mpd_remove_success\"));\n\t\t\t\t}, function() {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mpd_remove\"), $translate.instant(\"carleon_mpd_remove_error\"));\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\treturn carleonMpdFactory;\n\n\t})\n\t.config(function run($translatePartialLoaderProvider) {\n\t\t$translatePartialLoaderProvider.addPart(\"carleonMpd\");\n\t})\n\t.run(function(sagGenericInjectorManager, carleonMpdFactory) {\n\t\tsagGenericInjectorManager.add({\n\t\t\ttype: \"service-mpd\",\n\t\t\tdirective: \"service-mpd\",\n\t\t\tgroupTitle: \"carleon_mpd_title\",\n\t\t\tservice: carleonMpdFactory,\n\t\t\tcarleonService: true,\n\t\t\tsize: 2,\n\t\t\tleftMenu: {\n\t\t\t\ttitle: \"carleon_music_title\",\n\t\t\t\ttarget: \"music\"\n\t\t\t},\n\t\t\twidgetHeight: 4,\n\t\t\twidgetWidth: 3,\n\t\t\ticon: \"music\",\n\t\t\tcommands: {\n\t\t\t\taction: {\n\t\t\t\t\ttitle: \"carleon_mpd_command_action_title\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\taction: \"carleon_mpd_command_action_parameter_action_title\",\n\t\t\t\t\t},\n\t\t\t\t\tresult: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\ttitle: \"carleon_mpd_command_action_result_title\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tload_playlist: {\n\t\t\t\t\ttitle: \"carleon_mpd_command_playlist_title\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\tplaylist: \"carleon_mpd_command_playlist_parameter_plsylist_title\",\n\t\t\t\t\t},\n\t\t\t\t\tresult: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\ttitle: \"carleon_mpd_command_playlist_result_title\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tset_volume: {\n\t\t\t\t\ttitle: \"carleon_mpd_command_volume_title\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\tvolume: \"carleon_mpd_command_volume_parameter_volume_title\",\n\t\t\t\t\t},\n\t\t\t\t\tresult: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\ttitle: \"carleon_mpd_command_volume_result_title\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\nangular.module(\"sagremorApp\")\n\t\t.controller(\"carleonMpdModalCtrl\", \n\t\tfunction($rootScope, $uibModalInstance, $translate, sharedData, toaster, carleonMpdFactory, mpd) {\n\t\t\tvar self = this;\n\n\t\t\tthis.messages = {};\n\t\t\tthis.add = true;\n\t\t\tthis.mpd = {\n\t\t\t\tname: \"\",\n\t\t\t\tdescription: \"\",\n\t\t\t\thost: \"\",\n\t\t\t\tport: 0,\n\t\t\t\tpassword: \"\",\n\t\t\t\tdevice: \"\",\n\t\t\t\tswitch: \"\"\n\t\t\t}\n\t\t\tthis.switches = [];\n\t\t\tthis.switchAttached = {};\n\n\t\tfunction init() {\n\t\t\tif (!!mpd) {\n\t\t\t\tself.mpd = _.find(sharedData.get(\"carleonServices\", \"service-mpd\").element, function (elt) {\n\t\t\t\t\treturn elt.name === mpd.name;\n\t\t\t\t});\n\t\t\t\tself.add = false;\n\t\t\t} else {\n\t\t\t\tself.mpd = {\n\t\t\t\t\tfile_list: [],\n\t\t\t\t\tstream_list: []\n\t\t\t\t};\n\t\t\t}\n\t\t\t_.forEach(sharedData.all(\"benoicDevices\"), function (device) {\n\t\t\t\tif (device.enabled && device.connected) {\n\t\t\t\t\t_.forEach(device.element.switches, function(element, name) {\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"switch\",\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (elt.name === self.mpd.switch && elt.device === self.mpd.device) {\n\t\t\t\t\t\t\tself.switchAttached = elt;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.switches.push(elt);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\t\t\n\t\tthis.isMpdValid = function () {\n\t\t\tvar found = _.find(sharedData.get(\"carleonServices\", \"service-mpd\").element, function (element) {\n\t\t\t\treturn element.name === self.mpd.name;\n\t\t\t});\n\t\t\treturn (!found || !self.add) && !!self.mpd.name && !!self.mpd.host;\n\t\t};\n\t\t\t\t\n\t\tthis.save = function () {\n\t\t\tif (self.add) {\n\t\t\t\tcarleonMpdFactory.addMpdService(self.mpd).then(function () {\n\t\t\t\t\tself.mpd.type = \"service-mpd\";\n\t\t\t\t\tself.mpd.service = carleonMpdFactory;\n\t\t\t\t\tsharedData.get(\"carleonServices\", \"service-mpd\").element.push(self.mpd);\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_mpd_save\"), $translate.instant(\"carleon_mpd_save_success\"));\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mpd_save\"), $translate.instant(\"carleon_mpd_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcarleonMpdFactory.setMpdService(self.mpd.name, self.mpd).then(function () {\n\t\t\t\t\tself.mpd.type = \"service-mpd\";\n\t\t\t\t\tself.mpd.service = carleonMpdFactory;\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"carleon_mpd_save\"), $translate.instant(\"carleon_mpd_save_success\"));\n\t\t\t\t}, function () {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"carleon_mpd_save\"), $translate.instant(\"carleon_mpd_save_error\"));\n\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.cancel = function () {\n\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t};\n\t\t\n\t\tthis.changeSwitch = function () {\n\t\t\tif (self.switchAttached) {\n\t\t\t\tself.mpd.device = self.switchAttached.device;\n\t\t\t\tself.mpd.switch = self.switchAttached.name;\n\t\t\t}\n\t\t}\n\t\t\n\t\tinit();\n\t\t}\n);\n\nfunction sagContainerController ($rootScope, $translate, toaster, sharedData, angharadFactory) {\n    var ctrl = this;\n    \n    this.scripts = [];\n    \n    function init() {\n\t\tvar tag = \"SGMR$SCR$\";\n\t\tswitch (ctrl.type) {\n\t\t\tcase \"switch\":\n\t\t\t\ttag += \"B$\" + ctrl.element.device + \"$switch$\" + ctrl.element.name;\n\t\t\t\tbreak;\n\t\t\tcase \"dimmer\":\n\t\t\t\ttag += \"B$\" + ctrl.element.device + \"$dimmer$\" + ctrl.element.name;\n\t\t\t\tbreak;\n\t\t\tcase \"heater\":\n\t\t\t\ttag += \"B$\" + ctrl.element.device + \"$heater$\" + ctrl.element.name;\n\t\t\t\tbreak;\n\t\t\tcase \"sensor\":\n\t\t\t\ttag += \"B$\" + ctrl.element.device + \"$sensor$\" + ctrl.element.name;\n\t\t\t\tbreak;\n\t\t\tcase \"scheduler\":\n\t\t\t\ttag += \"A$scheduler$\" + ctrl.element.name;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// Carleon service\n\t\t\t\ttag += \"C$\" + ctrl.type + \"$\" + ctrl.element.name;\n\t\t\t\tbreak;\n\t\t}\n\t\tctrl.scripts = _.filter(sharedData.all(\"angharadScripts\"), function (script) {\n\t\t\treturn !!_.find(script.options.tags, function (oneTag) {\n\t\t\t\treturn oneTag === tag;\n\t\t\t});\n\t\t});\n    }\n    \n    this.runScript = function (script) {\n\t\tvar loaderToast = toaster.pop({type: \"wait\", title: $translate.instant(\"angharad_loading_script_title\"), body: $translate.instant(\"angharad_loading_script_message\"), timeout: 0, showCloseButton: false});\n\t\tangharadFactory.runScript(script.name).then(function () {\n\t\t\ttoaster.pop(\"success\", $translate.instant(\"script_run\", {name: script.name}), $translate.instant(\"script_run_success\"));\n\t\t}, function (error) {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"script_run\", {name: script.name}), $translate.instant(\"script_run_error\"));\n\t\t})[\"finally\"](function () {\n\t\t\t$rootScope.$broadcast(\"refresh\");\n\t\t\ttoaster.clear(loaderToast);\n\t\t});\n\t};\n    \n    ctrl.menuSelect = function(menuItem, element) {\n        menuItem.action(element);\n    };\n    \n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"sagContainer\", {\n    templateUrl: \"components/container/container.template.html\",\n    controller: sagContainerController,\n    transclude: true,\n    bindings: {\n        type: \"=\",\n        menu: \"=\",\n        title: \"=\",\n        size: \"=\",\n        element: \"=\",\n        dashboard: \"=\",\n        sagParams: \"=\",\n        icon: \"=\"\n    }\n});\n\nangular.module(\"sagremorApp\")\n  .factory(\"angharadBackendService\",\n  function($http, $q, $rootScope, AccessToken, sagremorParams, sharedData) {\n    var angharadBackendFactory = {};\n    \n    angharadBackendFactory.httpRequest = function (method, url, data, params) {\n      var deferred = $q.defer();\n      \n      var token = sharedData.get(\"oauthToken\", \"token\");\n      var now = new Date();\n      if (token.expires_at.valueOf() < now.valueOf()) {\n        // This is a lousy way to refresh the token if the refresh wasn't called in time, for example after sleep mode\n        AccessToken.forceRefresh().then(function (token) {\n          $http.defaults.headers.common.Authorization = \"Bearer \" + token.access_token;\n          $http({method: method, url: url, data: data, params: params}).then(function (response) {\n            deferred.resolve(response.data);\n          }, function (error) {\n            deferred.reject(error);\n          });\n        }, function (error) {\n          deferred.reject(error);\n        });\n      } else {\n        $http({method: method, url: url, data: data, params: params}).then(function (response) {\n          deferred.resolve(response.data);\n        }, function (error) {\n          deferred.reject(error);\n        });\n      }\n      \n      return deferred.promise;\n    };\n    \n    return angharadBackendFactory;\n  })\n  .factory(\"angharadFactory\", \n  function($http, $q, angharadConfig, angharadBackendService, sagremorParams) {\n\n    var urlBase = angharadConfig.baseUrl + angharadConfig.prefixAngharad;\n    var dataFactory = {};\n    \n    dataFactory.getSumboduleList = function () {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"submodule/\");\n    };\n\n    dataFactory.getSubmodule = function (name) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"submodule/\" + name);\n    };\n\n    dataFactory.enableSubmodule = function (name, enabled) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"submodule/\" + name + \"/enable/\" + (enabled?\"1\":\"0\"));\n    };\n\n    dataFactory.getScriptList = function () {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"script/\");\n    };\n\n    dataFactory.getScript = function (name) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"script/\" + name);\n    };\n\n    dataFactory.addScript = function (script) {\n      return angharadBackendService.httpRequest(\"POST\", urlBase + \"script/\", script);\n    };\n\n    dataFactory.setScript = function (name, script) {\n      return angharadBackendService.httpRequest(\"PUT\", urlBase + \"script/\" + name, script);\n    };\n\n    dataFactory.removeScript = function (name) {\n      return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"script/\" + name);\n    };\n\n    dataFactory.runScript = function (name) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"script/\" + name + \"/run\");\n    };\n\n    dataFactory.getSchedulerList = function () {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"scheduler/\");\n    };\n\n    dataFactory.getScheduler = function (name) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"scheduler/\" + name);\n    };\n\n    dataFactory.enableScheduler = function (name, enabled) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"scheduler/\" + name + \"/enable/\" + (enabled?\"1\":\"0\"));\n    };\n\n    dataFactory.addScheduler = function (scheduler) {\n      return angharadBackendService.httpRequest(\"POST\", urlBase + \"scheduler/\", scheduler);\n    };\n\n    dataFactory.setScheduler = function (name, scheduler) {\n      return angharadBackendService.httpRequest(\"PUT\", urlBase + \"scheduler/\" + name, scheduler);\n    };\n\n    dataFactory.removeScheduler = function (name) {\n      return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"scheduler/\" + name);\n    };\n\n    dataFactory.getTriggerList = function () {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"trigger/\");\n    };\n\n    dataFactory.getTrigger = function (name) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"trigger/\" + name);\n    };\n\n    dataFactory.enableTrigger = function (name, enabled) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"trigger/\" + name + \"/enable/\" + (enabled?\"1\":\"0\"));\n    };\n\n    dataFactory.addTrigger = function (trigger) {\n      return angharadBackendService.httpRequest(\"POST\", urlBase + \"trigger/\", trigger);\n    };\n\n    dataFactory.setTrigger = function (name, trigger) {\n      return angharadBackendService.httpRequest(\"PUT\", urlBase + \"trigger/\" + name, trigger);\n    };\n\n    dataFactory.removeTrigger = function (name) {\n      return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"trigger/\" + name);\n    };\n\n    /* Profile endpoints */\n    dataFactory.getProfileList = function () {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"profile\");\n    };\n\n    dataFactory.getProfile = function (profile_id) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"profile/\" + profile_id);\n    };\n\n    dataFactory.setProfile = function (profile_id, profile) {\n      return angharadBackendService.httpRequest(\"PUT\", urlBase + \"profile/\" + profile_id, profile);\n    };\n\n    dataFactory.removeProfile = function (profile_id) {\n      return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"profile/\" + profile_id);\n    };\n    \n    /* Users endpoints */\n    dataFactory.getUserList = function () {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"user/\");\n    };\n\n    dataFactory.addUser = function (user) {\n      return angharadBackendService.httpRequest(\"POST\", urlBase + \"user/\", user);\n    };\n\n    dataFactory.setUser = function (name, user) {\n      return angharadBackendService.httpRequest(\"PUT\", urlBase + \"user/\" + name, user);\n    };\n\n    dataFactory.removeUser = function (name) {\n      return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"user/\" + name);\n    };\n    \n    /* Token endpoints */\n    dataFactory.getTokenList = function (options) {\n      return angharadBackendService.httpRequest(\"GET\", urlBase + \"token/\", null, options);\n    };\n\n    dataFactory.revokeToken = function (token) {\n      return angharadBackendService.httpRequest(\"POST\", urlBase + \"token/\", {token: token});\n    };\n\n    \n    dataFactory.saveCurrentProfile = function () {\n      var profile = sagremorParams.currentProfile;\n      var deferred = $q.defer();\n      if (!!profile) {\n        return dataFactory.setProfile(profile.name, profile);\n      } else {\n        deferred.reject(error);\n        return deferred.promise;\n      }\n    };\n\n    return dataFactory;\n  }\n);\n\nangular.module(\"sagremorApp\")\n    .factory(\"benoicFactory\", \n    function($http, angharadConfig, angharadBackendService) {\n\n    var urlBase = angharadConfig.baseUrl + angharadConfig.prefixBenoic;\n    var dataFactory = {};\n\n    dataFactory.getDeviceTypes = function () {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"deviceTypes/\");\n    };\n\n    dataFactory.reloadDeviceTypes = function () {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"deviceTypes/reload\");\n    };\n\n    dataFactory.getDeviceList = function () {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"device/\");\n    };\n\n    dataFactory.getDevice = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"device/\" + name);\n    };\n    \n    dataFactory.addDevice = function (device) {\n        return angharadBackendService.httpRequest(\"POST\", urlBase + \"device/\", device);\n    };\n\n    dataFactory.setDevice = function (device) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"device/\" + device.name, device);\n    };\n\n    dataFactory.removeDevice = function (name) {\n        return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"device/\" + name);\n    };\n    \n    dataFactory.connectDevice = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"device/\" + name + \"/connect\");\n    };\n\n    dataFactory.disconnectDevice = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"device/\" + name + \"/disconnect\");\n    };\n\n    dataFactory.pingDevice = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"device/\" + name + \"/ping\");\n    };\n\n    dataFactory.getDeviceOverview = function (name) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"device/\" + name + \"/overview\");\n    };\n\n    dataFactory.setElement = function (deviceName, elementType, elementName, elementValue, additionalOptions) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"device/\" + deviceName + \"/\" + elementType + \"/\" + elementName + \"/\" + elementValue, null, additionalOptions);\n    };\n\n    dataFactory.updateElement = function (deviceName, elementType, elementName, element) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"device/\" + deviceName + \"/\" + elementType + \"/\" + elementName, element);\n    };\n\n    dataFactory.getMonitor = function (deviceName, elementType, elementName, from) {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"monitor/\" + deviceName + \"/\" + elementType + \"/\" + elementName, null, !!from?{from: from}:null);\n    };\n    \n    dataFactory.addTag = function (deviceName, elementType, elementName, tag) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"device/\" + deviceName + \"/\" + elementType + \"/\" + elementName + \"/\" + tag);\n    };\n\n    dataFactory.removeTag = function (deviceName, elementType, elementName, tag) {\n        return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"device/\" + deviceName + \"/\" + elementType + \"/\" + elementName + \"/\" + tag);\n    };\n\n    return dataFactory;\n});\n\nangular.module(\"sagremorApp\")\n    .factory(\"carleonFactory\", \n    function($http, $q, angharadConfig, angharadBackendService, sagremorParams) {\n\n    var urlBase = angharadConfig.baseUrl + angharadConfig.prefixCarleon;\n    var dataFactory = {};\n\n    /* Base Carleon endpoints */\n    dataFactory.getServiceList = function () {\n        return angharadBackendService.httpRequest(\"GET\", urlBase + \"service\");\n    };\n\n    dataFactory.reloadServiceList = function () {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"service/reload\");\n    };\n\n    dataFactory.enableService = function (service_name, enable) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"service/\" + service_name + \"/enable/\" + (enable?\"1\":\"0\"));\n    };\n\n    dataFactory.elementCleanup = function (service_name, element) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"service/\" + service_name + \"/\" + element + \"/cleanup\");\n    };\n\n    dataFactory.addTag = function (service_name, element, tag) {\n        return angharadBackendService.httpRequest(\"PUT\", urlBase + \"service/\" + service_name + \"/\" + element + \"/\" + tag);\n    };\n\n    dataFactory.removeTag = function (service_name, element, tag) {\n        return angharadBackendService.httpRequest(\"DELETE\", urlBase + \"service/\" + service_name + \"/\" + element + \"/\" + tag);\n    };\n\n    return dataFactory;\n});\n\nangular.module(\"sagremorApp\")\n\t.factory(\"garethFactory\", \n\tfunction(angharadConfig, angharadBackendService, sagremorParams) {\n\n\tvar urlBase = angharadConfig.baseUrl + angharadConfig.prefixGareth;\n\tvar dataFactory = {};\n\n\t/* Gareth endpoints */\n\tdataFactory.getAllMessages = function (limit, offset) {\n\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"message\", null, {limit: limit, offset: offset});\n\t};\n\n\tdataFactory.getFilteredMessages = function (filter, limit, offset) {\n\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"message/\" + filter, null, {limit: limit, offset: offset});\n\t};\n\n\t/* Filters */\n\tdataFactory.getFilterList = function () {\n\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"filter\");\n\t};\n\n\tdataFactory.getFilter = function (name) {\n\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"filter/\" + name);\n\t};\n\n\tdataFactory.addFilter = function (filter) {\n\t\treturn angharadBackendService.httpRequest(\"POST\", urlBase + \"filter/\", filter);\n\t};\n\n\tdataFactory.setFilter = function (name, filter) {\n\t\treturn angharadBackendService.httpRequest(\"PUT\", urlBase + \"filter/\" + name, filter);\n\t};\n\n\tdataFactory.removeFilter = function (name) {\n\t\treturn angharadBackendService.httpRequest(\"DELETE\", urlBase + \"filter/\" + name);\n\t};\n\n\t/* Alerts */\n\tdataFactory.getAlertList = function () {\n\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"alert\");\n\t};\n\n\tdataFactory.getAlert = function (type, name) {\n\t\treturn angharadBackendService.httpRequest(\"GET\", urlBase + \"alert/\" + type + \"/\" + name);\n\t};\n\n\tdataFactory.addAlert = function (type, alert) {\n\t\treturn angharadBackendService.httpRequest(\"POST\", urlBase + \"alert/\" + type, alert);\n\t};\n\n\tdataFactory.setAlert = function (type, name, alert) {\n\t\treturn angharadBackendService.httpRequest(\"PUT\", urlBase + \"alert/\" + type + \"/\" + name, alert);\n\t};\n\n\tdataFactory.removeAlert = function (type, name) {\n\t\treturn angharadBackendService.httpRequest(\"DELETE\", urlBase + \"alert/\" + type + \"/\" + name);\n\t};\n\n\treturn dataFactory;\n});\n\nangular.module(\"sagremorApp\")\n\t.controller(\"sagremorCtrl\",\n\t\tfunction($scope, $rootScope, $interval, $window, $http, $q, $location, $cookies, $translate, toaster, angharadFactory, benoicFactory, carleonFactory, garethFactory, sharedData, sagremorParams, angharadConfig) {\n\t\t\tvar self = this;\n\n\t\t\tthis.loaderToast;\n\t\t\tthis.initComplete = false;\n\t\t\tthis.benoicInitError = false;\n\t\t\tthis.shoudRefresh = false;\n\t\t\tthis.hasFocus = true;\n\t\t\tthis.refreshTimeout = null;\n\t\t\tthis.isInit = false;\n\n\t\t\tfunction init() {\n\t\t\t\t$translate(\"angharad_loading_title\").then(function(title) {\n\t\t\t\t\t// Nothing to do here, just waiting for lang files to be loaded before starting\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction closeLoader(result) {\n\t\t\t\ttoaster.clear(self.loaderToast);\n\t\t\t\tif (result) {\n\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\ttitle: $translate.instant(\"angharad_loading_title\"),\n\t\t\t\t\t\tbody: $translate.instant(\"init_message_loading_complete\")\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttitle: $translate.instant(\"angharad_loading_title\"),\n\t\t\t\t\t\tbody: $translate.instant(\"init_message_loading_error\")\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction popLoader() {\n        toaster.clear(self.loaderToast);\n\t\t\t\tself.loaderToast = toaster.pop({\n\t\t\t\t\ttype: \"wait\",\n\t\t\t\t\ttitle: $translate.instant(\"angharad_loading_title\"),\n\t\t\t\t\tbody: $translate.instant(\"init_message_loading\"),\n\t\t\t\t\ttimeout: 0,\n\t\t\t\t\tshowCloseButton: false\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction initParameters() {\n\t\t\t\tpopLoader();\n\t\t\t\tgetApiData();\n\t\t\t\tself.refreshTimeout = startRefreshTimeout();\n\t\t\t\tsagremorParams.adminMode = false;\n\t\t\t\tsagremorParams.loggedIn = true;\n\t\t\t\tself.isInit = true;\n\t\t\t}\n\n\t\t\tfunction refreshData() {\n\t\t\t\tpopLoader();\n\n\t\t\t\t// Refresh benoic devices with overview\n\t\t\t\tbenoicFactory.getDeviceList().then(function(result) {\n\t\t\t\t\t_.forEach(sharedData.all(\"benoicDevices\"), function(device) {\n\t\t\t\t\t\tdevice.enabled = false;\n\t\t\t\t\t\tdevice.connected = false;\n\t\t\t\t\t});\n\t\t\t\t\t_.forEach(result, function(device) {\n\t\t\t\t\t\tsharedData.add(\"benoicDevices\", device.name, device);\n\t\t\t\t\t});\n\n\t\t\t\t\tvar devices = sharedData.all(\"benoicDevices\");\n\t\t\t\t\tvar devicePromises = {};\n\t\t\t\t\t_.forEach(sharedData.all(\"benoicDevices\"), function(device, deviceName) {\n\t\t\t\t\t\tif (device.connected) {\n\t\t\t\t\t\t\tdevicePromises[deviceName] = benoicFactory.getDeviceOverview(deviceName).then(function(result) {\n\t\t\t\t\t\t\t\tvar curDevice = sharedData.get(\"benoicDevices\", deviceName);\n\t\t\t\t\t\t\t\tif (!!curDevice) {\n\t\t\t\t\t\t\t\t\tcurDevice.element = result;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"refresh\"), $translate.instant(\"refresh_device_error\", {\n\t\t\t\t\t\t\t\t\tname: deviceName\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$q.all(devicePromises).then(function(results) {})[\"finally\"](function() {\n\t\t\t\t\t\t$rootScope.$broadcast(\"refreshDevices\");\n\t\t\t\t\t});\n\t\t\t\t}, function() {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"refresh\"), $translate.instant(\"refresh_device_error\"));\n\t\t\t\t})[\"finally\"](function() {\n\t\t\t\t\t// Refresh scripts and events\n\t\t\t\t\tvar promiseList = {\n\t\t\t\t\t\tscripts: angharadFactory.getScriptList(),\n\t\t\t\t\t\tschedulers: angharadFactory.getSchedulerList(),\n\t\t\t\t\t\ttriggers: angharadFactory.getTriggerList(),\n\t\t\t\t\t\tprofiles: angharadFactory.getProfileList()\n\t\t\t\t\t};\n\n\t\t\t\t\t$q.all(promiseList).then(function(result) {\n\t\t\t\t\t\tsharedData.removeAll(\"angharadScripts\");\n\t\t\t\t\t\tsharedData.removeAll(\"angharadSchedulers\");\n\t\t\t\t\t\tsharedData.removeAll(\"angharadTriggers\");\n\t\t\t\t\t\tfor (sc in result.scripts) {\n\t\t\t\t\t\t\tsharedData.add(\"angharadScripts\", result.scripts[sc].name, result.scripts[sc]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$rootScope.$broadcast(\"refreshAngharadScripts\");\n\t\t\t\t\t\tfor (sh in result.schedulers) {\n\t\t\t\t\t\t\tsharedData.add(\"angharadSchedulers\", result.schedulers[sh].name, result.schedulers[sh]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (tr in result.triggers) {\n\t\t\t\t\t\t\tsharedData.add(\"angharadTriggers\", result.triggers[tr].name, result.triggers[tr]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$rootScope.$broadcast(\"refreshAngharadEvents\");\n\t\t\t\t\t\tsagremorParams.profiles = result.profiles;\n\t\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"refresh\"), $translate.instant(\"refresh_scripts_events_error\"));\n\t\t\t\t\t})[\"finally\"](function() {\n\t\t\t\t\t\t// Refresh carleon services elements\n\n\t\t\t\t\t\tcarleonFactory.getServiceList().then(function(result) {\n\t\t\t\t\t\t\tsharedData.removeAll(\"carleonServices\");\n\t\t\t\t\t\t\tfor (key in result) {\n\t\t\t\t\t\t\t\t_.forEach(result[key].element, function(element) {\n\t\t\t\t\t\t\t\t\telement.type = result[key].name;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsharedData.add(\"carleonServices\", result[key].name, result[key]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$scope.$broadcast(\"refreshCarleonServices\");\n\n\t\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\t\ttitle: $translate.instant(\"refresh\"),\n\t\t\t\t\t\t\t\tbody: $translate.instant(\"refresh_carleon_error\")\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})[\"finally\"](function() {\n\t\t\t\t\t\t\t// All done, refreshing dashboard now\n\t\t\t\t\t\t\ttoaster.clear(self.loaderToast);\n\t\t\t\t\t\t\t$scope.$broadcast(\"refreshDashboard\");\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction getApiData() {\n\t\t\t\treturn self.initAngharadSubmodules().then(function(result) {\n\t\t\t\t\tvar promises = [self.initAngharad()];\n\t\t\t\t\tsagremorParams.benoicEnabled = false;\n\t\t\t\t\tsagremorParams.carleonEnabled = false;\n\t\t\t\t\tsagremorParams.garethEnabled = false;\n\t\t\t\t\tfor (key in result) {\n\t\t\t\t\t\tsharedData.add(\"submodules\", result[key].name, result[key]);\n\t\t\t\t\t\tif (result[key].name === \"benoic\" && result[key].enabled) {\n\t\t\t\t\t\t\tsagremorParams.benoicEnabled = true;\n\t\t\t\t\t\t\tpromises.push(self.initBenoic());\n\t\t\t\t\t\t} else if (result[key].name === \"carleon\" && result[key].enabled) {\n\t\t\t\t\t\t\tsagremorParams.carleonEnabled = true;\n\t\t\t\t\t\t\tpromises.push(self.initCarleon());\n\t\t\t\t\t\t} else if (result[key].name === \"gareth\" && result[key].enabled) {\n\t\t\t\t\t\t\tsagremorParams.garethEnabled = true;\n\t\t\t\t\t\t\tpromises.push(self.initGareth());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t$q.all(promises).then(function() {\n\t\t\t\t\t\t$scope.$broadcast(\"submodulesChanged\");\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\ttitle: $translate.instant(\"angharad_loading_title\"),\n\t\t\t\t\t\t\tbody: $translate.instant(\"init_message_loading_error\")\n\t\t\t\t\t\t});\n\t\t\t\t\t})[\"finally\"](function() {\n\t\t\t\t\t\tself.initComplete = true;\n\t\t\t\t\t\t$scope.$broadcast(\"initComplete\");\n\t\t\t\t\t});\n\t\t\t\t}, function(error) {\n\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttitle: $translate.instant(\"angharad_loading_title\"),\n\t\t\t\t\t\tbody: $translate.instant(\"init_message_loading_error\")\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction startRefreshTimeout() {\n\t\t\t\t// Refresh every 5 minutes if the window has the focus\n\t\t\t\t// If the window has not the focus, set a flag to refresh the page when it will have the focus\n\t\t\t\treturn $interval(function() {\n\t\t\t\t\tif (self.hasFocus) {\n\t\t\t\t\t\trefreshData();\n\t\t\t\t\t\tself.shouldRefresh = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.shouldRefresh = true;\n\t\t\t\t\t}\n\t\t\t\t}, 1000 * 60 * 5);\n\t\t\t}\n\n\t\t\t$window.onblur = function() {\n\t\t\t\tself.hasFocus = false;\n\t\t\t};\n\n\t\t\t$window.onfocus = function() {\n\t\t\t\tself.hasFocus = true;\n\t\t\t\tif (self.shouldRefresh) {\n\t\t\t\t\trefreshData();\n\t\t\t\t\tself.shouldRefresh = false;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.initAngharadSubmodules = function() {\n\t\t\t\treturn angharadFactory.getSumboduleList();\n\t\t\t};\n\n\t\t\tthis.initBenoic = function() {\n\t\t\t\tvar promiseList = {\n\t\t\t\t\tdeviceTypesResult: benoicFactory.getDeviceTypes(),\n\t\t\t\t\tdeviceResult: benoicFactory.getDeviceList()\n\t\t\t\t};\n\n\t\t\t\treturn $q.all(promiseList).then(function(result) {\n\t\t\t\t\tvar deviceTypesResult = result.deviceTypesResult;\n\t\t\t\t\tvar deviceResult = result.deviceResult;\n\n\t\t\t\t\t// Handle device types\n\t\t\t\t\t_.forEach(deviceTypesResult, function(type) {\n\t\t\t\t\t\tsharedData.add(\"benoicDeviceTypes\", type.name, type);\n\t\t\t\t\t});\n\t\t\t\t\t$scope.$broadcast(\"benoicDeviceTypesChanged\");\n\n\t\t\t\t\t// Handle devices\n\t\t\t\t\tvar deviceList = [];\n\t\t\t\t\tsharedData.removeAll(\"benoicDevices\");\n\t\t\t\t\t_.forEach(deviceResult, function(curDevice) {\n\t\t\t\t\t\tif (curDevice.connected) {\n\t\t\t\t\t\t\tdeviceList.push(benoicFactory.getDeviceOverview(curDevice.name).then(function(result) {\n\t\t\t\t\t\t\t\tcurDevice.element = result;\n\t\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t\tcurDevice.element = {};\n\t\t\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"benoic_loading_title\"), $translate.instant(\"benoic_loading_error\", {\n\t\t\t\t\t\t\t\t\tname: curDevice.name\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsharedData.add(\"benoicDevices\", curDevice.name, curDevice);\n\t\t\t\t\t});\n\t\t\t\t\t$q.all(deviceList).then(function(responses) {})[\"finally\"](function() {\n\t\t\t\t\t\t$rootScope.$broadcast(\"benoicDevicesChanged\");\n\t\t\t\t\t});\n\t\t\t\t}, function(error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"benoic_loading_title\"), $translate.instant(\"benoic_loading_error\"));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.initCarleon = function() {\n\t\t\t\tsharedData.removeAll(\"carleonServices\");\n\n\t\t\t\treturn carleonFactory.getServiceList().then(function(result) {\n\t\t\t\t\tfor (key in result) {\n\t\t\t\t\t\t_.forEach(result[key].element, function(element) {\n\t\t\t\t\t\t\telement.type = result[key].name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsharedData.add(\"carleonServices\", result[key].name, result[key]);\n\t\t\t\t\t}\n\t\t\t\t}, function(error) {\n\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttitle: $translate.instant(\"carleon_loading_title\"),\n\t\t\t\t\t\tbody: $translate.instant(\"carleon_loading_error\")\n\t\t\t\t\t});\n\t\t\t\t})[\"finally\"](function() {\n\t\t\t\t\t$rootScope.$broadcast(\"carleonServicesChanged\");\n\t\t\t\t});\n\n\t\t\t};\n\n\t\t\tthis.initGareth = function() {\n\t\t\t\tsharedData.removeAll(\"garethFilters\");\n\t\t\t\tsharedData.removeAll(\"garethAlertsSmtp\");\n\t\t\t\tsharedData.removeAll(\"garethAlertsHttp\");\n\t\t\t\tvar qList = {\n\t\t\t\t\tfilters: garethFactory.getFilterList(),\n\t\t\t\t\talerts: garethFactory.getAlertList()\n\t\t\t\t}\n\n\t\t\t\treturn $q.all(qList).then(function(results) {\n\t\t\t\t\tfor (key in results.filters) {\n\t\t\t\t\t\tsharedData.add(\"garethFilters\", results.filters[key].name, results.filters[key]);\n\t\t\t\t\t}\n\t\t\t\t\tfor (key in results.alerts.smtp) {\n\t\t\t\t\t\tsharedData.add(\"garethAlertsSmtp\", results.alerts.smtp[key].name, results.alerts.smtp[key]);\n\t\t\t\t\t}\n\t\t\t\t\tfor (key in results.alerts.http) {\n\t\t\t\t\t\tsharedData.add(\"garethAlertsHttp\", results.alerts.http[key].name, results.alerts.http[key]);\n\t\t\t\t\t}\n\t\t\t\t\t$scope.$broadcast(\"garethChange\");\n\t\t\t\t}, function(error) {\n\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttitle: $translate.instant(\"gareth_loading_title\"),\n\t\t\t\t\t\tbody: $translate.instant(\"gareth_loading_error\")\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tthis.setDefaultProfile = function() {\n\t\t\t\tsagremorParams.currentProfile = false;\n\t\t\t\t_.forEach(sagremorParams.profiles, function(profile) {\n\t\t\t\t\tif (profile.default) {\n\t\t\t\t\t\tsagremorParams.currentProfile = profile;\n\t\t\t\t\t\tvar exp = new $window.Date();\n\t\t\t\t\t\texp = new $window.Date(exp.getFullYear() + 10, exp.getMonth(), exp.getDate());\n\t\t\t\t\t\t$cookies.put(\"ANGHARAD_PROFILE\", profile.name, {\n\t\t\t\t\t\t\texpires: exp\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!sagremorParams.currentProfile) {\n\t\t\t\t\t// No profile, add default one\n\t\t\t\t\tvar defaultProfile = {\n\t\t\t\t\t\tname: $translate.instant(\"profile_default\"),\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t\tdata: {}\n\t\t\t\t\t};\n\t\t\t\t\tsagremorParams.profiles = [\n\t\t\t\t\t\tdefaultProfile\n\t\t\t\t\t];\n\t\t\t\t\tsagremorParams.currentProfile = defaultProfile;\n\t\t\t\t\tangharadFactory.setProfile($translate.instant(\"profile_default\"), defaultProfile).then(function() {\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"profile_save\"), $translate.instant(\"profile_save_success\"));\n\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profile_save\"), $translate.instant(\"profile_save_error\"));\n\t\t\t\t\t});\n\t\t\t\t\tvar exp = new $window.Date();\n\t\t\t\t\texp = new $window.Date(exp.getFullYear() + 10, exp.getMonth(), exp.getDate());\n\t\t\t\t\t$cookies.put(\"ANGHARAD_PROFILE\", $translate.instant(\"profile_default\"), {\n\t\t\t\t\t\texpires: exp\n\t\t\t\t\t});\n\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.initAngharad = function() {\n\t\t\t\tvar promiseList = {\n\t\t\t\t\tscripts: angharadFactory.getScriptList(),\n\t\t\t\t\tschedulers: angharadFactory.getSchedulerList(),\n\t\t\t\t\ttriggers: angharadFactory.getTriggerList(),\n\t\t\t\t\tprofiles: angharadFactory.getProfileList()\n\t\t\t\t};\n\n\t\t\t\treturn $q.all(promiseList).then(function(result) {\n\t\t\t\t\tfor (sc in result.scripts) {\n\t\t\t\t\t\tsharedData.add(\"angharadScripts\", result.scripts[sc].name, result.scripts[sc]);\n\t\t\t\t\t}\n\t\t\t\t\t$scope.$broadcast(\"angharadScriptsChanged\");\n\t\t\t\t\tfor (sh in result.schedulers) {\n\t\t\t\t\t\tsharedData.add(\"angharadSchedulers\", result.schedulers[sh].name, result.schedulers[sh]);\n\t\t\t\t\t}\n\t\t\t\t\t$scope.$broadcast(\"angharadSchedulersChanged\");\n\t\t\t\t\tfor (tr in result.triggers) {\n\t\t\t\t\t\tsharedData.add(\"angharadTriggers\", result.triggers[tr].name, result.triggers[tr]);\n\t\t\t\t\t}\n\t\t\t\t\t$scope.$broadcast(\"angharadTriggersChanged\");\n\n\t\t\t\t\tif (result.profiles.length === 0) {\n\t\t\t\t\t\tself.setDefaultProfile();\n\t\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsagremorParams.profiles = result.profiles;\n\t\t\t\t\t\tvar profile_name = $cookies.get(\"ANGHARAD_PROFILE\");\n\t\t\t\t\t\tsagremorParams.currentProfile = false;\n\n\t\t\t\t\t\tif (!!profile_name) {\n\t\t\t\t\t\t\t_.forEach(result.profiles, function(profile) {\n\t\t\t\t\t\t\t\tif (profile.name === profile_name) {\n\t\t\t\t\t\t\t\t\tsagremorParams.currentProfile = profile;\n\t\t\t\t\t\t\t\t\t$scope.$broadcast(\"angharadProfileChanged\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!sagremorParams.currentProfile) {\n\t\t\t\t\t\t\t\tself.setDefaultProfile();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.setDefaultProfile();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, function(error) {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"angharad_loading_title\"), $translate.instant(\"angharad_loading_error\"));\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tthis.closeSagremor = function() {\n\t\t\t\tsagremorParams.token = null;\n\t\t\t\tsagremorParams.loggedIn = false;\n\t\t\t\t$scope.isLogged = false;\n\t\t\t\tsagremorParams.profiles = [];\n\t\t\t\tsagremorParams.currentProfile = null;\n\t\t\t\tself.isInit = false;\n\t\t\t\t$rootScope.$broadcast(\"closeBenoic\");\n\t\t\t\t$rootScope.$broadcast(\"closeCarleon\");\n\t\t\t\t$rootScope.$broadcast(\"closeGareth\");\n\t\t\t\t$rootScope.$broadcast(\"angharadProfileUpdated\");\n\t\t\t\t$rootScope.$broadcast(\"refreshDashboard\");\n\t\t\t};\n\n\t\t\t$scope.$on(\"reinitBenoic\", function() {\n\t\t\t\tself.initBenoic();\n\t\t\t});\n\n\t\t\t$scope.$on(\"reinitCarleon\", function() {\n\t\t\t\tself.initCarleon();\n\t\t\t});\n\n\t\t\t$scope.$on(\"reinitGareth\", function() {\n\t\t\t\tself.initGareth();\n\t\t\t});\n\n\t\t\t$scope.$on(\"closeBenoic\", function() {\n\t\t\t\tsharedData.removeAll(\"benoicDevices\");\n\t\t\t});\n\n\t\t\t$scope.$on(\"closeCarleon\", function() {\n\t\t\t\tsharedData.removeAll(\"carleonServices\");\n\t\t\t\tsagremorParams.profiles = [];\n\t\t\t\tsagremorParams.currentProfile = false;\n\t\t\t});\n\n\t\t\t$scope.$on(\"closeGareth\", function() {\n\t\t\t\tsharedData.removeAll(\"garethFilters\");\n\t\t\t\tsharedData.removeAll(\"garethAlertsSmtp\");\n\t\t\t\tsharedData.removeAll(\"garethAlertsHttp\");\n\t\t\t});\n\n\t\t\t$scope.$on(\"refresh\", function() {\n\t\t\t\trefreshData();\n\t\t\t});\n\n\t\t\t$scope.$on(\"reconnect\", function() {\n\t\t\t\t$scope.$broadcast(\"oauth:external:refresh\");\n\t\t\t});\n\n\t\t\t$scope.$on(\"loginSuccess\", function() {\n\t\t\t\tinitParameters();\n\t\t\t});\n\n\t\t\t$scope.$on(\"initComplete\", function() {\n\t\t\t\tif (self.initComplete) {\n\t\t\t\t\tcloseLoader(true);\n\t\t\t\t} else if (self.benoicInitError) {\n\t\t\t\t\tcloseLoader(false);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$on('oauth:login', function(event, token) {\n\t\t\t\tsharedData.add(\"oauthToken\", \"token\", token);\n\t\t\t\t$http.defaults.headers.common.Authorization = \"Bearer \" + token.access_token;\n\t\t\t\tinitParameters();\n\t\t\t});\n\n\t\t\t$scope.$on('oauth:refresh', function(event, token) {\n\t\t\t\t$http.defaults.headers.common.Authorization = \"Bearer \" + token.access_token;\n\t\t\t\tsharedData.add(\"oauthToken\", \"token\", token);\n\t\t\t\tif (!self.isInit) {\n\t\t\t\t\tinitParameters();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$on('oauth:loggedOut', function(event, token) {\n\t\t\t\tself.closeSagremor();\n\t\t\t});\n\n\t\t\t$scope.$on('oauth:denied', function(event, token) {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"angharad_loading_title\"), $translate.instant(\"access_denied\"));\n\t\t\t\tself.closeSagremor();\n\t\t\t});\n\n\t\t\t$scope.$on('oauth:expired', function(event, token) {\n\t\t\t\t$scope.$broadcast(\"reconnect\");\n\t\t\t});\n\n\t\t\t$scope.$on('oauth:invalid', function(event, message) {\n\t\t\t\tself.closeSagremor();\n\t\t\t});\n\n\t\t\tinit();\n\t\t}\n\t);\n\nangular.module(\"sagremorApp\")\n\t.factory(\"sagremorService\",\n\t\tfunction($uibModal, $translate, toaster, sharedData, sagremorParams, sagremorConfirm, angharadFactory, benoicFactory, carleonFactory) {\n\t\t\tvar sagremorFactory = {};\n\n\t\t\tsagremorFactory.monitor = function(element) {\n\t\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/modals/monitor.modal.html\",\n\t\t\t\t\tcontroller: \"MonitorModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"MonitorModalCtrl\",\n\t\t\t\t\tsize: \"md\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\telement: function() {\n\t\t\t\t\t\t\treturn element;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.imagePopup = function(title, src) {\n\t\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/modals/image.modal.html\",\n\t\t\t\t\tcontroller: \"ImageModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"ImageModalCtrl\",\n\t\t\t\t\tsize: \"lg\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\ttitle: function() {\n\t\t\t\t\t\t\treturn title;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsrc: function() {\n\t\t\t\t\t\t\treturn src;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.addToDashboard = function(element) {\n\t\t\t\tvar tag = \"SGMR$D$0$0\";\n\t\t\t\tvar profile = sagremorParams.currentProfile;\n\t\t\t\tif (!profile.addTo) {\n\t\t\t\t\tprofile.addTo = {};\n\t\t\t\t}\n\t\t\t\tif (!profile.addTo.D) {\n\t\t\t\t\tprofile.addTo.D = [];\n\t\t\t\t}\n\t\t\t\tif (!!element.device) {\n\t\t\t\t\tvar newElement = {\n\t\t\t\t\t\tdevice: element.device,\n\t\t\t\t\t\ttype: element.type,\n\t\t\t\t\t\tname: element.name,\n\t\t\t\t\t\ttag: tag\n\t\t\t\t\t};\n\t\t\t\t\tprofile.addTo.D.push(newElement);\n\t\t\t\t} else {\n\t\t\t\t\tvar newElement = {\n\t\t\t\t\t\ttype: element.type,\n\t\t\t\t\t\tname: element.name,\n\t\t\t\t\t\ttag: tag\n\t\t\t\t\t};\n\t\t\t\t\tprofile.addTo.D.push(newElement);\n\t\t\t\t}\n\t\t\t\treturn angharadFactory.setProfile(profile.name, profile).then(function() {\n\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\ttitle: $translate.instant(\"angharad_add_to_dashboard\"),\n\t\t\t\t\t\tbody: $translate.instant(\"angharad_add_to_dashboard_success\")\n\t\t\t\t\t});\n\t\t\t\t}, function() {\n\t\t\t\t\ttoaster.pop({\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\ttitle: $translate.instant(\"angharad_add_to_dashboard\"),\n\t\t\t\t\t\tbody: $translate.instant(\"angharad_add_to_dashboard_error\")\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.bindToElement = function(script) {\n\t\t\t\treturn modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/modals/scriptBindElement.modal.html\",\n\t\t\t\t\tcontroller: \"ScriptBindElementModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"ScriptBindElementModalCtrl\",\n\t\t\t\t\tsize: \"md\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tscript: function() {\n\t\t\t\t\t\t\treturn script;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.removeFromDashboard = function(element) {\n\t\t\t\tvar dashboardWidgets = sagremorParams.dashboardWidgets;\n\t\t\t\tif (dashboardWidgets !== undefined) {\n\t\t\t\t\t_.remove(dashboardWidgets, function(widget) {\n\t\t\t\t\t\treturn (widget.type === element.type && widget.element.device === element.device && widget.element.name === element.name);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsagremorParams.dashboardWidgets = dashboardWidgets;\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tsagremorFactory.editSwitcher = function(switcher) {\n\t\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/switch/switch.modal.html\",\n\t\t\t\t\tcontroller: \"SwitchesModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"SwitchesModalCtrl\",\n\t\t\t\t\tsize: \"sm\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tswitcher: function() {\n\t\t\t\t\t\t\treturn switcher;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.editSensor = function(sensor) {\n\t\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/sensor/sensor.modal.html\",\n\t\t\t\t\tcontroller: \"SensorsModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"SensorsModalCtrl\",\n\t\t\t\t\tsize: \"sm\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tsensor: function() {\n\t\t\t\t\t\t\treturn sensor;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.editHeater = function(heater) {\n\t\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/heater/heater.modal.html\",\n\t\t\t\t\tcontroller: \"HeatersModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"HeatersModalCtrl\",\n\t\t\t\t\tsize: \"sm\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\theater: function() {\n\t\t\t\t\t\t\treturn heater;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.editDimmer = function(dimmer) {\n\t\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/dimmer/dimmer.modal.html\",\n\t\t\t\t\tcontroller: \"DimmersModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"DimmersModalCtrl\",\n\t\t\t\t\tsize: \"sm\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tdimmer: function() {\n\t\t\t\t\t\t\treturn dimmer;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.editScript = function(script) {\n\t\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/script/script.modal.html\",\n\t\t\t\t\tcontroller: \"ScriptModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"ScriptModalCtrl\",\n\t\t\t\t\tsize: \"md\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tscript: function() {\n\t\t\t\t\t\t\treturn script;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.removeScript = function(script) {\n\t\t\t\treturn sagremorConfirm.open($translate.instant(\"script_remove\"), $translate.instant(\"script_remove_confirm\")).then(function(result) {\n\t\t\t\t\treturn angharadFactory.removeScript(script.name).then(function() {\n\t\t\t\t\t\tsharedData.remove(\"angharadScripts\", script.name);\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"script_remove\"), $translate.instant(\"script_remove_success\"));\n\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"script_remove\"), $translate.instant(\"script_remove_error\"));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.editEvent = function(event, eventType) {\n\t\t\t\tvar modalInstance = $uibModal.open({\n\t\t\t\t\tanimation: true,\n\t\t\t\t\ttemplateUrl: \"components/event/event.modal.html\",\n\t\t\t\t\tcontroller: \"EventModalCtrl\",\n\t\t\t\t\tcontrollerAs: \"EventModalCtrl\",\n\t\t\t\t\tsize: \"md\",\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tevent: function() {\n\t\t\t\t\t\t\treturn event;\n\t\t\t\t\t\t},\n\t\t\t\t\t\teventType: function() {\n\t\t\t\t\t\t\treturn eventType;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.removeScheduler = function(event) {\n\t\t\t\treturn sagremorConfirm.open($translate.instant(\"scheduler_remove\"), $translate.instant(\"scheduler_remove_confirm\")).then(function(result) {\n\t\t\t\t\treturn angharadFactory.removeScheduler(event.name).then(function() {\n\t\t\t\t\t\tsharedData.remove(\"angharadSchedulers\", event.name);\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"scheduler_remove\"), $translate.instant(\"scheduler_remove_success\"));\n\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"scheduler_remove\"), $translate.instant(\"scheduler_remove_error\"));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.removeTrigger = function(trigger) {\n\t\t\t\treturn sagremorConfirm.open($translate.instant(\"trigger_remove\"), $translate.instant(\"trigger_remove_confirm\")).then(function(result) {\n\t\t\t\t\treturn angharadFactory.removeTrigger(trigger.name).then(function() {\n\t\t\t\t\t\tsharedData.remove(\"angharadTriggers\", trigger.name);\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"trigger_remove\"), $translate.instant(\"trigger_remove_success\"));\n\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"trigger_remove\"), $translate.instant(\"trigger_remove_error\"));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tsagremorFactory.getBenoicElement = function(device, type, name) {\n\t\t\t\tvar elements = sharedData.get(\"benoicDevices\", device);\n\t\t\t\tif (!!elements && !!elements.element) {\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase \"switch\":\n\t\t\t\t\t\t\tif (!!elements.element.switches && elements.element.switches[name]) {\n\t\t\t\t\t\t\t\treturn elements.element.switches[name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"dimmer\":\n\t\t\t\t\t\t\tif (!!elements.element.dimmers && elements.element.dimmers[name]) {\n\t\t\t\t\t\t\t\treturn elements.element.dimmers[name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"heater\":\n\t\t\t\t\t\t\tif (!!elements.element.heaters && elements.element.heaters[name]) {\n\t\t\t\t\t\t\t\treturn elements.element.heaters[name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"sensor\":\n\t\t\t\t\t\t\tif (!!elements.element.sensors && elements.element.sensors[name]) {\n\t\t\t\t\t\t\t\treturn elements.element.sensors[name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tsagremorFactory.getCarleonElement = function(service, name) {\n\t\t\t\tif (!!service && !!name) {\n\t\t\t\t\tvar cService = sharedData.get(\"carleonServices\", service);\n\t\t\t\t\tvar element = _.find(cService.element, function(elt) {\n\t\t\t\t\t\treturn elt.name === name;\n\t\t\t\t\t});\n\t\t\t\t\treturn element || false;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tsagremorFactory.removeMonitor = function(monitor) {\n\t\t\t\t_.remove(sagremorParams.currentProfile.monitorList, function(curMonitor) {\n\t\t\t\t\treturn curMonitor.name === monitor.name;\n\t\t\t\t});\n\t\t\t\treturn angharadFactory.saveCurrentProfile().then(function() {\n\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"monitor_save\"), $translate.instant(\"monitor_save_success\"));\n\t\t\t\t}, function() {\n\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"monitor_save\"), $translate.instant(\"monitor_save_error\"));\n\t\t\t\t});\n\t\t\t};\n\n\t\t\treturn sagremorFactory;\n\t\t}\n\t);\n\nfunction sagDimmerController (benoicFactory, sagremorParams, $translate) {\n    var ctrl = this;\n    \n    ctrl.element.valueChecked = (ctrl.element.value === 1);\n    ctrl.adminMode = sagremorParams.adminMode;\n    ctrl.element.newDisplay = ctrl.element.display;\n    \n    function init() {\n        ctrl.element.type = \"dimmer\";\n    }\n    \n    ctrl.setDimmer = function (value) {\n        if (value === 0 && ctrl.element.value === 0) {\n\t\t\tbenoicFactory.setElement(ctrl.element.device, \"dimmer\", ctrl.element.name, 101).then(function (result) {\n\t\t\t\tctrl.element.value = result.value;\n\t\t\t});\n\t\t} else if (value >= 0 && value <= 100) {\n\t\t\tbenoicFactory.setElement(ctrl.element.device, \"dimmer\", ctrl.element.name, value).then(function () {\n\t\t\t\tctrl.element.value = value;\n\t\t\t});\n\t\t}\n    };\n    \n    ctrl.addDimmer = function (value) {\n\t\tif (ctrl.element.value + value >= 0 && ctrl.element.value + value <= 100) {\n\t\t\tbenoicFactory.setElement(ctrl.element.device, \"dimmer\", ctrl.element.name, ctrl.element.value + value).then(function () {\n\t\t\t\tctrl.element.value += value;\n\t\t\t});\n\t\t}\n\t}\n    \n    ctrl.Dimmervalue = function () {\n\t\treturn ctrl.element.value + \"%\"\n\t};\n    \n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"sagDimmer\", {\n    templateUrl: \"components/dimmer/dimmer.template.html\",\n    controller: sagDimmerController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.run(function(sagGenericInjectorManager) {\n    sagGenericInjectorManager.add({\n        type: \"dimmer\",\n        directive: \"sag-dimmer\",\n        carleonService: false\n    });\n});\n\nangular.module(\"sagremorApp\")\n    .controller(\"DimmersModalCtrl\",\n    function($scope, $uibModalInstance, $translate, toaster, sagremorConstant, benoicFactory, dimmer) {\n        var self = this;\n        \n        this.dimmer = dimmer;\n        this.dimmer.newDisplay = this.dimmer.display;\n        \n        this.monitorEveryEnum = sagremorConstant.monitoredEveryEnum;\n        \n        function init() {\n\t\t\tself.dimmer.menu = false;\n            \n            _.forEach(self.monitorEveryEnum, function(monitorEvery) {\n                $translate(monitorEvery.label).then(function (trLabel) {\n                    monitorEvery.trLabel = trLabel;\n                });\n            });\n        }\n        \n        this.cancel = function () {\n            $uibModalInstance.dismiss(\"cancel\");\n        };\n        \n        this.tr = function (id) {\n\t\t\treturn $translate.instant(id);\n\t\t};\n        \n        this.saveDimmer = function () {\n            self.dimmer.display = self.dimmer.newDisplay;\n            self.dimmer.monitor = self.dimmer.monitorChecked?1:0;\n            benoicFactory.updateElement(self.dimmer.device, \"dimmer\", self.dimmer.name, self.dimmer).then(function (response) {\n                $scope.$broadcast(\"benoicDimmersChanged\");\n                toaster.pop(\"success\", $translate.instant(\"dimmer_save\"), $translate.instant(\"dimmer_save_success\"));\n            }, function (error) {\n                toaster.pop(\"error\", $translate.instant(\"dimmer_save\"), $translate.instant(\"dimmer_save_error\"));\n            })[\"finally\"](function () {\n                $uibModalInstance.dismiss(\"close\");\n            });\n        };\n        \n        init();\n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"EventModalCtrl\",\n    function($scope, $rootScope, $uibModalInstance, $translate, toaster, sagremorConstant, sagremorService, angharadFactory, sharedData, sagGenericInjectorManager, event, eventType) {\n        var self = this;\n        \n        this.add = true;\n        this.error = {\n\t\t\tnameInvalid: true,\n\t\t\tmessage: \"\"\n\t\t};\n        this.globalScriptList = angular.copy(sharedData.all(\"angharadScripts\"));\n        this.globalElementList = angular.copy(sagremorConstant.conditionList);\n        this.globalTriggerElementList = [];\n        this.schedulerRepeatEveryEnum = sagremorConstant.schedulerRepeatEveryEnum;\n        this.event = event||{\n\t\t\tname: \"\",\n\t\t\tdescription: \"\",\n\t\t\tenabled: true\n\t\t};\n        this.scheduler = {\n\t\t\trepeatSwitch: false,\n\t\t\trepeat: -1,\n\t\t\trepeat_value: 0,\n\t\t\tremove_after: false,\n\t\t\trepeatEveryDayOfWeek: {\n\t\t\t\tsunday: false,\n\t\t\t\tmonday: false,\n\t\t\t\ttuesday: false,\n\t\t\t\twednesday: false,\n\t\t\t\tthursday: false,\n\t\t\t\tfriday: false,\n\t\t\t\tsaturday: false\n\t\t\t}\n\t\t};\n        this.trigger = {\n\t\t\tsubmodule: false,\n\t\t\tsource: false,\n\t\t\telement: false\n\t\t};\n        this.scriptList = [];\n        this.conditionList = [];\n        this.myDate = new Date();\n        this.benoicElements = {\n\t\t\tswitches: [],\n\t\t\tdimmers: [],\n\t\t\theaters: [],\n\t\t\tsensors: []\n\t\t}\n\t\tthis.carleonConditionElementsList = {};\n\t\tthis.carleonConditionResultParameters = {};\n\t\tthis.carleonConditionCommandsParameters = {};\n\t\tthis.scriptActionElements = [];\n\t\tthis.tmpElement = false;\n\t\tthis.tmpResult = false;\n\t\tthis.newCondition = {\n\t\t\tcondition: \"==\",\n\t\t\tvalue: 0,\n\t\t\tparameters: {}\n\t\t};\n\t\tthis.eventType = eventType;\n\t\t\n\t\tthis.newTrigger = {};\n\t\tthis.newTriggerTag = {};\n        \n        this.datePickerOptions = {\n\t\t\tbuttonBar: {\n\t\t\t\tshow: true,\n\t\t\t\tnow: {\n\t\t\t\t\tshow: false,\n\t\t\t\t\ttext: $translate.instant(\"date_picker_now\")\n\t\t\t\t},\n\t\t\t\ttoday: {\n\t\t\t\t\tshow: true,\n\t\t\t\t\ttext: $translate.instant(\"date_picker_today\")\n\t\t\t\t},\n\t\t\t\tclear: {\n\t\t\t\t\tshow: false,\n\t\t\t\t\ttext: $translate.instant(\"date_picker_clear\")\n\t\t\t\t},\n\t\t\t\tdate: {\n\t\t\t\t\tshow: true,\n\t\t\t\t\ttext: $translate.instant(\"date_picker_date\")\n\t\t\t\t},\n\t\t\t\ttime: {\n\t\t\t\t\tshow: true,\n\t\t\t\t\ttext: $translate.instant(\"date_picker_time\")\n\t\t\t\t},\n\t\t\t\tclose: {\n\t\t\t\t\tshow: true,\n\t\t\t\t\ttext: $translate.instant(\"date_picker_close\")\n\t\t\t\t}\n\t\t\t}\n\t\t};\n        \n        function init() {\n\t\t\tif (!!event) {\n\t\t\t\tself.add = false;\n\t\t\t\tif (self.eventType === \"scheduler\") {\n\t\t\t\t\tself.scheduler = angular.copy(event);\n\t\t\t\t\tself.scheduler.repeatSwitch = (event.repeat > -1);\n\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek = {\n\t\t\t\t\t\tsunday: false,\n\t\t\t\t\t\tmonday: false,\n\t\t\t\t\t\ttuesday: false,\n\t\t\t\t\t\twednesday: false,\n\t\t\t\t\t\tthursday: false,\n\t\t\t\t\t\tfriday: false,\n\t\t\t\t\t\tsaturday: false\n\t\t\t\t\t};\n\t\t\t\t\tif (event.repeat === 3) {\n\t\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek = {\n\t\t\t\t\t\t\tsunday: ((event.repeat_value & 1) !== 0),\n\t\t\t\t\t\t\tmonday: ((event.repeat_value & 2) !== 0),\n\t\t\t\t\t\t\ttuesday: ((event.repeat_value & 4) !== 0),\n\t\t\t\t\t\t\twednesday: ((event.repeat_value & 8) !== 0),\n\t\t\t\t\t\t\tthursday: ((event.repeat_value & 16) !== 0),\n\t\t\t\t\t\t\tfriday: ((event.repeat_value & 32) !== 0),\n\t\t\t\t\t\t\tsaturday: ((event.repeat_value & 64) !== 0)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tself.myDate = new Date(event.next_time * 1000);\n\t\t\t\t} else if (self.eventType === \"trigger\") {\n\t\t\t\t\tself.trigger.submodule = event.submodule;\n\t\t\t\t\tself.trigger.source = event.source;\n\t\t\t\t\tself.trigger.element = event.element;\n\t\t\t\t}\n\t\t\t\tself.scriptList = event.scripts;\n\t\t\t\tself.conditionList = event.conditions;\n\t\t\t}\n\t\t\t\n\t\t\t_.forEach(sharedData.all(\"benoicDevices\"), function (device) {\n\t\t\t\tif (device.enabled && device.connected) {\n\t\t\t\t\t_.forEach(device.element.switches, function(element, name) {\n\t\t\t\t\t\tif (element.options.trigger) {\n\t\t\t\t\t\t\tself.globalTriggerElementList.push({submodule: \"benoic\", source: device.name, element: name, display: element.display});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"switch\",\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tvalue: true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.benoicElements.switches.push(elt);\n\t\t\t\t\t});\n\t\t\t\t\t_.forEach(device.element.dimmers, function(element, name) {\n\t\t\t\t\t\tif (element.options.trigger) {\n\t\t\t\t\t\t\tself.globalTriggerElementList.push({submodule: \"benoic\", source: device.name, element: name, display: element.display});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"dimmer\",\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tvalue: 0\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.benoicElements.dimmers.push(elt);\n\t\t\t\t\t});\n\t\t\t\t\t_.forEach(device.element.heaters, function(element, name) {\n\t\t\t\t\t\tif (element.options.trigger) {\n\t\t\t\t\t\t\tself.globalTriggerElementList.push({submodule: \"benoic\", source: device.name, element: name, display: element.display});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"heater\",\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tvalue: 20,\n\t\t\t\t\t\t\toptions: element.options,\n\t\t\t\t\t\t\tavailableModes: element.value.availableModes,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.benoicElements.heaters.push(elt);\n\t\t\t\t\t});\n\t\t\t\t\t_.forEach(device.element.sensors, function(element, name) {\n\t\t\t\t\t\tif (element.options.trigger) {\n\t\t\t\t\t\t\tself.globalTriggerElementList.push({submodule: \"benoic\", source: device.name, element: name, display: element.display});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"sensor\",\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tvalue: 0,\n\t\t\t\t\t\t\toptions: element.options\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.benoicElements.sensors.push(elt);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t_.forEach(sharedData.all(\"carleonServices\"), function (service, serviceName) {\n\t\t\t\tvar injector = _.find(sagGenericInjectorManager.components, function (inject) {\n\t\t\t\t\treturn inject.type === serviceName && service.enabled;\n\t\t\t\t});\n\t\t\t\t_.forEach(service.element, function (element) {\n\t\t\t\t\tif (element.options && element.options.trigger) {\n\t\t\t\t\t\tself.globalTriggerElementList.push({submodule: \"carleon\", source: service.name, element: element.name, display: element.name});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!!injector) {\n\t\t\t\t\t_.forEach(injector.commands, function (command, commandName) {\n\t\t\t\t\t\tvar newAction = {label: command.title, name: serviceName + \"$\" + commandName, submodule: \"carleon\"};\n\t\t\t\t\t\tself.globalElementList.push(newAction);\n\t\t\t\t\t\tself.carleonConditionElementsList[serviceName + \"$\" + commandName] = service.element;\n\t\t\t\t\t\tif (!!service.commands[commandName]) {\n\t\t\t\t\t\t\tself.carleonConditionCommandsParameters[serviceName + \"$\" + commandName] = [];\n\t\t\t\t\t\t\t_.forEach(service.commands[commandName].parameters, function (serviceParameter, serviceParameterName) {\n\t\t\t\t\t\t\t\tvar commandParameter = {\n\t\t\t\t\t\t\t\t\tname: serviceParameterName,\n\t\t\t\t\t\t\t\t\ttitle: !!command.parameters[serviceParameterName]?$translate.instant(command.parameters[serviceParameterName]):serviceParameterName,\n\t\t\t\t\t\t\t\t\ttype: serviceParameter.type,\n\t\t\t\t\t\t\t\t\trequired: serviceParameter.required\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tself.carleonConditionCommandsParameters[serviceName + \"$\" + commandName].push(commandParameter);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.carleonConditionResultParameters[serviceName + \"$\" + commandName] = [];\n\t\t\t\t\t\t\t_.forEach(service.commands[commandName].result, function (serviceResult, serviceResultName) {\n\t\t\t\t\t\t\t\tif (serviceResultName === \"type\") {\n\t\t\t\t\t\t\t\t\tvar commandResult = {\n\t\t\t\t\t\t\t\t\t\ttitle: $translate.instant(\"condition_result_one_value\"),\n\t\t\t\t\t\t\t\t\t\ttype: serviceResult\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tself.carleonConditionResultParameters[serviceName + \"$\" + commandName].push(commandResult);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvar commandResult = {\n\t\t\t\t\t\t\t\t\t\tname: serviceResultName,\n\t\t\t\t\t\t\t\t\t\ttitle: $translate.instant(command.result[serviceResultName].title),\n\t\t\t\t\t\t\t\t\t\ttype: serviceResult.type\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tself.carleonConditionResultParameters[serviceName + \"$\" + commandName].push(commandResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t_.forEach(sharedData.all(\"carleonServices\"), function (service, serviceName) {\n\t\t\t\tvar injector = _.find(sagGenericInjectorManager.components, function (inject) {\n\t\t\t\t\treturn inject.type === serviceName && service.enabled;\n\t\t\t\t});\n\t\t\t\tif (!!injector) {\n\t\t\t\t\t_.forEach(injector.results, function (result, resultName) {\n\t\t\t\t\t\tif (!!result.type && !!result.title) {\n\t\t\t\t\t\t\tvar newCondition = {label: result.title, name: serviceName + \"$\" + resultName, submodule: \"carleon\", type: result.type};\n\t\t\t\t\t\t\tself.globalElementList.push(newCondition);\n\t\t\t\t\t\t\tself.carleonConditionElementsList[serviceName + \"$\" + resultName] = service.element;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_.forEach(result, function (curResult, curResultName) {\n\t\t\t\t\t\t\t\tvar newCondition = {label: curResult.title, name: serviceName + \"$\" + curResultName, submodule: \"carleon\", type: curResult.type, field: curResultName};\n\t\t\t\t\t\t\t\tself.globalElementList.push(newCondition);\n\t\t\t\t\t\t\t\tself.carleonConditionElementsList[serviceName + \"$\" + curResultName] = service.element;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n        }\n        \n\t\tthis.openCalendar = function(e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\n\t\t\tself.isOpen = true;\n\t\t};\n\t\t\n        this.trackBenoicElement = function(element, type) {\n\t\t\tif (!!element && !!type) {\n\t\t\t\treturn element.device + \"$\" + type + \"$\" + element.name;\n\t\t\t} else {\n\t\t\t\treturn \"err$err$err\";\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.trackCarleonElement = function (element, action) {\n\t\t\tif (!!element && !!action) {\n\t\t\t\treturn action + \"$\" + element.name;\n\t\t\t} else {\n\t\t\t\treturn \"err$err$err\";\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.trackTriggerElement = function (element) {\n\t\t\treturn element.submodule + \"$\" + element.source + \"$\" + element.element;\n\t\t};\n        \n        this.tr = function (id) {\n\t\t\treturn $translate.instant(id);\n\t\t};\n\t\t\n\t\tthis.isConditionValid = function () {\n\t\t\tif (!!self.newConditionType && self.newConditionType.submodule === \"benoic\") {\n\t\t\t\tswitch (self.newConditionType.name) {\n\t\t\t\t\tcase \"switch\":\n\t\t\t\t\tcase \"dimmer\":\n\t\t\t\t\tcase \"sensor\":\n\t\t\t\t\t\treturn !!self.tmpElement;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"heater\":\n\t\t\t\t\t\tif (!self.tmpElement) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn !!self.newCondition.condition && (!!self.newCondition.commandMode || !!self.newCondition.commandHeat);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (!!self.newConditionType && self.newConditionType.submodule === \"carleon\") {\n\t\t\t\tif (!self.newCondition.condition || (!self.newCondition.value && self.newCondition.value !== 0) || !self.tmpElement) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar res = true;\n\t\t\t\t_.forEach(self.carleonConditionCommandsParameters[self.newConditionType.name], function (parameter) {\n\t\t\t\t\tif (parameter.required && (!self.newCondition.parameters[parameter.name] && self.newCondition.parameters[parameter.name] !== 0)) {\n\t\t\t\t\t\tres = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t\t\n\t\tthis.heaterModeDisplay = function (value) {\n\t\t\treturn $translate.instant(\"heater_mode_\" + value);\n\t\t};\n    \n        this.setConditionBenoicElement = function () {\n\t\t\tself.newCondition.submodule = \"benoic\";\n\t\t\tself.newCondition.element = self.tmpElement.name;\n\t\t\tself.newCondition.parameters.device = self.tmpElement.device;\n\t\t\tself.newCondition.parameters.element_type = self.tmpElement.type;\n\t\t};\n        \n\t\tthis.addCondition = function () {\n\t\t\tif (self.newConditionType.submodule === \"benoic\" && self.newCondition.commandMode) {\n\t\t\t\tself.newCondition.field = \"mode\";\n\t\t\t\tself.newCondition.value = self.newCondition.commandMode;\n\t\t\t}\n\t\t\tif (self.newConditionType.submodule === \"benoic\" && self.newCondition.commandHeat) {\n\t\t\t\tself.newCondition.field = \"command\";\n\t\t\t\tself.newCondition.value = self.newCondition.commandHeat;\n\t\t\t}\n\t\t\tif (self.newConditionType.submodule === \"carleon\") {\n\t\t\t\tvar nameSplitted = self.newConditionType.name.split(\"$\");\n\t\t\t\tself.newCondition.field = self.newConditionType.field;\n\t\t\t\tself.newCondition.submodule = \"carleon\";\n\t\t\t\tself.newCondition.element = self.tmpElement.name;\n\t\t\t\tself.newCondition.parameters.service = self.tmpElement.type\n\t\t\t\tself.newCondition.service = nameSplitted[0];\n\t\t\t\tself.newCondition.command = nameSplitted[1];\n\t\t\t\tif (!!self.tmpResult.name) {\n\t\t\t\t\tself.newCondition.field = self.tmpResult.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.conditionList.push(self.newCondition);\n\t\t\tself.newCondition = {\n\t\t\t\tcondition: \"==\",\n\t\t\t\tvalue: 0,\n\t\t\t\tparameters: {}\n\t\t\t};\n\t\t};\n\t\t\n\t\tthis.removeCondition = function (index) {\n\t\t\tself.conditionList.splice(index, 1);\n\t\t};\n\t\t\n\t\tthis.displayCondition = function (condition) {\n\t\t\tif (!!condition && condition.submodule === \"benoic\") {\n\t\t\t\tswitch (condition.parameters.element_type) {\n\t\t\t\t\tcase \"switch\":\n\t\t\t\t\t\tvar curSwitch = _.find(self.benoicElements.switches, function (element) {\n\t\t\t\t\t\t\treturn condition.parameters.device === element.device && condition.element === element.name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn !!curSwitch?$translate.instant(\"switch_title\")+\" \"+curSwitch.display+\" \"+(condition.value?$translate.instant(\"condition_switch_on\"):$translate.instant(\"condition_switch_off\")):$translate.instant(\"switch_title\")+\" \"+$translate.instant(\"not_found\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"dimmer\":\n\t\t\t\t\t\tvar curDimmer = _.find(self.benoicElements.dimmers, function (element) {\n\t\t\t\t\t\t\treturn condition.parameters.device === element.device && condition.element === element.name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn !!curDimmer?$translate.instant(\"dimmer_title\")+\" \"+curDimmer.display+\" \"+condition.condition+\" \"+condition.value:$translate.instant(\"dimmer_title\")+\" \"+$translate.instant(\"not_found\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"heater\":\n\t\t\t\t\t\tvar curHeater = _.find(self.benoicElements.heaters, function (element) {\n\t\t\t\t\t\t\treturn condition.parameters.device === element.device && condition.element === element.name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!!curHeater) {\n\t\t\t\t\t\t\tif (condition.field === \"command\") {\n\t\t\t\t\t\t\t\treturn $translate.instant(\"heater_title\")+\" \"+curHeater.display+\" \"+condition.condition+\" \"+condition.value;\n\t\t\t\t\t\t\t} else if (condition.field === \"mode\") {\n\t\t\t\t\t\t\t\treturn $translate.instant(\"heater_title\")+\" \"+curHeater.display+\" \"+condition.condition+\" \"+$translate.instant(\"heater_mode_\"+condition.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn $translate.instant(\"not_found\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"sensor\":\n\t\t\t\t\t\tvar curSensor = _.find(self.benoicElements.sensors, function (element) {\n\t\t\t\t\t\t\treturn condition.parameters.device === element.device && condition.element === element.name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn !!curSensor?$translate.instant(\"sensor_title\")+\" \"+curSensor.display+\" \"+condition.condition+\" \"+condition.value:$translate.instant(\"sensor_title\")+\" \"+$translate.instant(\"not_found\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (!!condition && condition.submodule === \"carleon\") {\n\t\t\t\tvar curCondition = _.find(self.globalElementList, function (cond) {\n\t\t\t\t\treturn cond.name === condition.service + \"$\" + condition.command;\n\t\t\t\t});\n\t\t\t\tvar fieldName = $translate.instant(\"condition_result_one_value\");\n\t\t\t\tif (!!condition.field) {\n\t\t\t\t\tvar curResult = _.find(self.carleonConditionResultParameters[curCondition.name], function (res) {\n\t\t\t\t\t\treturn res.name === condition.field;\n\t\t\t\t\t});\n\t\t\t\t\tfieldName = !!curResult?curResult.title:$translate.instant(\"condition_result_one_value\");\n\t\t\t\t}\n\t\t\t\treturn !!curCondition?$translate.instant(curCondition.label)+\" \"+fieldName+\" \"+condition.condition+\" \"+condition.value:$translate.instant(\"not_found\");\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.addScript = function(script) {\n\t\t\tself.scriptList.push({name: script.name, enabled: true});\n\t\t\tdelete self.globalScriptList[script.name];\n\t\t};\n\t\t\n\t\tthis.removeScript = function (index) {\n\t\t\tvar script = self.scriptList[index];\n\t\t\tself.globalScriptList[script.name] = angular.copy(sharedData.get(\"angharadScripts\", script.name));\n\t\t\tself.scriptList.splice(index, 1);\n\t\t};\n\t\t\n\t\tthis.isEventValid = function () {\n\t\t\tif (!self.event.name) {\n\t\t\t\tself.error.message = $translate.instant(\"event_name_mandatory\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (self.add) {\n\t\t\t\tif (self.eventType === \"scheduler\") {\n\t\t\t\t\tif (!!sharedData.get(\"angharadSchedulers\", self.event.name)) {\n\t\t\t\t\t\tself.error.message = $translate.instant(\"event_name_already_exist\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else if (self.eventType === \"trigger\") {\n\t\t\t\t\tif (!!sharedData.get(\"angharadTriggers\", self.event.name)) {\n\t\t\t\t\t\tself.error.message = $translate.instant(\"event_name_already_exist\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.error.nameInvalid = false;\n\t\t\t\n\t\t\tif (!self.eventType) {\n\t\t\t\tself.error.message = $translate.instant(\"event_type_mandatory\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (self.eventType === \"scheduler\") {\n\t\t\t\tif (!self.myDate) {\n\t\t\t\t\tself.error.message = $translate.instant(\"event_scheduler_date_mandatory\");\n\t\t\t\t\treturn false;\n\t\t\t\t} else if (self.myDate < new Date() && !self.event.repeat) {\n\t\t\t\t\tself.error.message = $translate.instant(\"event_scheduler_date_future\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (self.eventType === \"trigger\") {\n\t\t\t\tif (!self.trigger.submodule || !self.trigger.source || !self.trigger.element) {\n\t\t\t\t\tself.error.message = $translate.instant(\"event_trigger_no_element\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (self.scriptList.length === 0) {\n\t\t\t\tself.error.message = $translate.instant(\"event_script_mandatory\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tself.error.message = \"\";\n\t\t\treturn true;\n\t\t};\n\n        this.save = function () {\n\t\t\tif (self.eventType === \"scheduler\") {\n\t\t\t\tself.scheduler.name = self.event.name;\n\t\t\t\tself.scheduler.description = self.event.description;\n\t\t\t\tself.scheduler.enabled = self.event.enabled;\n\t\t\t\tself.scheduler.next_time = Math.round(self.myDate.getTime() / 1000);\n\t\t\t\tif (self.scheduler.repeat === 3) {\n\t\t\t\t\t// Day of week\n\t\t\t\t\tself.scheduler.repeat_value = 0;\n\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek.sunday && (self.scheduler.repeat_value += 1);\n\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek.monday && (self.scheduler.repeat_value += 2);\n\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek.tuesday && (self.scheduler.repeat_value += 4);\n\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek.wednesday && (self.scheduler.repeat_value += 8);\n\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek.thursday && (self.scheduler.repeat_value += 16);\n\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek.friday && (self.scheduler.repeat_value += 32);\n\t\t\t\t\tself.scheduler.repeatEveryDayOfWeek.saturday && (self.scheduler.repeat_value += 64);\n\t\t\t\t}\n\t\t\t\tself.scheduler.scripts = self.scriptList;\n\t\t\t\tself.scheduler.conditions = self.conditionList;\n\t\t\t\t\n\t\t\t\tif (self.add) {\n\t\t\t\t\tangharadFactory.addScheduler(self.scheduler).then(function () {\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"scheduler_save\"), $translate.instant(\"scheduler_save_success\"));\n\t\t\t\t\t\tsharedData.add(\"angharadSchedulers\", self.scheduler.name, self.scheduler);\n\t\t\t\t\t\t$rootScope.$broadcast(\"angharadSchedulersChanged\");\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"scheduler_save\"), $translate.instant(\"scheduler_save_error\"));\n\t\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tangharadFactory.setScheduler(self.scheduler.name, self.scheduler).then(function () {\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"scheduler_save\"), $translate.instant(\"scheduler_save_success\"));\n\t\t\t\t\t\tsharedData.add(\"angharadSchedulers\", self.scheduler.name, self.scheduler);\n\t\t\t\t\t\t$rootScope.$broadcast(\"angharadSchedulersChanged\");\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"scheduler_save\"), $translate.instant(\"scheduler_save_error\"));\n\t\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (self.eventType === \"trigger\") {\n\t\t\t\tself.trigger.name = self.event.name;\n\t\t\t\tself.trigger.description = self.event.description;\n\t\t\t\tself.trigger.enabled = self.event.enabled;\n\t\t\t\tself.trigger.scripts = self.scriptList;\n\t\t\t\tself.trigger.conditions = self.conditionList;\n\t\t\t\tif (self.add) {\n\t\t\t\t\tangharadFactory.addTrigger(self.trigger).then(function () {\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"trigger_save\"), $translate.instant(\"trigger_save_success\"));\n\t\t\t\t\t\tsharedData.add(\"angharadTriggers\", self.trigger.name, self.trigger);\n\t\t\t\t\t\t$rootScope.$broadcast(\"angharadTriggersChanged\");\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"trigger_save\"), $translate.instant(\"trigger_save_error\"));\n\t\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tangharadFactory.setTrigger(self.trigger.name, self.trigger).then(function () {\n\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"trigger_save\"), $translate.instant(\"trigger_save_success\"));\n\t\t\t\t\t\tsharedData.add(\"angharadTriggers\", self.trigger.name, self.trigger);\n\t\t\t\t\t\t$rootScope.$broadcast(\"angharadTriggersChanged\");\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"trigger_save\"), $translate.instant(\"trigger_save_error\"));\n\t\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n        };\n        \n        this.cancel = function () {\n            $uibModalInstance.dismiss(\"cancel\");\n        };\n        \n        init();\n    });\n\nfunction sagSchedulerController ($translate, toaster, angharadFactory, sagremorParams, sharedData) {\n    var ctrl = this;\n    \n    function init() {\n    }\n    \n    this.enableScheduler = function () {\n\t\tangharadFactory.enableScheduler(ctrl.element.name, ctrl.element.enabled).then(function (result) {\n\t\t\tsharedData.add(\"angharadSchedulers\", result.name, result);\n\t\t\tctrl.element = result;\n\t\t\ttoaster.pop(\"success\", $translate.instant(\"scheduler_enable\"), $translate.instant(\"scheduler_enable_success\"));\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"scheduler_enable\"), $translate.instant(\"scheduler_enable_error\"));\n\t\t});\n\t};\n    \n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"sagScheduler\", {\n    templateUrl: \"components/event/scheduler.template.html\",\n    controller: sagSchedulerController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.run(function(sagGenericInjectorManager) {\n    sagGenericInjectorManager.add({\n        type: \"scheduler\",\n        directive: \"sag-scheduler\",\n        carleonService: false\n    });\n})\n.filter;\n\nfunction sagTriggerController ($translate, toaster, angharadFactory, sagremorParams, sharedData) {\n    var ctrl = this;\n    \n    function init() {\n    }\n    \n    this.enableTrigger = function () {\n\t\tangharadFactory.enableTrigger(ctrl.element.name, ctrl.element.enabled).then(function (result) {\n\t\t\tsharedData.add(\"angharadTrigger\", result.name, result);\n\t\t\tctrl.element = result;\n\t\t\ttoaster.pop(\"success\", $translate.instant(\"trigger_enable\"), $translate.instant(\"trigger_enable_success\"));\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"trigger_enable\"), $translate.instant(\"trigger_enable_error\"));\n\t\t});\n\t};\n    \n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"sagTrigger\", {\n    templateUrl: \"components/event/trigger.template.html\",\n    controller: sagTriggerController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.run(function(sagGenericInjectorManager) {\n    sagGenericInjectorManager.add({\n        type: \"trigger\",\n        directive: \"sag-trigger\",\n        carleonService: false\n    });\n})\n.filter;\n\nangular.module(\"sagremorApp\")\n.controller(\"GridstackController\", [\"$scope\", function($scope) {\n\n    var gridstack = null;\n\n    this.init = function(element, options) {\n      gridstack = element.gridstack(options).data(\"gridstack\");\n      return gridstack;\n    };\n\n    this.removeItem = function(element) {\n      if(gridstack) {\n        return gridstack.removeWidget(element, false);\n      }\n      return null;\n    };\n\n    this.addItem = function(element) {\n      if(gridstack) {\n        gridstack.makeWidget(element);\n        return element;\n      }\n      return null;\n    };\n\n}]);\n\nangular.module('sagremorApp')\n\n.directive('gridstack', ['$timeout', function($timeout) {\n\n    return {\n      restrict: \"A\",\n      controller: 'GridstackController',\n      scope: {\n        onChange: '&',\n        onDragStart: '&',\n        onDragStop: '&',\n        onResizeStart: '&',\n        onResizeStop: '&',\n        options: '='\n      },\n      link: function (scope, element, attrs, controller, ngModel) {\n\n        controller.init(element, scope.options);\n\n        element.on('change', function (e, items) {\n          $timeout(function() {\n            scope.$apply();\n            scope.onChange({event: e, items: items});\n          });\n        });\n\n        element.on('dragstart', function(e, ui) {\n          scope.onDragStart({event: e, ui: ui});\n        });\n\n        element.on('dragstop', function(e, ui) {\n          $timeout(function() {\n            scope.$apply();\n            scope.onDragStop({event: e, ui: ui});\n          });\n        });\n\n      }\n    };\n\n}]).directive('gridstackItem', ['$timeout', function($timeout) {\n\n    return {\n      restrict: \"A\",\n      controller: 'GridstackController',\n      require: '^gridstack',\n      scope: {\n        gridstackItem: '=',\n        onItemAdded: '&',\n        onItemRemoved: '&',\n        gsItemX: '=',\n        gsItemY: '=',\n        gsItemWidth: '=',\n        gsItemHeight: '=',\n        gsItemAutopos: '='\n      },\n      link: function (scope, element, attrs, controller) {\n\n        $(element).attr('data-gs-x', scope.gsItemX);\n        $(element).attr('data-gs-y', scope.gsItemY);\n        $(element).attr('data-gs-width', scope.gsItemWidth);\n        $(element).attr('data-gs-height', scope.gsItemHeight);\n        $(element).attr('data-gs-auto-position', scope.gsItemAutopos);\n        var widget = controller.addItem(element);\n        var item = element.data('_gridstack_node');\n        $timeout(function() {\n          scope.onItemAdded({item: item});\n        });\n\n        scope.$watch(function(){ return $(element).attr('data-gs-x'); }, function(val) {\n          scope.gsItemX = val;\n        });\n\n        scope.$watch(function(){ return $(element).attr('data-gs-y'); }, function(val) {\n          scope.gsItemY = val;\n        });\n\n        scope.$watch(function(){ return $(element).attr('data-gs-width'); }, function(val) {\n          scope.gsItemWidth = val;\n        });\n\n        scope.$watch(function(){ return $(element).attr('data-gs-height'); }, function(val) {\n          scope.gsItemHeight = val;\n        });\n\n        element.bind('$destroy', function() {\n          var item = element.data('_gridstack_node');\n          scope.onItemRemoved({item: item});\n          controller.removeItem(element);\n        });\n\n      }\n\n    };\n\n  }]);\n\nfunction sagHeaterController (benoicFactory, sagremorParams, $translate) {\n    var ctrl = this;\n    \n    ctrl.element.valueChecked = (ctrl.element.value === 1);\n    ctrl.adminMode = sagremorParams.adminMode;\n    ctrl.element.newDisplay = \"\";\n    ctrl.availableModes = [];\n    \n    function init() {\n        ctrl.element.type = \"heater\";\n        if (!!ctrl.element) {\n\t\t\tctrl.element.newDisplay = ctrl.element.display;\n\t\t\tctrl.availableModes = ctrl.element.value.availableModes;\n\t\t}\n    }\n    \n    ctrl.setHeater = function (value) {\n\t\tif (value == null) {\n\t\t\tvalue = ctrl.element.value.command;\n\t\t} else {\n\t\t\tvalue = ctrl.element.value.command + value;\n\t\t}\n        benoicFactory.setElement(ctrl.element.device, \"heater\", ctrl.element.name, value, {mode: ctrl.element.value.mode}).then(function () {\n            ctrl.element.value.command = value;\n        });\n    };\n    \n    ctrl.displayCommandValue = function () {\n\t\tvar command = !!ctrl.element?(Math.round(ctrl.element.value.command * 100) / 100):0;\n        if (!!ctrl.element && !!ctrl.element.options.unit) {\n\t\t\tcommand += \" \" + ctrl.element.options.unit\n\t\t}\n\t\treturn command;\n\t};\n\t\n\tctrl.displayCommand = function (command) {\n\t\tvar value = \"\";\n\t\tif (command < 0) {\n\t\t\tvalue = command;\n\t\t} else {\n\t\t\tvalue = \"+\" + command;\n\t\t}\n        if (!!ctrl.element && !!ctrl.element.options.unit) {\n\t\t\tvalue += \" \" + ctrl.element.options.unit\n\t\t}\n\t\treturn value\n\t};\n\t\n\tctrl.modeDisplay = function (value) {\n\t\treturn $translate.instant(\"heater_mode_\" + value.toLowerCase());\n\t};\n    \n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"sagHeater\", {\n    templateUrl: \"components/heater/heater.template.html\",\n    controller: sagHeaterController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.run(function(sagGenericInjectorManager) {\n    sagGenericInjectorManager.add({\n        type: \"heater\",\n        directive: \"sag-heater\",\n        carleonService: false\n    });\n});\n\nangular.module(\"sagremorApp\")\n    .controller(\"HeatersModalCtrl\",\n    function($scope, $uibModalInstance, $translate, toaster, sagremorConstant, benoicFactory, heater) {\n        var self = this;\n        \n        this.heater = heater;\n        this.heater.newDisplay = this.heater.display;\n        \n        this.monitorEveryEnum = sagremorConstant.monitoredEveryEnum;\n        \n        function init() {\n\t\t\tself.heater.menu = false;\n            \n            _.forEach(self.monitorEveryEnum, function(monitorEvery) {\n                $translate(monitorEvery.label).then(function (trLabel) {\n                    monitorEvery.trLabel = trLabel;\n                });\n            });\n        }\n        \n        this.cancel = function () {\n            $uibModalInstance.dismiss(\"cancel\");\n        };\n        \n        this.tr = function (id) {\n\t\t\treturn $translate.instant(id);\n\t\t};\n        \n        this.saveHeater = function () {\n            self.heater.display = self.heater.newDisplay;\n            self.heater.monitor = self.heater.monitorChecked?1:0;\n            benoicFactory.updateElement(self.heater.device, \"heater\", self.heater.name, self.heater).then(function (response) {\n                $scope.$broadcast(\"benoicHeatersChanged\");\n                toaster.pop(\"success\", $translate.instant(\"heater_save\"), $translate.instant(\"heater_save_success\"));\n            }, function (error) {\n                toaster.pop(\"error\", $translate.instant(\"heater_save\"), $translate.instant(\"heater_save_error\"));\n            })[\"finally\"](function () {\n                $uibModalInstance.dismiss(\"close\");\n            });\n        };\n        \n        init();\n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"ConfirmModalCtrl\",\n    function($uibModalInstance, title, message) {\n        var self = this;\n        \n        this.title = title;\n        this.message = message;\n        \n        this.cancel = function () {\n            $uibModalInstance.dismiss(\"cancel\");\n        };\n        \n        this.ok = function () {\n            $uibModalInstance.close(\"ok\");\n        };\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"EditModalCtrl\",\n    function($uibModalInstance, title, message, placeholder) {\n        var self = this;\n        \n        this.title = title;\n        this.message = message;\n        this.placeholder = placeholder;\n        this.value = \"\";\n        \n        this.cancel = function () {\n            $uibModalInstance.dismiss(\"cancel\");\n        };\n        \n        this.ok = function () {\n            $uibModalInstance.close({reason: \"close\", value: self.value});\n        };\n        \n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"ImageModalCtrl\",\n    function($scope, $uibModalInstance, $translate, title, src) {\n        var self = this;\n        \n        this.title = title;\n        this.src = src;\n        \n        function init() {\n        }\n        \n        this.close = function () {\n            $uibModalInstance.dismiss(\"close\");\n        };\n        \n        this.displayTitle = function () {\n\t\t\treturn $translate.instant(\"image_title\") + self.title;\n\t\t};\n\t\t\n        init();\n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"MonitorModalCtrl\",\n    function($scope, $uibModalInstance, $translate, toaster, benoicFactory, sagremorConstant, element) {\n        var self = this;\n        \n        this.element = element;\n        this.data = [];\n        this.durationList = sagremorConstant.durationList;\n        this.duration = {value: 4};\n        \n\t\tthis.options = {\n\t\t\tchart: {\n\t\t\t\ttype: \"lineChart\",\n\t\t\t\tinterpolate:\"basis\",\n\t\t\t\tx: function(d) { return d.timestamp; },\n\t\t\t\ty: function(d) { return d.value; },\n\t\t\t\tshowValues: true,\n\t\t\t\tvalueFormat: function(d){\n\t\t\t\t\treturn d3.format(\",.2f\")(d);\n\t\t\t\t},\n\t\t\t\ttransitionDuration: 500,\n\t\t\t\txScale : d3.time.scale(),\n\t\t\t\txAxis: {\n\t\t\t\t\taxisLabel: $translate.instant(\"monitor_date_axis\")\n\t\t\t\t},\n\t\t\t\tyAxis: {\n\t\t\t\t\taxisLabel: element.options.unit,\n\t\t\t\t\taxisLabelDistance: 30\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n        function init() {\n\t\t\tself.getMonitor();\n        }\n        \n        this.getMonitor = function () {\n\t\t\tvar from = new Date();\n\t\t\t\n\t\t\tswitch (self.duration.value) {\n\t\t\t\tcase 0:\n\t\t\t\t\tfrom.setTime(from.getTime() - 1*60*60*1000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tfrom.setTime(from.getTime() - 2*60*60*1000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tfrom.setTime(from.getTime() - 6*60*60*1000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tfrom.setTime(from.getTime() - 12*60*60*1000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tfrom.setTime(from.getTime() - 24*60*60*1000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tfrom.setTime(from.getTime() - 48*60*60*1000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tfrom.setTime(from.getTime() - 72*60*60*1000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 7:\n\t\t\t\t\tfrom.setTime(from.getTime() - 168*60*60*1000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\tfrom.setMonth(from.getMonth() - 1);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n            benoicFactory.getMonitor(element.device, element.type, element.name, Math.round(from.getTime() / 1000)).then(function (result) {\n                self.data = [];\n                var myData = {\n\t\t\t\t\tkey: element.display,\n\t\t\t\t\tvalues: []\n                };\n                if (!!result && result.length > 0) {\n\t\t\t\t\t_.forEach(result, function (monitor) {\n\t\t\t\t\t\tvar curDate = new Date(monitor.timestamp * 1000);\n\t\t\t\t\t\tvar value = {timestamp: curDate, value: parseFloat(monitor.value)};\n\t\t\t\t\t\tmyData.values.push(value);\n\t\t\t\t\t});\n\t\t\t\t\tself.data.push(myData);\n\t\t\t\t}\n            });\n\t\t}\n        \n        this.tr = function (value) {\n\t\t\treturn $translate.instant(value);\n\t\t};\n        \n        this.close = function () {\n            $uibModalInstance.dismiss(\"close\");\n        };\n        \n        this.displayTitle = function () {\n\t\t\treturn $translate.instant(\"monitor_title\") + element.display;\n\t\t};\n\t\t\n        init();\n    }\n);\n\nangular.module(\"sagremorApp\")\n    .controller(\"ScriptBindElementModalCtrl\",\n    function($scope, $uibModalInstance, $translate, toaster, DTOptionsBuilder, sharedData, sagGenericInjectorManager, angharadFactory, script) {\n        var self = this;\n        \n        this.script = script;\n        \n        this.elementList = [];\n        this.options = {};\n        this.tmpCheck = [];\n        \n        function init() {\n\t\t\tif (!self.script.options.tags) {\n\t\t\t\tself.script.options.tags = [];\n\t\t\t}\n\t\t\tif ($translate.use()) {\n\t\t\t\tself.options = DTOptionsBuilder.newOptions()\n\t\t\t\t\t\t\t\t.withLanguageSource(\"components/core/i18n/datatables.\"+$translate.use()+\".json\")\n\t\t\t\t\t\t\t\t.withOption(\"order\", [])\n\t\t\t\t\t\t\t\t.withOption(\"scrollY\", \"200px\")\n\t\t\t\t\t\t\t\t.withOption(\"paging\", false);\n\t\t\t}\n\t\t\t\n\t\t\t_.forEach(sharedData.all(\"benoicDevices\"), function (device) {\n\t\t\t\tif (device.enabled && device.connected) {\n\t\t\t\t\t_.forEach(device.element.switches, function(element, name) {\n\t\t\t\t\t\tvar selected = !!_.find(self.script.options.tags, function (tag) {\n\t\t\t\t\t\t\treturn tag === \"SGMR$SCR$B$\" + device.name + \"$switch$\" + name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tsubmodule: \"benoic\", \n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"switch\",\n\t\t\t\t\t\t\ttypeTitle: $translate.instant(\"switch_title\"),\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tselected: selected\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.elementList.push(elt);\n\t\t\t\t\t\tself.tmpCheck.push(selected);\n\t\t\t\t\t});\n\t\t\t\t\t_.forEach(device.element.dimmers, function(element, name) {\n\t\t\t\t\t\tvar selected = !!_.find(self.script.options.tags, function (tag) {\n\t\t\t\t\t\t\treturn tag === \"SGMR$SCR$B$\" + device.name + \"$dimmer$\" + name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tsubmodule: \"benoic\", \n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"dimmer\",\n\t\t\t\t\t\t\ttypeTitle: $translate.instant(\"dimmer_title\"),\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tselected: selected\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.elementList.push(elt);\n\t\t\t\t\t\tself.tmpCheck.push(selected);\n\t\t\t\t\t});\n\t\t\t\t\t_.forEach(device.element.heaters, function(element, name) {\n\t\t\t\t\t\tvar selected = !!_.find(self.script.options.tags, function (tag) {\n\t\t\t\t\t\t\treturn tag === \"SGMR$SCR$B$\" + device.name + \"$heater$\" + name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tsubmodule: \"benoic\", \n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"heater\",\n\t\t\t\t\t\t\ttypeTitle: $translate.instant(\"heater_title\"),\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tselected: selected\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.elementList.push(elt);\n\t\t\t\t\t\tself.tmpCheck.push(selected);\n\t\t\t\t\t});\n\t\t\t\t\t_.forEach(device.element.sensors, function(element, name) {\n\t\t\t\t\t\tvar selected = !!_.find(self.script.options.tags, function (tag) {\n\t\t\t\t\t\t\treturn tag === \"SGMR$SCR$B$\" + device.name + \"$sensor$\" + name;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tsubmodule: \"benoic\", \n\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\ttype: \"sensor\",\n\t\t\t\t\t\t\ttypeTitle: $translate.instant(\"sensor_title\"),\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tselected: selected\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.elementList.push(elt);\n\t\t\t\t\t\tself.tmpCheck.push(selected);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t_.forEach(sharedData.all(\"angharadSchedulers\"), function (scheduler) {\n\t\t\t\tvar selected = !!_.find(self.script.options.tags, function (tag) {\n\t\t\t\t\treturn tag === \"SGMR$SCR$A$scheduler$\" + scheduler.name;\n\t\t\t\t});\n\t\t\t\tvar elt = {\n\t\t\t\t\tsubmodule: \"angharad\", \n\t\t\t\t\ttype: \"scheduler\",\n\t\t\t\t\ttypeTitle: $translate.instant(\"scheduler_title\"),\n\t\t\t\t\tname: scheduler.name,\n\t\t\t\t\tdisplay: scheduler.name,\n\t\t\t\t\tselected: selected\n\t\t\t\t}\n\t\t\t\tself.elementList.push(elt);\n\t\t\t\tself.tmpCheck.push(selected);\n\t\t\t});\n\n\t\t\t_.forEach(sharedData.all(\"carleonServices\"), function (service, serviceName) {\n\t\t\t\tvar inject = _.find(sagGenericInjectorManager.components, function (inject) {\n\t\t\t\t\treturn inject.type === serviceName && service.enabled;\n\t\t\t\t});\n\t\t\t\t_.forEach(service.element, function (element) {\n\t\t\t\t\tvar selected = !!_.find(self.script.options.tags, function (tag) {\n\t\t\t\t\t\treturn tag === \"SGMR$SCR$C$\" + serviceName + \"$\" + element.name;\n\t\t\t\t\t});\n\t\t\t\t\tvar elt = {\n\t\t\t\t\t\tsubmodule: \"carleon\", \n\t\t\t\t\t\ttype: serviceName,\n\t\t\t\t\t\ttypeTitle: $translate.instant(inject.groupTitle),\n\t\t\t\t\t\tname: element.name, \n\t\t\t\t\t\tdisplay: element.name, \n\t\t\t\t\t\tselected: selected\n\t\t\t\t\t};\n\t\t\t\t\tself.elementList.push(elt);\n\t\t\t\t\tself.tmpCheck.push(selected);\n\t\t\t\t});\n\t\t\t});\n        }\n        \n        this.selectRow = function (index) {\n\t\t\tself.elementList[index].selected = !self.elementList[index].selected;\n\t\t\tself.tmpCheck[index] = self.elementList[index].selected;\n\t\t};\n\t\t\n\t\tthis.cancel = function () {\n\t\t\t$uibModalInstance.dismiss(\"cancel\");\n\t\t};\n\t\t\n\t\tthis.ok = function () {\n\t\t\t// Script tag format: SGMR$SCR$<submodule>[$<device>]$<type>$name\n\t\t\t\n\t\t\t// First, remove all tags starting with SGMR$SCR$ for the current script\n\t\t\t_.remove(self.script.options.tags, function (tag) {\n\t\t\t\treturn tag.startsWith(\"SGMR$SCR$\");\n\t\t\t});\n\t\t\t\n\t\t\t// Second, add a tag for all selected elements\n\t\t\tvar selectedElements = _.filter(self.elementList, function (element) {\n\t\t\t\treturn element.selected;\n\t\t\t});\n\t\t\t_.forEach(selectedElements, function (element) {\n\t\t\t\tvar tag = \"SGMR$SCR$\";\n\t\t\t\tif (element.submodule === \"benoic\") {\n\t\t\t\t\ttag += \"B$\" + element.device + \"$\" + element.type + \"$\" + element.name;\n\t\t\t\t} else if (element.submodule === \"carleon\") {\n\t\t\t\t\ttag += \"C$\" + element.type + \"$\" + element.name;\n\t\t\t\t} else {\n\t\t\t\t\ttag += \"A$\" + element.type + \"$\" + element.name;\n\t\t\t\t}\n\t\t\t\tself.script.options.tags.push(tag);\n\t\t\t});\n\t\t\tangharadFactory.setScript(self.script.name, self.script).then(function () {\n\t\t\t\tsharedData.add(\"angharadScripts\", self.script.name, self.script);\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"script_save\"), $translate.instant(\"script_save_success\"));\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"script_save\"), $translate.instant(\"script_save_error\"));\n\t\t\t})[\"finally\"](function () {\n\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t});\n\t\t};\n\t\t\n        init();\n    }\n);\n\nfunction sagMonitorController ($scope, $q, $translate, toaster, angharadFactory, benoicFactory, carleonFactory, sagremorParams, sagremorConstant, sharedData) {\n    var ctrl = this;\n    \n    this.elementList = [];\n    this.elementListDisplayed = [];\n    this.colorList = [];\n    this.newElement = false;\n    this.newElementColor = false;\n    this.durationList = sagremorConstant.durationList;\n    this.duration = {value: 4};\n    \n    this.data = [];\n    this.labels = [];\n    this.series = [];\n    \n    this.datasetOverride = [{\n\t\tfill: false\n\t}];\n\t\n\n\tthis.options = {\n\t\tchart: {\n\t\t\ttype: \"lineChart\",\n\t\t\tinterpolate:\"basis\",\n\t\t\tx: function(d) { return d.timestamp; },\n\t\t\ty: function(d) { return d.value; },\n\t\t\tshowValues: true,\n\t\t\tvalueFormat: function(d){\n\t\t\t\treturn d3.format(\",.2f\")(d);\n\t\t\t},\n\t\t\ttransitionDuration: 500,\n\t\t\txScale : d3.time.scale(),\n\t\t\txAxis: {\n\t\t\t\taxisLabel: $translate.instant(\"monitor_date_axis\")\n\t\t\t},\n\t\t\tyAxis: {\n\t\t\t\taxisLabel: \"\",\n\t\t\t\taxisLabelDistance: 30\n\t\t\t}\n\t\t}\n\t};\n\n    function init() {\n\t\tupdateDevices();\n\t\tctrl.displayMonitor();\n    }\n    \n    this.tr = function (value) {\n\t\treturn $translate.instant(value);\n\t};\n\t\n    $scope.$on(\"updateMonitor-\"+ctrl.element.name, function () {\n\t\tctrl.displayMonitor();\n\t});\n\t\n\tfunction updateDevices() {\n\t\tvar devices = sharedData.all(\"benoicDevices\");\n\t\t\n\t\t_.forEach(devices, function (device, deviceName) {\n\t\t\tif (!!device.element) {\n\t\t\t\t_.forEach(device.element.switches, function (element, name) {\n\t\t\t\t\tif (element.monitored && element.enabled) {\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tdevice: deviceName,\n\t\t\t\t\t\t\ttype: \"switch\"\n\t\t\t\t\t\t};\n\t\t\t\t\t\tctrl.elementList.push(elt);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\t\n\t\t_.forEach(devices, function (device, deviceName) {\n\t\t\tif (!!device.element) {\n\t\t\t\t_.forEach(device.element.dimmers, function (element, name) {\n\t\t\t\t\tif (element.monitored && element.enabled) {\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tdevice: deviceName,\n\t\t\t\t\t\t\ttype: \"dimmer\"\n\t\t\t\t\t\t};\n\t\t\t\t\t\tctrl.elementList.push(elt);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\t\n\t\t_.forEach(devices, function (device, deviceName) {\n\t\t\tif (!!device.element) {\n\t\t\t\t_.forEach(device.element.heaters, function (element, name) {\n\t\t\t\t\tif (element.monitored && element.enabled) {\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tdevice: deviceName,\n\t\t\t\t\t\t\ttype: \"heater\"\n\t\t\t\t\t\t};\n\t\t\t\t\t\tctrl.elementList.push(elt);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\t\n\t\t_.forEach(devices, function (device, deviceName) {\n\t\t\tif (!!device.element) {\n\t\t\t\t_.forEach(device.element.sensors, function (element, name) {\n\t\t\t\t\tif (element.monitored && element.enabled) {\n\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\tdevice: deviceName,\n\t\t\t\t\t\t\ttype: \"sensor\"\n\t\t\t\t\t\t};\n\t\t\t\t\t\tctrl.elementList.push(elt);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n    this.addElement = function () {\n\t\tctrl.newElement.color = ctrl.newElementColor;\n\t\tctrl.element.elements.push(ctrl.newElement);\n\t\tangharadFactory.saveCurrentProfile().then(function () {\n\t\t\tctrl.displayMonitor();\n\t\t}, function () {\n\t\t\ttoaster.pop(\"error\", $translate.instant(\"profile_save\"), $translate.instant(\"profile_save_error\"));\n\t\t})[\"finally\"](function () {\n\t\t});\n\t};\n\t\n\tthis.displayMonitor = function() {\n\t\tvar from = new Date();\n\t\t\n\t\tswitch (ctrl.duration.value) {\n\t\t\tcase 0:\n\t\t\t\tfrom.setTime(from.getTime() - 1*60*60*1000);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tfrom.setTime(from.getTime() - 2*60*60*1000);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tfrom.setTime(from.getTime() - 6*60*60*1000);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tfrom.setTime(from.getTime() - 12*60*60*1000);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tfrom.setTime(from.getTime() - 24*60*60*1000);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tfrom.setTime(from.getTime() - 48*60*60*1000);\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tfrom.setTime(from.getTime() - 72*60*60*1000);\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tfrom.setTime(from.getTime() - 168*60*60*1000);\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tfrom.setMonth(from.getMonth() - 1);\n\t\t\t\tbreak;\n\t\t}\n\t\tctrl.colorList = angular.copy(sagremorConstant.colorList);\n\t\tctrl.elementListDisplayed = angular.copy(ctrl.elementList);\n\t\tvar httpMonitor = [];\n\t\t\n\t\t_.forEach(ctrl.element.elements, function (element) {\n\t\t\thttpMonitor.push(benoicFactory.getMonitor(element.device, element.type, element.name, Math.round(from.getTime() / 1000)));\n\t\t});\n\t\t\n\t\tctrl.data = [];\n\t\t$q.all(httpMonitor).then(function (results) {\n\t\t\tfor (key in results) {\n\t\t\t\t_.remove(ctrl.elementListDisplayed, function (curElement) {\n\t\t\t\t\treturn curElement.device === ctrl.element.elements[key].device &&\n\t\t\t\t\t\t\tcurElement.type === ctrl.element.elements[key].type &&\n\t\t\t\t\t\t\tcurElement.name === ctrl.element.elements[key].name;\n\t\t\t\t});\n\t\t\t\tctrl.series.push(ctrl.element.elements[key].display);\n                var myData = {\n\t\t\t\t\tkey: ctrl.element.elements[key].display,\n\t\t\t\t\tvalues: []\n                };\n                if (!!results[key] && results[key].length > 0) {\n\t\t\t\t\t_.forEach(results[key], function (monitor) {\n\t\t\t\t\t\tvar curDate = new Date(monitor.timestamp * 1000);\n\t\t\t\t\t\tvar value = {timestamp: curDate, value: parseFloat(monitor.value)};\n\t\t\t\t\t\tmyData.values.push(value);\n\t\t\t\t\t});\n\t\t\t\t\tctrl.data.push(myData);\n\t\t\t\t}\n\t\t\t}\n\t\t}, function (error) {\n\t\t});\n\t}\n\t\n\tthis.newElementValid = function () {\n\t\treturn !!ctrl.newElement;\n\t};\n\t\n\tthis.removeSerie = function (serie) {\n\t\tif (ctrl.element.elements.indexOf(serie) >= 0) {\n\t\t\tctrl.element.elements.splice(ctrl.element.elements.indexOf(serie), 1);\n\t\t\tangharadFactory.saveCurrentProfile().then(function () {\n\t\t\t\tctrl.displayMonitor();\n\t\t\t}, function () {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"profile_save\"), $translate.instant(\"profile_save_error\"));\n\t\t\t})[\"finally\"](function () {\n\t\t\t\tctrl.newElementColor = false;\n\t\t\t\tctrl.newElement = false;\n\t\t\t});\n\t\t}\n\t};\n    \n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"sagMonitor\", {\n    templateUrl: \"components/monitor/monitor.template.html\",\n    controller: sagMonitorController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.run(function(sagGenericInjectorManager) {\n    sagGenericInjectorManager.add({\n        type: \"monitor\",\n        directive: \"sag-monitor\",\n        carleonService: false\n    });\n});\n\nfunction sagScriptController ($rootScope, $translate, toaster, angharadFactory, sagremorParams) {\n    var ctrl = this;\n    \n    this.loaderToast = null;\n    \n    function init() {\n    }\n    \n    this.runScript = function () {\n\t\t\ttoaster.clear(self.loaderToast);\n\t\t\tself.loaderToast = toaster.pop({type: \"wait\", title: $translate.instant(\"angharad_loading_script_title\"), body: $translate.instant(\"angharad_loading_script_message\"), timeout: 0, showCloseButton: false});\n\t\t\tangharadFactory.runScript(ctrl.element.name).then(function () {\n\t\t\t\ttoaster.pop(\"success\", $translate.instant(\"script_run\", {name: ctrl.element.name}), $translate.instant(\"script_run_success\"));\n\t\t\t}, function (error) {\n\t\t\t\ttoaster.pop(\"error\", $translate.instant(\"script_run\", {name: ctrl.element.name}), $translate.instant(\"script_run_error\"));\n\t\t\t})[\"finally\"](function () {\n\t\t\t\ttoaster.clear(self.loaderToast);\n\t\t\t\t$rootScope.$broadcast(\"refresh\");\n\t\t\t});\n\t\t};\n    \n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"sagScript\", {\n    templateUrl: \"components/script/script.template.html\",\n    controller: sagScriptController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.run(function(sagGenericInjectorManager) {\n    sagGenericInjectorManager.add({\n        type: \"script\",\n        directive: \"sag-script\",\n        carleonService: false\n    });\n});\n\n/**\n * \n * action format:\n * \n * {\n *   \"submodule\": \"submodule_name\",   // Required\n *   \"element\": \"element_name\"        // Required\n *   \"command\": \"command\"             // Required\n *   \"parameters\": {                  // Required for submodule benoic, depends on the element for submodule carleon\n *     \"device\": \"device_name\"        // Required for submodule benoic\n *     \"element_type\": \"element_type\" // Required for submodule benoic\n *     \"service\": \"service_name\"      // Required for carleon\n *     \"param1\": \"value1\",            // for a string value\n *     \"param2\": 2,                   // for an integer value\n *     \"param3\", 3.3                  // for a real value\n *   }\n * \n */\nangular.module(\"sagremorApp\")\n    .controller(\"ScriptModalCtrl\",\n    function($scope, $rootScope, $uibModalInstance, $translate, toaster, sagremorConstant, sagremorService, angharadFactory, sharedData, sagGenericInjectorManager, script) {\n        var self = this;\n        \n        this.script = script;\n        this.add = false;\n        this.newAction = false;\n        this.newActionType = false;\n        this.tmpElement = {};\n        this.scriptActionElements = angular.copy(sagremorConstant.scriptActionElements);\n        this.benoicElements = {\n\t\t\t\t\tswitches: [],\n\t\t\t\t\tdimmers: [],\n\t\t\t\t\theaters: []\n\t\t\t\t}\n\t\t\t\tthis.error = {\n\t\t\t\t\tmessage: \"\"\n\t\t\t\t};\n\t\t\t\tthis.carleonConditionCommandsParameters = {};\n\t\t\t\tthis.carleonConditionElementsList = {};\n        \n        function init() {\n\t\t\t\t\tif (!self.script) {\n\t\t\t\t\t\tself.add = true;\n\t\t\t\t\t\tself.script = {\n\t\t\t\t\t\t\tactions: [],\n\t\t\t\t\t\t\toptions: {}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t_.forEach(sharedData.all(\"benoicDevices\"), function (device) {\n\t\t\t\t\t\tif (device.enabled && device.connected) {\n\t\t\t\t\t\t\t_.forEach(device.element.switches, function(element, name) {\n\t\t\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\t\t\ttype: \"switch\",\n\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\t\t\tvalue: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tself.benoicElements.switches.push(elt);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_.forEach(device.element.dimmers, function(element, name) {\n\t\t\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\t\t\ttype: \"dimmer\",\n\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\t\t\tvalue: 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tself.benoicElements.dimmers.push(elt);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_.forEach(device.element.heaters, function(element, name) {\n\t\t\t\t\t\t\t\tvar elt = {\n\t\t\t\t\t\t\t\t\tdevice: device.name,\n\t\t\t\t\t\t\t\t\ttype: \"heater\",\n\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\tdisplay: element.display,\n\t\t\t\t\t\t\t\t\tvalue: 20,\n\t\t\t\t\t\t\t\t\tavailableModes: element.value.availableModes\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tself.benoicElements.heaters.push(elt);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t_.forEach(sharedData.all(\"carleonServices\"), function (service, serviceName) {\n\t\t\t\t\t\tvar injector = _.find(sagGenericInjectorManager.components, function (inject) {\n\t\t\t\t\t\t\treturn inject.type === serviceName && service.enabled;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!!injector) {\n\t\t\t\t\t\t\t_.forEach(injector.commands, function (command, commandName) {\n\t\t\t\t\t\t\t\tvar newAction = {label: command.title, name: serviceName + \"$\" + commandName, submodule: \"carleon\"};\n\t\t\t\t\t\t\t\tself.carleonConditionElementsList[serviceName + \"$\" + commandName] = service.element;\n\t\t\t\t\t\t\t\tself.scriptActionElements.push(newAction);\n\t\t\t\t\t\t\t\tif (!!service.commands && !!service.commands[commandName]) {\n\t\t\t\t\t\t\t\t\tself.carleonConditionCommandsParameters[serviceName + \"$\" + commandName] = [];\n\t\t\t\t\t\t\t\t\t_.forEach(service.commands[commandName].parameters, function (serviceParameter, serviceParameterName) {\n\t\t\t\t\t\t\t\t\t\tvar commandParameter = {\n\t\t\t\t\t\t\t\t\t\t\tname: serviceParameterName,\n\t\t\t\t\t\t\t\t\t\t\ttitle: !!command.parameters[serviceParameterName]?$translate.instant(command.parameters[serviceParameterName]):serviceParameterName,\n\t\t\t\t\t\t\t\t\t\t\ttype: serviceParameter.type,\n\t\t\t\t\t\t\t\t\t\t\trequired: serviceParameter.required\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tself.carleonConditionCommandsParameters[serviceName + \"$\" + commandName].push(commandParameter);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\n        }\n        \n        this.setActionBenoicElement = function () {\n\t\t\t\t\tself.newAction.element = self.tmpElement.name;\n\t\t\t\t\tself.newAction.parameters.device = self.tmpElement.device;\n\t\t\t\t\tself.newAction.parameters.element_type = self.tmpElement.type;\n\t\t\t\t};\n        \n        this.setActionCarleonElement = function () {\n\t\t\t\t\tself.newAction.element = self.tmpElement.name;\n\t\t\t\t};\n        \n        this.trackBenoicElement = function(element, type) {\n\t\t\t\t\tif (!!element && !!type) {\n\t\t\t\t\t\treturn element.device + \"$\" + type + \"$\" + element.name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn \"err$err$err\";\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\n\t\t\t\tthis.trackCarleonElement = function (element, action) {\n\t\t\t\t\tif (!!element && !!action) {\n\t\t\t\t\t\treturn action + \"$\" + element.name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn \"err$err$err\";\n\t\t\t\t\t}\n\t\t\t\t};\n        \n        this.addAction = function () {\n\t\t\t\t\tself.newAction = {};\n\t\t\t\t};\n\t\t\n\t\t\t\tthis.changeActionType = function () {\n\t\t\t\t\tself.newAction = {\n\t\t\t\t\t\tsubmodule: \"\",\n\t\t\t\t\t\telement: \"\",\n\t\t\t\t\t\tparameters: {\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tswitch (self.newActionType.name) {\n\t\t\t\t\t\tcase \"switch\":\n\t\t\t\t\t\t\tself.newAction.submodule = \"benoic\";\n\t\t\t\t\t\t\tself.newAction.command = 1;\n\t\t\t\t\t\t\tself.newAction.parameters.element_type = \"switch\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"dimmer\":\n\t\t\t\t\t\t\tself.newAction.submodule = \"benoic\";\n\t\t\t\t\t\t\tself.newAction.command = 0;\n\t\t\t\t\t\t\tself.newAction.parameters.element_type = \"dimmer\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"heater\":\n\t\t\t\t\t\t\tself.newAction.submodule = \"benoic\";\n\t\t\t\t\t\t\tself.newAction.command = 20;\n\t\t\t\t\t\t\tself.newAction.parameters.element_type = \"heater\";\n\t\t\t\t\t\t\tself.newAction.parameters.mode = \"auto\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tvar newActionTypeSplitted = self.newActionType.name.split(\"$\");\n\t\t\t\t\t\t\tself.newAction.parameters.service = newActionTypeSplitted[0];\n\t\t\t\t\t\t\tself.newAction.command = newActionTypeSplitted[1];\n\t\t\t\t\t\t\tself.newAction.submodule = \"carleon\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.removeAction = function ($index) {\n\t\t\t\t\tself.script.actions.splice($index, 1);\n\t\t\t\t};\n\t\t\n        this.cancel = function () {\n            $uibModalInstance.dismiss(\"cancel\");\n        };\n        \n        this.tr = function (id) {\n\t\t\t\t\treturn $translate.instant(id);\n\t\t\t\t};\n\n\t\t\t\tthis.heaterModeDisplay = function (value) {\n\t\t\t\t\treturn $translate.instant(\"heater_mode_\" + value);\n\t\t\t\t};\n    \n        this.save = function () {\n\t\t\t\t\tif (self.add) {\n\t\t\t\t\t\tangharadFactory.addScript(self.script).then(function () {\n\t\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant('script_save'), $translate.instant('script_save_success'));\n\t\t\t\t\t\t\tsharedData.add(\"angharadScripts\", self.script.name, self.script);\n\t\t\t\t\t\t\t$rootScope.$broadcast(\"angharadScriptsChanged\");\n\t\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant('script_save'), $translate.instant('script_save_error'));\n\t\t\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tangharadFactory.setScript(self.script.name, self.script).then(function () {\n\t\t\t\t\t\t\ttoaster.pop(\"success\", $translate.instant('script_save'), $translate.instant('script_save_success'));\n\t\t\t\t\t\t\tsharedData.add(\"angharadScripts\", self.script.name, self.script);\n\t\t\t\t\t\t\t$rootScope.$broadcast(\"angharadScriptsChanged\");\n\t\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\t\ttoaster.pop(\"error\", $translate.instant('script_save'), $translate.instant('script_save_error'));\n\t\t\t\t\t\t})[\"finally\"](function () {\n\t\t\t\t\t\t\t$uibModalInstance.dismiss(\"close\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n        };\n        \n        this.getBenoicElementDisplay = function (action) {\n\t\t\t\t\tvar element = sagremorService.getBenoicElement(action.parameters.device, action.parameters.element_type, action.element);\n\t\t\t\t\tif (!!element) {\n\t\t\t\t\t\treturn element.display;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn $translate.instant(\"not_found\");\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\n        this.getCarleonElementDisplay = function (action) {\n\t\t\t\t\tvar element = sagremorService.getCarleonElement(action.parameters.service, action.element);\n\t\t\t\t\tif (!!element) {\n\t\t\t\t\t\treturn element.name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn $translate.instant(\"not_found\");\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\n\t\t\t\tthis.getCarleonElementParameters = function (action) {\n\t\t\t\t\tvar toReturn = [];\n\t\t\t\t\t_.forEach(action.parameters, function (parameter, key) {\n\t\t\t\t\t\tif (key !== \"service\") {\n\t\t\t\t\t\t\ttoReturn.push({name: key, value: parameter});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn toReturn;\n\t\t\t\t};\n\t\t\n\t\t\t\tthis.getBenoicElementValue = function (action) {\n\t\t\t\t\tswitch (action.parameters.element_type) {\n\t\t\t\t\t\tcase \"switch\":\n\t\t\t\t\t\t\treturn action.command===1?$translate.instant(\"switch_on\"):$translate.instant(\"switch_off\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"dimmer\":\n\t\t\t\t\t\t\treturn action.command + \" %\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"heater\":\n\t\t\t\t\t\t\tvar heater = sagremorService.getBenoicElement(action.parameters.device, \"heater\", action.element);\n\t\t\t\t\t\t\tif (!!heater) {\n\t\t\t\t\t\t\t\tvar unit = heater.options.unit||\"\";\n\t\t\t\t\t\t\t\treturn action.command + \" \" + unit + \" (\" + action.parameters.mode + \")\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn \"error\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t};\n        \n        this.cancelAddAction = function () {\n\t\t\t\t\tself.newAction = false;\n\t\t\t\t};\n\t\t\n\t\t\t\tthis.saveNewAction = function () {\n\t\t\t\t\tself.script.actions.push(self.newAction);\n\t\t\t\t\tself.newActionType = false;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.isScriptValid = function () {\n\t\t\t\t\tif (!self.script.name) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tvar found = _.find(sharedData.all(\"angharadScripts\"), function (script) {\n\t\t\t\t\t\treturn script.name === self.script.name;\n\t\t\t\t\t});\n\t\t\t\t\tif (!!found && self.add) {\n\t\t\t\t\t\tself.error.message = $translate.instant(\"script_error_name_exist\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (self.script.actions.length === 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.isActionValid = function () {\n\t\t\t\t\tif (!self.newActionType) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (!self.newAction.element) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (self.newActionType.submodule === \"carleon\") {\n\t\t\t\t\t\tif (!self.tmpElement) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar ret = true;\n\t\t\t\t\t\t_.forEach(self.carleonConditionCommandsParameters[self.newActionType.name], function (parameter, parameterName) {\n\t\t\t\t\t\t\tif (parameter.required && !self.newAction.parameters[parameter.name]) {\n\t\t\t\t\t\t\t\tret = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!ret) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\t\t\n\t\t\t\tthis.carleonCommand = function(command, service) {\n\t\t\t\t\tvar curCommand = _.find(self.scriptActionElements, function (action) {\n\t\t\t\t\t\treturn action.name === service + \"$\" + command;\n\t\t\t\t\t});\n\t\t\t\t\treturn curCommand?$translate.instant(curCommand.label):\"not found\";\n\t\t\t\t};\n\t\t\n\t\t\t\tthis.carleonParameter = function(parameter, service, command) {\n\t\t\t\t\tif (!!self.carleonConditionCommandsParameters) {\n\t\t\t\t\t\tvar curParameter = _.find(self.carleonConditionCommandsParameters[service + \"$\" + command], function (param) {\n\t\t\t\t\t\t\treturn param.name === parameter;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn curParameter?curParameter.title:\"not found\";\n\t\t\t\t\t}\n\t\t\t\t};\n        \n        init();\n    });\n\nfunction sagSensorController (benoicFactory, sagremorParams, $translate) {\n    var ctrl = this;\n    \n    ctrl.adminMode = sagremorParams.adminMode;\n    ctrl.element.newDisplay = ctrl.element.display;\n    ctrl.messages = {};\n    \n    function init() {\n        ctrl.element.type = \"sensor\";\n    }\n    \n    ctrl.elementDisplayValue = function() {\n\t\tvar value = ctrl.element.value;\n\t\tif (!isNaN(parseFloat(value)) && isFinite(value)) {\n\t\t\tvalue = (Math.round(value * 100) / 100);\n\t\t}\n        if (!!ctrl.element && !!ctrl.element.options.unit) {\n\t\t\tvalue += \" \" + ctrl.element.options.unit\n\t\t}\n\t\treturn value;\n\t};\n    \n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"sagSensor\", {\n    templateUrl: \"components/sensor/sensor.template.html\",\n    controller: sagSensorController,\n    bindings: {\n        element: \"=\"\n    }\n})\n.run(function(sagGenericInjectorManager) {\n    sagGenericInjectorManager.add({\n        type: \"sensor\",\n        directive: \"sag-sensor\",\n        carleonService: false\n    });\n});\n\nangular.module(\"sagremorApp\")\n    .controller(\"SensorsModalCtrl\",\n    function($scope, $uibModalInstance, $translate, toaster, sagremorConstant, benoicFactory, sensor) {\n        var self = this;\n        \n        this.sensor = sensor;\n        this.sensor.newDisplay = this.sensor.display;\n        \n        this.monitorEveryEnum = sagremorConstant.monitoredEveryEnum;\n        \n        function init() {\n\t\t\tself.sensor.menu = false;\n            \n            _.forEach(self.monitorEveryEnum, function(monitorEvery) {\n                $translate(monitorEvery.label).then(function (trLabel) {\n                    monitorEvery.trLabel = trLabel;\n                });\n            });\n        }\n        \n        this.tr = function (id) {\n\t\t\treturn $translate.instant(id);\n\t\t};\n        \n        this.cancel = function () {\n            $uibModalInstance.dismiss(\"cancel\");\n        };\n        \n        this.saveSensor = function () {\n            self.sensor.display = self.sensor.newDisplay;\n            self.sensor.monitor = self.sensor.monitorChecked?1:0;\n            benoicFactory.updateElement(self.sensor.device, \"sensor\", self.sensor.name, self.sensor).then(function (response) {\n                $scope.$broadcast(\"benoicSensorsChanged\");\n                toaster.pop(\"success\", $translate.instant(\"sensor_save\"), $translate.instant(\"sensor_save_success\"));\n            }, function (error) {\n                toaster.pop(\"error\", $translate.instant(\"sensor_save\"), $translate.instant(\"sensor_save_error\"));\n            })[\"finally\"](function () {\n                $uibModalInstance.dismiss(\"close\");\n            });\n        };\n        \n        init();\n    }\n);\n\nfunction sagSwitchController (benoicFactory, sagremorParams, $translate) {\n    var ctrl = this;\n    \n    ctrl.element.valueChecked = (ctrl.element.value === 1);\n    ctrl.adminMode = sagremorParams.adminMode;\n    ctrl.element.newDisplay = ctrl.element.display;\n    ctrl.messages = {};\n    \n    function init() {\n        ctrl.element.type = \"switch\";\n    }\n    \n    ctrl.toggleSwitcher = function () {\n        ctrl.element.value = ctrl.element.valueChecked?1:0;\n        benoicFactory.setElement(ctrl.element.device, 'switch', ctrl.element.name, ctrl.element.value);\n    };\n    \n    init();\n}\n\nangular.module('sagremorApp').component('sagSwitch', {\n    templateUrl: 'components/switch/switch.template.html',\n    controller: sagSwitchController,\n    bindings: {\n        element: '='\n    }\n})\n.run(function(sagGenericInjectorManager) {\n    sagGenericInjectorManager.add({\n        type: \"switch\",\n        directive: \"sag-switch\",\n        carleonService: false\n    });\n});\n\nangular.module(\"sagremorApp\")\n    .controller(\"SwitchesModalCtrl\",\n    function($scope, $uibModalInstance, $translate, toaster, sagremorConstant, benoicFactory, switcher) {\n        var self = this;\n        \n        this.switcher = switcher;\n        this.switcher.newDisplay = this.switcher.display;\n        \n        this.monitorEveryEnum = sagremorConstant.monitoredEveryEnum;\n        \n        function init() {\n\t\t\tself.switcher.menu = false;\n            \n            _.forEach(self.monitorEveryEnum, function(monitorEvery) {\n                $translate(monitorEvery.label).then(function (trLabel) {\n                    monitorEvery.trLabel = trLabel;\n                });\n            });\n        }\n        \n        this.cancel = function () {\n            $uibModalInstance.dismiss(\"cancel\");\n        };\n        \n        this.tr = function (id) {\n\t\t\treturn $translate.instant(id);\n\t\t};\n        \n        this.saveSwitcher = function () {\n            self.switcher.display = self.switcher.newDisplay;\n            self.switcher.monitor = self.switcher.monitorChecked?1:0;\n            benoicFactory.updateElement(self.switcher.device, \"switch\", self.switcher.name, self.switcher).then(function (response) {\n                $scope.$broadcast(\"benoicSwitchesChanged\");\n                toaster.pop(\"success\", $translate.instant(\"switch_save\"), $translate.instant(\"switch_save_success\"));\n            }, function (error) {\n                toaster.pop(\"error\", $translate.instant(\"switch_save\"), $translate.instant(\"switch_save_error\"));\n            })[\"finally\"](function () {\n                $uibModalInstance.dismiss(\"close\");\n            });\n        };\n        \n        init();\n    }\n);\n\nfunction topLeftMenuCtrl ($scope, $translate, sagremorParams, sagGenericInjectorManager, sharedData) {\n    var self = this;\n    \n    this.serviceList = [];\n    this.sagremorParams = sagremorParams;\n    \n    function init() {\n\t\tself.loadMenu();\n\t}\n\t\n\tthis.loadMenu = function () {\n\t\tself.serviceList = [];\n\t\t_.forEach(sagGenericInjectorManager.components, function (inject) {\n\t\t\tvar service = sharedData.get(\"carleonServices\", inject.type);\n\t\t\tif (inject.carleonService && inject.leftMenu && !!service && service.enabled) {\n\t\t\t\tvar menu = inject.leftMenu;\n\t\t\t\tmenu.icon = inject.icon;\n\t\t\t\tif (!_.find(self.serviceList, {target: menu.target})) {\n\t\t\t\t\tself.serviceList.push(menu);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n    \n    /**\n     * Because I couldn't find how to do it with otherwise...\n     */\n    this.selectTab = function (tabName) {\n        $(\".sag-menu\").removeClass(\"active\");\n        $(tabName).addClass(\"active\");\n    };\n    \n\t$scope.$on(\"submodulesChanged\", function () {\n\t\tself.sagremorParams = sagremorParams;\n\t});\n\t\n\t$scope.$on(\"carleonServicesChanged\", function () {\n\t\tself.loadMenu();\n\t});\n\n    init();\n}\n\nangular.module(\"sagremorApp\").component(\"topLeftMenu\", {\n    templateUrl: \"components/topLeftMenu/topLeftMenu.template.html\",\n    controller: topLeftMenuCtrl,\n    controllerAs: \"topLeftMenuCtrl\"\n});\n\nfunction topRightMenuCtrl($scope, $rootScope, $location, $http, $translate, $cookies, angharadFactory, sagremorConstant, sagremorParams, angharadConfig) {\n\tvar self = this;\n\n\tself.sagremorParams = sagremorParams;\n\n\tself.selectedLang = $translate.use();\n\n\tself.langList = sagremorConstant.langList;\n\n\tself.profiles = sagremorParams.profiles;\n\tself.currentProfileName = !!sagremorParams.currentProfile ? sagremorParams.currentProfile.name : \"\";\n\n\tself.oauth2 = angharadConfig.oauth2;\n\n\tif ($location.search().type) {\n\t\tself.oauth2.responseType = $location.search().type;\n\t}\n\n\tself.changeLang = function() {\n\t\t$translate.use(self.selectedLang).then(function() {\n\t\t\t$rootScope.$broadcast(\"changeLang\");\n\t\t});\n\t};\n\n\tself.changeProfile = function() {\n\t\t_.forEach(sagremorParams.profiles, function(profile) {\n\t\t\tif (profile.name === self.currentProfileName) {\n\t\t\t\tsagremorParams.currentProfile = profile;\n\t\t\t\tvar now = new Date();\n\t\t\t\tvar exp = new Date(now.getFullYear() + 10, now.getMonth(), now.getDate());\n\t\t\t\t$cookies.put(\"ANGHARAD_PROFILE\", self.currentProfileName, {\n\t\t\t\t\texpires: exp\n\t\t\t\t});\n\t\t\t\t$rootScope.$broadcast(\"angharadProfileUpdated\");\n\t\t\t\t$rootScope.$broadcast(\"refreshDashboard\");\n\t\t\t}\n\t\t});\n\t};\n\n\tself.refresh = function() {\n\t\t$rootScope.$broadcast(\"refresh\");\n\t};\n\n\tself.reconnect = function() {\n\t\t$rootScope.$broadcast(\"reconnect\");\n\t};\n\n\t$scope.$on(\"angharadProfileChanged\", function() {\n\t\tself.profiles = sagremorParams.profiles;\n\t\tself.currentProfileName = !!sagremorParams.currentProfile ? sagremorParams.currentProfile.name : \"\";\n\t});\n\n\t$scope.$on(\"angharadProfileUpdated\", function() {\n\t\tself.profiles = sagremorParams.profiles;\n\t\tself.currentProfileName = !!sagremorParams.currentProfile ? sagremorParams.currentProfile.name : \"\";\n\t});\n}\n\nangular.module(\"sagremorApp\").component(\"topRightMenu\", {\n\ttemplateUrl: \"components/topRightMenu/topRightMenu.template.html\",\n\tcontroller: topRightMenuCtrl,\n\tcontrollerAs: \"topRightMenuCtrl\"\n});\n\nangular.module(\"sagremorApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/dashboard/dashboard.html\",\"<div><h1 data-translate=\\\"dashboard_title\\\"></h1><h2 data-ng-bind=\\\"DashboardCtrl.profileName\\\"></h2><div class=\\\"row\\\" data-ng-if=\\\"DashboardCtrl.sagremorParams.adminMode\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" name=\\\"addTitleLine\\\" id=\\\"addTitleLine\\\" data-ng-click=\\\"DashboardCtrl.addTitleLine()\\\" data-translate=\\\"dashboard_button_add_title_line\\\"></button><hr></div><div class=\\\"row\\\"><div class=\\\"col-md-12\\\"><div data-gridstack=\\\"\\\" class=\\\"grid-stack grid1\\\" data-options=\\\"DashboardCtrl.options\\\" data-on-change=\\\"DashboardCtrl.onChange(event, items)\\\"><div data-gridstack-item=\\\"\\\" data-ng-repeat=\\\"w in DashboardCtrl.dashboardWidgetsDisplay\\\" class=\\\"grid-stack-item\\\" data-gs-no-resize=\\\"true\\\" data-gs-item-x=\\\"w.x\\\" data-gs-item-y=\\\"w.y\\\" data-gs-item-width=\\\"w.width\\\" data-gs-item-height=\\\"w.height\\\" data-gs-min-width=\\\"3\\\" data-gs-item-autopos=\\\"0\\\" data-sag-type=\\\"{{w.type}}\\\" data-sag-device=\\\"{{w.device}}\\\" data-sag-name=\\\"{{w.name}}\\\" data-sag-profile=\\\"{{w.profile}}\\\"><div class=\\\"grid-stack-item-content\\\" data-ng-if=\\\"w.type !== \\'separator\\'\\\"><data-sag-container data-menu=\\\"DashboardCtrl.menu\\\" data-size=\\\"1\\\" data-title=\\\"w.element.display || w.element.name\\\" data-element=\\\"w\\\" data-dashboard=\\\"true\\\" data-type=\\\"w.type\\\" data-sag-params=\\\"DashboardCtrl.sagremorParams\\\" data-icon=\\\"w.icon\\\"><div data-sag-generic-injector=\\\"\\\" data-type=\\\"w.type\\\" data-elt=\\\"w.element\\\"></div></data-sag-container></div><div data-ng-if=\\\"w.type === \\'separator\\'\\\"><div class=\\\"sag-container-header-menu\\\" data-uib-dropdown=\\\"\\\"><button class=\\\"btn btn-primary text-left\\\" data-ng-if=\\\"DashboardCtrl.sagremorParams.adminMode\\\" type=\\\"button\\\" data-uib-dropdown-toggle=\\\"\\\" data-ng-click=\\\"\\\">#</button><ul data-uib-dropdown-menu=\\\"\\\"><li><a href=\\\"\\\" data-ng-click=\\\"DashboardCtrl.removeFromDashboard(w)\\\" data-translate=\\\"remove_from_dashboard\\\"></a></li></ul><fieldset class=\\\"grid-stack-item-content\\\" dir=\\\"ltr\\\"><legend data-ng-bind=\\\"w.name\\\" class=\\\"sag-separator\\\"></legend></fieldset></div></div></div></div></div></div><div class=\\\"row\\\" data-ng-if=\\\"!DashboardCtrl.connected\\\"><div class=\\\"col-md-12\\\"><h3 data-translate=\\\"connect_message\\\"></h3></div></div></div>\");\n$templateCache.put(\"app/error/error.html\",\"<div><div class=\\\"container\\\"><h1 data-translate=\\\"{{ErrorCtrl.errorMessage}}\\\"></h1></div></div>\");\n$templateCache.put(\"app/events/events.html\",\"<div><h1 data-translate=\\\"events_title\\\"></h1><div class=\\\"row\\\" data-ng-if=\\\"eventsCtrl.sagremorParams.adminMode\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" name=\\\"addEvent\\\" id=\\\"addEvent\\\" data-ng-click=\\\"eventsCtrl.newEvent()\\\" data-translate=\\\"events_button_add\\\"></button></div><hr data-ng-if=\\\"eventsCtrl.schedulerList.length > 0\\\"><h2 data-translate=\\\"schedulers_title\\\" data-ng-if=\\\"eventsCtrl.schedulerList.length > 0\\\"></h2><div class=\\\"row\\\"><div data-ng-repeat=\\\"scheduler in eventsCtrl.schedulerList track by $index\\\" class=\\\"col-sm-3\\\"><data-sag-container data-menu=\\\"eventsCtrl.menuScheduler\\\" data-size=\\\"1\\\" data-title=\\\"scheduler.name\\\" data-type=\\\"\\'scheduler\\'\\\" data-element=\\\"scheduler\\\" data-icon=\\\"\\'calendar\\'\\\"><data-sag-scheduler data-element=\\\"scheduler\\\"></data-sag-scheduler></data-sag-container></div></div><hr data-ng-if=\\\"eventsCtrl.triggerList.length > 0\\\"><h2 data-translate=\\\"triggers_title\\\" data-ng-if=\\\"eventsCtrl.triggerList.length > 0\\\"></h2><div class=\\\"row\\\"><div data-ng-repeat=\\\"trigger in eventsCtrl.triggerList track by $index\\\" class=\\\"col-sm-3\\\"><data-sag-container data-menu=\\\"eventsCtrl.menuTrigger\\\" data-size=\\\"1\\\" data-title=\\\"trigger.name\\\" data-type=\\\"\\'trigger\\'\\\" data-element=\\\"trigger\\\" data-icon=\\\"\\'bell\\'\\\"><data-sag-trigger data-element=\\\"trigger\\\"></data-sag-trigger></data-sag-container></div></div></div>\");\n$templateCache.put(\"app/heaters/heaters.html\",\"<div><h1 data-translate=\\\"heaters_title\\\"></h1><div class=\\\"row\\\"><div data-ng-repeat=\\\"heater in heatersCtrl.heaterList\\\" class=\\\"col-sm-3\\\" data-ng-if=\\\"heater.enabled || heatersCtrl.sagremorParams.adminMode\\\"><data-sag-container data-menu=\\\"heatersCtrl.menuSensor\\\" data-size=\\\"1\\\" data-title=\\\"heater.display\\\" data-type=\\\"\\'heater\\'\\\" data-element=\\\"heater\\\" data-icon=\\\"\\'fire\\'\\\"><data-sag-heater data-element=\\\"heater\\\"></data-sag-heater></data-sag-container></div></div></div>\");\n$templateCache.put(\"app/login/login.html\",\"<div class=\\\"col-xs-6 controls\\\"><label data-translate=\\\"top_right_menu_login\\\" data-ng-if=\\\"responseType !== \\'password\\' && show==\\'logged-out\\'\\\"></label> <label data-translate=\\\"top_right_menu_logout\\\" data-ng-if=\\\"show==\\'logged-in\\'\\\"></label> <label data-translate=\\\"top_right_menu_access_denied\\\" data-ng-if=\\\"responseType !== \\'password\\' && show==\\'denied\\'\\\"></label></div><div class=\\\"col-xs-6 controls\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" data-ng-if=\\\"responseType !== \\'password\\' && show==\\'logged-out\\' || show==\\'denied\\'\\\" data-ng-click=\\\"login()\\\"><i class=\\\"fa fa-sign-in\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" data-ng-if=\\\"show==\\'logged-in\\'\\\" data-ng-click=\\\"logout()\\\"><i class=\\\"fa fa-sign-out\\\" aria-hidden=\\\"true\\\"></i></button></div><div class=\\\"col-xs-12\\\"><div data-ng-show=\\\"responseType === \\'password\\' && show !== \\'logged-in\\'\\\"><form><div><label>Login</label> <input type=\\\"text\\\" data-ng-model=\\\"typedLogin\\\" placeholder=\\\"login\\\"></div><div><label>Password</label> <input type=\\\"password\\\" data-ng-model=\\\"typedPassword\\\" placeholder=\\\"password\\\"></div><div><label>Keep connection</label> <input type=\\\"checkbox\\\" data-ng-model=\\\"typedKeepConnection\\\"></div><input type=\\\"submit\\\" class=\\\"btn btn-primary btn-sm\\\" value=\\\"Submit\\\" data-ng-click=\\\"checkPassword()\\\"></form></div></div>\");\n$templateCache.put(\"app/logs/filters.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal_title\\\" data-translate=\\\"logs_filter_modal_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><div class=\\\"col-xs-4 controls\\\" data-ng-if=\\\"!FiltersModalCtrl.displayAlert\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.newFilter()\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"logs_filter_new_button\\\"></span></button></div><div class=\\\"col-xs-4 controls\\\" data-ng-if=\\\"!FiltersModalCtrl.displayAlert\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.showAlerts()\\\"><i class=\\\"fa fa-bolt\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"logs_alerts_delete_button\\\"></span></button></div><div class=\\\"col-xs-4 controls\\\" data-ng-if=\\\"FiltersModalCtrl.displayAlert\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.showFilters()\\\"><i class=\\\"fa fa-bolt\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"logs_filters_show_button\\\"></span></button></div></div><div data-ng-if=\\\"FiltersModalCtrl.editFilter && !FiltersModalCtrl.displayAlert\\\"><hr><h3 data-translate=\\\"filter_table_edit\\\" data-ng-if=\\\"!FiltersModalCtrl.addFilter\\\"></h3><h3 data-translate=\\\"filter_table_new\\\" data-ng-if=\\\"FiltersModalCtrl.addFilter\\\"></h3><table class=\\\"table table-hover\\\"><thead><tr><th data-translate=\\\"filter_table_name\\\"></th><th data-translate=\\\"filter_table_description\\\"></th></tr></thead><tbody><tr><td><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"filterName\\\" id=\\\"filterName\\\" data-ng-model=\\\"FiltersModalCtrl.customFilter.name\\\" data-ng-disabled=\\\"!FiltersModalCtrl.addFilter\\\"></td><td><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"filterDescription\\\" id=\\\"filterDescription\\\" data-ng-model=\\\"FiltersModalCtrl.customFilter.description\\\"></td></tr></tbody></table><div class=\\\"row control-group\\\"><div class=\\\"col-xs-4 controls\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.addClause()\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"logs_clause_new_button\\\"></span></button></div><div class=\\\"col-xs-4 controls\\\"><div data-uib-dropdown=\\\"\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.addAlert()\\\" data-uib-dropdown-toggle=\\\"\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"logs_alert_new_button\\\"></span></button><ul data-uib-dropdown-menu=\\\"\\\"><li data-ng-repeat=\\\"menuItem in FiltersModalCtrl.menu\\\"><a href=\\\"\\\" data-ng-click=\\\"FiltersModalCtrl.menuSelect(menuItem, $ctrl.element)\\\" data-ng-bind=\\\"menuItem.display\\\"></a></li></ul></div></div></div><h3 data-translate=\\\"filter_table_clauses\\\"></h3><table class=\\\"table table-hover\\\"><thead><tr><th data-translate=\\\"clause_table_element\\\"></th><th data-translate=\\\"clause_table_operator\\\"></th><th data-translate=\\\"clause_table_value\\\"></th><th></th><th></th></tr></thead><tbody><tr data-ng-if=\\\"FiltersModalCtrl.newClause\\\"><td><select class=\\\"form-control\\\" data-ng-model=\\\"FiltersModalCtrl.customClause.element\\\"><option value=\\\"priority\\\" data-translate=\\\"clause_option_priority\\\"></option><option value=\\\"source\\\" data-translate=\\\"clause_option_source\\\"></option><option value=\\\"message\\\" data-translate=\\\"clause_option_message\\\"></option><option value=\\\"tag\\\" data-translate=\\\"clause_option_tag\\\"></option></select></td><td><select class=\\\"form-control\\\" data-ng-model=\\\"FiltersModalCtrl.customClause.operator\\\"><option value=\\\"=\\\" data-translate=\\\"clause_operator_equal\\\"></option><option value=\\\"!=\\\" data-translate=\\\"clause_operator_different\\\"></option><option value=\\\"<\\\" data-translate=\\\"clause_operator_lower\\\"></option><option value=\\\"<=\\\" data-translate=\\\"clause_operator_lower_equal\\\"></option><option value=\\\">\\\" data-translate=\\\"clause_operator_higher\\\"></option><option value=\\\">=\\\" data-translate=\\\"clause_operator_higher_equal\\\"></option><option value=\\\"contains\\\" data-translate=\\\"clause_operator_contains\\\"></option><option value=\\\"notcontains\\\" data-translate=\\\"clause_operator_notcontains\\\"></option></select></td><td><select class=\\\"form-control\\\" data-ng-model=\\\"FiltersModalCtrl.customClause.value\\\" data-ng-if=\\\"FiltersModalCtrl.customClause.element === \\'priority\\'\\\"><option value=\\\"0\\\" data-translate=\\\"logs_priority_none\\\"></option><option value=\\\"1\\\" data-translate=\\\"logs_priority_low\\\"></option><option value=\\\"2\\\" data-translate=\\\"logs_priority_medium\\\"></option><option value=\\\"3\\\" data-translate=\\\"logs_priority_high\\\"></option><option value=\\\"4\\\" data-translate=\\\"logs_priority_critical\\\"></option></select><input type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customClause.value\\\" data-ng-if=\\\"FiltersModalCtrl.customClause.element !== \\'priority\\'\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.addNewClause()\\\" data-ng-disabled=\\\"!FiltersModalCtrl.isClauseValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.cancelAddClause()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr><tr data-ng-repeat=\\\"clause in FiltersModalCtrl.customFilter.filter_clauses track by $index\\\"><td data-ng-bind=\\\"FiltersModalCtrl.getClauseElement(clause.element)\\\"></td><td data-ng-bind=\\\"FiltersModalCtrl.getClauseOperator(clause.operator)\\\"></td><td data-ng-bind=\\\"FiltersModalCtrl.getClauseValue(clause)\\\"></td><td></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.removeClause($index)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></tbody></table><h3 data-translate=\\\"filter_table_alerts\\\"></h3><table class=\\\"table table-hover\\\"><thead><tr><th data-translate=\\\"alert_table_name\\\"></th><th data-translate=\\\"alert_table_type\\\"></th><th></th></tr></thead><tbody><tr data-ng-repeat=\\\"alert in FiltersModalCtrl.customFilter.filter_alerts.smtp track by $index\\\"><td data-ng-bind=\\\"alert\\\"></td><td>SMTP</td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.removeAlert(\\'smtp\\', $index)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td></tr><tr data-ng-repeat=\\\"alert in FiltersModalCtrl.customFilter.filter_alerts.http track by $index\\\"><td data-ng-bind=\\\"alert\\\"></td><td>HTTP</td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.removeAlert(\\'http\\', $index)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></tbody></table><div data-ng-if=\\\"FiltersModalCtrl.newAlertSmtp\\\"><div class=\\\"row control-group\\\"><h3 data-translate=\\\"alert_smtp_title\\\"></h3><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_select\\\"></label></div><div class=\\\"controls col-xs-6\\\"><select id=\\\"logsSearchFilter\\\" class=\\\"form-control\\\" data-ng-model=\\\"FiltersModalCtrl.existingSmtpAlert\\\" data-ng-options=\\\"alert.name for alert in FiltersModalCtrl.AlertSmtpList\\\" data-ng-disabled=\\\"!FiltersModalCtrl.AlertSmtpList || FiltersModalCtrl.AlertSmtpList.length === 0\\\"><option value=\\\"\\\"></option></select></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-12 text-center\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_or\\\"></label></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_name\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input required=\\\"\\\" type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.name\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_host\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" required=\\\"\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.host\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_port\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"number\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.port\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_tls\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.tls\\\" data-ng-checked=\\\"false\\\" data-switch-active=\\\"{{!FiltersModalCtrl.existingSmtpAlert}}\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_check_ca\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.check_ca\\\" data-ng-checked=\\\"false\\\" data-switch-active=\\\"{{!FiltersModalCtrl.existingSmtpAlert}}\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_user\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.user\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_password\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.password\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_from\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" data-uib-tooltip=\\\"{{\\'alert_smtp_emails_tooltip\\' | translate}}\\\" required=\\\"\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.from\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_to\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" required=\\\"\\\" data-uib-tooltip=\\\"{{\\'alert_smtp_emails_tooltip\\' | translate}}\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.to\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_cc\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" data-uib-tooltip=\\\"{{\\'alert_smtp_emails_tooltip\\' | translate}}\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.cc\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_bcc\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" data-uib-tooltip=\\\"{{\\'alert_smtp_emails_tooltip\\' | translate}}\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.bcc\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_subject\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" data-uib-tooltip=\\\"{{\\'alert_subject_body_tooltip\\' | translate}}\\\" required=\\\"\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.subject\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_smtp_body\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" data-uib-tooltip=\\\"{{\\'alert_subject_body_tooltip\\' | translate}}\\\" required=\\\"\\\" data-ng-model=\\\"FiltersModalCtrl.customSmtpAlert.body\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingSmtpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"></div><div class=\\\"controls col-xs-6\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.postNewSmtpAlert()\\\" data-ng-disabled=\\\"!FiltersModalCtrl.isSmtpAlertValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.cancelAddSmtpAlert()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></div></div><hr></div><div data-ng-if=\\\"FiltersModalCtrl.newAlertHttp\\\"><h3 data-translate=\\\"alert_http_title\\\"></h3><div class=\\\"row control-group required\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_http_select\\\"></label></div><div class=\\\"controls col-xs-6\\\"><select id=\\\"logsSearchFilter\\\" class=\\\"form-control\\\" data-ng-model=\\\"FiltersModalCtrl.existingHttpAlert\\\" data-ng-options=\\\"alert.name for alert in FiltersModalCtrl.AlertHttpList\\\" data-ng-disabled=\\\"!FiltersModalCtrl.AlertHttpList || FiltersModalCtrl.AlertHttpList.length === 0\\\"><option value=\\\"\\\"></option></select></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-12 text-center\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_or\\\"></label></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_http_name\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input required=\\\"\\\" type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customHttpAlert.name\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingHttpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_http_method\\\"></label></div><div class=\\\"controls col-xs-6\\\"><select required=\\\"\\\" data-ng-model=\\\"FiltersModalCtrl.customHttpAlertMethodSelect\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingHttpAlert\\\"><option value=\\\"GET\\\">GET</option><option value=\\\"POST\\\">POST</option><option value=\\\"PUT\\\">PUT</option><option value=\\\"DELETE\\\">DELETE</option><option value=\\\"custom\\\" data-translate=\\\"alert_http_method_other\\\"></option></select></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"FiltersModalCtrl.customHttpAlertMethodSelect === \\'custom\\'\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_http_method_custom\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customHttpAlert.method\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingHttpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_http_url\\\"></label></div><div class=\\\"controls col-xs-6\\\"><input required=\\\"\\\" type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customHttpAlert.url\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"FiltersModalCtrl.existingHttpAlert\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_http_body\\\"></label></div><div class=\\\"controls col-xs-6\\\"><textarea data-uib-tooltip=\\\"{{\\'alert_subject_body_tooltip\\' | translate}}\\\" required=\\\"\\\" class=\\\"form-control\\\" data-ng-model=\\\"FiltersModalCtrl.customHttpAlert.body\\\">\\n\t\t\t\t\t\t</textarea></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_http_headers\\\"></label></div><div class=\\\"controls col-xs-6\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.addAlertHttpHeader()\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i></button></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-translate=\\\"alert_http_header_key\\\"></label></div><div class=\\\"controls col-xs-6\\\"><label data-translate=\\\"alert_http_header_value\\\"></label></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"FiltersModalCtrl.newAlertHttpHeader && !FiltersModalCtrl.existingHttpAlert\\\"><div class=\\\"controls col-xs-4\\\"><input type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customHttpAlertHeader.key\\\" class=\\\"form-control\\\"></div><div class=\\\"controls col-xs-4\\\"><input type=\\\"text\\\" data-ng-model=\\\"FiltersModalCtrl.customHttpAlertHeader.value\\\" class=\\\"form-control\\\"></div><div class=\\\"controls col-xs-4\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.addNewAlertHttpHeader()\\\" data-ng-disabled=\\\"!FiltersModalCtrl.customHttpAlertHeader.key || !FiltersModalCtrl.customHttpAlertHeader.value\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.cancelAddAlertHttpHeader()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></div></div><div class=\\\"row control-group\\\" data-ng-repeat=\\\"header in FiltersModalCtrl.customHttpAlert.http_headers\\\"><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-ng-bind=\\\"header.key\\\"></label></div><div class=\\\"controls col-xs-6\\\"><label class=\\\"control-label\\\" data-ng-bind=\\\"header.value\\\"></label></div></div><div class=\\\"row control-group\\\"><div class=\\\"controls col-xs-6\\\"></div><div class=\\\"controls col-xs-6\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.postNewHttpAlert()\\\" data-ng-disabled=\\\"!FiltersModalCtrl.isHttpAlertValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.cancelAddHttpAlert()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></div></div><hr></div><div class=\\\"row control-group\\\"><div class=\\\"col-xs-6\\\"></div><div class=\\\"col-xs-3\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary pull-right\\\" data-ng-click=\\\"FiltersModalCtrl.postNewFilter()\\\" data-ng-disabled=\\\"!FiltersModalCtrl.isFilterValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"btn_ok\\\"></span></button></div><div class=\\\"col-xs-3\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary pull-right\\\" data-ng-click=\\\"FiltersModalCtrl.cancelNewFilter()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"btn_cancel\\\"></span></button></div></div></div><div data-ng-if=\\\"!FiltersModalCtrl.editFilter && !FiltersModalCtrl.displayAlert\\\"><table class=\\\"table table-hover\\\"><thead><tr><th data-translate=\\\"filter_table_name\\\"></th><th data-translate=\\\"filter_table_description\\\"></th><th data-translate=\\\"filter_table_clauses\\\"></th><th data-translate=\\\"filter_table_alerts\\\"></th><th></th></tr></thead><tr data-ng-repeat=\\\"filter in FiltersModalCtrl.filterList track by $index\\\"><td data-ng-bind=\\\"filter.name\\\"></td><td data-ng-bind=\\\"filter.description\\\"></td><td><div class=\\\"row-fluid\\\" data-ng-repeat=\\\"clause in filter.filter_clauses\\\"><span data-ng-bind=\\\"FiltersModalCtrl.getClauseElement(clause.element)\\\"></span> <span data-ng-bind=\\\"FiltersModalCtrl.getClauseOperator(clause.operator)\\\"></span> <span data-ng-bind=\\\"FiltersModalCtrl.getClauseValue(clause)\\\"></span></div></td><td><div class=\\\"row\\\" data-ng-if=\\\"filter.filter_alerts.smtp.length\\\"><div class=\\\"col-xs-3\\\"><strong><span data-translate=\\\"logs_alert_list_smtp\\\"></span></strong></div><div class=\\\"col-xs-9\\\"><span class=\\\"pull-right\\\" data-ng-bind=\\\"filter.filter_alerts.smtp.join(\\', \\')\\\"></span></div></div><div class=\\\"row\\\" data-ng-if=\\\"filter.filter_alerts.http.length\\\"><div class=\\\"col-xs-3\\\"><strong><span data-translate=\\\"logs_alert_list_http\\\"></span></strong></div><div class=\\\"col-xs-9\\\"><span class=\\\"pull-right\\\" data-ng-bind=\\\"filter.filter_alerts.http.join(\\', \\')\\\"></span></div></div></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.editCustomFilter(filter)\\\"><i class=\\\"fa fa-pencil\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.removeCustomFilter(filter)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></table></div><div data-ng-if=\\\"FiltersModalCtrl.displayAlert\\\"><h4 data-translate=\\\"logs_menu_smtp\\\"></h4><div class=\\\"row\\\" data-ng-repeat=\\\"alertSmtp in FiltersModalCtrl.AlertSmtpList\\\"><div class=\\\"col-xs-2\\\"></div><div class=\\\"col-xs-4\\\" data-ng-bind=\\\"alertSmtp.name\\\"></div><div class=\\\"col-xs-4\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.removeSmtpAlert(alertSmtp)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></div></div><h4 data-translate=\\\"logs_menu_http\\\"></h4><div class=\\\"row\\\" data-ng-repeat=\\\"alertHttp in FiltersModalCtrl.AlertHttpList\\\"><div class=\\\"col-xs-2\\\"></div><div class=\\\"col-xs-4\\\" data-ng-bind=\\\"alertHttp.name\\\"></div><div class=\\\"col-xs-4\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"FiltersModalCtrl.removeHttpAlert(alertHttp)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></div></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"FiltersModalCtrl.close()\\\" data-translate=\\\"btn_close\\\"></button></div></div>\");\n$templateCache.put(\"app/logs/logs.html\",\"<div><h1 data-translate=\\\"logs_title\\\"></h1><div class=\\\"row control-group\\\"><div class=\\\"col-xs-1 controls\\\"><label for=\\\"logsSearchLimit\\\" data-translate=\\\"logs_search_limit\\\"></label></div><div class=\\\"col-xs-2 controls\\\"><input type=\\\"number\\\" min=\\\"1\\\" class=\\\"form-control\\\" name=\\\"logsSearchLimit\\\" id=\\\"logsSearchLimit\\\" data-ng-model=\\\"logsCtrl.searchOptions.limit\\\"></div><div class=\\\"col-xs-1 controls\\\"><label for=\\\"logsSearchOffset\\\" data-translate=\\\"logs_search_offset\\\"></label></div><div class=\\\"col-xs-2 controls\\\"><input type=\\\"number\\\" min=\\\"0\\\" class=\\\"form-control\\\" name=\\\"logsSearchOffset\\\" id=\\\"logsSearchOffset\\\" data-ng-model=\\\"logsCtrl.searchOptions.offset\\\"></div><div class=\\\"col-xs-1 controls\\\"><label for=\\\"logsSearchFilter\\\" data-translate=\\\"logs_search_filter\\\"></label></div><div class=\\\"col-xs-2 controls\\\"><select id=\\\"logsSearchFilter\\\" class=\\\"form-control\\\" data-ng-model=\\\"logsCtrl.searchOptions.filter\\\" data-ng-options=\\\"filter.name for filter in logsCtrl.filterList\\\" data-ng-disabled=\\\"logsCtrl.filterList.length === 0\\\"><option value=\\\"\\\"></option></select></div><div class=\\\"col-xs-3\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary pull-right\\\" data-ng-click=\\\"logsCtrl.search()\\\" style=\\\"margin-left: 5px; margin-bottom: 5px;\\\"><i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"logs_search_button\\\"></span></button> <button type=\\\"button\\\" class=\\\"btn btn-primary pull-right\\\" data-ng-click=\\\"logsCtrl.filterManagement()\\\" style=\\\"margin-left: 5px; margin-bottom: 5px;\\\"><i class=\\\"fa fa-filter\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"logs_filter_button\\\"></span></button></div></div><hr><table data-datatable=\\\"ng\\\" data-dt-options=\\\"logsCtrl.options\\\" class=\\\"table table-hover table-striped table-bordered dataTable\\\"><thead><tr><th data-translate=\\\"logs_table_date\\\"></th><th data-translate=\\\"logs_table_priority\\\"></th><th data-translate=\\\"logs_table_source\\\"></th><th data-translate=\\\"logs_table_text\\\"></th><th data-translate=\\\"logs_table_tags\\\"></th></tr></thead><tbody><tr data-ng-repeat=\\\"message in logsCtrl.messageList\\\"><td>{{message.date | date : \\'medium\\'}}</td><td>{{logsCtrl.getPriority(message)}}</td><td>{{message.source}}</td><td>{{message.text}}</td><td><span data-ng-repeat=\\\"tag in message.tags\\\">{{tag}}</span></td></tr></tbody></table></div>\");\n$templateCache.put(\"app/monitors/monitors.html\",\"<div><h1 data-translate=\\\"monitors_title\\\"></h1><div class=\\\"row\\\" data-ng-if=\\\"monitorsCtrl.sagremorParams.adminMode\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" name=\\\"addMonitor\\\" id=\\\"addMonitor\\\" data-ng-click=\\\"monitorsCtrl.newMonitor()\\\" data-translate=\\\"monitors_button_add\\\"></button></div><hr><div class=\\\"row\\\"><div data-ng-repeat=\\\"monitor in monitorsCtrl.monitorList track by monitor.name\\\" class=\\\"col-sm-6\\\"><data-sag-container data-menu=\\\"monitorsCtrl.menu\\\" data-title=\\\"monitor.name\\\" data-type=\\\"\\'monitor\\'\\\" data-element=\\\"monitor\\\" data-icon=\\\"\\'bar-chart\\'\\\"><data-sag-monitor data-element=\\\"monitor\\\"></data-sag-monitor></data-sag-container></div></div></div>\");\n$templateCache.put(\"app/parameters/parameters.html\",\"<div><h1 data-translate=\\\"parameters_title\\\"></h1><h3 data-translate=\\\"param_submodule_title\\\"></h3><div class=\\\"row\\\"><div class=\\\"col-xs-2\\\"><label for=\\\"submodule-benoic\\\" data-translate=\\\"param_submodule_benoic\\\"></label></div><div class=\\\"col-xs-2\\\"><input data-ng-change=\\\"ParametersCtrl.submoduleEnable(\\'benoic\\')\\\" id=\\\"submodule-benoic\\\" name=\\\"submodule-benoic\\\" data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"ParametersCtrl.submodules.benoic.enabled\\\"></div><div class=\\\"col-xs-2\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"ParametersCtrl.reloadBenoicDeviceTypes()\\\" data-ng-disabled=\\\"!ParametersCtrl.submodules.benoic.enabled\\\"><i aria-hidden=\\\"true\\\" class=\\\"fa fa-refresh\\\"></i> <span data-translate=\\\"param_submodule_benoic_reload_types\\\"></span></button></div></div><h4 data-translate=\\\"param_benoic_device_type_list\\\"></h4><div class=\\\"row\\\" data-ng-repeat=\\\"type in ParametersCtrl.deviceTypes track by $index\\\"><div class=\\\"col-xs-2\\\" data-ng-bind=\\\"type.name\\\"></div><div class=\\\"col-xs-2\\\"><input data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"type.enabled\\\" data-switch-active=\\\"false\\\"></div></div><hr><div class=\\\"row\\\"><div class=\\\"col-xs-2\\\"><label for=\\\"submodule-carleon\\\" data-translate=\\\"param_submodule_carleon\\\"></label></div><div class=\\\"col-xs-2\\\"><input data-ng-change=\\\"ParametersCtrl.submoduleEnable(\\'carleon\\')\\\" id=\\\"submodule-carleon\\\" name=\\\"submodule-carleon\\\" data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"ParametersCtrl.submodules.carleon.enabled\\\"></div><div class=\\\"col-xs-2\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"ParametersCtrl.reloadCarleonServices()\\\" data-ng-disabled=\\\"!ParametersCtrl.submodules.carleon.enabled\\\"><i aria-hidden=\\\"true\\\" class=\\\"fa fa-refresh\\\"></i> <span data-translate=\\\"param_submodule_carleon_reload_services\\\"></span></button></div></div><h4 data-translate=\\\"param_carleon_service_list\\\"></h4><div class=\\\"row\\\" data-ng-repeat=\\\"service in ParametersCtrl.serviceList track by $index\\\"><div class=\\\"col-xs-2\\\" data-ng-bind=\\\"service.name\\\"></div><div class=\\\"col-xs-2\\\"><input data-ng-change=\\\"ParametersCtrl.enableCarleonService(service)\\\" data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"service.enabled\\\"></div></div><hr><div class=\\\"row\\\"><div class=\\\"col-xs-2\\\"><label for=\\\"submodule-gareth\\\" data-translate=\\\"param_submodule_gareth\\\"></label></div><div class=\\\"col-xs-2\\\"><input data-ng-change=\\\"ParametersCtrl.submoduleEnable(\\'gareth\\')\\\" id=\\\"submodule-gareth\\\" name=\\\"submodule-gareth\\\" data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"ParametersCtrl.submodules.gareth.enabled\\\"></div></div><div data-ng-if=\\\"ParametersCtrl.sagremorParams.benoicEnabled\\\"><h3 data-translate=\\\"param_device_list\\\"></h3><form name=\\\"deviceList\\\" class=\\\"css-form\\\"><button type=\\\"button\\\" data-ng-click=\\\"ParametersCtrl.addDevice()\\\" class=\\\"btn\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i></button><table class=\\\"table table-hover\\\"><thead><tr><th data-translate=\\\"device_name\\\"></th><th data-translate=\\\"device_description\\\"></th><th data-translate=\\\"device_type\\\"></th><th data-translate=\\\"device_connected\\\"></th><th data-translate=\\\"device_action\\\"></th></tr></thead><tbody><tr data-ng-repeat=\\\"(name, device) in ParametersCtrl.deviceList track by name\\\" data-ng-class=\\\"{\\'device-disabled\\': !device.enabled}\\\"><td>{{device.name}}</td><td data-ng-if=\\\"!device.update\\\">{{device.description}}</td><td data-ng-if=\\\"device.update\\\"><input type=\\\"text\\\" name=\\\"deviceDesc\\\" id=\\\"deviceDesc\\\" data-ng-model=\\\"device.newDescription\\\" value=\\\"{{device.newDescription}}\\\"></td><td>{{device.type_uid + \\'_device_type\\' | translate}}</td><td><input data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"device.connected\\\" data-ng-change=\\\"ParametersCtrl.connectDevice(device)\\\"></td><td data-ng-if=\\\"!device.update\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.editDevice(device)\\\"><i class=\\\"fa fa-pencil\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.removeDevice(device)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td><td data-ng-if=\\\"device.update\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.saveDevice(device)\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.cancelEditDevice(device)\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr><tr data-ng-if=\\\"ParametersCtrl.deviceAdded\\\"><td><input type=\\\"text\\\" data-ng-model=\\\"ParametersCtrl.newDeviceName\\\" data-ng-required=\\\"\\\" data-ng-maxlength=\\\"64\\\" maxlength=\\\"64\\\" placeholder=\\\"{{\\'device_name_placeholder\\' | translate}}\\\"></td><td><input type=\\\"text\\\" data-ng-model=\\\"ParametersCtrl.newDeviceDescription\\\" data-ng-maxlength=\\\"128\\\" maxlength=\\\"128\\\" placeholder=\\\"{{\\'device_description_placeholder\\' | translate}}\\\"></td><td><select data-ng-required=\\\"\\\" data-ng-model=\\\"ParametersCtrl.newDeviceType\\\" data-ng-options=\\\"device.uid as device.translate for device in ParametersCtrl.deviceTypesEnabled\\\" data-ng-change=\\\"ParametersCtrl.setDeviceOptions()\\\"></select></td><td><input data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"ParametersCtrl.newDeviceConnect\\\"></td><td></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.postNewDevice()\\\" data-ng-disabled=\\\"!ParametersCtrl.isDeviceValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.cancelNewDevice()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></tbody></table><h3 data-ng-if=\\\"(ParametersCtrl.deviceAdded || ParametersCtrl.deviceUpdated) && ParametersCtrl.deviceOptionListDisplay\\\" data-translate=\\\"device_options_title\\\"></h3><div data-ng-if=\\\"(ParametersCtrl.deviceAdded || ParametersCtrl.deviceUpdated) && ParametersCtrl.deviceOptionListDisplay\\\" data-ng-repeat=\\\"(optionName, option) in ParametersCtrl.deviceOptionList track by optionName\\\" class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-3\\\" data-ng-class=\\\"{\\'device-option-required\\': !option.optional}\\\">{{ParametersCtrl.newDeviceType + \\\"_\\\" + option.name | translate}}</div><div class=\\\"col-xs-3\\\" data-ng-if=\\\"option.type === \\'string\\'\\\"><input type=\\\"text\\\" data-ng-model=\\\"option.value\\\" data-ng-required=\\\"!option.optional\\\" placeholder=\\\"{{ParametersCtrl.newDeviceType + \\'_\\' + option.name + \\'_placeholder\\' | translate}}\\\"></div><div class=\\\"col-xs-3\\\" data-ng-if=\\\"option.type === \\'numeric\\'\\\"><input type=\\\"number\\\" data-ng-model=\\\"option.value\\\" data-ng-required=\\\"!option.optional\\\" placeholder=\\\"{{ParametersCtrl.newDeviceType + \\'_\\' + option.name + \\'_placeholder\\' | translate}}\\\"></div><div class=\\\"col-xs-3\\\" data-ng-if=\\\"option.type === \\'boolean\\'\\\"><input data-toggle=\\\"toggle\\\" type=\\\"checkbox\\\" data-ng-model=\\\"option.value\\\" data-ng-required=\\\"!option.optional\\\"></div></div></div></form></div><div data-ng-if=\\\"ParametersCtrl.sagremorParams.carleonEnabled\\\"><h3 data-translate=\\\"param_profiles_list\\\"></h3><button type=\\\"button\\\" data-ng-click=\\\"ParametersCtrl.addProfile()\\\" class=\\\"btn\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i></button><table class=\\\"table table-hover\\\"><thead><tr><th data-translate=\\\"profile_name\\\"></th><th data-translate=\\\"profile_description\\\"></th><th data-translate=\\\"profile_default\\\"></th><th data-translate=\\\"profile_use\\\"></th><th data-translate=\\\"profile_action\\\"></th></tr></thead><tbody><tr data-ng-repeat=\\\"profile in ParametersCtrl.profileList track by profile.name\\\"><td data-ng-if=\\\"!profile.update\\\">{{profile.name}}</td><td data-ng-if=\\\"!profile.update\\\">{{profile.description}}</td><td data-ng-if=\\\"profile.update\\\"><input type=\\\"text\\\" name=\\\"profileName\\\" id=\\\"profileName\\\" data-ng-model=\\\"profile.newName\\\" placeholder=\\\"{{\\'profile_name_placeholder\\' | translate}}\\\"></td><td data-ng-if=\\\"profile.update\\\"><input type=\\\"text\\\" name=\\\"profileDescription\\\" id=\\\"profileDescription\\\" data-ng-model=\\\"profile.newDescription\\\" placeholder=\\\"{{\\'profile_description_placeholder\\' | translate}}\\\"></td><td><input data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"profile.default\\\" data-ng-change=\\\"ParametersCtrl.setDefaultProfile(profile)\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" name=\\\"useProfile\\\" id=\\\"useProfile\\\" data-ng-click=\\\"ParametersCtrl.useProfile(profile)\\\" data-ng-if=\\\"profile.name !== ParametersCtrl.currentProfile.name\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <span data-ng-if=\\\"profile.name === ParametersCtrl.currentProfile.name\\\" data-translate=\\\"profile_used\\\"></span></td><td data-ng-if=\\\"!profile.update\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.editProfile(profile)\\\"><i class=\\\"fa fa-pencil\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.cleanProfile(profile)\\\"><i class=\\\"fa fa-eraser\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.removeProfile(profile)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td><td data-ng-if=\\\"profile.update\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.saveProfile(profile)\\\" data-ng-disabled=\\\"!ParametersCtrl.isUpdateProfileValid(profile)\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.cancelEditProfile(profile)\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr><tr data-ng-if=\\\"ParametersCtrl.profileAdded\\\"><td><input type=\\\"text\\\" data-ng-model=\\\"ParametersCtrl.newProfileName\\\" data-ng-required=\\\"\\\" data-ng-maxlength=\\\"64\\\" maxlength=\\\"64\\\" placeholder=\\\"{{\\'profile_name_placeholder\\' | translate}}\\\"></td><td><input type=\\\"text\\\" data-ng-model=\\\"ParametersCtrl.newProfileDescription\\\" data-ng-maxlength=\\\"128\\\" maxlength=\\\"128\\\" placeholder=\\\"{{\\'profile_description_placeholder\\' | translate}}\\\"></td><td><input data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"ParametersCtrl.newProfileDefault\\\"></td><td></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.saveNewProfile()\\\" data-ng-disabled=\\\"!ParametersCtrl.isProfileValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ParametersCtrl.cancelNewProfile()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></tbody></table></div></div>\");\n$templateCache.put(\"app/scripts/scripts.html\",\"<div><h1 data-translate=\\\"scripts_title\\\"></h1><div class=\\\"row\\\" data-ng-if=\\\"scriptsCtrl.sagremorParams.adminMode\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" name=\\\"addScript\\\" id=\\\"addScript\\\" data-ng-click=\\\"scriptsCtrl.newScript()\\\" data-translate=\\\"scripts_button_add\\\"></button></div><hr><div class=\\\"row\\\"><div data-ng-repeat=\\\"script in scriptsCtrl.scriptList track by script.name\\\" class=\\\"col-sm-3\\\"><data-sag-container data-menu=\\\"scriptsCtrl.menuScript\\\" data-size=\\\"1\\\" data-title=\\\"script.name\\\" data-type=\\\"\\'script\\'\\\" data-element=\\\"script\\\" data-icon=\\\"\\'tasks\\'\\\"><data-sag-script data-element=\\\"script\\\"></data-sag-script></data-sag-container></div></div></div>\");\n$templateCache.put(\"app/sensors/sensors.html\",\"<div><h1 data-translate=\\\"sensors_title\\\"></h1><div class=\\\"row\\\"><div data-ng-repeat=\\\"sensor in sensorsCtrl.sensorList\\\" class=\\\"col-sm-3\\\" data-ng-if=\\\"sensor.enabled || sensorsCtrl.sagremorParams.adminMode\\\"><data-sag-container data-menu=\\\"sensorsCtrl.menuSensor\\\" data-size=\\\"1\\\" data-title=\\\"sensor.display\\\" data-type=\\\"\\'sensor\\'\\\" data-element=\\\"sensor\\\" data-icon=\\\"\\'line-chart\\'\\\"><data-sag-sensor data-element=\\\"sensor\\\"></data-sag-sensor></data-sag-container></div></div></div>\");\n$templateCache.put(\"app/service/service.html\",\"<div><h1 data-translate=\\\"{{serviceCtrl.title}}\\\"></h1><div data-ng-repeat=\\\"service in serviceCtrl.serviceList\\\"><h3 data-translate=\\\"{{service.serviceGroup.title}}\\\"></h3><div class=\\\"row\\\" data-ng-if=\\\"serviceCtrl.sagremorParams.adminMode\\\"><div class=\\\"span6\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"serviceCtrl.addService(service.serviceGroup.service)\\\" data-translate=\\\"service_add\\\"></button></div></div><div class=\\\"row\\\"><data-sag-container data-ng-repeat=\\\"element in service.list\\\" data-menu=\\\"service.menu\\\" data-title=\\\"element.display || element.name\\\" data-type=\\\"element.type\\\" data-element=\\\"element\\\" data-icon=\\\"service.currentInjector.icon\\\" data-ng-class=\\\"{\\'col-md-2\\': !service.size || service.size === 1, \\'col-md-4\\': service.size === 2, \\'col-md-6\\': service.size === 3}\\\"><div data-sag-generic-injector=\\\"\\\" data-type=\\\"element.type\\\" data-elt=\\\"element\\\"></div></data-sag-container></div></div></div>\");\n$templateCache.put(\"app/switches/switches.html\",\"<div><h1 data-translate=\\\"switches_title\\\"></h1><h2 data-translate=\\\"switch_title\\\"></h2><div class=\\\"row\\\"><div data-ng-repeat=\\\"switcher in switchesCtrl.switchList\\\" class=\\\"col-sm-3\\\" data-ng-if=\\\"switcher.enabled || switchesCtrl.sagremorParams.adminMode\\\"><data-sag-container data-menu=\\\"switchesCtrl.menuSwitcher\\\" data-size=\\\"1\\\" data-title=\\\"switcher.display\\\" data-type=\\\"\\'switch\\'\\\" data-element=\\\"switcher\\\" data-icon=\\\"\\'toggle-on\\'\\\"><data-sag-switch data-element=\\\"switcher\\\"></data-sag-switch></data-sag-container></div></div><h2 data-translate=\\\"dimmer_title\\\"></h2><div class=\\\"row\\\"><div data-ng-repeat=\\\"dimmer in switchesCtrl.dimmerList\\\" class=\\\"col-sm-3\\\" data-ng-if=\\\"dimmer.enabled || switchesCtrl.sagremorParams.adminMode\\\"><data-sag-container data-menu=\\\"switchesCtrl.menuDimmer\\\" data-size=\\\"1\\\" data-title=\\\"dimmer.display\\\" data-type=\\\"\\'dimmer\\'\\\" data-element=\\\"dimmer\\\" data-icon=\\\"\\'lightbulb-o\\'\\\"><data-sag-dimmer data-element=\\\"dimmer\\\"></data-sag-dimmer></data-sag-container></div></div></div>\");\n$templateCache.put(\"app/users/users.html\",\"<div class=\\\"container\\\"><h1 data-translate=\\\"users_title\\\"></h1><h2 data-translate=\\\"users_user_list\\\"></h2><h4 data-ng-if=\\\"!usersCtrl.usersEnabled\\\" data-translate=\\\"users_user_disabled\\\"></h4><button type=\\\"button\\\" data-ng-click=\\\"usersCtrl.addUser()\\\" class=\\\"btn btn-primary\\\" data-translate=\\\"users_add_user\\\" data-ng-if=\\\"usersCtrl.usersEnabled\\\"></button><table class=\\\"table table-hover\\\" data-ng-if=\\\"usersCtrl.usersEnabled\\\"><thead><tr><th data-translate=\\\"users_table_login\\\"></th><th data-translate=\\\"users_table_password\\\"></th><th data-translate=\\\"users_table_enabled\\\"></th><th></th></tr></thead><tbody><tr data-ng-repeat=\\\"user in usersCtrl.userList\\\"><td data-ng-bind=\\\"user.login\\\"></td><td data-ng-if=\\\"!user.changePassword\\\">***</td><td data-ng-if=\\\"!!user.changePassword\\\"><input type=\\\"password\\\" data-ng-model=\\\"user.password\\\" maxlength=\\\"128\\\"></td><td><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" class=\\\"form-control\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-change=\\\"usersCtrl.enableUser(user)\\\" data-ng-model=\\\"user.enabled\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"usersCtrl.displayChangePassword(user)\\\" data-ng-if=\\\"!user.changePassword\\\" title=\\\"{{ \\'users_user_change_password\\' | translate }}\\\"><i class=\\\"fa fa-key\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"usersCtrl.removeUser(user)\\\" data-ng-if=\\\"!user.changePassword\\\" title=\\\"{{ \\'users_user_delete\\' | translate }}\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"usersCtrl.changePassword(user)\\\" data-ng-disabled=\\\"user.password.length === 0\\\" data-ng-if=\\\"!!user.changePassword\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"usersCtrl.cancelChangePassword(user)\\\" data-ng-if=\\\"!!user.changePassword\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr><tr data-ng-if=\\\"usersCtrl.newUser\\\"><td><input type=\\\"text\\\" data-ng-model=\\\"usersCtrl.user.login\\\" maxlength=\\\"128\\\"></td><td><input type=\\\"password\\\" data-ng-model=\\\"usersCtrl.user.password\\\" maxlength=\\\"128\\\"></td><td><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" class=\\\"form-control\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"usersCtrl.user.enabled\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"usersCtrl.createNewUser()\\\" data-ng-disabled=\\\"!usersCtrl.isNewUserValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"usersCtrl.cancelNewUser()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></tbody></table><hr><h2 data-translate=\\\"users_token_list\\\"></h2><div class=\\\"row control-group\\\"><div class=\\\"col-xs-1 controls\\\"><label for=\\\"tokenSearchLogin\\\" data-translate=\\\"users_token_search_login\\\"></label></div><div class=\\\"col-xs-2 controls\\\"><input type=\\\"text\\\" min=\\\"1\\\" class=\\\"form-control\\\" name=\\\"tokenSearchLogin\\\" id=\\\"tokenSearchLogin\\\" data-ng-model=\\\"usersCtrl.searchOptions.login\\\" maxlength=\\\"128\\\"></div><div class=\\\"col-xs-1 controls\\\"><label for=\\\"tokenSearchEnabled\\\" data-translate=\\\"users_token_search_enabled\\\"></label></div><div class=\\\"col-xs-2 controls\\\"><select id=\\\"tokenSearchEnabled\\\" class=\\\"form-control\\\" data-ng-model=\\\"usersCtrl.searchOptions.enabled\\\"><option value=\\\"\\\" data-translate=\\\"users_token_search_enabled_all\\\"></option><option value=\\\"true\\\" data-translate=\\\"users_token_search_enabled_true\\\"></option><option value=\\\"false\\\" data-translate=\\\"users_token_search_enabled_false\\\"></option></select></div><div class=\\\"col-xs-3\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary pull-right\\\" data-ng-click=\\\"usersCtrl.getTokenList()\\\" style=\\\"margin-left: 5px; margin-bottom: 5px;\\\"><i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> <span data-translate=\\\"users_search_button\\\"></span></button></div></div><table class=\\\"table table-hover dataTable table-striped\\\" data-dt-options=\\\"usersCtrl.options\\\" data-datatable=\\\"ng\\\"><thead><tr><th data-translate=\\\"users_table_token_login\\\"></th><th data-translate=\\\"users_table_token_value\\\"></th><th data-translate=\\\"users_table_token_validity\\\"></th><th data-translate=\\\"users_table_token_lastseen\\\"></th><th data-translate=\\\"users_table_token_revoke\\\"></th></tr></thead><tbody><tr data-ng-repeat=\\\"token in usersCtrl.tokenList\\\" data-ng-class=\\\"{ \\'text-muted\\' : !token.enabled}\\\"><td data-ng-bind=\\\"token.login\\\"></td><td data-ng-bind=\\\"usersCtrl.displayToken(token.token)\\\"></td><td data-ng-bind=\\\"token.validity | date : \\'medium\\'\\\" data-ng-if=\\\"token.enabled\\\"></td><td data-translate=\\\"users_token_revoked\\\" data-ng-if=\\\"!token.enabled\\\"></td><td data-ng-bind=\\\"token.last_seen | date : \\'medium\\'\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"usersCtrl.revokeToken(token)\\\" title=\\\"{{ \\'users_token_revoke\\' | translate }}\\\" data-ng-disabled=\\\"!token.enabled\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></tbody></table></div>\");\n$templateCache.put(\"components/carleonLiquidsoap/carleonLiquidsoap.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-carleon-liquidsoap\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"carleon_liquidsoap_modal_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_liquidsoap_modal_name\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonLiquidsoapName\\\" id=\\\"carleonLiquidsoapName\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonLiquidsoapModalCtrl.element.name\\\" data-ng-disabled=\\\"!carleonLiquidsoapModalCtrl.add\\\" size=\\\"10\\\" maxlength=\\\"64\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_liquidsoap_modal_description\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonLiquidsoapDescription\\\" id=\\\"carleonLiquidsoapDescription\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonLiquidsoapModalCtrl.element.description\\\" size=\\\"10\\\" maxlength=\\\"128\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_liquidsoap_radio_url\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonLiquidsoapRadioUrl\\\" id=\\\"carleonLiquidsoapRadioUrl\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonLiquidsoapModalCtrl.element.radio_url\\\" size=\\\"10\\\" maxlength=\\\"512\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_liquidsoap_radio_type\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonLiquidsoapRadioType\\\" id=\\\"carleonLiquidsoapRadioType\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonLiquidsoapModalCtrl.element.radio_type\\\" size=\\\"10\\\" maxlength=\\\"64\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_liquidsoap_control_enabled\\\"></span><div class=\\\"col-xs-6 controls\\\"><input class=\\\"form-control\\\" id=\\\"carleonLiquidsoapControlEnabled\\\" name=\\\"carleonLiquidsoapControlEnabled\\\" data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"carleonLiquidsoapModalCtrl.element.control_enabled\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_liquidsoap_control_host\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonLiquidsoapControlHost\\\" id=\\\"carleonLiquidsoapControlHost\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonLiquidsoapModalCtrl.element.control_host\\\" size=\\\"10\\\" maxlength=\\\"128\\\" data-ng-disabled=\\\"!carleonLiquidsoapModalCtrl.element.control_enabled\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_liquidsoap_control_port\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"number\\\" name=\\\"carleonLiquidsoapControlPort\\\" id=\\\"carleonLiquidsoapControlPort\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonLiquidsoapModalCtrl.element.control_port\\\" size=\\\"10\\\" step=\\\"1\\\" data-ng-disabled=\\\"!carleonLiquidsoapModalCtrl.element.control_enabled\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_liquidsoap_control_request_name\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonLiquidsoapControlRequestName\\\" id=\\\"carleonLiquidsoapControlRequestName\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonLiquidsoapModalCtrl.element.control_request_name\\\" size=\\\"10\\\" maxlength=\\\"128\\\" data-ng-disabled=\\\"!carleonLiquidsoapModalCtrl.element.control_enabled\\\"></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"carleonLiquidsoapModalCtrl.save()\\\" data-translate=\\\"btn_ok\\\" data-ng-disabled=\\\"!carleonLiquidsoapModalCtrl.isLiquidsoapValid()\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"carleonLiquidsoapModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/carleonLiquidsoap/carleonLiquidsoap.template.html\",\"<div class=\\\"container-fluid\\\"><div class=\\\"row control-group\\\"><div data-radio=\\\"\\\" data-src=\\\"$ctrl.radio.radio_url\\\"></div></div><div class=\\\"row control-group\\\"><data-uib-accordion><div data-uib-accordion-group=\\\"\\\" data-heading=\\\"{{\\'carleon_liquidsoap_control_header\\' | translate}}\\\" data-is-open=\\\"$ctrl.controlAccordionOpen\\\"><div class=\\\"row control-group\\\"><div class=\\\"col-xs-6\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"$ctrl.commandRadio(\\'stop\\')\\\" data-ng-if=\\\"$ctrl.status === \\'on\\'\\\"><i class=\\\"fa fa-stop\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"$ctrl.commandRadio(\\'start\\')\\\" data-ng-if=\\\"$ctrl.status === \\'off\\'\\\"><i class=\\\"fa fa-play\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"$ctrl.commandRadio(\\'skip\\')\\\" data-ng-if=\\\"$ctrl.status === \\'on\\'\\\"><i class=\\\"fa fa-step-forward\\\" aria-hidden=\\\"true\\\"></i></button></div></div></div><div data-uib-accordion-group=\\\"\\\" data-heading=\\\"{{\\'carleon_liquidsoap_on_air_header\\' | translate}}\\\" data-is-open=\\\"$ctrl.onAirAccordionOpen\\\"><div class=\\\"row control-group\\\"><dl><dt data-translate=\\\"carleon_liquidsoap_song_title\\\"></dt><dd data-ng-bind=\\\"$ctrl.onAir.title\\\"></dd><dt data-translate=\\\"carleon_liquidsoap_song_artist\\\"></dt><dd data-ng-bind=\\\"$ctrl.onAir.artist\\\"></dd><dt data-translate=\\\"carleon_liquidsoap_song_album\\\"></dt><dd data-ng-bind=\\\"$ctrl.onAir.album\\\"></dd><dt data-translate=\\\"carleon_liquidsoap_song_album_artist\\\"></dt><dd data-ng-bind=\\\"$ctrl.onAir.albumartist\\\"></dd><dt data-translate=\\\"carleon_liquidsoap_song_year\\\"></dt><dd data-ng-bind=\\\"$ctrl.onAir.year\\\"></dd></dl></div></div><div data-uib-accordion-group=\\\"\\\" data-heading=\\\"{{\\'carleon_liquidsoap_list_header\\' | translate}}\\\" data-is-open=\\\"$ctrl.listAccordionOpen\\\"><div class=\\\"row control-group\\\"><select class=\\\"form-control\\\" data-ng-model=\\\"$ctrl.listSelected\\\" data-ng-options=\\\"song as song.artist + \\' - \\' + song.title for song in $ctrl.list track by song.artist + \\' - \\' + song.title\\\"></select></div><div class=\\\"row control-group\\\"><dl><dt data-translate=\\\"carleon_liquidsoap_song_title\\\"></dt><dd data-ng-bind=\\\"$ctrl.listSelected.title\\\"></dd><dt data-translate=\\\"carleon_liquidsoap_song_artist\\\"></dt><dd data-ng-bind=\\\"$ctrl.listSelected.artist\\\"></dd><dt data-translate=\\\"carleon_liquidsoap_song_album\\\"></dt><dd data-ng-bind=\\\"$ctrl.listSelected.album\\\"></dd><dt data-translate=\\\"carleon_liquidsoap_song_album_artist\\\"></dt><dd data-ng-bind=\\\"$ctrl.listSelected.albumartist\\\"></dd><dt data-translate=\\\"carleon_liquidsoap_song_year\\\"></dt><dd data-ng-bind=\\\"$ctrl.listSelected.year\\\"></dd></dl></div></div></data-uib-accordion></div></div>\");\n$templateCache.put(\"components/carleonMock/carleonMock.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-carleon-mock\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"carleon_mock_modal_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row-fluid\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_mock_modal_name\\\"></span><div class=\\\"col-xs-6\\\"><input type=\\\"text\\\" name=\\\"carleonMockName\\\" id=\\\"carleonMockName\\\" data-ng-model=\\\"CarleonMockModalCtrl.mock.name\\\" data-ng-disabled=\\\"!CarleonMockModalCtrl.add\\\" class=\\\"modal-input-text\\\" size=\\\"10\\\"></div></div><div class=\\\"row\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_mock_modal_description\\\"></span><div class=\\\"col-xs-6\\\"><input type=\\\"text\\\" name=\\\"carleonMockDescription\\\" id=\\\"carleonMockDescription\\\" data-ng-model=\\\"CarleonMockModalCtrl.mock.description\\\" class=\\\"modal-input-text\\\" size=\\\"10\\\"></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"CarleonMockModalCtrl.save()\\\" data-translate=\\\"btn_ok\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"CarleonMockModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"btn_cancel\\\"></button></div></div></div>\");\n$templateCache.put(\"components/carleonMock/carleonMock.template.html\",\"<div class=\\\"text-center\\\"><div class=\\\"row\\\"><div class=\\\"span6\\\">command</div><div class=\\\"span6\\\"><select id=\\\"mockCommand\\\" data-ng-model=\\\"$ctrl.param.command\\\" data-ng-options=\\\"command for command in $ctrl.commandList\\\"></select></div></div><div class=\\\"row\\\" data-ng-if=\\\"$ctrl.param.command === \\'exec1\\' || $ctrl.param.command === \\'exec2\\'\\\"><div class=\\\"span6\\\">param1</div><div class=\\\"span6\\\"><input type=\\\"text\\\" data-ng-model=\\\"$ctrl.param.param1\\\" size=\\\"4\\\"></div></div><div class=\\\"row\\\" data-ng-if=\\\"$ctrl.param.command === \\'exec1\\'\\\"><div class=\\\"span6\\\">param2</div><div class=\\\"span6\\\"><input type=\\\"number\\\" data-ng-model=\\\"$ctrl.param.param2\\\" style=\\\"width: 7em\\\"></div></div><div class=\\\"row\\\" data-ng-if=\\\"$ctrl.param.command === \\'exec1\\'\\\"><div class=\\\"span6\\\">param3</div><div class=\\\"span6\\\"><input type=\\\"number\\\" step=\\\"0.01\\\" data-ng-model=\\\"$ctrl.param.param3\\\" style=\\\"width: 7em\\\"></div></div><button type=\\\"button\\\" data-ng-click=\\\"$ctrl.command()\\\">Execute</button></div>\");\n$templateCache.put(\"components/carleonMotion/carleonMotion.image.modal.html\",\"<div class=\\\"container-fluid\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal_title\\\" data-ng-bind=\\\"carleonMotionImageModalCtrl.displayTitle()\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><div class=\\\"col-xs-12\\\" data-ng-if=\\\"!!carleonMotionImageModalCtrl.currentImage.stream\\\"><img data-ng-src=\\\"{{carleonMotionImageModalCtrl.currentImage.stream}}\\\" alt=\\\"{{carleonMotionImageModalCtrl.currentImage.title}}\\\" class=\\\"img-responsive img-thumbnail\\\"></div><div class=\\\"col-xs-12\\\" data-ng-if=\\\"!!carleonMotionImageModalCtrl.currentImage.img\\\"><img data-http-src=\\\"{{carleonMotionImageModalCtrl.currentImage.img}}\\\" alt=\\\"{{carleonMotionImageModalCtrl.currentImage.title}}\\\" class=\\\"img-responsive img-thumbnail\\\"></div></div><div class=\\\"row control-group\\\"><div class=\\\"col-xs-5\\\"><button type=\\\"button\\\" class=\\\"btn pull-right\\\" data-ng-click=\\\"carleonMotionImageModalCtrl.changeImage(-1)\\\" data-ng-if=\\\"carleonMotionImageModalCtrl.canPrevious()\\\"><i class=\\\"fa fa-arrow-left\\\" aria-hidden=\\\"true\\\"></i></button></div><div class=\\\"col-xs-2 text-center\\\"><span data-ng-bind=\\\"carleonMotionImageModalCtrl.showIndex()\\\"></span></div><div class=\\\"col-xs-5\\\"><button type=\\\"button\\\" class=\\\"btn pull-left\\\" data-ng-click=\\\"carleonMotionImageModalCtrl.changeImage(1)\\\" data-ng-if=\\\"carleonMotionImageModalCtrl.canNext()\\\"><i class=\\\"fa fa-arrow-right\\\" aria-hidden=\\\"true\\\"></i></button></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"carleonMotionImageModalCtrl.snapshot()\\\" data-ng-if=\\\"!!carleonMotionImageModalCtrl.currentImage.snapshotUri\\\"><span data-translate=\\\"carleon_motion_snapshot\\\"></span> <i class=\\\"fa fa-camera\\\" aria-hidden=\\\"true\\\"></i></button> <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"carleonMotionImageModalCtrl.close()\\\" data-translate=\\\"monitor_close\\\"></button></div></div></div>\");\n$templateCache.put(\"components/carleonMotion/carleonMotion.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-carleon-motion\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"carleon_motion_modal_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_motion_modal_name\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonMotionName\\\" id=\\\"carleonMotionName\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.motion.name\\\" data-ng-disabled=\\\"!carleonMotionModalCtrl.add\\\" size=\\\"10\\\" maxlength=\\\"64\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_motion_modal_description\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonMotionDescription\\\" id=\\\"carleonMotionDescription\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.motion.description\\\" size=\\\"10\\\" maxlength=\\\"128\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_motion_modal_config_uri\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonMotionDescription\\\" id=\\\"carleonMotionDescription\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.motion.config_uri\\\" size=\\\"10\\\" maxlength=\\\"128\\\"></div></div><hr><div class=\\\"row\\\"><h3 data-translate=\\\"carleon_motion_modal_file_list\\\"></h3><button type=\\\"button\\\" data-ng-click=\\\"carleonMotionModalCtrl.addNewFileList()\\\" class=\\\"btn\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i></button></div><div class=\\\"row control-group\\\"><table class=\\\"table table-hover controls\\\"><thead><tr><th data-translate=\\\"carleon_motion_file_list_name\\\"></th><th data-translate=\\\"carleon_motion_file_list_path\\\"></th><th data-translate=\\\"carleon_motion_file_list_thumbnail_path\\\"></th><th></th></tr></thead><tbody><tr data-ng-repeat=\\\"fileList in carleonMotionModalCtrl.motion.file_list track by $index\\\"><td data-ng-bind=\\\"fileList.name\\\"></td><td data-ng-bind=\\\"fileList.path\\\"></td><td data-ng-bind=\\\"fileList.thumbnail_path\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"carleonMotionModalCtrl.removeFileList($index)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td></tr><tr data-ng-if=\\\"carleonMotionModalCtrl.addFileList\\\"><td><input type=\\\"text\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.newFileList.name\\\" data-ng-required=\\\"\\\" data-ng-maxlength=\\\"64\\\" maxlength=\\\"64\\\"></td><td><input type=\\\"text\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.newFileList.path\\\" data-ng-required=\\\"\\\" data-ng-maxlength=\\\"512\\\" maxlength=\\\"512\\\"></td><td><input type=\\\"text\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.newFileList.thumbnail_path\\\" data-ng-required=\\\"\\\" data-ng-maxlength=\\\"512\\\" maxlength=\\\"512\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"carleonMotionModalCtrl.saveNewFileList()\\\" data-ng-disabled=\\\"!carleonMotionModalCtrl.isFileListValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"carleonMotionModalCtrl.cancelNewFileList()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></tbody></table></div><hr><div class=\\\"row\\\"><h3 data-translate=\\\"carleon_motion_modal_stream_list\\\"></h3><button type=\\\"button\\\" data-ng-click=\\\"carleonMotionModalCtrl.addNewStream()\\\" class=\\\"btn\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i></button></div><div class=\\\"row control-group\\\"><table class=\\\"table table-hover controls\\\"><thead><tr><th data-translate=\\\"carleon_motion_stream_list_name\\\"></th><th data-translate=\\\"carleon_motion_stream_list_uri\\\"></th><th data-translate=\\\"carleon_motion_stream_list_snapshot_uri\\\"></th><th></th></tr></thead><tbody><tr data-ng-repeat=\\\"streamList in carleonMotionModalCtrl.motion.stream_list track by $index\\\"><td data-ng-bind=\\\"streamList.name\\\"></td><td data-ng-bind=\\\"streamList.uri\\\"></td><td data-ng-bind=\\\"streamList.snapshot_uri\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"carleonMotionModalCtrl.removeStream($index)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></td></tr><tr data-ng-if=\\\"carleonMotionModalCtrl.addStream\\\"><td><input type=\\\"text\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.newStream.name\\\" data-ng-required=\\\"\\\" data-ng-maxlength=\\\"64\\\" maxlength=\\\"64\\\"></td><td><input type=\\\"text\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.newStream.uri\\\" data-ng-required=\\\"\\\" data-ng-maxlength=\\\"512\\\" maxlength=\\\"512\\\"></td><td><input type=\\\"text\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMotionModalCtrl.newStream.snapshot_uri\\\" data-ng-maxlength=\\\"512\\\" maxlength=\\\"512\\\"></td><td><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"carleonMotionModalCtrl.saveNewStream()\\\" data-ng-disabled=\\\"!carleonMotionModalCtrl.isStreamValid()\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"carleonMotionModalCtrl.cancelNewStream()\\\"><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></button></td></tr></tbody></table></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"carleonMotionModalCtrl.save()\\\" data-translate=\\\"btn_ok\\\" data-ng-disabled=\\\"!carleonMotionModalCtrl.isCameraValid()\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"carleonMotionModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/carleonMotion/carleonMotion.template.html\",\"<div class=\\\"container-fluid\\\"><div class=\\\"row control-group\\\"><div class=\\\"col-xs-4 controls\\\" data-ng-class=\\\"{\\'text-success\\': $ctrl.online, \\'text-danger\\': !$ctrl.online}\\\"><label data-translate=\\\"carleon_motion_online\\\" data-ng-if=\\\"$ctrl.online\\\"></label> <label data-translate=\\\"carleon_motion_offline\\\" data-ng-if=\\\"!$ctrl.online\\\"></label> <i class=\\\"fa fa-power-off\\\" aria-hidden=\\\"true\\\"></i></div><div class=\\\"col-xs-4 controls\\\" data-ng-if=\\\"$ctrl.fileListName.length > 1\\\"><div><label for=\\\"motionImagesList\\\" data-translate=\\\"carleon_motion_file_list\\\"></label></div></div><div class=\\\"col-xs-4 controls\\\" data-ng-if=\\\"$ctrl.fileListName.length > 1\\\"><select id=\\\"motionImagesList\\\" class=\\\"form-control\\\" data-ng-change=\\\"$ctrl.changeSelectedFileList()\\\" data-ng-model=\\\"$ctrl.selectedFileList\\\" data-ng-options=\\\"fileListName as fileListName for fileListName in $ctrl.fileListName track by fileListName\\\"></select></div><div class=\\\"col-xs-8 controls\\\" data-ng-if=\\\"$ctrl.fileListName.length <= 1\\\"><span data-ng-bind=\\\"$ctrl.selectedFileList\\\"></span></div></div><div class=\\\"row control-group\\\"><div class=\\\"col-xs-4\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"$ctrl.refresh()\\\"><span data-translate=\\\"carleon_motion_refresh\\\"></span> <i class=\\\"fa fa-refresh\\\" aria-hidden=\\\"true\\\"></i></button></div><div class=\\\"col-xs-4 controls\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"$ctrl.openStream()\\\"><span data-translate=\\\"carleon_motion_stream_open\\\"></span> <i class=\\\"fa fa-video-camera\\\" aria-hidden=\\\"true\\\"></i></button></div></div><hr><div class=\\\"row control-group\\\" data-ng-if=\\\"!!$ctrl.selectedFileList\\\"><div class=\\\"col-xs-3\\\" data-ng-repeat=\\\"image in $ctrl.images track by $index\\\"><a href=\\\"\\\" data-ng-click=\\\"$ctrl.openPopupImage($ctrl.images, $index)\\\" alt=\\\"{{image.title}}\\\"><img data-http-src=\\\"{{image.thumb}}\\\" title=\\\"{{image.title}}\\\" class=\\\"img-responsive\\\"></a> <span class=\\\"small text-center\\\" data-ng-bind=\\\"image.title\\\"></span></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"!!$ctrl.selectedFileList\\\"><div class=\\\"col-xs-5\\\"><button type=\\\"button\\\" class=\\\"btn pull-right\\\" data-ng-click=\\\"$ctrl.previousList()\\\" data-ng-if=\\\"$ctrl.canPrevious()\\\"><i class=\\\"fa fa-arrow-left\\\" aria-hidden=\\\"true\\\"></i></button></div><div class=\\\"col-xs-2 text-center\\\"><span data-ng-bind=\\\"$ctrl.offset\\\"></span></div><div class=\\\"col-xs-5\\\"><button type=\\\"button\\\" class=\\\"btn pull-left\\\" data-ng-click=\\\"$ctrl.nextList()\\\" data-ng-if=\\\"$ctrl.canNext()\\\"><i class=\\\"fa fa-arrow-right\\\" aria-hidden=\\\"true\\\"></i></button></div></div></div>\");\n$templateCache.put(\"components/carleonMpd/carleonMpd.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-carleon-mpd\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"carleon_mpd_modal_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_mpd_modal_name\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonMpdName\\\" id=\\\"carleonMpdName\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMpdModalCtrl.mpd.name\\\" data-ng-disabled=\\\"!carleonMpdModalCtrl.add\\\" size=\\\"10\\\" maxlength=\\\"64\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_mpd_modal_description\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonMpdDescription\\\" id=\\\"carleonMpdDescription\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMpdModalCtrl.mpd.description\\\" size=\\\"10\\\" maxlength=\\\"128\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_mpd_modal_host\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonMpdDescription\\\" id=\\\"carleonMpdDescription\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMpdModalCtrl.mpd.host\\\" size=\\\"10\\\" maxlength=\\\"128\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_mpd_modal_port\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"number\\\" name=\\\"carleonMpdDescription\\\" id=\\\"carleonMpdDescription\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMpdModalCtrl.mpd.port\\\" size=\\\"10\\\" step=\\\"1\\\" maxlength=\\\"5\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_mpd_modal_password\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"carleonMpdDescription\\\" id=\\\"carleonMpdDescription\\\" class=\\\"modal-input-text form-control\\\" data-ng-model=\\\"carleonMpdModalCtrl.mpd.password\\\" size=\\\"10\\\" maxlength=\\\"128\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"carleon_mpd_modal_switch\\\"></span><div class=\\\"col-xs-6 controls\\\"><select id=\\\"newActionSwitch\\\" name=\\\"newActionSwitch\\\" class=\\\"form-control\\\" data-ng-model=\\\"carleonMpdModalCtrl.switchAttached\\\" data-ng-options=\\\"switch as switch.display for switch in carleonMpdModalCtrl.switches\\\" data-ng-change=\\\"carleonMpdModalCtrl.changeSwitch()\\\"></select></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"carleonMpdModalCtrl.save()\\\" data-translate=\\\"btn_ok\\\" data-ng-disabled=\\\"!carleonMpdModalCtrl.isMpdValid()\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"carleonMpdModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/carleonMpd/carleonMpd.template.html\",\"<div class=\\\"container-fluid\\\"><div class=\\\"row control-group\\\"><div class=\\\"row control-group\\\" data-ng-if=\\\"!!$ctrl.mpd.name && ($ctrl.mpd.state == \\'pause\\' || $ctrl.mpd.state == \\'play\\')\\\"><div class=\\\"col-xs-12 controls text-center\\\"><strong><span data-ng-bind=\\\"$ctrl.mpd.name\\\"></span></strong></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"!!$ctrl.mpd.title && ($ctrl.mpd.state == \\'pause\\' || $ctrl.mpd.state == \\'play\\')\\\"><div class=\\\"col-xs-2 controls\\\"><strong><span data-translate=\\\"carleon_mpd_playing_title\\\"></span></strong></div><div class=\\\"col-xs-10 controls\\\"><span data-ng-bind=\\\"$ctrl.mpd.title\\\"></span></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"!!$ctrl.mpd.artist && ($ctrl.mpd.state == \\'pause\\' || $ctrl.mpd.state == \\'play\\')\\\"><div class=\\\"col-xs-2 controls\\\"><strong><span data-translate=\\\"carleon_mpd_playing_artist\\\"></span></strong></div><div class=\\\"col-xs-10 controls\\\"><span data-ng-bind=\\\"$ctrl.mpd.artist\\\"></span></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"!!$ctrl.mpd.album && ($ctrl.mpd.state == \\'pause\\' || $ctrl.mpd.state == \\'play\\')\\\"><div class=\\\"col-xs-2 controls\\\"><strong><span data-translate=\\\"carleon_mpd_playing_album\\\"></span></strong></div><div class=\\\"col-xs-10 controls\\\"><span data-ng-bind=\\\"$ctrl.mpd.album\\\"></span></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"!!$ctrl.mpd.date && ($ctrl.mpd.state == \\'pause\\' || $ctrl.mpd.state == \\'play\\')\\\"><div class=\\\"col-xs-2 controls\\\"><strong><span data-translate=\\\"carleon_mpd_playing_date\\\"></span></strong></div><div class=\\\"col-xs-10 controls\\\"><span data-ng-bind=\\\"$ctrl.mpd.date\\\"></span></div></div><hr class=\\\"heater-hr\\\"><div class=\\\"clearfix control-group\\\"><div class=\\\"col-xs-4 controls\\\"><label for=\\\"mpdPlaylists\\\" data-translate=\\\"carleon_mpd_playlists_title\\\"></label></div><div class=\\\"col-xs-4 controls\\\"><select class=\\\"form-control\\\" name=\\\"mpdPlaylists\\\" value=\\\"mpdPlaylists\\\" data-ng-model=\\\"$ctrl.selectedPlaylist\\\" data-ng-options=\\\"playlist as playlist for playlist in $ctrl.playlists\\\"></select></div><div class=\\\"col-xs-4 controls\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"$ctrl.loadPlaylist()\\\" data-translate=\\\"carleon_mpd_playlist_load\\\"></button></div></div><hr class=\\\"heater-hr\\\"><div class=\\\"row control-group\\\"><div class=\\\"clearfix input-group\\\"><span class=\\\"input-group-btn\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"$ctrl.setAction(\\'previous\\')\\\"><i class=\\\"fa fa-backward\\\" aria-hidden=\\\"true\\\"></i></button></span> <span class=\\\"input-group-btn\\\" data-ng-if=\\\"$ctrl.mpd.state == \\'pause\\' || $ctrl.mpd.state == \\'play\\'\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"$ctrl.setAction(\\'stop\\')\\\"><i class=\\\"fa fa-stop\\\" aria-hidden=\\\"true\\\"></i></button></span> <span class=\\\"input-group-btn\\\" data-ng-if=\\\"$ctrl.mpd.state == \\'pause\\' || $ctrl.mpd.state == \\'stop\\'\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"$ctrl.setAction(\\'play\\')\\\"><i class=\\\"fa fa-play\\\" aria-hidden=\\\"true\\\"></i></button></span> <span class=\\\"input-group-btn\\\" data-ng-if=\\\"$ctrl.mpd.state == \\'play\\'\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"$ctrl.setAction(\\'pause\\')\\\"><i class=\\\"fa fa-pause\\\" aria-hidden=\\\"true\\\"></i></button></span> <span class=\\\"input-group-btn\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"$ctrl.setAction(\\'next\\')\\\"><i class=\\\"fa fa-forward\\\" aria-hidden=\\\"true\\\"></i></button></span> <span class=\\\"input-group-btn\\\"><button type=\\\"button\\\" data-ng-class=\\\"{\\'btn btn-primary\\': $ctrl.mpd.repeat, \\'btn btn-default\\': !$ctrl.mpd.repeat}\\\" data-ng-click=\\\"$ctrl.setAction(\\'repeat\\')\\\"><i class=\\\"fa fa-refresh\\\" aria-hidden=\\\"true\\\"></i></button> <button type=\\\"button\\\" data-ng-class=\\\"{\\'btn btn-primary\\': $ctrl.mpd.random, \\'btn btn-default\\': !$ctrl.mpd.random}\\\" data-ng-click=\\\"$ctrl.setAction(\\'random\\')\\\"><i class=\\\"fa fa-random\\\" aria-hidden=\\\"true\\\"></i></button></span></div></div><hr class=\\\"heater-hr\\\"><div class=\\\"row control-group\\\" data-ng-if=\\\"!!$ctrl.mpd.name\\\"><div class=\\\"col-xs-12 controls text-center\\\"><strong><span data-translate=\\\"carleon_mpd_control_volume\\\"></span></strong></div></div><div class=\\\"row control-group\\\"><div class=\\\"ring control-group\\\"><div class=\\\"quarter quarter-plus-1\\\" data-ng-click=\\\"$ctrl.setVolume(1)\\\"><span class=\\\"quarter-value\\\" data-ng-bind=\\\"$ctrl.displayVolumeCommand(1)\\\"></span></div><div class=\\\"quarter quarter-plus-5\\\" data-ng-click=\\\"$ctrl.setVolume(5)\\\"><span class=\\\"quarter-value\\\" data-ng-bind=\\\"$ctrl.displayVolumeCommand(5)\\\"></span></div><div class=\\\"quarter quarter-minus-1\\\" data-ng-click=\\\"$ctrl.setVolume(-1)\\\"><span class=\\\"quarter-value\\\" data-ng-bind=\\\"$ctrl.displayVolumeCommand(-1)\\\"></span></div><div class=\\\"quarter quarter-minus-5\\\" data-ng-click=\\\"$ctrl.setVolume(-5)\\\"><span class=\\\"quarter-value\\\" data-ng-bind=\\\"$ctrl.displayVolumeCommand(-5)\\\"></span></div><div class=\\\"cutout-heater\\\"><div class=\\\"ring-value\\\" data-ng-bind=\\\"$ctrl.displayVolume()\\\"></div></div></div></div></div></div>\");\n$templateCache.put(\"components/container/container.template.html\",\"<div data-ng-class=\\\"{\\'sag-container\\': !$ctrl.dashboard, \\'sag-container-dashboard\\': ($ctrl.dashboard && $ctrl.element.type !== \\'script\\')}\\\"><div class=\\\"row\\\"><div class=\\\"sag-container-header-menu col-xs-2\\\" data-ng-if=\\\"(!!$ctrl.menu && !$ctrl.dashboard) || $ctrl.dashboard && $ctrl.sagParams.adminMode\\\" data-uib-dropdown=\\\"\\\"><button class=\\\"btn btn-primary text-left\\\" type=\\\"button\\\" data-uib-dropdown-toggle=\\\"\\\" data-ng-click=\\\"\\\"><i data-ng-class=\\\"{\\'fa fa-{{$ctrl.icon}} fa-fw\\': !!$ctrl.icon, \\'fa fa-bars\\': !$ctrl.icon}\\\" aria-hidden=\\\"true\\\"></i></button><ul data-uib-dropdown-menu=\\\"\\\"><li data-ng-repeat=\\\"menuItem in $ctrl.menu\\\" data-ng-if=\\\"menuItem.name !== \\'monitor\\' || $ctrl.element.monitored\\\"><a href=\\\"\\\" data-ng-click=\\\"$ctrl.menuSelect(menuItem, $ctrl.element)\\\" data-ng-bind=\\\"menuItem.display\\\"></a></li></ul></div><div data-ng-if=\\\"$ctrl.element.type !== \\'script\\'\\\" class=\\\"sag-container-header-title col-xs-10\\\" data-ng-class=\\\"{\\'sag-container-header-title-dashboard\\': $ctrl.dashboard}\\\"><i data-ng-class=\\\"{\\'fa fa-{{$ctrl.icon}}\\': !!$ctrl.icon}\\\" aria-hidden=\\\"true\\\" data-ng-if=\\\"$ctrl.dashboard\\\"></i> <span data-toggle=\\\"tooltip\\\" data-ng-attr-title=\\\"{{$ctrl.title + \\'\\\\n\\' + $ctrl.element.description}}\\\"><span data-ng-bind=\\\"$ctrl.title\\\" class=\\\"text-center\\\"></span></span></div></div><div data-ng-transclude=\\\"\\\" class=\\\"sag-container-element\\\"></div><div class=\\\"row\\\"><div class=\\\"col-md-12\\\"><span data-ng-repeat=\\\"script in $ctrl.scripts\\\" class=\\\"script-small\\\"><button type=\\\"button\\\" class=\\\"btn btn-xs btn-primary\\\" data-ng-bind=\\\"script.name\\\" data-ng-click=\\\"$ctrl.runScript(script)\\\"></button></span></div></div></div>\");\n$templateCache.put(\"components/dimmer/dimmer.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"dimmer_update_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"dimmer_update_name\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"dimmerDisplay\\\" id=\\\"dimmerDisplay\\\" data-ng-model=\\\"DimmersModalCtrl.dimmer.newDisplay\\\" class=\\\"modal-input-text form-control\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"dimmer_update_enabled\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"checkbox\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"DimmersModalCtrl.dimmer.enabled\\\"></div></div><div class=\\\"row\\\"><hr></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"dimmer_update_monitor\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"checkbox\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"DimmersModalCtrl.dimmer.monitored\\\"></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"DimmersModalCtrl.dimmer.monitored\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"dimmer_update_monitor_every\\\"></span><div class=\\\"col-xs-6 controls\\\"><select id=\\\"bddAddUserGrant\\\" class=\\\"form-control\\\" data-ng-model=\\\"DimmersModalCtrl.dimmer.monitored_every\\\" data-ng-options=\\\"monitorEvery.value as DimmersModalCtrl.tr(monitorEvery.label) for monitorEvery in DimmersModalCtrl.monitorEveryEnum\\\"></select></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"DimmersModalCtrl.saveDimmer()\\\" data-translate=\\\"dimmer_btn_ok\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"DimmersModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"dimmer_btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/dimmer/dimmer.template.html\",\"<div data-ng-if=\\\"$ctrl.element.enabled || $ctrl.adminMode\\\"><div class=\\\"text-center\\\" data-ng-class=\\\"{\\'text-italic\\': $ctrl.adminMode}\\\"><div class=\\\"ring\\\"><div class=\\\"quarter quarter1\\\" data-ng-click=\\\"$ctrl.setDimmer(100)\\\" data-ng-class=\\\"{\\'quarter-off\\': $ctrl.element.value <= 75, \\'quarter-almost-on\\': $ctrl.element.value < 100 && $ctrl.element.value > 75, \\'quarter-on\\': $ctrl.element.value === 100}\\\"><span class=\\\"quarter-value\\\">100%</span></div><div class=\\\"quarter quarter2\\\" data-ng-click=\\\"$ctrl.setDimmer(25)\\\" data-ng-class=\\\"{\\'quarter-off\\': $ctrl.element.value === 0, \\'quarter-almost-on\\': $ctrl.element.value < 25 && $ctrl.element.value > 0, \\'quarter-on\\': $ctrl.element.value >= 25}\\\"><span class=\\\"quarter-value\\\">25%</span></div><div class=\\\"quarter quarter3\\\" data-ng-click=\\\"$ctrl.setDimmer(75)\\\" data-ng-class=\\\"{\\'quarter-off\\': $ctrl.element.value <= 50, \\'quarter-almost-on\\': $ctrl.element.value < 75 && $ctrl.element.value > 50, \\'quarter-on\\': $ctrl.element.value >= 75}\\\"><span class=\\\"quarter-value\\\"><br>75%</span></div><div class=\\\"quarter quarter4\\\" data-ng-click=\\\"$ctrl.setDimmer(50)\\\" data-ng-class=\\\"{\\'quarter-off\\': $ctrl.element.value <= 25, \\'quarter-almost-on\\': $ctrl.element.value < 50 && $ctrl.element.value > 25, \\'quarter-on\\': $ctrl.element.value >= 50}\\\"><span class=\\\"quarter-value\\\"><br>50%</span></div><div class=\\\"cutout\\\"><div class=\\\"ring-value\\\" data-ng-bind=\\\"$ctrl.Dimmervalue()\\\"></div></div></div><hr class=\\\"dimmer-hr\\\"><div class=\\\"clearfix input-group\\\"><span class=\\\"input-group-btn\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"$ctrl.addDimmer(-1)\\\"><i class=\\\"fa fa-minus\\\"></i></button></span> <span class=\\\"input-group-btn\\\"><button type=\\\"button\\\" data-ng-click=\\\"$ctrl.setDimmer(0)\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-power-off\\\" aria-hidden=\\\"true\\\"></i></button></span> <span class=\\\"input-group-btn\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"$ctrl.addDimmer(1)\\\"><i class=\\\"fa fa-plus\\\"></i></button></span></div></div></div>\");\n$templateCache.put(\"components/event/event.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"event_modal_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': !!EventModalCtrl.error.nameInvalid}\\\"><label for=\\\"eventName\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_name\\\"></label><div class=\\\"col-xs-7 controls\\\"><input type=\\\"text\\\" name=\\\"eventName\\\" id=\\\"eventName\\\" data-ng-model=\\\"EventModalCtrl.event.name\\\" class=\\\"modal-input-text form-control\\\" size=\\\"16\\\" maxlength=\\\"64\\\" data-ng-disabled=\\\"!EventModalCtrl.add\\\" placeholder=\\\"{{\\'event_name_placeholder\\' | translate}}\\\"></div></div><div class=\\\"row control-group\\\"><label for=\\\"eventDecription\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_description\\\"></label><div class=\\\"col-xs-7 controls\\\"><input type=\\\"text\\\" name=\\\"eventDecription\\\" id=\\\"eventDecription\\\" data-ng-model=\\\"EventModalCtrl.event.description\\\" class=\\\"modal-input-text form-control\\\" size=\\\"16\\\" maxlength=\\\"128\\\" placeholder=\\\"{{\\'event_description_placeholder\\' | translate}}\\\"></div></div><div class=\\\"row control-group\\\"><label for=\\\"eventEnabled\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_enabled\\\"></label><div class=\\\"col-xs-7 controls\\\"><input type=\\\"checkbox\\\" id=\\\"eventEnabled\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.event.enabled\\\"></div></div><hr><div class=\\\"row control-group\\\"><label for=\\\"eventType\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_type_select\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"eventType\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.eventType\\\"><option value=\\\"scheduler\\\" data-translate=\\\"event_type_scheduler\\\"></option><option value=\\\"trigger\\\" data-translate=\\\"event_type_trigger\\\"></option></select></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"EventModalCtrl.eventType === \\'scheduler\\'\\\"><label for=\\\"schedulerDate\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_scheduler_date_select\\\"></label><div class=\\\"col-xs-7\\\"><div class=\\\"input-group\\\"><input type=\\\"text\\\" id=\\\"schedulerDate\\\" class=\\\"form-control\\\" data-datetime-picker=\\\"yyyy/MM/dd HH:mm\\\" data-ng-model=\\\"EventModalCtrl.myDate\\\" data-is-open=\\\"EventModalCtrl.isOpen\\\" data-button-bar=\\\"EventModalCtrl.datePickerOptions.buttonBar\\\"> <span class=\\\"input-group-btn\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"EventModalCtrl.openCalendar($event, prop)\\\"><i class=\\\"fa fa-calendar\\\"></i></button></span></div></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"EventModalCtrl.eventType === \\'scheduler\\'\\\"><label for=\\\"schedulerRepeat\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_scheduler_repeat\\\"></label><div class=\\\"col-xs-7 controls\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRepeat\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeatSwitch\\\"></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"EventModalCtrl.eventType === \\'scheduler\\' && EventModalCtrl.scheduler.repeatSwitch\\\"><label for=\\\"schedulerRepeatEvery\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_scheduler_repeat_every\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"schedulerRepeatEvery\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeat\\\" data-ng-options=\\\"repeatEvery.value*1 as EventModalCtrl.tr(repeatEvery.label) for repeatEvery in EventModalCtrl.schedulerRepeatEveryEnum\\\"></select></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"EventModalCtrl.eventType === \\'scheduler\\' && EventModalCtrl.scheduler.repeatSwitch && EventModalCtrl.scheduler.repeat !== 3\\\"><label for=\\\"schedulerRepeatEveryValue\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_scheduler_repeat_every_value\\\"></label><div class=\\\"col-xs-7 controls\\\"><input type=\\\"number\\\" id=\\\"schedulerRepeatEveryValue\\\" min=\\\"0\\\" step=\\\"1\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeat_value\\\"></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"EventModalCtrl.eventType === \\'scheduler\\' && EventModalCtrl.scheduler.repeatSwitch && EventModalCtrl.scheduler.repeat === 3\\\"><label for=\\\"schedulerRepeatEveryDayOfWeek\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_scheduler_repeat_every_value\\\"></label><div class=\\\"col-xs-7 controls\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\"><label for=\\\"schedulerRepeatMonday\\\" data-translate=\\\"event_scheduler_repeat_every_day_of_week_monday\\\"></label></div><div class=\\\"col-xs-6\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRepeatMonday\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeatEveryDayOfWeek.monday\\\"></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\"><label for=\\\"schedulerRepeatTuesday\\\" data-translate=\\\"event_scheduler_repeat_every_day_of_week_tuesday\\\"></label></div><div class=\\\"col-xs-6\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRepeatTuesday\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeatEveryDayOfWeek.tuesday\\\"></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\"><label for=\\\"schedulerRepeatWednesday\\\" data-translate=\\\"event_scheduler_repeat_every_day_of_week_wednesday\\\"></label></div><div class=\\\"col-xs-6\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRepeatWednesday\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeatEveryDayOfWeek.wednesday\\\"></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\"><label for=\\\"schedulerRepeatThursday\\\" data-translate=\\\"event_scheduler_repeat_every_day_of_week_thursday\\\"></label></div><div class=\\\"col-xs-6\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRepeatThursday\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeatEveryDayOfWeek.thursday\\\"></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\"><label for=\\\"schedulerRepeatFriday\\\" data-translate=\\\"event_scheduler_repeat_every_day_of_week_friday\\\"></label></div><div class=\\\"col-xs-6\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRepeatFriday\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeatEveryDayOfWeek.friday\\\"></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\"><label for=\\\"schedulerRepeatSaturday\\\" data-translate=\\\"event_scheduler_repeat_every_day_of_week_saturday\\\"></label></div><div class=\\\"col-xs-6\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRepeatSaturday\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeatEveryDayOfWeek.saturday\\\"></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\"><label for=\\\"schedulerRepeatSunday\\\" data-translate=\\\"event_scheduler_repeat_every_day_of_week_sunday\\\"></label></div><div class=\\\"col-xs-6\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRepeatSunday\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.repeatEveryDayOfWeek.sunday\\\"></div></div></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"EventModalCtrl.eventType === \\'scheduler\\' && !EventModalCtrl.scheduler.repeatSwitch\\\"><label for=\\\"schedulerRemoveAfter\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_scheduler_remove_after\\\"></label><div class=\\\"col-xs-7 controls\\\"><input type=\\\"checkbox\\\" id=\\\"schedulerRemoveAfter\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.scheduler.remove_after\\\"></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"EventModalCtrl.eventType === \\'trigger\\'\\\"><label for=\\\"triggerSource\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_trigger_source\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"triggerSource\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.trigger\\\" data-ng-options=\\\"element as element.display for element in EventModalCtrl.globalTriggerElementList track by EventModalCtrl.trackTriggerElement(element)\\\"></select></div><div class=\\\"control-group\\\"><label for=\\\"newTriggerMessage\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_trigger_message\\\"></label><div class=\\\"col-xs-5 controls\\\"></div><div class=\\\"col-xs-3\\\"><select id=\\\"newTriggerMessageOperator\\\" name=\\\"newTriggerMessageOperator\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.event.message_match\\\"><option value=\\\"0\\\"></option><option value=\\\"1\\\" data-translate=\\\"message_match_equal\\\"></option><option value=\\\"2\\\" data-translate=\\\"message_match_different\\\"></option><option value=\\\"3\\\" data-translate=\\\"message_match_contains\\\"></option><option value=\\\"4\\\" data-translate=\\\"message_match_not_contains\\\"></option><option value=\\\"5\\\" data-translate=\\\"message_match_empty\\\"></option><option value=\\\"6\\\" data-translate=\\\"message_match_not_empty\\\"></option></select></div><div class=\\\"col-xs-4\\\" data-ng-if=\\\"EventModalCtrl.event.message_match <= 4\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"newTriggerMessageValue\\\" id=\\\"newTriggerMessageValue\\\" data-ng-model=\\\"EventModalCtrl.event.message\\\" placeholder=\\\"{{\\'event_message_match_placeholder\\' | translate}}\\\"></div></div></div><hr><div class=\\\"row control-group\\\"><label class=\\\"col-xs-5\\\" data-translate=\\\"event_script_list\\\"></label><div class=\\\"col-xs-7\\\"><div class=\\\"row\\\" data-ng-repeat=\\\"script in EventModalCtrl.scriptList track by $index\\\"><strong data-ng-bind=\\\"script.name\\\"></strong> <input type=\\\"checkbox\\\" id=\\\"scriptEnabled\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"script.enabled\\\"> <button type=\\\"button\\\" class=\\\"btn btn-default pull-right\\\" data-ng-click=\\\"EventModalCtrl.removeScript($index)\\\"><i class=\\\"fa fa-trash\\\"></i></button></div></div></div><div class=\\\"row control-group\\\"><label for=\\\"eventScriptSelect\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_script_select\\\"></label><div class=\\\"col-xs-7\\\"><select id=\\\"eventScriptSelect\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.newScript\\\" data-ng-options=\\\"script.name for script in EventModalCtrl.globalScriptList\\\"></select></div></div><div class=\\\"row control-group\\\"><label for=\\\"eventScriptAdd\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_add\\\"></label><div class=\\\"col-xs-7\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"EventModalCtrl.addScript(EventModalCtrl.newScript)\\\"><i class=\\\"fa fa-plus\\\"></i></button></div></div><hr><div class=\\\"row control-group\\\"><label class=\\\"col-xs-5\\\" data-translate=\\\"event_condition_list\\\"></label><div class=\\\"col-xs-7\\\"><div class=\\\"row\\\" data-ng-repeat=\\\"condition in EventModalCtrl.conditionList track by $index\\\"><strong data-ng-bind=\\\"EventModalCtrl.displayCondition(condition)\\\"></strong> <button type=\\\"button\\\" class=\\\"btn btn-default pull-right\\\" data-ng-click=\\\"EventModalCtrl.removeCondition($index)\\\"><i class=\\\"fa fa-trash\\\"></i></button></div></div></div><div class=\\\"row control-group\\\"><label for=\\\"eventScriptAdd\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_condition_select\\\"></label><div class=\\\"col-xs-7\\\"><select id=\\\"eventconditionAdd\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.newConditionType\\\" data-ng-options=\\\"condition as EventModalCtrl.tr(condition.label) for condition in EventModalCtrl.globalElementList\\\"></select></div></div><div class=\\\"row control-group\\\"><div data-ng-if=\\\"EventModalCtrl.newConditionType.name === \\'switch\\'\\\"><div data-ng-class=\\\"{\\'has-error\\': !EventModalCtrl.tmpElement}\\\"><label for=\\\"newConditionSwitch\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_switch_select\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"newConditionSwitch\\\" name=\\\"newConditionSwitch\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.tmpElement\\\" data-ng-change=\\\"EventModalCtrl.setConditionBenoicElement()\\\" data-ng-options=\\\"switch as switch.display for switch in EventModalCtrl.benoicElements.switches track by EventModalCtrl.trackBenoicElement(switch, \\'switch\\')\\\"></select></div></div><div><label for=\\\"newConditionSwitchValue\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_switch_value\\\"></label><div class=\\\"col-xs-7\\\"><input type=\\\"checkbox\\\" id=\\\"newConditionSwitchValue\\\" name=\\\"newConditionSwitchValue\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.newCondition.value\\\" data-ng-checked=\\\"false\\\" data-ng-true-value=\\\"1\\\" data-ng-false-value=\\\"0\\\"></div></div></div><div data-ng-if=\\\"EventModalCtrl.newConditionType.name === \\'dimmer\\'\\\"><div class=\\\"control-group\\\" data-ng-class=\\\"{\\'has-error\\': !EventModalCtrl.tmpElement}\\\"><label for=\\\"newConditionDimmer\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_dimmer_select\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"newConditionDimmer\\\" name=\\\"newConditionDimmer\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.tmpElement\\\" data-ng-change=\\\"EventModalCtrl.setConditionBenoicElement()\\\" data-ng-options=\\\"dimmer as dimmer.display for dimmer in EventModalCtrl.benoicElements.dimmers track by EventModalCtrl.trackBenoicElement(dimmer, \\'dimmer\\')\\\"></select></div></div><div class=\\\"form-group\\\"><label for=\\\"newConditionDimmerValue\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_dimmer_value\\\"></label><div class=\\\"col-xs-3\\\"><select id=\\\"newConditionOperator\\\" name=\\\"newConditionOperator\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.newCondition.condition\\\"><option value=\\\"==\\\">==</option><option value=\\\"<\\\">&lt;</option><option value=\\\"<=\\\">&lt;=</option><option value=\\\">\\\">&gt;</option><option value=\\\">=\\\">&gt;=</option></select></div><div class=\\\"col-xs-4\\\"><input id=\\\"newConditionDimmerValue\\\" class=\\\"form-control\\\" name=\\\"newConditionDimmerValue\\\" type=\\\"number\\\" min=\\\"0\\\" max=\\\"100\\\" size=\\\"3\\\" data-ng-model=\\\"EventModalCtrl.newCondition.value\\\"></div></div></div><div data-ng-if=\\\"EventModalCtrl.newConditionType.name === \\'heater\\'\\\"><div class=\\\"control-group\\\"><label for=\\\"newConditionHeater\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_heater_select\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"newConditionHeater\\\" name=\\\"newConditionHeater\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.tmpElement\\\" data-ng-change=\\\"EventModalCtrl.setConditionBenoicElement()\\\" data-ng-options=\\\"heater as heater.display for heater in EventModalCtrl.benoicElements.heaters track by EventModalCtrl.trackBenoicElement(heater, \\'heater\\')\\\"></select></div></div><div><label for=\\\"newConditionHeaterValue\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_heater_command\\\"></label><div class=\\\"col-xs-3\\\"><select id=\\\"newConditionOperator\\\" name=\\\"newConditionOperator\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"!!EventModalCtrl.newCondition.commandMode\\\" data-ng-model=\\\"EventModalCtrl.newCondition.condition\\\"><option value=\\\"==\\\">==</option><option value=\\\"<\\\"><</option><option value=\\\"<=\\\"><=< option=\\\"\\\"><option value=\\\">\\\">&gt;</option><option value=\\\">=\\\">&gt;=</option></=<></option></select></div><div class=\\\"col-xs-4\\\"><input id=\\\"newConditionHeaterValue\\\" class=\\\"form-control\\\" name=\\\"newConditionHeaterValue\\\" type=\\\"number\\\" min=\\\"0\\\" max=\\\"100\\\" data-ng-disabled=\\\"!!EventModalCtrl.newCondition.commandMode\\\" data-ng-model=\\\"EventModalCtrl.newCondition.commandHeat\\\"></div></div><div class=\\\"control-group\\\"><div class=\\\"col-xs-12 text-center\\\"><label data-translate=\\\"condition_or\\\"></label></div></div><div class=\\\"control-group\\\"><label for=\\\"newConditionHeaterMode\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_heater_mode_title\\\"></label><div class=\\\"col-xs-3\\\"><select id=\\\"newConditionOperator\\\" name=\\\"newConditionOperator\\\" class=\\\"form-control\\\" data-ng-disabled=\\\"!!EventModalCtrl.newCondition.commandHeat\\\" data-ng-model=\\\"EventModalCtrl.newCondition.condition\\\"><option value=\\\"==\\\">=</option><option value=\\\"!=\\\">!=</option></select></div><div class=\\\"col-xs-4 controls\\\"><select class=\\\"form-control\\\" id=\\\"newConditionHeaterMode\\\" name=\\\"newConditionHeaterMode\\\" data-ng-disabled=\\\"!!EventModalCtrl.newCondition.commandHeat\\\" data-ng-model=\\\"EventModalCtrl.newCondition.commandMode\\\" data-ng-options=\\\"mode as EventModalCtrl.heaterModeDisplay(mode) for mode in EventModalCtrl.tmpElement.availableModes\\\"><option value=\\\"\\\"></option></select></div></div></div><div data-ng-if=\\\"EventModalCtrl.newConditionType.name === \\'sensor\\'\\\"><div class=\\\"control-group\\\" data-ng-class=\\\"{\\'has-error\\': !EventModalCtrl.tmpElement}\\\"><label for=\\\"newConditionSensor\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_sensor_select\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"newConditionSensor\\\" name=\\\"newConditionSensor\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.tmpElement\\\" data-ng-change=\\\"EventModalCtrl.setConditionBenoicElement()\\\" data-ng-options=\\\"sensor as sensor.display for sensor in EventModalCtrl.benoicElements.sensors track by EventModalCtrl.trackBenoicElement(sensor, \\'sensor\\')\\\"></select></div></div><div class=\\\"form-group\\\"><label for=\\\"newConditionSensorValue\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_sensor_value\\\"></label><div class=\\\"col-xs-3\\\"><select id=\\\"newConditionOperator\\\" name=\\\"newConditionOperator\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.newCondition.condition\\\"><option value=\\\"==\\\">==</option><option value=\\\"<\\\">&lt;</option><option value=\\\"<=\\\">&lt;=</option><option value=\\\">\\\">&gt;</option><option value=\\\">=\\\">&gt;=</option></select></div><div class=\\\"col-xs-4\\\"><input id=\\\"newConditionSensorValue\\\" class=\\\"form-control\\\" name=\\\"newConditionSensorValue\\\" type=\\\"number\\\" min=\\\"0\\\" max=\\\"100\\\" size=\\\"3\\\" step=\\\".1\\\" data-ng-model=\\\"EventModalCtrl.newCondition.value\\\"></div></div></div><div data-ng-if=\\\"EventModalCtrl.newConditionType.submodule === \\'carleon\\'\\\"><div class=\\\"control-group\\\" data-ng-class=\\\"{\\'has-error\\': !EventModalCtrl.tmpElement}\\\"><label for=\\\"newConditionCarleonElement\\\" class=\\\"col-xs-5\\\" data-translate=\\\"script_element_select\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"newConditionCarleonElement\\\" name=\\\"newConditionCarleonElement\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.tmpElement\\\" data-ng-change=\\\"EventModalCtrl.setActionCarleonElement()\\\" data-ng-options=\\\"element as element.name for element in EventModalCtrl.carleonConditionElementsList[EventModalCtrl.newConditionType.name] track by EventModalCtrl.trackCarleonElement(element, EventModalCtrl.newConditionType.name)\\\"></select></div></div><div class=\\\"control-group\\\" data-ng-repeat=\\\"parameter in EventModalCtrl.carleonConditionCommandsParameters[EventModalCtrl.newConditionType.name]\\\"><label for=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" class=\\\"col-xs-5\\\" data-ng-bind=\\\"parameter.title\\\"></label><div class=\\\"col-xs-7 controls\\\" data-ng-class=\\\"{\\'has-error\\': (parameter.required && !EventModalCtrl.newCondition.parameters[parameter.name] && EventModalCtrl.newCondition.parameters[parameter.name] !== 0)}\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" id=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"parameter.type === \\'string\\'\\\" data-ng-model=\\\"EventModalCtrl.newCondition.parameters[parameter.name]\\\"> <input type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" id=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"parameter.type === \\'integer\\'\\\" data-ng-model=\\\"EventModalCtrl.newCondition.parameters[parameter.name]\\\"> <input type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" id=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"parameter.type === \\'real\\'\\\" step=\\\".01\\\" data-ng-model=\\\"EventModalCtrl.newCondition.parameters[parameter.name]\\\"> <input type=\\\"checkbox\\\" id=\\\"newConditionSwitchValue\\\" name=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.newCondition.parameters[parameter.name]\\\" data-ng-checked=\\\"false\\\" data-ng-if=\\\"parameter.type === \\'boolean\\'\\\"></div></div><div class=\\\"control-group\\\"><label for=\\\"newConditionCarleonParameter\\\" class=\\\"col-xs-5\\\" data-translate=\\\"condition_result_select\\\"></label><div class=\\\"col-xs-7 controls\\\"><select id=\\\"newConditionCarleonParameter\\\" name=\\\"newConditionCarleonParameter\\\" class=\\\"form-control\\\" data-ng-init=\\\"EventModalCtrl.tmpResult = EventModalCtrl.carleonConditionResultParameters[EventModalCtrl.newConditionType.name][0]\\\" data-ng-model=\\\"EventModalCtrl.tmpResult\\\" data-ng-options=\\\"parameter as EventModalCtrl.tr(parameter.title) for parameter in EventModalCtrl.carleonConditionResultParameters[EventModalCtrl.newConditionType.name]\\\"></select></div></div><div class=\\\"control-group\\\" data-ng-if=\\\"EventModalCtrl.tmpResult\\\"><label for=\\\"{{EventModalCtrl.tmpResult.title}}\\\" class=\\\"col-xs-5\\\" data-translate=\\\"scheduler_condition_value\\\"></label><div class=\\\"col-xs-5 controls\\\"></div><div class=\\\"col-xs-3\\\"><select id=\\\"{{EventModalCtrl.tmpResult.title}}\\\" name=\\\"{{EventModalCtrl.tmpResult.title}}\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.newCondition.condition\\\" data-ng-if=\\\"EventModalCtrl.tmpResult.type === \\'real\\' || EventModalCtrl.tmpResult.type === \\'integer\\'\\\"><option value=\\\"==\\\">==</option><option value=\\\"<\\\">&lt;</option><option value=\\\"<=\\\">&lt;=</option><option value=\\\">\\\">&gt;</option><option value=\\\">=\\\">&gt;=</option></select><select id=\\\"newConditionOperator\\\" name=\\\"newConditionOperator\\\" class=\\\"form-control\\\" data-ng-model=\\\"EventModalCtrl.newCondition.condition\\\" data-ng-if=\\\"EventModalCtrl.tmpResult.type === \\'string\\'\\\"><option value=\\\"==\\\">==</option><option value=\\\"!=\\\">!=</option><option value=\\\"contains\\\" data-translate=\\\"condition_contains\\\"></option><option value=\\\"not contains\\\" data-translate=\\\"condition_not_contains\\\"></option></select><input type=\\\"checkbox\\\" id=\\\"{{EventModalCtrl.newConditionType.name}}\\\" name=\\\"{{EventModalCtrl.newConditionType.name}\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"EventModalCtrl.newCondition.value\\\" data-ng-checked=\\\"false\\\" data-ng-if=\\\"EventModalCtrl.tmpResult.type === \\'boolean\\'\\\"></div><div class=\\\"col-xs-4\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"{{EventModalCtrl.newConditionType.name}}\\\" id=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"EventModalCtrl.tmpResult.type === \\'string\\'\\\" data-ng-model=\\\"EventModalCtrl.newCondition.value\\\"> <input type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"{{EventModalCtrl.newConditionType.name}}\\\" id=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"EventModalCtrl.tmpResult.type === \\'integer\\'\\\" data-ng-model=\\\"EventModalCtrl.newCondition.value\\\"> <input type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"{{EventModalCtrl.newConditionType.name}}\\\" id=\\\"{{EventModalCtrl.newConditionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"EventModalCtrl.tmpResult.type === \\'real\\'\\\" step=\\\".01\\\" data-ng-model=\\\"EventModalCtrl.newCondition.value\\\"></div></div></div></div><div class=\\\"row control-group\\\"><label for=\\\"eventScriptAdd\\\" class=\\\"col-xs-5\\\" data-translate=\\\"event_add\\\"></label><div class=\\\"col-xs-7\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-ng-click=\\\"EventModalCtrl.addCondition()\\\" data-ng-disabled=\\\"!EventModalCtrl.isConditionValid()\\\"><i class=\\\"fa fa-plus\\\"></i></button></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"EventModalCtrl.save()\\\" data-translate=\\\"btn_ok\\\" data-ng-disabled=\\\"!EventModalCtrl.isEventValid()\\\" data-uib-tooltip=\\\"{{EventModalCtrl.error.message}}\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"EventModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/event/scheduler.template.html\",\"<div class=\\\"text-center\\\"><div class=\\\"row\\\"><div class=\\\"span6\\\"><label for=\\\"schedulerEnabled\\\" data-translate=\\\"scheduler_enable_button\\\"></label> <input type=\\\"checkbox\\\" id=\\\"schedulerEnabled\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-change=\\\"$ctrl.enableScheduler()\\\" data-ng-model=\\\"$ctrl.element.enabled\\\"></div></div><div class=\\\"row\\\"><div class=\\\"span6\\\"><label data-translate=\\\"scheduler_next_time\\\"></label></div><div class=\\\"span6\\\"><span data-ng-bind=\\\"$ctrl.element.next_time * 1000 | date:\\'yyyy/MM/dd HH:mm\\'\\\" data-ng-if=\\\"$ctrl.element.enabled\\\"></span> <span data-translate=\\\"scheduler_disabled\\\" data-ng-if=\\\"!$ctrl.element.enabled\\\"></span></div></div></div>\");\n$templateCache.put(\"components/event/trigger.template.html\",\"<div class=\\\"text-center\\\"><div class=\\\"row\\\"><div class=\\\"span6\\\"><label for=\\\"schedulerEnabled\\\" data-translate=\\\"scheduler_enable_button\\\"></label> <input type=\\\"checkbox\\\" id=\\\"schedulerEnabled\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-change=\\\"$ctrl.enableTrigger()\\\" data-ng-model=\\\"$ctrl.element.enabled\\\"></div></div></div>\");\n$templateCache.put(\"components/heater/heater.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"heater_update_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"heater_update_name\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"heaterDisplay\\\" id=\\\"heaterDisplay\\\" data-ng-model=\\\"HeatersModalCtrl.heater.newDisplay\\\" class=\\\"modal-input-text form-control\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"heater_update_unit\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"heaterUnit\\\" id=\\\"heaterUnit\\\" data-ng-model=\\\"HeatersModalCtrl.heater.options.unit\\\" class=\\\"modal-input-text form-control\\\" placeholder=\\\"{{\\'heater_unit_placeholder\\' | translate}}\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"heater_update_enabled\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" class=\\\"form-control\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"HeatersModalCtrl.heater.enabled\\\"></div></div><div class=\\\"row\\\"><hr></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"heater_update_monitor\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" class=\\\"form-control\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"HeatersModalCtrl.heater.monitored\\\"></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"HeatersModalCtrl.heater.monitored\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"heater_update_monitor_every\\\"></span><div class=\\\"col-xs-6 controls\\\"><select id=\\\"bddAddUserGrant\\\" class=\\\"form-control\\\" data-ng-model=\\\"HeatersModalCtrl.heater.monitored_every\\\" data-ng-options=\\\"monitorEvery.value as HeatersModalCtrl.tr(monitorEvery.label) for monitorEvery in HeatersModalCtrl.monitorEveryEnum\\\"></select></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"HeatersModalCtrl.saveHeater()\\\" data-translate=\\\"heater_btn_ok\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"HeatersModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"heater_btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/heater/heater.template.html\",\"<div class=\\\"container-fluid\\\" data-ng-class=\\\"{\\'text-italic\\': $ctrl.adminMode}\\\" data-ng-if=\\\"$ctrl.element.enabled || $ctrl.adminMode\\\"><div class=\\\"text-center row control-group\\\"><span class=\\\"heater-on\\\"><i class=\\\"fa fa-fire\\\" aria-hidden=\\\"true\\\" data-ng-if=\\\"$ctrl.element.value.on\\\"></i></span></div><div class=\\\"row control-group\\\"><div class=\\\"ring control-group\\\"><div class=\\\"quarter quarter-plus-1\\\" data-ng-click=\\\"$ctrl.setHeater(1)\\\"><span class=\\\"quarter-value\\\" data-ng-bind=\\\"$ctrl.displayCommand(1)\\\"></span></div><div class=\\\"quarter quarter-plus-5\\\" data-ng-click=\\\"$ctrl.setHeater(5)\\\"><span class=\\\"quarter-value\\\" data-ng-bind=\\\"$ctrl.displayCommand(5)\\\"></span></div><div class=\\\"quarter quarter-minus-1\\\" data-ng-click=\\\"$ctrl.setHeater(-1)\\\"><span class=\\\"quarter-value\\\" data-ng-bind=\\\"$ctrl.displayCommand(-1)\\\"></span></div><div class=\\\"quarter quarter-minus-5\\\" data-ng-click=\\\"$ctrl.setHeater(-5)\\\"><span class=\\\"quarter-value\\\" data-ng-bind=\\\"$ctrl.displayCommand(-5)\\\"></span></div><div class=\\\"cutout-heater\\\"><div class=\\\"ring-value\\\" data-ng-bind=\\\"$ctrl.displayCommandValue()\\\"></div></div></div></div><hr class=\\\"heater-hr\\\"><div class=\\\"row control-group\\\"><div class=\\\"col-xs-4 controls\\\"><label for=\\\"heaterMode\\\" data-translate=\\\"heater_mode_title\\\"></label></div><div class=\\\"col-xs-8 controls\\\"><select class=\\\"form-control\\\" name=\\\"heaterMode\\\" value=\\\"heaterMode\\\" data-ng-model=\\\"$ctrl.element.value.mode\\\" data-ng-change=\\\"$ctrl.setHeater(null)\\\" data-ng-options=\\\"mode as $ctrl.modeDisplay(mode) for mode in $ctrl.availableModes\\\"></select></div></div></div>\");\n$templateCache.put(\"components/modals/confirm.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\">{{ConfirmModalCtrl.title}}</h3></div><div class=\\\"modal-body\\\"><div class=\\\"row\\\" style=\\\"margin: 5px;\\\"><span>{{ConfirmModalCtrl.message}}</span></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"ConfirmModalCtrl.ok()\\\">OK</button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"ConfirmModalCtrl.cancel()\\\">Cancel</button></div></div></div>\");\n$templateCache.put(\"components/modals/edit.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\" data-ng-bind=\\\"EditModalCtrl.title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row\\\" style=\\\"margin: 5px;\\\"><span data-ng-bind=\\\"EditModalCtrl.message\\\"></span></div><div class=\\\"row control-group\\\" style=\\\"margin: 5px;\\\"><div class=\\\"controls\\\"><input type=\\\"text\\\" name=\\\"editInput\\\" id=\\\"editInput\\\" class=\\\"form-control\\\" data-ng-model=\\\"EditModalCtrl.value\\\" placeholder=\\\"{{EditModalCtrl.placeholder}}\\\"></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"EditModalCtrl.ok()\\\" data-translate=\\\"modal_button_ok\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"EditModalCtrl.cancel()\\\" data-translate=\\\"modal_button_cancel\\\"></button></div></div></div>\");\n$templateCache.put(\"components/modals/image.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal_title\\\" data-ng-bind=\\\"ImageModalCtrl.displayTitle()\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><div class=\\\"col-xs-1\\\"></div><div class=\\\"col-xs-10\\\"><img data-ng-src=\\\"{{ImageModalCtrl.src}}\\\" alt=\\\"{{ImageModalCtrl.title}}\\\" class=\\\"img-responsive img-thumbnail\\\"></div><div class=\\\"col-xs-1\\\"></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"ImageModalCtrl.close()\\\" data-translate=\\\"monitor_close\\\"></button></div></div>\");\n$templateCache.put(\"components/modals/monitor.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal_title\\\" data-ng-bind=\\\"MonitorModalCtrl.displayTitle()\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><div class=\\\"col-xs-6\\\"><label for=\\\"monitorSelectDuration\\\" data-translate=\\\"monitor_select_duration\\\"></label></div><div class=\\\"col-xs-6 controls\\\"><select id=\\\"monitorSelectDuration\\\" class=\\\"form-control\\\" data-ng-model=\\\"MonitorModalCtrl.duration\\\" data-ng-change=\\\"MonitorModalCtrl.getMonitor()\\\" data-ng-options=\\\"duration as MonitorModalCtrl.tr(duration.label) for duration in MonitorModalCtrl.durationList track by duration.value\\\"></select></div></div><div class=\\\"row\\\"><data-nvd3 data-options=\\\"MonitorModalCtrl.options\\\" data=\\\"MonitorModalCtrl.data\\\"></data-nvd3></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"MonitorModalCtrl.close()\\\" data-translate=\\\"monitor_close\\\"></button></div></div>\");\n$templateCache.put(\"components/modals/scriptBindElement.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"script_bind_element_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row\\\"><span data-translat=\\\"script_bind_element_list\\\"></span></div><div class=\\\"row\\\" style=\\\"padding: 5px;\\\"><table data-datatable=\\\"ng\\\" data-dt-options=\\\"ScriptBindElementModalCtrl.options\\\" class=\\\"table table-hover table-striped table-bordered dataTable\\\"><thead><tr><th data-translate=\\\"script_bind_table_select\\\"></th><th data-translate=\\\"script_bind_table_type\\\"></th><th data-translate=\\\"script_bind_table_display\\\"></th></tr></thead><tbody><tr data-ng-repeat=\\\"element in ScriptBindElementModalCtrl.elementList track by $index\\\" data-ng-click=\\\"ScriptBindElementModalCtrl.selectRow($index)\\\" data-ng-class=\\\"{\\'selected\\': element.selected}\\\"><td><input class=\\\"text-center\\\" id=\\\"elementSelect\\\" type=\\\"checkbox\\\" data-ng-model=\\\"ScriptBindElementModalCtrl.tmpCheck[$index]\\\"></td><td data-ng-bind=\\\"element.typeTitle\\\"></td><td data-ng-bind=\\\"element.display\\\"></td></tr></tbody></table></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"ScriptBindElementModalCtrl.ok()\\\" data-translate=\\\"modal_button_ok\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"ScriptBindElementModalCtrl.cancel()\\\" data-translate=\\\"modal_button_cancel\\\"></button></div></div></div>\");\n$templateCache.put(\"components/monitor/monitor.template.html\",\"<div class=\\\"container-fluid\\\"><div class=\\\"row control-group\\\"><div class=\\\"col-xs-5\\\"><label for=\\\"monitorSelectDuration\\\" data-translate=\\\"monitor_select_duration\\\"></label></div><div class=\\\"col-xs-5 controls\\\"><select id=\\\"monitorSelectDuration\\\" class=\\\"form-control\\\" data-ng-model=\\\"$ctrl.duration\\\" data-ng-change=\\\"$ctrl.displayMonitor()\\\" data-ng-options=\\\"duration as $ctrl.tr(duration.label) for duration in $ctrl.durationList track by duration.value\\\"></select></div></div><div class=\\\"row control-group\\\"><div class=\\\"col-xs-1\\\"></div><div class=\\\"col-xs-2\\\"><label for=\\\"monitorNewElement\\\" data-translate=\\\"monitor_new_element\\\"></label></div><div class=\\\"col-xs-3 controls\\\"><select id=\\\"monitorNewElement\\\" class=\\\"form-control\\\" data-ng-model=\\\"$ctrl.newElement\\\" data-ng-options=\\\"element.display for element in $ctrl.elementListDisplayed\\\"></select></div><div class=\\\"col-xs-3 controls\\\"><button type=\\\"button\\\" data-ng-click=\\\"$ctrl.addElement()\\\" class=\\\"btn btn-primary\\\" data-ng-disabled=\\\"!$ctrl.newElementValid()\\\" data-translate=\\\"monitor_new_element_button\\\"></button></div></div><div class=\\\"row text-center\\\"><div class=\\\"col-xs-12\\\"><data-nvd3 data-options=\\\"$ctrl.options\\\" data=\\\"$ctrl.data\\\"></data-nvd3></div></div><div class=\\\"row text-center\\\"><span data-ng-repeat=\\\"serie in $ctrl.element.elements\\\" style=\\\"margin: 5px; color: white;\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"$ctrl.removeSerie(serie)\\\" data-ng-disabled=\\\"$ctrl.element.elements.length <= 1\\\"><i class=\\\"fa fa-trash-o\\\" aria-hidden=\\\"true\\\"></i> <span data-ng-bind=\\\"serie.display\\\"></span></button></span></div></div>\");\n$templateCache.put(\"components/script/script.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"script_modal_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': !!ScriptModalCtrl.error.message}\\\"><label for=\\\"scriptName\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_name\\\"></label><div class=\\\"col-xs-8 controls\\\"><input type=\\\"text\\\" name=\\\"scriptName\\\" id=\\\"scriptName\\\" data-ng-model=\\\"ScriptModalCtrl.script.name\\\" class=\\\"modal-input-text form-control\\\" size=\\\"16\\\" maxlength=\\\"64\\\" data-ng-disabled=\\\"!ScriptModalCtrl.add\\\" placeholder=\\\"{{\\'script_name_placeholder\\' | translate}}\\\"></div></div><div class=\\\"row control-group\\\"><label for=\\\"scriptDecription\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_description\\\"></label><div class=\\\"col-xs-8 controls\\\"><input type=\\\"text\\\" name=\\\"scriptDecription\\\" id=\\\"scriptDecription\\\" data-ng-model=\\\"ScriptModalCtrl.script.description\\\" class=\\\"modal-input-text form-control\\\" size=\\\"16\\\" maxlength=\\\"128\\\" placeholder=\\\"{{\\'script_description_placeholder\\' | translate}}\\\"></div></div><hr><h4 data-translate=\\\"script_actions\\\"></h4><div data-ng-repeat=\\\"action in ScriptModalCtrl.script.actions\\\"><div class=\\\"row\\\" data-ng-if=\\\"action.submodule === \\'benoic\\'\\\"><div class=\\\"col-xs-4\\\"><strong data-ng-bind=\\\"ScriptModalCtrl.getBenoicElementDisplay(action)\\\"></strong></div><div class=\\\"col-xs-4\\\"><strong data-ng-bind=\\\"ScriptModalCtrl.getBenoicElementValue(action)\\\"></strong></div><div class=\\\"col-xs-2\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ScriptModalCtrl.removeAction($index)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></div></div><div class=\\\"row\\\" data-ng-if=\\\"action.submodule === \\'carleon\\'\\\"><div class=\\\"col-xs-4\\\"><strong data-ng-bind=\\\"ScriptModalCtrl.carleonCommand(action.command, action.parameters.service)\\\"></strong></div><div class=\\\"col-xs-4\\\"><div class=\\\"row\\\" data-ng-repeat=\\\"(name, value) in action.parameters\\\" data-ng-if=\\\"name !== \\'service\\'\\\"><strong><span data-ng-bind=\\\"ScriptModalCtrl.carleonParameter(name, action.parameters.service, action.command)\\\"></span> <span>:</span> <span data-ng-bind=\\\"value\\\"></span></strong></div></div><div class=\\\"col-xs-2\\\"><button type=\\\"button\\\" class=\\\"btn\\\" data-ng-click=\\\"ScriptModalCtrl.removeAction($index)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i></button></div></div></div><hr><div class=\\\"row\\\"><div class=\\\"col-xs-12\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"ScriptModalCtrl.addAction()\\\" data-translate=\\\"script_add_action\\\"></button></div></div><div data-ng-if=\\\"ScriptModalCtrl.newAction\\\"><hr><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': !ScriptModalCtrl.newActionType}\\\"><label for=\\\"newActionElement\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_action\\\"></label><div class=\\\"col-xs-8 controls\\\"><select id=\\\"newActionElement\\\" name=\\\"newActionElement\\\" class=\\\"form-control\\\" data-ng-model=\\\"ScriptModalCtrl.newActionType\\\" data-ng-options=\\\"element as ScriptModalCtrl.tr(element.label) for element in ScriptModalCtrl.scriptActionElements track by element.name\\\" data-ng-change=\\\"ScriptModalCtrl.changeActionType()\\\"></select></div></div><div data-ng-if=\\\"ScriptModalCtrl.newActionType.name === \\'switch\\'\\\"><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': !ScriptModalCtrl.newAction.switcher.name}\\\"><label for=\\\"newActionSwitch\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_switch_select\\\"></label><div class=\\\"col-xs-8 controls\\\"><select id=\\\"newActionSwitch\\\" name=\\\"newActionSwitch\\\" class=\\\"form-control\\\" data-ng-model=\\\"ScriptModalCtrl.tmpElement\\\" data-ng-change=\\\"ScriptModalCtrl.setActionBenoicElement()\\\" data-ng-options=\\\"switch as switch.display for switch in ScriptModalCtrl.benoicElements.switches track by ScriptModalCtrl.trackBenoicElement(switch, \\'switch\\')\\\"></select></div></div><div class=\\\"row\\\"><label for=\\\"newActionSwitchValue\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_switch_value\\\"></label><div class=\\\"col-xs-8\\\"><input type=\\\"checkbox\\\" id=\\\"newActionSwitchValue\\\" name=\\\"newActionSwitchValue\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"ScriptModalCtrl.newAction.command\\\" data-ng-checked=\\\"false\\\" data-ng-true-value=\\\"1\\\" data-ng-false-value=\\\"0\\\"></div></div></div><div data-ng-if=\\\"ScriptModalCtrl.newActionType.name === \\'dimmer\\'\\\"><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': !ScriptModalCtrl.newAction.dimmer.name}\\\"><label for=\\\"newActionDimmer\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_dimmer_select\\\"></label><div class=\\\"col-xs-8 controls\\\"><select id=\\\"newActionDimmer\\\" name=\\\"newActionDimmer\\\" class=\\\"form-control\\\" data-ng-model=\\\"ScriptModalCtrl.tmpElement\\\" data-ng-change=\\\"ScriptModalCtrl.setActionBenoicElement()\\\" data-ng-options=\\\"dimmer as dimmer.display for dimmer in ScriptModalCtrl.benoicElements.dimmers track by ScriptModalCtrl.trackBenoicElement(dimmer, \\'dimmer\\')\\\"></select></div></div><div class=\\\"row\\\"><label for=\\\"newActionDimmerValue\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_dimmer_value\\\"></label><div class=\\\"col-xs-8\\\"><input id=\\\"newActionDimmerValue\\\" class=\\\"form-control\\\" name=\\\"newActionDimmerValue\\\" type=\\\"number\\\" min=\\\"0\\\" max=\\\"100\\\" data-ng-model=\\\"ScriptModalCtrl.newAction.command\\\"></div></div></div><div data-ng-if=\\\"ScriptModalCtrl.newActionType.name === \\'heater\\'\\\"><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': !ScriptModalCtrl.newAction.heater.name}\\\"><label for=\\\"newActionHeater\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_heater_select\\\"></label><div class=\\\"col-xs-8 controls\\\"><select id=\\\"newActionHeater\\\" name=\\\"newActionHeater\\\" class=\\\"form-control\\\" data-ng-model=\\\"ScriptModalCtrl.tmpElement\\\" data-ng-change=\\\"ScriptModalCtrl.setActionBenoicElement()\\\" data-ng-options=\\\"heater as heater.display for heater in ScriptModalCtrl.benoicElements.heaters track by ScriptModalCtrl.trackBenoicElement(heater, \\'heater\\')\\\"></select></div></div><div class=\\\"row\\\"><label for=\\\"newActionHeaterValue\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_heater_command\\\"></label><div class=\\\"col-xs-8\\\"><input id=\\\"newActionHeaterValue\\\" class=\\\"form-control\\\" name=\\\"newActionHeaterValue\\\" type=\\\"number\\\" min=\\\"0\\\" max=\\\"100\\\" data-ng-model=\\\"ScriptModalCtrl.newAction.command\\\"> <span data-ng-bind=\\\"ScriptModalCtrl.tmpElement.options.unit\\\"></span></div></div><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': !ScriptModalCtrl.newAction.heater.mode}\\\"><label for=\\\"newActionHeaterMode\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_heater_mode_title\\\"></label><div class=\\\"col-xs-8 controls\\\"><select class=\\\"form-control\\\" id=\\\"newActionHeaterMode\\\" name=\\\"newActionHeaterMode\\\" data-ng-model=\\\"ScriptModalCtrl.newAction.parameters.mode\\\" data-ng-options=\\\"mode as ScriptModalCtrl.heaterModeDisplay(mode) for mode in ScriptModalCtrl.tmpElement.availableModes\\\"><option value=\\\"\\\" data-translate=\\\"heater_mode_keep\\\"></option></select></div></div></div><div data-ng-if=\\\"ScriptModalCtrl.newActionType.submodule === \\'carleon\\'\\\"><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': false}\\\"><label for=\\\"newActionCarleonElement\\\" class=\\\"col-xs-4\\\" data-translate=\\\"script_element_select\\\"></label><div class=\\\"col-xs-8 controls\\\"><select id=\\\"newActionCarleonElement\\\" name=\\\"newActionCarleonElement\\\" class=\\\"form-control\\\" data-ng-model=\\\"ScriptModalCtrl.tmpElement\\\" data-ng-change=\\\"ScriptModalCtrl.setActionCarleonElement()\\\" data-ng-options=\\\"element as element.name for element in ScriptModalCtrl.carleonConditionElementsList[ScriptModalCtrl.newActionType.name] track by ScriptModalCtrl.trackCarleonElement(element, ScriptModalCtrl.newActionType.name)\\\"></select></div></div><div class=\\\"row control-group\\\" data-ng-class=\\\"{\\'has-error\\': false}\\\" data-ng-repeat=\\\"parameter in ScriptModalCtrl.carleonConditionCommandsParameters[ScriptModalCtrl.newActionType.name]\\\"><label for=\\\"{{ScriptModalCtrl.newActionType.name + \\'$\\' + parameter.name}}\\\" class=\\\"col-xs-4\\\" data-ng-bind=\\\"parameter.title\\\"></label><div class=\\\"col-xs-8 controls\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"{{ScriptModalCtrl.newActionType.name + \\'$\\' + parameter.name}}\\\" id=\\\"{{ScriptModalCtrl.newActionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"parameter.type === \\'string\\'\\\" data-ng-model=\\\"ScriptModalCtrl.newAction.parameters[parameter.name]\\\"> <input type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"{{ScriptModalCtrl.newActionType.name + \\'$\\' + parameter.name}}\\\" id=\\\"{{ScriptModalCtrl.newActionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"parameter.type === \\'integer\\'\\\" data-ng-model=\\\"ScriptModalCtrl.newAction.parameters[parameter.name]\\\"> <input type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"{{ScriptModalCtrl.newActionType.name + \\'$\\' + parameter.name}}\\\" id=\\\"{{ScriptModalCtrl.newActionType.name + \\'$\\' + parameter.name}}\\\" data-ng-if=\\\"parameter.type === \\'real\\'\\\" step=\\\".01\\\" data-ng-model=\\\"ScriptModalCtrl.newAction.parameters[parameter.name]\\\"></div></div></div><hr><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"ScriptModalCtrl.saveNewAction()\\\" data-translate=\\\"btn_add\\\" data-ng-disabled=\\\"!ScriptModalCtrl.isActionValid()\\\" data-uib-tooltip=\\\"{{ScriptModalCtrl.error.messageAction}}\\\"></button></div><div class=\\\"col-xs-6\\\"><button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-ng-click=\\\"ScriptModalCtrl.cancelAddAction()\\\" data-translate=\\\"btn_cancel\\\"></button></div></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"ScriptModalCtrl.save()\\\" data-translate=\\\"btn_ok\\\" data-ng-disabled=\\\"!ScriptModalCtrl.isScriptValid()\\\" data-uib-tooltip=\\\"{{ScriptModalCtrl.error.message}}\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"ScriptModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/script/script.template.html\",\"<div class=\\\"text-center\\\"><button type=\\\"button\\\" data-ng-click=\\\"$ctrl.runScript()\\\" class=\\\"btn btn-primary script-button\\\" data-ng-bind=\\\"$ctrl.element.name\\\"></button></div>\");\n$templateCache.put(\"components/sensor/sensor.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"sensor_update_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"sensor_update_name\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"sensorDisplay\\\" id=\\\"sensorDisplay\\\" data-ng-model=\\\"SensorsModalCtrl.sensor.newDisplay\\\" class=\\\"modal-input-text form-control\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"sensor_update_unit\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"sensorUnit\\\" id=\\\"sensorUnit\\\" data-ng-model=\\\"SensorsModalCtrl.sensor.options.unit\\\" class=\\\"modal-input-text form-control\\\" placeholder=\\\"{{\\'sensor_unit_placeholder\\' | translate}}\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"sensor_update_enabled\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" class=\\\"form-control\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"SensorsModalCtrl.sensor.enabled\\\"></div></div><div class=\\\"row\\\"><hr></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"sensor_update_monitor\\\"></span><div class=\\\"col-xs-6\\\"><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" class=\\\"form-control\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"SensorsModalCtrl.sensor.monitored\\\"></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"SensorsModalCtrl.sensor.monitored\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"sensor_update_monitor_every\\\"></span><div class=\\\"col-xs-6\\\"><select id=\\\"bddAddUserGrant\\\" class=\\\"form-control\\\" data-ng-model=\\\"SensorsModalCtrl.sensor.monitored_every\\\" data-ng-options=\\\"monitorEvery.value as SensorsModalCtrl.tr(monitorEvery.label) for monitorEvery in SensorsModalCtrl.monitorEveryEnum\\\"></select></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"SensorsModalCtrl.saveSensor()\\\" data-translate=\\\"sensor_btn_ok\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"SensorsModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"sensor_btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/sensor/sensor.template.html\",\"<div data-ng-if=\\\"$ctrl.element.enabled || $ctrl.adminMode\\\"><div class=\\\"text-center\\\" data-ng-class=\\\"{\\'text-italic\\': $ctrl.adminMode}\\\"><div data-ng-bind=\\\"$ctrl.elementDisplayValue()\\\"></div></div></div>\");\n$templateCache.put(\"components/switch/switch.modal.html\",\"<div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\" data-translate=\\\"switch_update_title\\\"></h3></div><div class=\\\"modal-body\\\"><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"switch_update_name\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"text\\\" name=\\\"switcherDisplay\\\" id=\\\"switcherDisplay\\\" data-ng-model=\\\"SwitchesModalCtrl.switcher.newDisplay\\\" class=\\\"modal-input-text form-control\\\"></div></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"switch_update_enabled\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"checkbox\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"SwitchesModalCtrl.switcher.enabled\\\"></div></div><div class=\\\"row\\\"><hr></div><div class=\\\"row control-group\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"switch_update_monitor\\\"></span><div class=\\\"col-xs-6 controls\\\"><input type=\\\"checkbox\\\" class=\\\"form-control\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"SwitchesModalCtrl.switcher.monitored\\\"></div></div><div class=\\\"row control-group\\\" data-ng-if=\\\"SwitchesModalCtrl.switcher.monitored\\\"><span class=\\\"col-xs-6\\\" data-translate=\\\"switch_update_monitor_every\\\"></span><div class=\\\"col-xs-6 controls\\\"><select id=\\\"bddAddUserGrant\\\" class=\\\"form-control\\\" data-ng-model=\\\"SwitchesModalCtrl.switcher.monitored_every\\\" data-ng-options=\\\"monitorEvery.value as SwitchesModalCtrl.tr(monitorEvery.label) for monitorEvery in SwitchesModalCtrl.monitorEveryEnum\\\"></select></div></div></div><div class=\\\"modal-footer\\\"><button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-ng-click=\\\"SwitchesModalCtrl.saveSwitcher()\\\" data-translate=\\\"switch_btn_ok\\\"></button> <button class=\\\"btn btn-warning\\\" type=\\\"button\\\" data-ng-click=\\\"SwitchesModalCtrl.cancel()\\\" data-dismiss=\\\"modal\\\" data-translate=\\\"switch_btn_cancel\\\"></button></div></div>\");\n$templateCache.put(\"components/switch/switch.template.html\",\"<div data-ng-if=\\\"$ctrl.element.enabled || $ctrl.adminMode\\\"><div class=\\\"text-center\\\" data-ng-class=\\\"{\\'text-italic\\': $ctrl.adminMode}\\\"><input type=\\\"checkbox\\\" data-bs-switch=\\\"\\\" data-toggle=\\\"toggle\\\" data-switch-size=\\\"mini\\\" data-ng-model=\\\"$ctrl.element.valueChecked\\\" data-ng-change=\\\"$ctrl.toggleSwitcher()\\\"></div></div>\");\n$templateCache.put(\"components/topRightMenu/topRightMenu.template.html\",\"<div class=\\\"top-right-menu\\\" data-uib-dropdown=\\\"\\\"><button class=\\\"btn btn-primary text-left\\\" type=\\\"button\\\" data-uib-dropdown-toggle=\\\"\\\"><i class=\\\"fa fa-user fa-3x\\\" aria-hidden=\\\"true\\\"></i></button><ul class=\\\"container-fluid dropdown-menu dropdown-menu-right top-right-menu-list\\\" data-uib-dropdown-menu=\\\"\\\" data-uib-dropdown-menu-auto-close=\\\"outsideClick\\\" data-ng-click=\\\"$event.stopPropagation()\\\"><li class=\\\"row control-group\\\" data-ng-if=\\\"topRightMenuCtrl.sagremorParams.loggedIn\\\"><div class=\\\"col-xs-6 controls\\\"><label for=\\\"admin-mode\\\" data-translate=\\\"top_right_menu_admin_mode\\\"></label></div><div class=\\\"col-xs-6 controls\\\"><input class=\\\"form-control\\\" id=\\\"admin-mode\\\" name=\\\"admin-mode\\\" data-toggle=\\\"toggle\\\" data-bs-switch=\\\"\\\" data-switch-size=\\\"mini\\\" type=\\\"checkbox\\\" data-ng-model=\\\"topRightMenuCtrl.sagremorParams.adminMode\\\"></div></li><li class=\\\"row control-group\\\"><div class=\\\"col-xs-6 controls\\\"><label for=\\\"sag-lang\\\" data-translate=\\\"top_right_menu_lang\\\"></label></div><div class=\\\"col-xs-6 controls\\\"><select class=\\\"form-control\\\" id=\\\"sag-lang\\\" name=\\\"sag-lang\\\" data-ng-model=\\\"topRightMenuCtrl.selectedLang\\\" data-ng-options=\\\"lang.name as lang.display for lang in topRightMenuCtrl.langList\\\" data-ng-change=\\\"topRightMenuCtrl.changeLang()\\\"></select></div></li><li class=\\\"row control-group\\\" data-ng-if=\\\"topRightMenuCtrl.sagremorParams.loggedIn\\\"><div class=\\\"col-xs-6 controls\\\"><label for=\\\"sag-lang\\\" data-translate=\\\"top_right_menu_profile\\\"></label></div><div class=\\\"col-xs-6 controls\\\"><select class=\\\"form-control\\\" id=\\\"sag-lang\\\" name=\\\"sag-lang\\\" data-ng-model=\\\"topRightMenuCtrl.currentProfileName\\\" data-ng-options=\\\"profile.name as profile.name for profile in topRightMenuCtrl.profiles\\\" data-ng-change=\\\"topRightMenuCtrl.changeProfile()\\\"></select></div></li><li class=\\\"row control-group\\\" data-ng-if=\\\"topRightMenuCtrl.sagremorParams.loggedIn\\\"><div class=\\\"col-xs-6 controls\\\"><label for=\\\"sag-refresh\\\" data-translate=\\\"top_right_menu_refresh\\\"></label></div><div class=\\\"col-xs-6 controls\\\"><button id=\\\"sag-refresh\\\" name=\\\"sag-refresh\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" data-ng-click=\\\"topRightMenuCtrl.refresh()\\\"><i class=\\\"fa fa-refresh\\\" aria-hidden=\\\"true\\\"></i></button></div></li><li class=\\\"row control-group\\\" data-ng-if=\\\"!topRightMenuCtrl.sagremorParams.loggedIn\\\"><div class=\\\"col-xs-6 controls\\\"><label for=\\\"sag-refresh\\\" data-translate=\\\"top_right_menu_refresh\\\"></label></div><div class=\\\"col-xs-6 controls\\\"><button id=\\\"sag-refresh\\\" name=\\\"sag-refresh\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" data-ng-click=\\\"topRightMenuCtrl.reconnect()\\\"><i class=\\\"fa fa-refresh\\\" aria-hidden=\\\"true\\\"></i></button></div></li><li class=\\\"row control-group\\\"><data-oauth data-site=\\\"{{topRightMenuCtrl.oauth2.site}}\\\" data-client-id=\\\"{{topRightMenuCtrl.oauth2.clientId}}\\\" data-response-type=\\\"{{topRightMenuCtrl.oauth2.responseType}}\\\" data-redirect-uri=\\\"{{topRightMenuCtrl.oauth2.redirectUri}}\\\" data-profile-uri=\\\"{{topRightMenuCtrl.oauth2.profileUri}}\\\" data-scope=\\\"{{topRightMenuCtrl.oauth2.scope}}\\\" data-authorize-path=\\\"{{topRightMenuCtrl.oauth2.authorizePath}}\\\" data-token-path=\\\"{{topRightMenuCtrl.oauth2.tokenPath}}\\\" data-template=\\\"/app/login/login.html\\\" data-storage=\\\"localStorage\\\" data-disable-check-session=\\\"true\\\"></data-oauth></li></ul></div>\");\n$templateCache.put(\"components/topLeftMenu/topLeftMenu.template.html\",\"<div data-ng-if=\\\"topLeftMenuCtrl.sagremorParams.loggedIn\\\"><ul class=\\\"nav nav-tabs nav-stacked nav-pills topnav\\\"><li id=\\\"tabDashboard\\\" class=\\\"sag-menu active text-center\\\"><a data-ui-sref=\\\"dashboard\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabDashboard\\')\\\" title=\\\"{{\\'menu_home\\'|translate}}\\\"><i class=\\\"fa fa-home fa-fw fa-3x\\\"></i></a></li><li id=\\\"tabSwitches\\\" class=\\\"sag-menu text-center\\\" data-ng-if=\\\"topLeftMenuCtrl.sagremorParams.benoicEnabled\\\"><a data-ui-sref=\\\"switches\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabSwitches\\')\\\" title=\\\"{{\\'menu_lights\\'|translate}}\\\"><i class=\\\"fa fa-lightbulb-o fa-fw fa-3x\\\"></i></a></li><li id=\\\"tabHeaters\\\" class=\\\"sag-menu text-center\\\" data-ng-if=\\\"topLeftMenuCtrl.sagremorParams.benoicEnabled\\\"><a data-ui-sref=\\\"heaters\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabHeaters\\')\\\" title=\\\"{{\\'menu_heaters\\'|translate}}\\\"><i class=\\\"fa fa-fire fa-3x\\\"></i></a></li><li id=\\\"tabSensors\\\" class=\\\"sag-menu text-center\\\" data-ng-if=\\\"topLeftMenuCtrl.sagremorParams.benoicEnabled\\\"><a data-ui-sref=\\\"sensors\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabSensors\\')\\\" title=\\\"{{\\'menu_sensors\\'|translate}}\\\"><i class=\\\"fa fa-line-chart fa-fw fa-3x\\\"></i></a></li><li id=\\\"tabService{{service.target}}\\\" class=\\\"sag-menu text-center\\\" data-ng-repeat=\\\"service in topLeftMenuCtrl.serviceList\\\" data-ng-if=\\\"topLeftMenuCtrl.sagremorParams.carleonEnabled\\\"><a data-ui-sref=\\\"service({service: service.target})\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabService\\' + service.target)\\\" title=\\\"{{service.name|translate}}\\\"><i data-ng-class=\\\"{\\'fa fa-{{service.icon}} fa-fw fa-3x\\': true}\\\"></i></a></li><li id=\\\"tabScripts\\\" class=\\\"sag-menu text-center\\\"><a data-ui-sref=\\\"scripts\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabScripts\\')\\\" title=\\\"{{\\'menu_scripts\\'|translate}}\\\"><i class=\\\"fa fa-tasks fa-fw fa-3x\\\"></i></a></li><li id=\\\"tabEvents\\\" class=\\\"sag-menu text-center\\\"><a data-ui-sref=\\\"events\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabEvents\\')\\\" title=\\\"{{\\'menu_events\\'|translate}}\\\"><i class=\\\"fa fa-calendar fa-fw fa-3x\\\"></i></a></li><li id=\\\"tabMonitors\\\" class=\\\"sag-menu text-center\\\"><a data-ui-sref=\\\"monitors\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabMonitors\\')\\\" title=\\\"{{\\'menu_monitor\\'|translate}}\\\"><i class=\\\"fa fa-bar-chart fa-fw fa-3x\\\"></i></a></li><li id=\\\"tabLogs\\\" class=\\\"sag-menu text-center\\\" data-ng-if=\\\"topLeftMenuCtrl.sagremorParams.garethEnabled\\\" title=\\\"{{\\'menu_logs\\'|translate}}\\\"><a data-ui-sref=\\\"logs\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabLogs\\')\\\"><i class=\\\"fa fa-history fa-fw fa-3x\\\"></i></a></li><li id=\\\"tabParameters\\\" class=\\\"sag-menu text-center\\\"><a data-ui-sref=\\\"parameters\\\" data-toggle=\\\"tab\\\" data-ng-click=\\\"topLeftMenuCtrl.selectTab(\\'#tabParameters\\')\\\" title=\\\"{{\\'menu_parameters\\'|translate}}\\\"><i class=\\\"fa fa-cogs fa-fw fa-3x\\\"></i></a></li></ul></div>\");}]);"],"sourceRoot":"/source/"}