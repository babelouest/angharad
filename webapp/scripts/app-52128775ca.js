function carleonLiquidsoapController(e,t,a,n,r,o,i,s,l,c,d,m,u){function p(){c.getLiquidsoapService(v.element.name).then(function(e){v.radio=e},function(){u.pop("error",o.instant("carleon_liquidsoap_init"),o.instant("carleon_liquidsoap_init_error"))})}var v=this;this.radio={},this.status="",this.onAir={title:"",artist:"",albumartist:"",year:"",album:""},this.list=[],this.listSelected={title:"",artist:"",albumartist:"",year:"",album:""},this.onAirAccordionOpen=!1,this.listAccordionOpen=!1,this.commandRadio=function(e){c.command(v.element.name,e).then(function(e){u.pop("success",o.instant("carleon_liquidsoap_command"),o.instant("carleon_liquidsoap_command_success")),v.refreshStatus()},function(){u.pop("error",o.instant("carleon_liquidsoap_command"),o.instant("carleon_liquidsoap_command_error"))})},e.$watch("$ctrl.controlAccordionOpen",function(e){e&&v.refreshStatus()}),e.$watch("$ctrl.onAirAccordionOpen",function(e){e&&v.refreshOnAir()}),e.$watch("$ctrl.listAccordionOpen",function(e){e&&v.refreshList()}),this.refreshStatus=function(){c.command(v.element.name,"status").then(function(e){v.status=e.value},function(){u.pop("error",o.instant("carleon_liquidsoap_status"),o.instant("carleon_liquidsoap_status_error"))})},this.refreshOnAir=function(){c.onAir(v.element.name).then(function(e){v.onAir=e},function(){u.pop("error",o.instant("carleon_liquidsoap_on_air"),o.instant("carleon_liquidsoap_on_air_error"))})},this.refreshList=function(){c.list(v.element.name).then(function(e){v.list=e},function(){u.pop("error",o.instant("carleon_liquidsoap_list"),o.instant("carleon_liquidsoap_list_error"))})},p()}function carleonMockController(e,t,a,n,r){function o(){}var i=this;i.adminMode=n.adminMode,i.param={command:"exec1",param1:"test",param2:42,param3:7.3},i.commandList=["exec1","exec2","exec3","exec4"],i.messages={},i.command=function(){a.commandMock(i.element.name,i.param.command,i.param.param1,i.param.param2,i.param.param3).then(function(e){r.pop("success",t.instant("carleon_mock_command"),t.instant("carleon_mock_command_success"))},function(e){r.pop("error",t.instant("carleon_mock_command"),t.instant("carleon_mock_command_error"))})},o()}function carleonMotionController(e,t,a,n,r,o,i,s,l,c,d){var m=this;this.urlBaseImages=r.baseUrl+r.prefixCarleon+"service-motion/"+m.element.name+"/image/",this.urlBaseStream=r.baseUrl+r.prefixCarleon+"service-motion/"+m.element.name+"/stream/",this.name=m.element.name,this.images=[],this.fileListName=[],this.fileList={},this.selectedFileList="",this.offset=0,this.streamList=[],this.selectedStream=!1,this.streamUri="",this.online=!1,this.profileParams={},this.init=function(){m.refresh(),m.getFromProfile()},this.getFromProfile=function(){c.currentProfile&&_.has(c.currentProfile,"carleon.serviceMotion."+m.element.name)?m.profileParams=c.currentProfile.carleon.serviceMotion[m.element.name]:c.currentProfile&&(c.currentProfile.carleon||(c.currentProfile.carleon={}),c.currentProfile.carleon.serviceMotion||(c.currentProfile.carleon.serviceMotion={}),c.currentProfile.carleon.serviceMotion[m.element.name]||(c.currentProfile.carleon.serviceMotion[m.element.name]={selectedFileList:"",selectedStream:""}))},this.openPopupImage=function(e,t){s.imagePopup(e,t)},this.refresh=function(){m.fileListName=[],m.streamList=[],s.status(m.element.name,m.offset).then(function(e){m.online=e.online,m.fileList=e.file_list,_.forEach(e.file_list,function(e,t){m.fileListName.push(t)}),c.currentProfile&&c.currentProfile.carleon.serviceMotion[m.element.name].selectedFileList?(m.selectedFileList=c.currentProfile.carleon.serviceMotion[m.element.name].selectedFileList,m.changeSelectedFileList()):1===m.fileListName.length&&(m.selectedFileList=m.fileListName[0],m.changeSelectedFileList()),_.forEach(e.stream_list,function(e){var t={name:m.element.name,title:e.name,stream:e.uri,snapshotUri:e.snapshot_uri};m.streamList.push(t)})})},this.canPrevious=function(){return m.offset>0},this.canNext=function(){return 20==m.fileList[m.selectedFileList].length},this.previousList=function(){m.offset-=20,m.refresh()},this.nextList=function(){m.offset+=20,m.refresh()},this.changeSelectedFileList=function(){m.images=[],_.forEach(m.fileList[m.selectedFileList],function(e){var t={thumb:m.urlBaseImages+m.selectedFileList+"/"+e+"?thumbnail=true",img:m.urlBaseImages+m.selectedFileList+"/"+e,title:e};m.images.push(t)}),c.currentProfile.carleon.serviceMotion[m.element.name].selectedStream="",c.currentProfile.carleon.serviceMotion[m.element.name].selectedFileList=m.selectedFileList,o.saveCurrentProfile().then(function(){},function(){d.pop("error",n.instant("profile_save"),n.instant("profile_save_error"))})},this.openStream=function(){s.imagePopup(m.streamList,0)},e.$on("refreshCarleonServices",function(){m.refresh()}),e.$on("carleonServicesChanged",function(){m.init()}),e.$on("angharadProfileChanged",function(){m.getFromProfile()}),this.init()}function carleonMpdController(e,t,a,n,r,o,i,s,l,c,d,m,u){function p(){h.mpdElement=_.find(m.get("carleonServices","service-mpd").element,function(e){return e.name===h.element.name});var e=[l.getMpdStatus(h.element.name),l.getMpdPlaylists(h.element.name)];t.all(e).then(function(e){h.mpd=e[0],h.playlists=e[1],"play"!==h.mpd.state&&"pause"!==h.mpd.state||v()},function(){u.pop("error",r.instant("carleon_mpd"),r.instant("carleon_mpd_load_error",{name:h.element.name}))})}function v(){h._interval=o(function(){h.hasFocus&&h.refreshStatus()},1e4)}var h=this;this.mpd={},this.mpdElement={},this.playlists=[],this.selectedPlaylist=!1,this._interval=null,this.hasFocus=!0,this.refreshStatus=function(){l.getMpdStatus(h.element.name).then(function(e){h.mpd=e,"play"!==h.mpd.state&&"pause"!==h.mpd.state||null!=h._interval?null!=h._interval&&"play"!==h.mpd.state&&"pause"!==h.mpd.state&&(o.cancel(h._interval),h._interval=null):v()},function(){u.pop("error",r.instant("carleon_mpd"),r.instant("carleon_mpd_load_error",{name:h.element.name}))})},this.displayVolume=function(){return h.mpd.volume+"%"},this.setVolume=function(e){var t=h.mpd.volume+e;t>=0&&t<=100&&l.setMpdVolume(h.element.name,t).then(function(){h.mpd.volume=t},function(){u.pop("error",r.instant("carleon_mpd"),r.instant("carleon_mpd_volume_error"))})},this.displayVolumeCommand=function(e){return(e>0?"+":"")+e+" %"},this.setAction=function(e){var t=e;"repeat"===e&&(t+="/"+(h.mpd.repeat?"0":"1"),h.mpd.repeat=!h.mpd.repeat),"random"===e&&(t+="/"+(h.mpd.random?"0":"1"),h.mpd.random=!h.mpd.random),"play"===e&&h.mpdElement.device&&h.mpdElement["switch"]&&c.setElement(h.mpdElement.device,"switch",h.mpdElement["switch"],"1"),"stop"===e&&h.mpdElement.device&&h.mpdElement["switch"]&&c.setElement(h.mpdElement.device,"switch",h.mpdElement["switch"],"0"),l.setMpdAction(h.element.name,t).then(function(){h.refreshStatus()},function(){u.pop("error",r.instant("carleon_mpd"),r.instant("carleon_mpd_volume_error"))})},this.loadPlaylist=function(){h.selectedPlaylist&&(h.mpdElement.device&&h.mpdElement["switch"]&&c.setElement(h.mpdElement.device,"switch",h.mpdElement["switch"],"1"),l.loadMpdPlaylist(h.element.name,h.selectedPlaylist).then(function(){h.refreshStatus()},function(){u.pop("error",r.instant("carleon_mpd"),r.instant("carleon_mpd_load_playlist_error"))}))},e.$on("refreshCarleonServices",function(){h.refreshStatus()}),e.$on("carleonServicesChanged",function(){p()}),e.$on("$destroy",function(){o.cancel(h._interval),h._interval=null}),a.onblur=function(){h.hasFocus=!1},a.onfocus=function(){h.hasFocus=!0},p()}function sagContainerController(e,t,a,n,r){function o(){var e="SGMR$SCR$";switch(i.type){case"switch":e+="B$"+i.element.device+"$switch$"+i.element.name;break;case"dimmer":e+="B$"+i.element.device+"$dimmer$"+i.element.name;break;case"heater":e+="B$"+i.element.device+"$heater$"+i.element.name;break;case"sensor":e+="B$"+i.element.device+"$sensor$"+i.element.name;break;case"scheduler":e+="A$scheduler$"+i.element.name;break;default:e+="C$"+i.type+"$"+i.element.name}i.scripts=_.filter(n.all("angharadScripts"),function(t){return!!_.find(t.options.tags,function(t){return t===e})})}var i=this;this.scripts=[],this.runScript=function(n){var o=a.pop({type:"wait",title:t.instant("angharad_loading_script_title"),body:t.instant("angharad_loading_script_message"),timeout:0,showCloseButton:!1});r.runScript(n.name).then(function(){a.pop("success",t.instant("script_run",{name:n.name}),t.instant("script_run_success"))},function(e){a.pop("error",t.instant("script_run",{name:n.name}),t.instant("script_run_error"))})["finally"](function(){e.$broadcast("refresh"),a.clear(o)})},i.menuSelect=function(e,t){e.action(t)},o()}function sagDimmerController(e,t,a){function n(){r.element.type="dimmer"}var r=this;r.element.valueChecked=1===r.element.value,r.adminMode=t.adminMode,r.element.newDisplay=r.element.display,r.setDimmer=function(t){0===t&&0===r.element.value?e.setElement(r.element.device,"dimmer",r.element.name,101).then(function(e){r.element.value=e.value}):t>=0&&t<=100&&e.setElement(r.element.device,"dimmer",r.element.name,t).then(function(){r.element.value=t})},r.addDimmer=function(t){r.element.value+t>=0&&r.element.value+t<=100&&e.setElement(r.element.device,"dimmer",r.element.name,r.element.value+t).then(function(){r.element.value+=t})},r.Dimmervalue=function(){return r.element.value+"%"},n()}function sagSchedulerController(e,t,a,n,r){function o(){}var i=this;this.enableScheduler=function(){a.enableScheduler(i.element.name,i.element.enabled).then(function(a){r.add("angharadSchedulers",a.name,a),i.element=a,t.pop("success",e.instant("scheduler_enable"),e.instant("scheduler_enable_success"))},function(){t.pop("error",e.instant("scheduler_enable"),e.instant("scheduler_enable_error"))})},o()}function sagTriggerController(e,t,a,n,r){function o(){}var i=this;this.enableTrigger=function(){a.enableTrigger(i.element.name,i.element.enabled).then(function(a){r.add("angharadTrigger",a.name,a),i.element=a,t.pop("success",e.instant("trigger_enable"),e.instant("trigger_enable_success"))},function(){t.pop("error",e.instant("trigger_enable"),e.instant("trigger_enable_error"))})},o()}function sagHeaterController(e,t,a){function n(){r.element.type="heater",r.element&&(r.element.newDisplay=r.element.display,r.availableModes=r.element.value.availableModes)}var r=this;r.element.valueChecked=1===r.element.value,r.adminMode=t.adminMode,r.element.newDisplay="",r.availableModes=[],r.setHeater=function(t){t=null==t?r.element.value.command:r.element.value.command+t,e.setElement(r.element.device,"heater",r.element.name,t,{mode:r.element.value.mode}).then(function(){r.element.value.command=t})},r.displayCommandValue=function(){var e=r.element?Math.round(100*r.element.value.command)/100:0;return r.element&&r.element.options.unit&&(e+=" "+r.element.options.unit),e},r.displayCommand=function(e){var t="";return t=e<0?e:"+"+e,r.element&&r.element.options.unit&&(t+=" "+r.element.options.unit),t},r.modeDisplay=function(e){return a.instant("heater_mode_"+e.toLowerCase())},n()}function sagMonitorController(e,t,a,n,r,o,i,s,l,c){function d(){m(),u.displayMonitor()}function m(){var e=c.all("benoicDevices");_.forEach(e,function(e,t){e.element&&_.forEach(e.element.switches,function(e,a){if(e.monitored&&e.enabled){var n={name:a,display:e.display,device:t,type:"switch"};u.elementList.push(n)}})}),_.forEach(e,function(e,t){e.element&&_.forEach(e.element.dimmers,function(e,a){if(e.monitored&&e.enabled){var n={name:a,display:e.display,device:t,type:"dimmer"};u.elementList.push(n)}})}),_.forEach(e,function(e,t){e.element&&_.forEach(e.element.heaters,function(e,a){if(e.monitored&&e.enabled){var n={name:a,display:e.display,device:t,type:"heater"};u.elementList.push(n)}})}),_.forEach(e,function(e,t){e.element&&_.forEach(e.element.sensors,function(e,a){if(e.monitored&&e.enabled){var n={name:a,display:e.display,device:t,type:"sensor"};u.elementList.push(n)}})})}var u=this;this.elementList=[],this.elementListDisplayed=[],this.colorList=[],this.newElement=!1,this.newElementColor=!1,this.durationList=l.durationList,this.duration={value:4},this.data=[],this.labels=[],this.series=[],this.datasetOverride=[{fill:!1}],this.options={chart:{type:"lineChart",interpolate:"basis",x:function(e){return e.timestamp},y:function(e){return e.value},showValues:!0,valueFormat:function(e){return d3.format(",.2f")(e)},transitionDuration:500,xScale:d3.time.scale(),xAxis:{axisLabel:a.instant("monitor_date_axis")},yAxis:{axisLabel:"",axisLabelDistance:30}}},this.tr=function(e){return a.instant(e)},e.$on("updateMonitor-"+u.element.name,function(){u.displayMonitor()}),this.addElement=function(){u.newElement.color=u.newElementColor,u.element.elements.push(u.newElement),r.saveCurrentProfile().then(function(){u.displayMonitor()},function(){n.pop("error",a.instant("profile_save"),a.instant("profile_save_error"))})["finally"](function(){})},this.displayMonitor=function(){var e=new Date;switch(u.duration.value){case 0:e.setTime(e.getTime()-36e5);break;case 1:e.setTime(e.getTime()-72e5);break;case 2:e.setTime(e.getTime()-216e5);break;case 3:e.setTime(e.getTime()-432e5);break;case 4:e.setTime(e.getTime()-864e5);break;case 5:e.setTime(e.getTime()-1728e5);break;case 6:e.setTime(e.getTime()-2592e5);break;case 7:e.setTime(e.getTime()-6048e5);break;case 8:e.setMonth(e.getMonth()-1)}u.colorList=angular.copy(l.colorList),u.elementListDisplayed=angular.copy(u.elementList);var a=[];_.forEach(u.element.elements,function(t){a.push(o.getMonitor(t.device,t.type,t.name,Math.round(e.getTime()/1e3)))}),u.data=[],t.all(a).then(function(e){for(key in e){_.remove(u.elementListDisplayed,function(e){return e.device===u.element.elements[key].device&&e.type===u.element.elements[key].type&&e.name===u.element.elements[key].name}),u.series.push(u.element.elements[key].display);var t={key:u.element.elements[key].display,values:[]};e[key]&&e[key].length>0&&(_.forEach(e[key],function(e){var a=new Date(1e3*e.timestamp),n={timestamp:a,value:parseFloat(e.value)};t.values.push(n)}),u.data.push(t))}},function(e){})},this.newElementValid=function(){return!!u.newElement},this.removeSerie=function(e){u.element.elements.indexOf(e)>=0&&(u.element.elements.splice(u.element.elements.indexOf(e),1),r.saveCurrentProfile().then(function(){u.displayMonitor()},function(){n.pop("error",a.instant("profile_save"),a.instant("profile_save_error"))})["finally"](function(){u.newElementColor=!1,u.newElement=!1}))},d()}function sagScriptController(e,t,a,n,r){function o(){}var i=this;this.loaderToast=null,this.runScript=function(){a.clear(self.loaderToast),self.loaderToast=a.pop({type:"wait",title:t.instant("angharad_loading_script_title"),body:t.instant("angharad_loading_script_message"),timeout:0,showCloseButton:!1}),n.runScript(i.element.name).then(function(){a.pop("success",t.instant("script_run",{name:i.element.name}),t.instant("script_run_success"))},function(e){a.pop("error",t.instant("script_run",{name:i.element.name}),t.instant("script_run_error"))})["finally"](function(){a.clear(self.loaderToast),e.$broadcast("refresh")})},o()}function sagSensorController(e,t,a){function n(){r.element.type="sensor"}var r=this;r.adminMode=t.adminMode,r.element.newDisplay=r.element.display,r.messages={},r.elementDisplayValue=function(){var e=r.element.value;return!isNaN(parseFloat(e))&&isFinite(e)&&(e=Math.round(100*e)/100),r.element&&r.element.options.unit&&(e+=" "+r.element.options.unit),e},n()}function sagSwitchController(e,t,a){function n(){r.element.type="switch"}var r=this;r.element.valueChecked=1===r.element.value,r.adminMode=t.adminMode,r.element.newDisplay=r.element.display,r.messages={},r.toggleSwitcher=function(){r.element.value=r.element.valueChecked?1:0,e.setElement(r.element.device,"switch",r.element.name,r.element.value)},n()}function topLeftMenuCtrl(e,t,a,n,r){function o(){i.loadMenu()}var i=this;this.serviceList=[],this.sagremorParams=a,this.loadMenu=function(){i.serviceList=[],_.forEach(n.components,function(e){var t=r.get("carleonServices",e.type);if(e.carleonService&&e.leftMenu&&t&&t.enabled){var a=e.leftMenu;a.icon=e.icon,_.find(i.serviceList,{target:a.target})||i.serviceList.push(a)}})},this.selectTab=function(e){$(".sag-menu").removeClass("active"),$(e).addClass("active")},e.$on("submodulesChanged",function(){i.sagremorParams=a}),e.$on("carleonServicesChanged",function(){i.loadMenu()}),o()}function topRightMenuCtrl(e,t,a,n,r,o,i,s,l,c){var d=this;d.sagremorParams=l,d.selectedLang=r.use(),d.langList=s.langList,d.profiles=l.profiles,d.currentProfileName=l.currentProfile?l.currentProfile.name:"",d.oauth2=c.oauth2,a.search().type&&(d.oauth2.responseType=a.search().type),d.changeLang=function(){r.use(d.selectedLang).then(function(){t.$broadcast("changeLang")})},d.changeProfile=function(){_.forEach(l.profiles,function(e){if(e.name===d.currentProfileName){l.currentProfile=e;var a=new Date,n=new Date(a.getFullYear()+10,a.getMonth(),a.getDate());o.put("ANGHARAD_PROFILE",d.currentProfileName,{expires:n}),t.$broadcast("angharadProfileUpdated"),t.$broadcast("refreshDashboard")}})},d.refresh=function(){t.$broadcast("refresh")},e.$on("angharadProfileChanged",function(){d.profiles=l.profiles,d.currentProfileName=l.currentProfile?l.currentProfile.name:""}),e.$on("angharadProfileUpdated",function(){d.profiles=l.profiles,d.currentProfileName=l.currentProfile?l.currentProfile.name:""})}carleonLiquidsoapController.$inject=["$scope","$sce","$q","$window","$translatePartialLoader","$translate","$interval","angharadConfig","carleonFactory","carleonLiquidsoapFactory","sagremorService","sagremorParams","toaster"],carleonMockController.$inject=["$translatePartialLoader","$translate","carleonMockFactory","sagremorParams","toaster"],carleonMotionController.$inject=["$scope","$http","$translatePartialLoader","$translate","angharadConfig","angharadFactory","carleonFactory","carleonMotionFactory","sagremorService","sagremorParams","toaster"],carleonMpdController.$inject=["$scope","$q","$window","$translatePartialLoader","$translate","$interval","angharadConfig","carleonFactory","carleonMpdFactory","benoicFactory","sagremorParams","sharedData","toaster"],sagContainerController.$inject=["$rootScope","$translate","toaster","sharedData","angharadFactory"],sagDimmerController.$inject=["benoicFactory","sagremorParams","$translate"],sagSchedulerController.$inject=["$translate","toaster","angharadFactory","sagremorParams","sharedData"],sagTriggerController.$inject=["$translate","toaster","angharadFactory","sagremorParams","sharedData"],sagHeaterController.$inject=["benoicFactory","sagremorParams","$translate"],sagMonitorController.$inject=["$scope","$q","$translate","toaster","angharadFactory","benoicFactory","carleonFactory","sagremorParams","sagremorConstant","sharedData"],sagScriptController.$inject=["$rootScope","$translate","toaster","angharadFactory","sagremorParams"],sagSensorController.$inject=["benoicFactory","sagremorParams","$translate"],sagSwitchController.$inject=["benoicFactory","sagremorParams","$translate"],topLeftMenuCtrl.$inject=["$scope","$translate","sagremorParams","sagGenericInjectorManager","sharedData"],topRightMenuCtrl.$inject=["$scope","$rootScope","$location","$http","$translate","$cookies","angharadFactory","sagremorConstant","sagremorParams","angharadConfig"],angular.module("sagremorApp",["ui.bootstrap","ui.router","ngCookies","angularMoment","frapontillo.bootstrap-switch","toaster","ui.bootstrap.contextMenu","pascalprecht.translate","ngSanitize","ui.bootstrap.datetimepicker","datatables","angular.img","nvd3","oauth"]).constant("_",window._).constant("sagremorConstant",{scriptActionElements:[{name:"switch",label:"script_action_benoic_switch",submodule:"benoic"},{name:"dimmer",label:"script_action_benoic_dimmer",submodule:"benoic"},{name:"heater",label:"script_action_benoic_heater",submodule:"benoic"}],conditionList:[{name:"switch",label:"event_condition_benoic_switch",submodule:"benoic"},{name:"dimmer",label:"event_condition_benoic_dimmer",submodule:"benoic"},{name:"heater",label:"event_condition_benoic_heater",submodule:"benoic"},{name:"sensor",label:"event_condition_benoic_sensor",submodule:"benoic"}],monitoredEveryEnum:[{value:60,label:"monitor_1_minute"},{value:120,label:"monitor_2_minutes"},{value:300,label:"monitor_5_minutes"},{value:600,label:"monitor_10_minutes"},{value:900,label:"monitor_15_minutes"},{value:1200,label:"monitor_20_minutes"},{value:1800,label:"monitor_30_minutes"},{value:3600,label:"monitor_1_hour"},{value:7200,label:"monitor_2_hours"},{value:10800,label:"monitor_3_hours"},{value:14400,label:"monitor_4_hours"},{value:18e3,label:"monitor_5_hours"},{value:21600,label:"monitor_6_hours"},{value:43200,label:"monitor_12_hours"},{value:86400,label:"monitor_1_day"}],schedulerRepeatEveryEnum:[{value:0,label:"event_scheduler_repeat_every_minutes"},{value:1,label:"event_scheduler_repeat_every_hours"},{value:2,label:"event_scheduler_repeat_every_days"},{value:3,label:"event_scheduler_repeat_every_days_of_week"},{value:4,label:"event_scheduler_repeat_every_months"},{value:5,label:"event_scheduler_repeat_every_year"}],langList:[{name:"fr",display:"Fr"},{name:"en",display:"En"}],durationList:[{value:0,label:"duration_last_hour"},{value:1,label:"duration_last_2_hours"},{value:2,label:"duration_last_6_hours"},{value:3,label:"duration_last_12_hours"},{value:4,label:"duration_last_day"},{value:5,label:"duration_last_2_days"},{value:6,label:"duration_last_3_days"},{value:7,label:"duration_last_7_days"},{value:8,label:"duration_last_month"}],colorList:[{style:"background:Aqua",value:"#00FFFF",label:"Aqua"},{style:"background:Brown",value:"#A52A2A",label:"Brown"},{style:"background:Blue",value:"#0000FF",label:"Blue"},{style:"background:Chartreuse",value:"#7FFF00",label:"Chartreuse"},{style:"background:DarkGreen",value:"#006400",label:"Dark Green"},{style:"background:DarkOrange",value:"#FF8C00",label:"Dark Orange"},{style:"background:DarkRed",value:"#8B0000",label:"Dark Red"},{style:"background:DarkTurquoise",value:"#00CED1",label:"Dark Turquoise"},{style:"background:DarkViolet",value:"#9400D3",label:"Dark Violet"},{style:"background:Green",value:"#008000",label:"Green"},{style:"background:LawnGreen",value:"#7CFC00",label:"Lawn Green"},{style:"background:LightGreen",value:"#90EE90",label:"Light Green"},{style:"background:LightSeaGreen",value:"#20B2AA",label:"Light Sea Green"},{style:"background:LightSlateGray",value:"#778899",label:"Light Slate Gray"},{style:"background:Lime",value:"#00FF00",label:"Lime"},{style:"background:Magenta",value:"#FF00FF",label:"Magenta"},{style:"background:MediumBlue",value:"#0000CD",label:"Medium Blue"},{style:"background:MediumSpringGreen",value:"#00FA9A",label:"Medium Spring Green"},{style:"background:Navy",value:"#000080",label:"Navy"},{style:"background:Orange",value:"#FFA500",label:"Orange"},{style:"background:Purple",value:"#800080",label:"Purple"},{style:"background:Red",value:"#FF0000",label:"Red"},{style:"background:Teal",value:"#008080",label:"Teal"},{style:"background:Turquoise",value:"#40E0D0",label:"Turquoise"},{style:"background:Violet",value:"#EE82EE",label:"Violet"},{style:"background:Yellow",value:"#FFFF00",label:"Yellow"},{style:"background:YellowGreen",value:"#9ACD32",label:"Yellow Green"}]}).config(["$translateProvider","$translatePartialLoaderProvider",function(e,t){e.useLoader("$translatePartialLoader",{urlTemplate:"components/{part}/i18n/{lang}.json"}),t.addPart("core"),e.registerAvailableLanguageKeys(["en","fr"],{en_US:"en",en_UK:"en",en_CA:"en",fr_FR:"fr",fr_CA:"fr",fr_BE:"fr","*":"en"}).fallbackLanguage("en").determinePreferredLanguage(),e.useCookieStorage(),e.useSanitizeValueStrategy("escape")}]).factory("sharedData",function(){var e={},t=function(t,a,n){e[t]||(e[t]={}),e[t][a]=n},a=function(t,a){return e[t]&&e[t][a]?e[t][a]:void 0},n=function(t,a){return delete e[t][a]},r=function(t){e[t]={}},o=function(t){return e[t]};return{all:o,get:a,add:t,remove:n,removeAll:r}}).factory("sagremorParams",function(){var e={};return e}).factory("sagremorConfirm",["$uibModal",function(e){var t=function(t,a){return modalInstance=e.open({animation:!0,templateUrl:"components/modals/confirm.modal.html",controller:"ConfirmModalCtrl",controllerAs:"ConfirmModalCtrl",size:"sm",resolve:{title:function(){return t},message:function(){return a}}}).result};return{open:t}}]).factory("sagremorEdit",["$uibModal",function(e){var t=function(t,a,n){return modalInstance=e.open({animation:!0,templateUrl:"components/modals/edit.modal.html",controller:"EditModalCtrl",controllerAs:"EditModalCtrl",size:"sm",resolve:{title:function(){return t},message:function(){return a},placeholder:function(){return n}}}).result};return{open:t}}]).service("sagGenericInjectorManager",function(){var e=this;e.components=[],this.add=function(t){e.get(t.type)||e.components.push(t)},this.get=function(t){return _.find(e.components,function(e){return e.type===t})}}),angular.module("sagremorApp").config(["$locationProvider",function(e){e.html5Mode(!0).hashPrefix("!")}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("dashboard",{url:"/",templateUrl:"app/dashboard/dashboard.html",controller:"DashboardCtrl",controllerAs:"DashboardCtrl"}).state("error",{url:"/error",templateUrl:"app/error/error.html",controller:"ErrorCtrl",controllerAs:"ErrorCtrl"}).state("switches",{url:"/switches",templateUrl:"app/switches/switches.html",controller:"switchesCtrl",controllerAs:"switchesCtrl"}).state("heaters",{url:"/heaters",templateUrl:"app/heaters/heaters.html",controller:"heatersCtrl",controllerAs:"heatersCtrl"}).state("sensors",{url:"/sensors",templateUrl:"app/sensors/sensors.html",controller:"sensorsCtrl",controllerAs:"sensorsCtrl"}).state("service",{url:"/service/:service",templateUrl:"app/service/service.html",controller:"serviceCtrl",controllerAs:"serviceCtrl"}).state("scripts",{url:"/scripts",templateUrl:"app/scripts/scripts.html",controller:"scriptsCtrl",controllerAs:"scriptsCtrl"}).state("events",{url:"/events",templateUrl:"app/events/events.html",controller:"eventsCtrl",controllerAs:"eventsCtrl"}).state("monitors",{url:"/monitors",templateUrl:"app/monitors/monitors.html",controller:"monitorsCtrl",controllerAs:"monitorsCtrl"}).state("logs",{url:"/logs",templateUrl:"app/logs/logs.html",controller:"logsCtrl",controllerAs:"logsCtrl"}).state("parameters",{url:"/parameters",templateUrl:"app/parameters/parameters.html",controller:"ParametersCtrl",controllerAs:"ParametersCtrl"}),t.otherwise("/")}]),angular.module("sagremorApp").controller("DashboardCtrl",["$scope","$location","$translate","$timeout","toaster","sharedData","sagremorParams","sagremorService","sagremorEdit","angharadFactory","benoicFactory","carleonFactory","sagGenericInjectorManager",function(e,t,a,n,r,o,i,s,l,c,d,m,u){function p(){k.dashboardWidgetsDisplay=[];var e=i.currentProfile;e?(k.profileName=e.name,e.addTo&&e.addTo.D&&e.addTo.D.length>0&&v()):k.profileName="";for(key in k.dashboardWidgets)k.dashboardWidgets[key]&&k.dashboardWidgetsDisplay.push(k.dashboardWidgets[key])}function v(){var e=i.currentProfile;e&&e.addTo&&e.addTo.D&&_.forEach(e.addTo.D,function(e){e.device?i.benoicEnabled&&h(e,e.tag):"script"===e.type?g(e,e.tag):"scheduler"===e.type||"trigger"===e.type?f(e,e.tag):"separator"===e.type?C(e.name,e.tag):"monitor"===e.type?b(e,e.tag):i.carleonEnabled&&y(e,e.tag)}),k.isInit=!1}function h(e,t){var a=t.split("$");if(a.length>=4){var n=a[2],r=a[3],o=1;"dimmer"!==e.type&&"heater"!==e.type||(o=2);var i=_.find(k.dashboardWidgets,function(t){return t&&t.type===e.type&&t.device===e.device&&t.name===e.name}),l=s.getBenoicElement(e.device,e.type,e.name);if(l)if(i)_.forEach(k.dashboardWidgets,function(t){t&&t.type===e.type&&t.device===e.device&&t.name===e.name&&(l.device=e.device,l.name=e.name,t.element=l)});else{var c="";switch(e.type){case"switch":c="toggle-on";break;case"dimmer":c="lightbulb-o";break;case"heater":c="fire";break;case"sensor":c="line-chart"}l.device=e.device,l.name=e.name;var d={type:e.type,device:e.device,name:e.name,element:l,x:n,y:r,width:3,height:o,tag:t,icon:c};k.dashboardWidgets.push(d)}}}function g(e,t){var a=o.get("angharadScripts",e.name),n=_.find(k.dashboardWidgets,function(t){return t&&t.type===e.type&&t.name===e.name});if(a&&!n){var r=t.split("$");if(r.length>=4){var i=r[2],s=r[3],l=1,c="tasks",d={type:e.type,name:e.name,element:a,x:i,y:s,width:3,height:l,tag:t,icon:c};k.dashboardWidgets.push(d)}}}function f(e,t){var a=!1,n="",r=_.find(k.dashboardWidgets,function(t){return t.type===e.type&&t.name===e.name});if("scheduler"===e.type?(a=o.get("angharadSchedulers",e.name),n="calendar"):(a=o.get("angharadTriggers",e.name),n="bell"),a&&!r){var i=t.split("$");if(i.length>=4){var s=i[2],l=i[3],c="scheduler"===e.type?2:1,d={type:e.type,name:e.name,element:a,x:s,y:l,width:3,height:c,tag:t,icon:n};k.dashboardWidgets.push(d)}}}function b(e,t){var a=_.find(i.currentProfile.monitorList,function(t){return t.name===e.name}),n=_.find(k.dashboardWidgets,function(t){return t&&t.type===e.type&&t.name===e.name});if(a&&!n){var r=t.split("$");if(r.length>=4){var o=r[2],s=r[3],l=4,c="bar-chart",d={type:e.type,name:e.name,element:a,x:o,y:s,width:6,height:l,tag:t,icon:c};k.dashboardWidgets.push(d)}}}function y(e,t){var a=_.find(u.components,function(t){return t.type===e.type}),n=o.get("carleonServices",e.type),r=!!n&&!!n.element&&_.find(n.element,function(t){return t.name===e.name}),i=_.find(k.dashboardWidgets,function(t){return t&&t.type===e.type&&t.name===e.name});if(r&&!i){var s=t.split("$");if(s.length>=4){var l=s[2],c=s[3],d=a.widgetHeight,m=a.widgetWidth,p=a.icon,v={type:e.type,name:e.name,element:e,x:l,y:c,width:m,height:d,tag:t,icon:p};k.dashboardWidgets.push(v)}}}function C(e,t){var a=t.split("$");if(a.length>=4){var n=a[3],r={type:"separator",name:e,x:0,y:n,width:20,height:1,tag:t};k.dashboardWidgets.push(r)}}function w(e){var t={type:"separator",name:e,x:0,y:0,width:10,height:1},n=i.currentProfile;n.addTo||(n.addTo={D:[]}),n.addTo.D||(n.addTo.D=[]),k.dashboardWidgetsDisplay.push(t);var o={type:"separator",name:e,tag:"SGMR$D$0$0"};n.addTo.D.push(o),c.setProfile(n.name,n).then(function(){r.pop({type:"success",title:a.instant("angharad_add_to_dashboard"),body:a.instant("angharad_add_to_dashboard_success")})},function(){r.pop({type:"error",title:a.instant("angharad_add_to_dashboard"),body:a.instant("angharad_add_to_dashboard_error")})})}function M(e,t){if(t!==e.tag){var a=i.currentProfile;if(a){a.addTo||(a.addTo={D:[]}),a.addTo.D||(a.addTo.D=[]);var n=_.find(a.addTo.D,function(t){return e.tag==t.tag});return n?n.tag=t:(e.tag=t,a.addTo.D.push(e)),!0}}return!1}var k=this;this._timeout=null,this.sagremorParams=i,this.dashboardWidgets=[],this.dashboardWidgetsDisplay=[],this.profileName="",this.isInit=!0,this.connected=!1,this.options={cellHeight:100,verticalHargin:10,disableResize:!1},this.init=function(){k.isInit=!0,k.connected=!!o.get("oauthToken","token"),p(),k.menu=[{name:"remove_from_dashboard",display:a.instant("remove_from_dashboard"),action:function(e){k.removeFromDashboard(e)}}]},this.menuSelect=function(e,t){e.action(t)},this.addTitleLine=function(){return l.open(a.instant("dashboard_add_line"),a.instant("dashboard_add_line_value"),a.instant("dashboard_add_line_placeholder")).then(function(e){w(e.value)})},this.removeFromDashboard=function(e){var t=i.currentProfile;t&&t.addTo&&t.addTo.D&&_.forEach(t.addTo.D,function(a,n){a&&a.type===e.type&&a.name===e.name&&e.tag===a.tag&&t.addTo.D.splice(n,1)});var n=k.dashboardWidgetsDisplay.indexOf(e);k.dashboardWidgetsDisplay.splice(n,1),i.currentProfile=t,c.setProfile(t.name,t).then(function(){r.pop("success",a.instant("profile_save"),a.instant("profile_save_success"))},function(){r.pop("error",a.instant("profile_save"),a.instant("profiles_save_error"))})},this.onChange=function(e,t){k._timeout&&n.cancel(k._timeout),k._timeout=n(function(){if(!k.isInit&&i.carleonEnabled){var e=!1;if(_.forEach(t,function(t){var a=_.find(k.dashboardWidgetsDisplay,function(e){return e.type===$(t.el).attr("data-sag-type")&&e.name===$(t.el).attr("data-sag-name")&&(!e.device||e.device===$(t.el).attr("data-sag-device"))});if(a){
var n="SGMR$D$"+t.x+"$"+t.y;M(a,n)&&(e=!0,a.tag=n)}}),e){var n=_(i.currentProfile.addTo.D).chain().sortBy(function(e){var t=e.tag.split("$");return t[2]}).sortBy(function(e){var t=e.tag.split("$");return t[3]}).value();i.currentProfile.addTo.D=n,c.setProfile(i.currentProfile.name,i.currentProfile).then(function(){r.pop("success",a.instant("profile_save"),a.instant("profile_save_success"))},function(){r.pop("error",a.instant("profile_save"),a.instant("profiles_save_error"))})}}k._timeout=null},5e3)},e.$on("angharadProfileUpdated",function(){k.isInit=!0,k.dashboardWidgets=[],p()}),e.$on("refreshDashboard",function(){k.isInit=!0,p()}),e.$on("benoicDevicesChanged",function(){k.isInit=!0,p()}),e.$on("carleonServicesChanged",function(){k.isInit=!0,p()}),e.$on("oauth:login",function(e,t){k.connected=!!o.get("oauthToken","token")}),e.$on("oauth:refresh",function(e,t){k.connected=!!o.get("oauthToken","token")}),e.$on("oauth:loggedOut",function(e,t){k.connected=!!o.get("oauthToken","token")}),e.$on("oauth:denied",function(e,t){k.connected=!!o.get("oauthToken","token")}),e.$on("oauth:expired",function(e,t){k.connected=!!o.get("oauthToken","token")}),e.$on("oauth:invalid",function(e,t){k.connected=!!o.get("oauthToken","token")}),this.init()}]),$.fn.size=function(){return this.length},angular.module("sagremorApp").controller("ErrorCtrl",["$scope","sagremorParams",function(e,t){var a=this;this.errorMessage="",this.init=function(){t.errorMessage&&(a.errorMessage=t.errorMessage)},e.$on("generalError",function(){a.init()}),a.init()}]),angular.module("sagremorApp").controller("eventsCtrl",["$scope","$translate","sagremorService","angharadFactory","sharedData","sagremorParams",function(e,t,a,n,r,o){var i=this;this.schedulerList=[],this.triggerList=[],this.sagremorParams=o,this.init=function(){t(["edit","remove","add_to_dashboard"]).then(function(t){i.menuScheduler=[{name:"edit",display:t.edit,action:function(e){a.editEvent(e,"scheduler")}},{name:"remove",display:t.remove,action:function(t){a.removeScheduler(t).then(function(){e.$broadcast("angharadSchedulersChanged")})}},{name:"add_to_dashboard",display:t.add_to_dashboard,action:function(t){t.type=t.next_time?"scheduler":"trigger",a.addToDashboard(t).then(function(){e.$broadcast("refreshDashboard")})}}],i.menuTrigger=[{name:"edit",display:t.edit,action:function(e){a.editEvent(e,"trigger")}},{name:"remove",display:t.remove,action:function(t){a.removeTrigger(t).then(function(){e.$broadcast("angharadTriggersChanged")})}},{name:"add_to_dashboard",display:t.add_to_dashboard,action:function(t){t.type=t.next_time?"scheduler":"trigger",a.addToDashboard(t).then(function(){e.$broadcast("refreshDashboard")})}}],i.updateSchedulers(),i.updateTriggers()})},this.updateSchedulers=function(){var e=r.all("angharadSchedulers");i.schedulerList=[];for(key in e)i.schedulerList.push(e[key])},this.updateTriggers=function(){var e=r.all("angharadTriggers");i.triggerList=[];for(key in e)i.triggerList.push(e[key])},this.refreshEvents=function(){var e=r.all("angharadSchedulers");for(key in e){var t=_.find(i.schedulerList,function(e){return e.name===key});t||i.schedulerList.push(e[key])}for(var a=i.schedulerList.length-1;a>=0;a--)r.get("angharadSchedulers",i.schedulerList[a].name)||i.schedulerList.splice(a,1);var n=r.all("angharadTriggers");for(key in n){var t=_.find(i.triggerList,function(e){return e.name===key});t||i.triggerList.push(n[key])}for(var a=i.triggerList.length-1;a>=0;a--)r.get("angharadTriggers",i.triggerList[a].name)||i.triggerList.splice(a,1)},this.newEvent=function(){a.editEvent(null)},e.$on("angharadSchedulersChanged",function(){i.updateSchedulers()}),e.$on("angharadTriggersChanged",function(){i.updateTriggers()}),e.$on("refreshAngharadEvents",function(){i.refreshEvents()}),this.init()}]),angular.module("sagremorApp").controller("heatersCtrl",["$scope","$location","$translate","sagremorService","benoicFactory","sharedData","sagremorParams",function(e,t,a,n,r,o,i){var s=this;this.heaterList=[],this.sagremorParams=i,this.init=function(){i.loggedIn||t.path("/login"),a(["edit","monitor","add_to_dashboard"]).then(function(t){s.menuSensor=[{name:"edit",display:t.edit,action:function(e){n.editHeater(e)}},{name:"monitor",display:t.monitor,action:function(e){n.monitor(e)}},{name:"add_to_dashboard",display:t.add_to_dashboard,action:function(t){n.addToDashboard(t).then(function(){e.$broadcast("refreshDashboard")})}}],s.updateHeaters()})},e.$on("benoicDevicesChanged",function(){s.updateHeaters()}),e.$on("benoicHeatersChanged",function(){s.updateHeaters()}),this.updateHeaters=function(){var e=o.all("benoicDevices");s.heaterList=[];for(key in e){var t=e[key].name;if(e[key].connected&&e[key].enabled)for(se in e[key].element.heaters){var a=e[key].element.heaters[se];a.device=t,a.name=se,s.heaterList.push(a)}}},e.$on("refreshDevices",function(){s.refreshElements()}),this.refreshElements=function(){var e=o.all("benoicDevices");for(key in e){var t=e[key].name;if(e[key].connected&&e[key].enabled)for(se in e[key].element.heaters){var a=0,n=_.find(s.heaterList,function(e){return e.name===se&&e.device===t});if(n){var r=e[key].element.heaters[se];r.device=t,r.name=se;var a=_.indexOf(s.heaterList,_.find(s.heaterList,{device:t,name:se}));s.heaterList.splice(a,1,r)}else{var r=e[key].element.heaters[se];r.device=t,r.name=se,s.heaterList.push(r)}}}_.remove(s.heaterList,function(e){var t=_.find(o.all("benoicDevices"),function(t,a){return!t.element||_.find(t.element.heaters,function(t,n){return n===e.name&&a===e.device})});if(!t)return!0})},this.init()}]),angular.module("sagremorApp").controller("FiltersModalCtrl",["$scope","$q","$uibModalInstance","$translate","toaster","DTOptionsBuilder","garethFactory","sharedData",function(e,t,a,n,r,o,i,s){function l(){}var c=this;this.filterList=s.all("garethFilters"),this.AlertSmtpList=s.all("garethAlertsSmtp"),this.AlertHttpList=s.all("garethAlertsHttp"),this.editFilter=!1,this.addFilter=!1,this.newClause=!1,this.newAlertSmtp=!1,this.newAlertHttp=!1,this.newAlertHttpHeader=!1,this.displayAlert=!1,this.customFilter={name:"",description:"",filter_clauses:[],filter_alerts:{smtp:[],http:[]}},c.menu=[{name:"smtp",display:n.instant("logs_menu_smtp"),action:function(){c.addAlertSmtp()}},{name:"http",display:n.instant("logs_menu_http"),action:function(){c.addAlertHttp()}}],c.menuSelect=function(e,t){e.action(t)},this.customClause={element:"",operator:"",value:""},this.customHttpAlert={name:"",method:"",url:"",body:"",http_headers:[]},this.customHttpAlertHeader={key:"",value:""},this.existingHttpAlert="",this.customHttpAlertMethodSelect="GET",this.customSmtpAlert={name:"",host:"",port:0,tls:!1,check_ca:!1,user:"",password:"",from:"",to:"",cc:"",bcc:"",subject:"",body:""},this.existingSmtpAlert="",e.$on("garethChange",function(){c.filterList=s.all("garethFilters"),c.AlertList=s.all("garethAlerts")}),this.newFilter=function(){c.editFilter=!0,c.addFilter=!0,c.customFilter={name:"",description:"",filter_clauses:[],filter_alerts:{smtp:[],http:[]}}},this.addClause=function(){c.newClause=!0},this.isClauseValid=function(){return!!c.customClause.element&&!!c.customClause.operator&&!!c.customClause.value},this.addNewClause=function(){"priority"===c.customClause.element&&(c.customClause.value=parseInt(c.customClause.value)),c.customFilter.filter_clauses.push(c.customClause),c.customClause={element:"",operator:"",value:""},c.newClause=!1},this.removeClause=function(e){c.customFilter.filter_clauses.splice(e,1)},this.cancelAddClause=function(){c.newClause=!1},this.getClauseElement=function(e){return n.instant("clause_option_"+e)},this.getClauseOperator=function(e){switch(e){case"=":return n.instant("clause_operator_equal");case"!=":return n.instant("clause_operator_different");case"<":return n.instant("clause_operator_lower");case"<=":return n.instant("clause_operator_lower_equal");case">":return n.instant("clause_operator_higher");case">=":return n.instant("clause_operator_higher_equal");case"contains":return n.instant("clause_operator_contains");case"notcontains":return n.instant("clause_operator_notcontains")}},this.getClauseValue=function(e){if("priority"!==e.element)return e.value;switch(e.value){case 0:return n.instant("logs_priority_none");case 1:return n.instant("logs_priority_low");case 2:return n.instant("logs_priority_medium");case 3:return n.instant("logs_priority_high");case 4:return n.instant("logs_priority_critical")}},this.addAlertSmtp=function(){c.newAlertSmtp=!0},this.addAlertHttp=function(){c.newAlertHttp=!0},this.isSmtpAlertValid=function(){if(c.existingSmtpAlert)return!0;var e=_.find(c.AlertSmtpList,function(e){return e.name===c.customSmtpAlert.name});return!e&&!!(c.customSmtpAlert.name&&c.customSmtpAlert.host&&c.customSmtpAlert.from&&c.customSmtpAlert.to&&c.customSmtpAlert.subject&&c.customSmtpAlert.body)},this.cancelAddSmtpAlert=function(){c.newAlertSmtp=!1},this.postNewSmtpAlert=function(){c.existingSmtpAlert?(c.customFilter.filter_alerts.smtp.push(c.existingSmtpAlert.name),c.existingSmtpAlert="",c.newAlertSmtp=!1):i.addAlert("smtp",c.customSmtpAlert).then(function(){c.customFilter.filter_alerts.smtp.push(c.customSmtpAlert.name),s.add("garethAlertsSmtp",c.customSmtpAlert.name,c.customSmtpAlert),r.pop("success",n.instant("logs_alert"),n.instant("logs_alert_save_success")),e.$broadcast("garethChange")},function(){r.pop("error",n.instant("logs_alert"),n.instant("logs_alert_save_error"))})["finally"](function(){c.customSmtpAlert={name:"",host:"",port:0,tls:!1,check_ca:!1,user:"",password:"",from:"",to:"",subject:"",body:""},c.newAlertSmtp=!1})},this.addAlertHttpHeader=function(){c.newAlertHttpHeader=!0},this.cancelAddAlertHttpHeader=function(){c.newAlertHttpHeader=!1},this.addNewAlertHttpHeader=function(){c.customHttpAlert.http_headers.push(c.customHttpAlertHeader),c.customHttpAlertHeader={key:"",value:""},c.newAlertHttpHeader=!1},this.isHttpAlertValid=function(){if(c.existingHttpAlert)return!0;var e=_.find(c.AlertHttpList,function(e){return e.name===c.customHttpAlert.name});return!e&&!(!c.customHttpAlert.name||!c.customHttpAlert.method&&!c.customHttpAlertMethodSelect||!c.customHttpAlert.url)},this.postNewHttpAlert=function(){c.existingHttpAlert?(c.customFilter.filter_alerts.http.push(c.existingHttpAlert.name),c.existingHttpAlert="",c.newAlertHttp=!1):("custom"!==c.customHttpAlertMethodSelect&&(c.customHttpAlert.method=c.customHttpAlertMethodSelect),i.addAlert("http",c.customHttpAlert).then(function(){c.customFilter.filter_alerts.http.push(c.customHttpAlert.name),s.add("garethAlertsHttp",c.customHttpAlert.name,c.customHttpAlert),r.pop("success",n.instant("logs_alert"),n.instant("logs_alert_save_success")),e.$broadcast("garethChange")},function(){r.pop("error",n.instant("logs_alert"),n.instant("logs_alert_save_error"))})["finally"](function(){c.customHttpAlertHeader={key:"",value:""},c.customHttpAlert={name:"",method:"",url:"",body:"",http_headers:[]},c.newAlertHttp=!1,c.newAlertHttpHeader=!1}))},this.cancelAddHttpAlert=function(){c.newAlertHttp=!1},this.removeAlert=function(e,t){c.customFilter.filter_alerts[e].splice(t,1)},this.isFilterValid=function(){return!!c.customFilter.name&&c.customFilter.filter_clauses.length>0},this.cancelNewFilter=function(){c.editFilter=!1,c.addFilter=!1},this.postNewFilter=function(){var t=null;t=c.addFilter?i.addFilter(c.customFilter):i.setFilter(c.customFilter.name,c.customFilter),t.then(function(){s.add("garethFilters",c.customFilter.name,c.customFilter),r.pop("success",n.instant("logs_filter"),n.instant("logs_filter_save_success")),e.$broadcast("garethChange")},function(){r.pop("error",n.instant("logs_filter"),n.instant("logs_filter_save_error"))})["finally"](function(){c.editFilter=!1,c.addFilter=!1})},this.removeCustomFilter=function(t){i.removeFilter(t.name).then(function(){s.remove("garethFilters",t.name),r.pop("success",n.instant("logs_filter"),n.instant("logs_filter_remove_success")),e.$broadcast("garethChange")},function(){r.pop("error",n.instant("logs_filter"),n.instant("logs_filter_remove_error"))})},this.editCustomFilter=function(e){c.customFilter=e,c.editFilter=!0,c.addFilter=!1},this.showAlerts=function(){c.displayAlert=!0},this.showFilters=function(){c.displayAlert=!1},this.removeSmtpAlert=function(t){i.removeAlert("smtp",t.name).then(function(){s.remove("garethAlertsSmtp",t.name),r.pop("success",n.instant("logs_alert"),n.instant("logs_alert_remove_success")),e.$broadcast("garethChange")},function(){r.pop("error",n.instant("logs_alert"),n.instant("logs_alert_remove_error"))})},this.removeHttpAlert=function(t){i.removeAlert("http",t.name).then(function(){s.remove("garethAlertsHttp",t.name),r.pop("success",n.instant("logs_alert"),n.instant("logs_alert_remove_success")),e.$broadcast("garethChange")},function(){r.pop("error",n.instant("logs_alert"),n.instant("logs_alert_remove_error"))})},this.close=function(){a.close("ok")},l()}]),angular.module("sagremorApp").controller("logsCtrl",["$scope","$translate","$uibModal","toaster","DTOptionsBuilder","garethFactory","sharedData",function(e,t,a,n,r,o,i){var s=this;this.messageList=[],this.filterList=[],this.options={},this.searchOptions={limit:20,offset:0},e.$on("garethChange",function(){s.getFilters(),s.search()}),this.init=function(){t.use()&&(s.options=r.newOptions().withLanguageSource("components/core/i18n/datatables."+t.use()+".json").withOption("order",[1,"desc"]),s.getFilters(),s.search())},this.getPriority=function(e){switch(e.priority){case"NONE":return t.instant("logs_priority_none");case"LOW":return t.instant("logs_priority_low");case"MEDIUM":return t.instant("logs_priority_medium");case"HIGH":return t.instant("logs_priority_high");case"CRITICAL":return t.instant("logs_priority_critical");default:return t.instant("logs_priority_not_found")}},this.search=function(){s.searchOptions.limit>0&&s.searchOptions.offset>=0?s.searchOptions.filter?o.getFilteredMessages(s.searchOptions.filter.name,s.searchOptions.limit,s.searchOptions.offset).then(function(e){s.messageList=e}):o.getAllMessages(s.searchOptions.limit,s.searchOptions.offset).then(function(e){s.messageList=e}):n.pop("error",t.instant("logs_search"),t.instant("logs_search_error"))},this.getFilters=function(){s.filterList=i.all("garethFilters")},this.filterManagement=function(){a.open({animation:!0,templateUrl:"app/logs/filters.modal.html",controller:"FiltersModalCtrl",controllerAs:"FiltersModalCtrl",size:"md"})},e.$on("changeLang",function(){s.options=r.newOptions().withLanguageSource("components/core/i18n/datatables."+t.use()+".json")}),this.init()}]),angular.module("sagremorApp").controller("monitorsCtrl",["$scope","$translate","toaster","sagremorService","angharadFactory","carleonFactory","sagremorParams","sagremorEdit",function(e,t,a,n,r,o,i,s){function l(n){if(i.currentProfile){var o=_.find(i.currentProfile.monitorList,function(e){return e.name===n});if(i.currentProfile.monitorList||(i.currentProfile.monitorList=[]),!o&&n){var s={name:n,elements:[]};i.currentProfile.monitorList.push(s),r.saveCurrentProfile().then(function(){a.pop("success",t.instant("monitor_save"),t.instant("monitor_save_success"))},function(){a.pop("error",t.instant("monitor_save"),t.instant("monitor_save_error"))})["finally"](function(){e.$broadcast("angharadProfileChanged")})}}}var c=this;this.monitorList=[],this.sagremorParams=i,this.init=function(){t(["edit","remove","add_to_dashboard"]).then(function(t){c.menu=[{name:"remove",display:t.remove,action:function(t){n.removeMonitor(t).then(function(){e.$broadcast("angharadProfileChanged")})}},{name:"add_to_dashboard",display:t.add_to_dashboard,action:function(t){t.type="monitor",n.addToDashboard(t).then(function(){e.$broadcast("refreshDashboard")})}}],c.updateMonitors()})},e.$on("angharadProfileChanged",function(){c.updateMonitors()}),this.updateMonitors=function(){var e=i.currentProfile;e&&e.monitorList&&(c.monitorList=e.monitorList)},this.newMonitor=function(){return s.open(t.instant("monitor_new_title"),t.instant("monitor_new_value"),t.instant("monitor_new_placeholder")).then(function(e){l(e.value)})},this.init()}]),angular.module("sagremorApp").controller("ParametersCtrl",["$scope","$rootScope","$q","$location","$translate","$cookies","$window","toaster","angharadFactory","benoicFactory","carleonFactory","sharedData","sagremorConfirm","sagremorParams",function(e,t,a,n,r,o,i,s,l,c,d,m,u,p){var v=this;this.submodules,this.deviceList=[],this.deviceTypes=[],this.deviceTypesEnabled=[],this.deviceAdded=!1,this.deviceUpdated=!1,this.newDeviceName="",this.newDeviceDescription="",this.newDeviceType="",this.newDeviceConnect=!0,this.deviceOptionList=[],this.deviceOptionListDisplay=!1,this.profileList=[],this.currentProfile=!1,this.profileAdded=!1,this.serviceList=[],this.sagremorParams=p,this.init=function(){p.loggedIn||n.path("/login"),v.submodules=m.all("submodules"),v.deviceList=m.all("benoicDevices"),v.initDeviceTypes(),v.serviceList=m.all("carleonServices"),v.selectedLang=r.use(),v.profileList=p.profiles,v.currentProfile=p.currentProfile},e.$on("submodulesChanged",function(){v.submodules=m.all("submodules")}),e.$on("benoicDevicesChanged",function(){v.deviceList=m.all("benoicDevices")}),e.$on("benoicDeviceTypesChanged",function(){v.initDeviceTypes()}),e.$on("carleonServicesChanged",function(){v.serviceList=m.all("carleonServices")}),this.addDevice=function(){v.deviceAdded=!0},this.isDeviceValid=function(){if(!v.newDeviceName||v.newDeviceName.length>64)return!1;for(var e in v.deviceList)if(v.newDeviceName===e)return!1;if(!v.newDeviceDescription||v.newDeviceDescription>128)return!1;if(!v.newDeviceType)return!1;for(var t in v.deviceOptionList){var a=v.deviceOptionList[t];if(!a.optional&&!a.value)return!1}return!0},this.postNewDevice=function(){var e={};_.forEach(v.deviceOptionList,function(t){"boolean"===t.type?e[t.name]=!!t.value:"numeric"===t.type?e[t.name]=parseFloat(t.value):e[t.name]=t.value});var a=v.newDeviceName;c.addDevice({name:a,display:v.newDeviceName,description:v.newDeviceDescription,enabled:!0,type_uid:v.newDeviceType,options:e}).then(function(e){v.newDeviceConnect?v.connectDevice({name:a,connected:!0}).then(function(e){s.pop("success",r.instant("device_add"),r.instant("device_add_success"))}):s.pop("success",r.instant("device_add"),r.instant("device_add_success"))},function(e){s.pop("error",r.instant("device_add"),r.instant("device_add_error"))})["finally"](function(){v.deviceAdded=!1,v.deviceList=m.all("benoicDevices"),v.newDeviceName="",v.newDeviceDescription="",v.newDeviceType="",v.newDeviceConnect=!0,v.deviceOptionList=[],t.$broadcast("reinitBenoic")})},this.cancelNewDevice=function(){v.deviceAdded=!1,v.newDeviceName="",v.newDeviceDescription="",v.newDeviceType="",v.deviceOptionList=[]},this.setDeviceOptions=function(){v.newDeviceType?(v.deviceOptionList=_.find(v.deviceTypes,function(e){return e.uid===v.newDeviceType}).options,v.deviceOptionListDisplay=!0):v.deviceOptionListDisplay=!1},this.connectDevice=function(e){return e.connected?c.connectDevice(e.name).then(function(t){c.getDeviceOverview(e.name).then(function(t){m.get("benoicDevices",e.name).element=t,s.pop("success",r.instant("device_connect"),r.instant("device_connect_success"))},function(e){s.pop("error",r.instant("device_connect"),r.instant("device_connect_error"))})},function(t){s.pop("error",r.instant("device_connect"),r.instant("device_connect_error")),e.connected=!1}):c.disconnectDevice(e.name).then(function(t){s.pop("success",r.instant("device_disconnect"),r.instant("device_disconnect_success"));var a=m.get("benoicDevices",e.name);a&&(a.element={})},function(t){s.pop("error",r.instant("device_disconnect"),r.instant("device_disconnect_error")),e.connected=!0})},this.editDevice=function(e){e.newDescription=e.description,e.update=!0,v.deviceUpdated=!0,v.deviceOptionListDisplay=!0,v.deviceOptionList=_.find(v.deviceTypes,{uid:e.type_uid}).options,v.newDeviceType=e.type_uid,_.forEach(v.deviceOptionList,function(t){t.value=e.options[t.name]})},this.saveDevice=function(e){e.description=e.newDescription,_.forEach(v.deviceOptionList,function(t){e.options[t.name]=t.value}),c.setDevice(e).then(function(e){s.pop("success",r.instant("device_save"),r.instant("device_save_success"))},function(e){s.pop("error",r.instant("device_save"),r.instant("device_save_error"))})["finally"](function(){v.deviceUpdated=!1,v.deviceOptionListDisplay=!1,v.deviceOptionList=[],e.update=!1})},this.cancelEditDevice=function(e){e.newDescription=e.description,v.deviceUpdated=!1,v.deviceOptionListDisplay=!1,v.deviceOptionList=[],e.update=!1},this.removeDevice=function(e){u.open(r.instant("device_remove"),r.instant("device_remove_confirm")).then(function(t){c.removeDevice(e.name).then(function(t){m.remove("benoicDevices",e.name),v.deviceList=m.all("benoicDevices"),s.pop("success",r.instant("device_remove"),r.instant("device_remove_success"))},function(e){s.pop("error",r.instant("device_remove"),r.instant("device_remove_error"))})})},this.initDeviceTypes=function(){v.deviceTypes=m.all("benoicDeviceTypes"),v.deviceTypesEnabled=_.filter(m.all("benoicDeviceTypes"),{enabled:!0}),_.forEach(v.deviceTypes,function(e){r(e.uid+"_device_type").then(function(t){e.translate=t},function(t){e.translate=e.name})})},this.reloadBenoicDeviceTypes=function(){c.reloadDeviceTypes().then(function(e){m.removeAll("benoicDeviceTypes"),_.forEach(e,function(e){m.add("benoicDeviceTypes",e.uid,e)}),v.initDeviceTypes(),t.$broadcast("refresh")})},this.reloadCarleonServices=function(){d.reloadServiceList().then(function(e){m.removeAll("carleonServices");for(key in e)_.forEach(e[key].element,function(t){t.type=e[key].name}),m.add("carleonServices",e[key].name,e[key]);t.$broadcast("refresh")})},this.submoduleEnable=function(e){return u.open(r.instant("param_submodule_enable"),r.instant("param_submodule_enable_confirm")).then(function(){"benoic"===e?l.enableSubmodule(e,v.submodules.benoic.enabled).then(function(e){p.benoicEnabled=v.submodules.benoic.enabled,t.$broadcast("submodulesChanged"),t.$broadcast("refreshDashboard"),v.submodules.benoic.enabled?t.$broadcast("reinitBenoic"):t.$broadcast("closeBenoic"),s.pop("success",r.instant("submodules"),r.instant("submodules_enable_success"))},function(e){s.pop("error",r.instant("submodules"),r.instant("submodules_enable_error"))}):"carleon"===e?l.enableSubmodule(e,v.submodules.carleon.enabled).then(function(e){p.carleonEnabled=v.submodules.carleon.enabled,t.$broadcast("submodulesChanged"),t.$broadcast("refreshDashboard"),v.submodules.carleon.enabled?t.$broadcast("reinitCarleon"):t.$broadcast("closeCarleon"),s.pop("success",r.instant("submodules"),r.instant("submodules_enable_success"))},function(e){s.pop("error",r.instant("submodules"),r.instant("submodules_enable_error"))}):"gareth"===e&&l.enableSubmodule(e,v.submodules.gareth.enabled).then(function(e){p.garethEnabled=v.submodules.gareth.enabled,t.$broadcast("submodulesChanged"),t.$broadcast("refreshDashboard"),v.submodules.gareth.enabled?t.$broadcast("reinitGareth"):t.$broadcast("closeGareth"),s.pop("success",r.instant("submodules"),r.instant("submodules_enable_success"))},function(e){s.pop("error",r.instant("submodules"),r.instant("submodules_enable_error"))})},function(){v.submodules[e].enabled=!v.submodules[e].enabled})},this.addProfile=function(){v.newProfileName="",v.newProfileDescription="",v.newProfileDefault=!1,v.profileAdded=!0},this.cancelNewProfile=function(){v.profileAdded=!1},this.isProfileValid=function(){var e=v.newProfileName.length>0;return _.forEach(v.profileList,function(t){t.name===v.newProfileName&&(e=!1)}),e},this.saveNewProfile=function(){var t={name:v.newProfileName,description:v.newProfileDescription,"default":v.newProfileDefault};l.setProfile(v.newProfileName,t).then(function(){s.pop("success",r.instant("profiles"),r.instant("profiles_add_success")),e.$broadcast("angharadProfileChanged"),v.profileList.push(t)},function(e){s.pop("error",r.instant("profiles"),r.instant("profiles_add_error"))})["finally"](function(){v.profileAdded=!1})},this.removeProfile=function(t){u.open(r.instant("profile_remove"),r.instant("profile_remove_confirm")).then(function(a){l.removeProfile(t.name).then(function(){s.pop("success",r.instant("profiles"),r.instant("profiles_remove_success")),e.$broadcast("angharadProfileChanged"),_.remove(v.profileList,function(e){return t.name===e.name})},function(e){s.pop("error",r.instant("profiles"),r.instant("profiles_remove_error"))})})},this.cleanProfile=function(t){u.open(r.instant("profile_clean"),r.instant("profile_clean_confirm")).then(function(a){var n={name:t.name,description:t.description,"default":t["default"]};l.setProfile(t.name,n).then(function(a){for(key in p.profiles)p.profiles[key].name===n.name&&(p.profiles[key]=n);p.currentProfile.name===n.name&&(p.currentProfile=n),e.$broadcast("angharadProfileChanged"),s.pop("success",r.instant("profiles"),r.instant("profiles_save_success")),t=n},function(e){s.pop("error",r.instant("profiles"),r.instant("profiles_save_error"))})})},this.editProfile=function(e){e.update=!0,e.newName=e.name,e.newDescription=e.description},this.cancelEditProfile=function(e){e.update=!1,e.name=e.newName,e.description=e.newDescription},this.isUpdateProfileValid=function(e){var t=e.newName.length>0;return _.forEach(v.profileList,function(a){e.name!==a.name&&e.newName===a.name&&(t=!1)}),t},this.saveProfile=function(t){if(t.name!==t.savedName){var n=t.newName;t.name=t.newName,t.description=t.newDescription,delete t.newName,delete t.newDescription,delete t.update;var o={remove:l.removeProfile(n),add:l.setProfile(t.name,t)};a.all(o).then(function(t){e.$broadcast("angharadProfileChanged"),s.pop("success",r.instant("profiles"),r.instant("profiles_save_success"))},function(e){s.pop("error",r.instant("profiles"),r.instant("profiles_save_error"))})}else delete t.savedName,delete t.savedDescription,delete t.update,l.setProfile(t.name,t).then(function(t){e.$broadcast("angharadProfileChanged"),s.pop("success",r.instant("profiles"),r.instant("profiles_save_success"))},function(e){s.pop("error",r.instant("profiles"),r.instant("profiles_save_error"))})},this.setDefaultProfile=function(t){t["default"]?(delete t.update,l.setProfile(t.name,t).then(function(a){_.forEach(v.profileList,function(e){e["default"]&&e.name!==t.name&&(e["default"]=!1,l.setProfile(e.name,e).then(function(e){},function(e){s.pop("error",r.instant("profiles"),r.instant("profiles_save_error"))}))}),e.$broadcast("angharadProfileChanged"),s.pop("success",r.instant("profiles"),r.instant("profiles_save_success"))},function(e){s.pop("error",r.instant("profiles"),r.instant("profiles_save_error"))})):(delete t.savedName,delete t.savedDescription,delete t.update,l.setProfile(t.name,t).then(function(t){e.$broadcast("angharadProfileChanged"),s.pop("success",r.instant("profiles"),r.instant("profiles_save_success"))},function(e){s.pop("error",r.instant("profiles"),r.instant("profiles_save_error"))}))},this.useProfile=function(e){p.currentProfile=e;var a=new i.Date;a=new i.Date(a.getFullYear()+10,a.getMonth(),a.getDate()),o.put("ANGHARAD_PROFILE",e.name,{expires:a}),t.$broadcast("angharadProfileUpdated")},e.$on("angharadProfileChanged",function(){v.profileList=p.profiles}),e.$on("angharadProfileUpdated",function(){v.currentProfile=p.currentProfile}),this.init()}]).filter("deviceTypeName",["sharedData",function(e){return function(t){var a=e.all("benoicDeviceTypes");for(key in a)if(a[key].uid===t)return a[key].name;return!1}}]),angular.module("sagremorApp").controller("scriptsCtrl",["$scope","$translate","sagremorService","angharadFactory","sharedData","sagremorParams",function(e,t,a,n,r,o){var i=this;this.scriptList=[],this.sagremorParams=o,this.init=function(){t(["edit","monitor","bind_to_element","add_to_dashboard"]).then(function(n){i.menuScript=[{name:"edit",display:t.instant("edit"),action:function(e){a.editScript(e)}},{name:"remove",display:t.instant("remove"),action:function(t){a.removeScript(t).then(function(){e.$broadcast("angharadScriptsChanged")})}},{name:"bind_to_element",display:t.instant("bind_to_element"),action:function(e){a.bindToElement(e)}},{name:"add_to_dashboard",display:t.instant("add_to_dashboard"),action:function(t){t.type="script",a.addToDashboard(t).then(function(){e.$broadcast("refreshDashboard")})}}],i.updateScripts()})},e.$on("angharadScriptsChanged",function(){i.updateScripts()}),this.updateScripts=function(){var e=r.all("angharadScripts");i.scriptList=[];for(key in e)i.scriptList.push(e[key])},e.$on("refreshAngharadScripts",function(){i.refreshScripts()}),this.refreshScripts=function(){var e=r.all("angharadScripts");for(key in e){var t=_.find(i.scriptList,function(e){return e.name===key});t||i.scriptList.push(e[key])}for(var a=i.scriptList.length-1;a>=0;a--)r.get("angharadScripts",i.scriptList[a].name)||i.scriptList.splice(a,1)},this.newScript=function(){a.editScript(null)},this.init()}]),angular.module("sagremorApp").controller("sensorsCtrl",["$scope","$location","$translate","sagremorService","benoicFactory","sharedData","sagremorParams",function(e,t,a,n,r,o,i){var s=this;this.sensorList=[],this.sagremorParams=i,this.init=function(){i.loggedIn||t.path("/login"),a(["edit","monitor","add_to_dashboard"]).then(function(t){s.menuSensor=[{name:"edit",display:t.edit,action:function(e){n.editSensor(e)}},{name:"monitor",display:t.monitor,action:function(e){n.monitor(e)}},{name:"add_to_dashboard",display:t.add_to_dashboard,action:function(t){n.addToDashboard(t).then(function(){e.$broadcast("refreshDashboard")})}}],s.updateSensors()})},e.$on("benoicDevicesChanged",function(){s.updateSensors()}),e.$on("benoicSensorsChanged",function(){s.updateSensors()}),this.updateSensors=function(){var e=o.all("benoicDevices");s.sensorList=[];for(key in e){var t=e[key].name;if(e[key].connected&&e[key].enabled)for(se in e[key].element.sensors){var a=e[key].element.sensors[se];a.device=t,a.name=se,s.sensorList.push(a)}}},e.$on("refreshDevices",function(){s.refreshElements()}),this.refreshElements=function(){var e=o.all("benoicDevices");for(key in e){var t=e[key].name;if(e[key].connected&&e[key].enabled)for(se in e[key].element.sensors){var a=0,n=_.find(s.sensorList,function(e){return e.name===se&&e.device===t});if(n){var r=e[key].element.sensors[se];r.device=t,r.name=se;var a=_.indexOf(s.sensorList,_.find(s.sensorList,{device:t,name:se}));s.sensorList.splice(a,1,r)}else{var r=e[key].element.sensors[se];r.device=t,r.name=se,s.sensorList.push(r)}}}_.remove(s.sensorList,function(e){var t=_.find(o.all("benoicDevices"),function(t,a){return!t.element||_.find(t.element.sensors,function(t,n){return n===e.name&&a===e.device})});if(!t)return!0})},this.init()}]),angular.module("sagremorApp").controller("serviceCtrl",["$scope","$stateParams","$location","$translate","$uibModal","toaster","sagGenericInjectorManager","sagremorService","carleonFactory","sharedData","sagremorParams",function(e,t,a,n,r,o,i,s,l,c,d){function m(){_.forEach(u.currentInjectors,function(t){var a=c.get("carleonServices",t.type);if(a&&a.enabled&&!_.find(u.serviceList,{type:t.type})){var r={type:t.type};u.title=t.leftMenu.title,r.size=t.size||1,r.serviceGroup={title:t.groupTitle,list:[],service:t.service},r.menu=[{name:"edit",display:n.instant("edit"),action:function(e){e.service.editService(e)}},{name:"remove",display:n.instant("remove"),action:function(t){t.service.removeService(t).then(function(){e.$broadcast("carleonServicesChanged")})}},{name:"add_to_dashboard",display:n.instant("add_to_dashboard"),action:function(t){s.addToDashboard(t)&&e.$broadcast("refreshDashboard")}}],u.serviceList.push(r)}}),_.forEach(u.currentInjectors,function(e){var t=c.get("carleonServices",e.type);if(t&&t.enabled&&t.element){var a=_.find(u.serviceList,{type:e.type});a&&!a.list&&(a.list=[]),!a||_.forEach(t.element,function(t){var n=_.find(a.list,function(e){return e.name===t.name});if(!n){var r={name:t.name,type:t.type,description:t.description,service:e.service};a.list.push(r)}}),!a||_.forEach(a.list,function(e,n){var r=_.find(t.element,function(t){return t.name===e.name});r||a.list.splice(n,1)})}})}var u=this;this.serviceList=[],this.title="",
this.sagremorParams=d,this.currentInjectors=_.filter(i.components,function(e){return e.leftMenu&&e.leftMenu.target===t.service}),this.size=1,this.init=function(){d.loggedIn||a.path("/login"),m()},this.addService=function(e){e.addService()},e.$on("carleonServicesChanged",function(){m()}),e.$on("refreshCarleonServices",function(){m()}),this.init()}]),angular.module("sagremorApp").controller("switchesCtrl",["$scope","$location","$translate","sagremorService","benoicFactory","sharedData","sagremorParams",function(e,t,a,n,r,o,i){var s=this;this.switchList=[],this.dimmerList=[],this.sagremorParams=i,this.init=function(){i.loggedIn||t.path("/login"),a(["edit","monitor","add_to_dashboard"]).then(function(t){s.menuSwitcher=[{name:"edit",display:t.edit,action:function(e){n.editSwitcher(e)}},{name:"monitor",display:t.monitor,action:function(e){n.monitor(e)}},{name:"add_to_dashboard",display:t.add_to_dashboard,action:function(t){n.addToDashboard(t).then(function(){e.$broadcast("refreshDashboard")})}}],s.menuDimmer=[{name:"edit",display:t.edit,action:function(e){n.editDimmer(e)}},{name:"monitor",display:t.monitor,action:function(e){n.monitor(e)}},{name:"add_to_dashboard",display:t.add_to_dashboard,action:function(t){n.addToDashboard(t).then(function(){e.$broadcast("refreshDashboard")})}}],s.updateSwitchers(),s.updateDimmers()})},e.$on("benoicDevicesChanged",function(){s.updateSwitchers(),s.updateDimmers()}),e.$on("benoicSwitchesChanged",function(){s.updateSwitchers(),s.updateDimmers()}),this.updateSwitchers=function(){var e=o.all("benoicDevices");s.switchList=[];for(key in e){var t=e[key].name;if(e[key].connected&&e[key].enabled)for(sw in e[key].element.switches){var a=e[key].element.switches[sw];a.device=t,a.name=sw,s.switchList.push(a)}}},this.updateDimmers=function(){var e=o.all("benoicDevices");s.dimmerList=[];for(key in e){var t=e[key].name;if(e[key].connected&&e[key].enabled)for(di in e[key].element.dimmers){var a=e[key].element.dimmers[di];a.device=t,a.name=di,s.dimmerList.push(a)}}},e.$on("refreshDevices",function(){s.refreshElements()}),this.refreshElements=function(){var e=o.all("benoicDevices");for(key in e){var t=e[key].name;if(e[key].connected&&e[key].enabled)for(se in e[key].element.dimmers){var a=0,n=_.find(s.dimmerList,function(e){return e.name===se&&e.device===t});if(n){var r=e[key].element.dimmers[se];r.device=t,r.name=se;var a=_.indexOf(s.dimmerList,_.find(s.dimmerList,{device:t,name:se}));s.dimmerList.splice(a,1,r)}else{var r=e[key].element.dimmers[se];r.device=t,r.name=se,s.dimmerList.push(r)}}}_.remove(s.dimmerList,function(e){var t=_.find(o.all("benoicDevices"),function(t,a){return _.find(t.element.dimmers,function(t,n){return n===e.name&&a===e.device})});if(!t)return!0});var e=o.all("benoicDevices");for(key in e){var t=e[key].name;if(e[key].connected&&e[key].enabled)for(se in e[key].element.switches){var a=0,n=_.find(s.switchList,function(e){return e.name===se&&e.device===t});if(n){var i=e[key].element.switches[se];i.device=t,i.name=se;var a=_.indexOf(s.switchList,_.find(s.switchList,{device:t,name:se}));s.switchList.splice(a,1,i)}else{var i=e[key].element.dimmers[se];i.device=t,i.name=se,s.switchList.push(i)}}}_.remove(s.switchList,function(e){var t=_.find(o.all("benoicDevices"),function(e,t){return!e.element||_.find(e.element.dimmers,function(e,a){return a===r.name&&t===r.device})});if(!t)return!0})},this.init()}]),angular.module("sagremorApp").controller("usersCtrl",["$scope","$translate","toaster","DTOptionsBuilder","angharadFactory","sagremorConfirm",function(e,t,a,n,r,o){var i=this;this.userList=[],this.tokenList=[],this.options={},this.newUser=!1,this.user={login:"",password:"",enabled:!0},this.usersEnabled=!0,this.searchOptions={login:"",enabled:""},this.init=function(){t.use()&&(i.options=n.newOptions().withLanguageSource("components/core/i18n/datatables."+t.use()+".json")),i.getUserList(),i.getTokenList()},this.getUserList=function(){r.getUserList().then(function(e){i.userList=e},function(e){404===e.status?i.usersEnabled=!1:a.pop("error",t.instant("users_get_user_list"),t.instant("users_get_user_list_error"))})},this.addUser=function(){i.newUser=!0},this.cancelNewUser=function(){i.newUser=!1,i.user={login:"",password:"",enabled:!0}},this.isNewUserValid=function(){var e=_.find(i.userList,{login:i.user.login});return!e&&(!!i.user.login&&i.user.login.length>0&&!!i.user.password&&i.user.password.length>0)},this.createNewUser=function(){r.addUser(i.user).then(function(){i.userList.push(i.user),i.newUser=!1,i.user={login:"",password:"",enabled:!0},a.pop("success",t.instant("users_save_user"),t.instant("users_save_user_success"))},function(){a.pop("error",t.instant("users_save_user"),t.instant("users_save_user_error"))})},this.displayChangePassword=function(e){e.changePassword=!0},this.cancelChangePassword=function(e){e.changePassword=!1,e.password=""},this.changePassword=function(e){r.setUser(e.login,e).then(function(){e.password="",e.changePassword=!1,a.pop("success",t.instant("users_save_user"),t.instant("users_save_user_success"))},function(){a.pop("error",t.instant("users_save_user"),t.instant("users_save_user_error"))})},this.enableUser=function(e){r.setUser(e.login,{enabled:e.enabled}).then(function(){a.pop("success",t.instant("users_save_user"),t.instant("users_save_user_success"))},function(){a.pop("error",t.instant("users_save_user"),t.instant("users_save_user_error"))})},this.removeUser=function(e){return o.open(t.instant("users_user_remove"),t.instant("users_user_remove_confirm",{login:e.login})).then(function(){return r.removeUser(e.login).then(function(){_.remove(i.userList,{login:e.login}),a.pop("success",t.instant("users_user_remove"),t.instant("users_user_remove_success"))},function(){a.pop("error",t.instant("users_user_remove"),t.instant("users_user_remove_error"))})})},this.getTokenList=function(){var e={login:i.searchOptions.login};"true"===i.searchOptions.enabled?e.enabled=!0:"false"===i.searchOptions.enabled&&(e.enabled=!1),r.getTokenList(e).then(function(e){i.tokenList=e},function(){a.pop("error",t.instant("users_get_token_list"),t.instant("users_get_token_list_error"))})},this.displayToken=function(e){return e.substring(0,4)+"****-****-****-****-********"+e.substring(32)},this.revokeToken=function(e){return o.open(t.instant("users_token_revoke"),t.instant("users_token_revoke_confirm")).then(function(){return r.revokeToken(e.token).then(function(){e.enabled=!1,a.pop("success",t.instant("users_token_revoke"),t.instant("users_token_revoke_success"))},function(){a.pop("error",t.instant("users_token_revoke"),t.instant("users_token_revoke_error"))})})},this.init(),e.$on("changeLang",function(){i.options=n.newOptions().withLanguageSource("components/core/i18n/datatables."+t.use()+".json")})}]),angular.module("sagremorApp").directive("sagGenericInjector",["$compile","sagGenericInjectorManager","sharedData",function(e,t,a){var n='<directive element="elt"></directive>',r='<div class="container has-error" data-translate="injector_not_found"></div>',o='<div class="container has-error" data-translate="injector_disabled"></div>';return{scope:{type:"=",elt:"="},link:function(i,s){var l=_.find(t.components,{type:i.type}),c=a.get("carleonServices",i.type);l.carleonService&&c&&c.enabled?content=e(n.replace(/directive/g,l.directive))(i):l.carleonService&&c&&!c.enabled?content=e(o)(i):l.carleonService?content=e(r)(i):content=e(n.replace(/directive/g,l.directive))(i),s.append(content)}}}]),angular.module("sagremorApp").component("serviceLiquidsoap",{templateUrl:"components/carleonLiquidsoap/carleonLiquidsoap.template.html",controller:carleonLiquidsoapController,bindings:{element:"="}}).directive("radio",["$sce",function(e){return{restrict:"A",scope:{src:"="},replace:!0,template:'<audio data-ng-src="{{url}}" controls></audio>',link:function(t){t.$watch("src",function(a,n){void 0!==a&&(t.url=e.trustAsResourceUrl(a))})}}}]).factory("carleonLiquidsoapFactory",["$http","$uibModal","$translate","toaster","angharadConfig","angharadBackendService","sagremorConfirm","sharedData",function(e,t,a,n,r,o,i,s){var l=r.baseUrl+r.prefixCarleon,c={};return c.getLiquidsoapServiceList=function(){return o.httpRequest("GET",l+"service-liquidsoap/")},c.getLiquidsoapService=function(e){return o.httpRequest("GET",l+"service-liquidsoap/"+e)},c.addLiquidsoapService=function(e){return o.httpRequest("POST",l+"service-liquidsoap/",e)},c.setLiquidsoapService=function(e,t){return o.httpRequest("PUT",l+"service-liquidsoap/"+e,t)},c.removeLiquidsoapService=function(e){return o.httpRequest("DELETE",l+"service-liquidsoap/"+e)},c.list=function(e){return o.httpRequest("GET",l+"service-liquidsoap/"+e+"/list")},c.onAir=function(e){return o.httpRequest("GET",l+"service-liquidsoap/"+e+"/on_air")},c.command=function(e,t){return o.httpRequest("GET",l+"service-liquidsoap/"+e+"/command/"+t)},c.addService=function(){t.open({animation:!0,templateUrl:"components/carleonLiquidsoap/carleonLiquidsoap.modal.html",controller:"carleonLiquidsoapModalCtrl",controllerAs:"carleonLiquidsoapModalCtrl",size:"md",resolve:{element:function(){return null}}})},c.editService=function(e){t.open({animation:!0,templateUrl:"components/carleonLiquidsoap/carleonLiquidsoap.modal.html",controller:"carleonLiquidsoapModalCtrl",controllerAs:"carleonLiquidsoapModalCtrl",size:"md",resolve:{element:function(){return e}}})},c.removeService=function(e){return i.open(a.instant("carleon_liquidsoap_remove"),a.instant("carleon_liquidsoap_remove_confirm")).then(function(){return c.removeLiquidsoapService(e.name).then(function(){var t=s.get("carleonServices","service-liquidsoap");_.remove(t.element,function(t){return t.name===e.name}),s.add("carleonServices","service-liquidsoap",t),n.pop("success",a.instant("carleon_liquidsoap_remove"),a.instant("carleon_liquidsoap_remove_success"))},function(){n.pop("error",a.instant("carleon_liquidsoap_remove"),a.instant("carleon_liquidsoap_remove_error"))})})},c}]).config(["$translatePartialLoaderProvider",function(e){e.addPart("carleonLiquidsoap")}]).run(["sagGenericInjectorManager","carleonLiquidsoapFactory",function(e,t){e.add({type:"service-liquidsoap",directive:"service-liquidsoap",groupTitle:"carleon_liquidsoap_title",service:t,carleonService:!0,size:2,leftMenu:{title:"carleon_music_title",target:"music"},widgetHeight:4,widgetWidth:3,icon:"music",commands:{}})}]),angular.module("sagremorApp").controller("carleonLiquidsoapModalCtrl",["$rootScope","$uibModalInstance","$translate","sharedData","toaster","carleonLiquidsoapFactory","element",function(e,t,a,n,r,o,i){function s(){i&&(l.element=_.find(n.get("carleonServices","service-liquidsoap").element,function(e){return e.name===i.name}),l.add=!1)}var l=this;this.messages={},this.add=!0,this.element={name:"",description:"",radio_url:"",radio_type:"",control_enabled:!1,control_host:"",control_port:0,control_request_name:""},this.isLiquidsoapValid=function(){var e=_.find(n.get("carleonServices","service-liquidsoap").element,function(e){return e.name===l.element.name});return!(e&&l.add||!l.element.name||!l.element.radio_url||l.element.control_enabled&&(!l.element.control_host||!l.element.control_port||!l.element.control_request_name))},this.save=function(){l.add?o.addLiquidsoapService(l.element).then(function(){l.element.type="service-liquidsoap",l.element.service=o,n.get("carleonServices","service-liquidsoap").element.push(l.element),e.$broadcast("carleonServicesChanged"),r.pop("success",a.instant("carleon_liquidsoap_save"),a.instant("carleon_liquidsoap_save_success"))},function(){r.pop("error",a.instant("carleon_liquidsoap_save"),a.instant("carleon_liquidsoap_save_error"))})["finally"](function(){t.dismiss("close")}):o.setLiquidsoapService(l.element.name,l.element).then(function(){l.element.type="service-liquidsoap",l.element.service=o,e.$broadcast("carleonServicesChanged"),r.pop("success",a.instant("carleon_liquidsoap_save"),a.instant("carleon_liquidsoap_save_success"))},function(){r.pop("error",a.instant("carleon_liquidsoap_save"),a.instant("carleon_liquidsoap_save_error"))})["finally"](function(){t.dismiss("close")})},this.cancel=function(){t.dismiss("close")},s()}]),angular.module("sagremorApp").component("carleonMock",{templateUrl:"components/carleonMock/carleonMock.template.html",controller:carleonMockController,bindings:{element:"="}}).factory("carleonMockFactory",["$http","$uibModal","$translate","toaster","angharadConfig","angharadBackendService","sagremorConfirm","sharedData",function(e,t,a,n,r,o,i,s){var l=r.baseUrl+r.prefixCarleon,c={};return c.getMockList=function(){return o.httpRequest("GET",l+"mock-service/")},c.getMock=function(e){return o.httpRequest("GET",l+"mock-service/"+e)},c.addMock=function(e){return o.httpRequest("POST",l+"mock-service/",e)},c.setMock=function(e,t){return o.httpRequest("PUT",l+"mock-service/"+e,t)},c.removeMock=function(e){return o.httpRequest("DELETE",l+"mock-service/"+e)},c.commandMock=function(e,t,a,n,r){return"exec3"===t||"exec4"===t?o.httpRequest("GET",l+"mock-service/"+e+"/command/"+t):"exec2"===t?o.httpRequest("GET",l+"mock-service/"+e+"/command/"+t+"/"+a):o.httpRequest("GET",l+"mock-service/"+e+"/command/"+t+"/"+a+"/"+n+"/"+r)},c.addService=function(){t.open({animation:!0,templateUrl:"components/carleonMock/carleonMock.modal.html",controller:"CarleonMockModalCtrl",controllerAs:"CarleonMockModalCtrl",size:"sm",resolve:{mock:function(){return null}}})},c.editService=function(e){t.open({animation:!0,templateUrl:"components/carleonMock/carleonMock.modal.html",controller:"CarleonMockModalCtrl",controllerAs:"CarleonMockModalCtrl",size:"sm",resolve:{mock:function(){return e}}})},c.removeService=function(e){return i.open(a.instant("carleon_mock_remove"),a.instant("carleon_mock_confirm")).then(function(){return c.removeMock(e.name).then(function(){var t=s.get("carleonServices","mock-service");_.remove(t.element,function(t){return t.name===e.name}),s.add("carleonServices","mock-service",t),n.pop("success",a.instant("carleon_mock_remove"),a.instant("carleon_mock_remove_success"))},function(){n.pop("error",a.instant("carleon_mock_remove"),a.instant("carleon_mock_remove_error"))})})},c}]).config(["$translatePartialLoaderProvider",function(e){e.addPart("carleonMock")}]).run(["sagGenericInjectorManager","carleonMockFactory",function(e,t){e.add({type:"mock-service",directive:"carleon-mock",groupTitle:"carleon_mock_title",service:t,carleonService:!0,size:1,leftMenu:{title:"carleon_mock_title",target:"carleonMock"},widgetHeight:3,widgetWidth:3,icon:"thumbs-o-up",commands:{exec1:{title:"carleon_mock_command_exec1_title",parameters:{param1:"carleon_mock_command_exec1_parameter_param1_title",param2:"carleon_mock_command_exec1_parameter_param2_title",param3:"carleon_mock_command_exec1_parameter_param3_title"},result:{value1:{type:"integer",title:"carleon_mock_command_exec1_result_value1_title"},value2:{type:"boolean",title:"carleon_mock_command_exec1_result_value2_title"}}},exec2:{title:"carleon_mock_command_exec2_title",parameters:{param1:"carleon_mock_command_exec2_parameter_param1_title"},result:{type:"string",title:"carleon_mock_command_exec2_result_title"}},exec3:{title:"carleon_mock_command_exec3_title",parameters:{},result:{type:"string",title:"carleon_mock_command_exec3_result_title"}},exec4:{title:"carleon_mock_command_exec4_title",parameters:{},result:{value1:{type:"integer",title:"carleon_mock_command_exec4_result_value1_title"},value2:{type:"boolean",title:"carleon_mock_command_exec4_result_value2_title"}}}}})}]),angular.module("sagremorApp").controller("CarleonMockModalCtrl",["$rootScope","$uibModalInstance","$translate","sharedData","toaster","carleonMockFactory","mock",function(e,t,a,n,r,o,i){function s(){i?(l.mock=i,l.add=!1):l.mock={}}var l=this;this.messages={},this.add=!0,this.cancel=function(){t.dismiss("close")},this.save=function(){l.add?o.addMock(l.mock).then(function(){l.mock.type="mock-service",l.mock.service=o,n.get("carleonServices","mock-service").element.push(l.mock),e.$broadcast("carleonServicesChanged"),r.pop("success",a.instant("carleon_mock_save"),a.instant("carleon_mock_save_success"))},function(e){r.pop("error",a.instant("carleon_mock_save"),a.instant("carleon_mock_save_error"))})["finally"](function(){t.dismiss("close")}):o.setMock(l.mock.name,l.mock).then(function(){var t=n.get("carleonServices","mock-service").element;_.forEach(t,function(e){e.name===l.mock.name&&(e.description=l.mock.description)}),e.$broadcast("carleonServicesChanged"),r.pop("success",a.instant("carleon_mock_save"),a.instant("carleon_mock_save_success"))},function(e){r.pop("error",a.instant("carleon_mock_save"),a.instant("carleon_mock_save_error"))})["finally"](function(){t.dismiss("close")})},s()}]),angular.module("sagremorApp").component("serviceMotion",{templateUrl:"components/carleonMotion/carleonMotion.template.html",controller:carleonMotionController,bindings:{element:"="}}).factory("carleonMotionFactory",["$http","$uibModal","$translate","toaster","angharadConfig","angharadBackendService","sagremorConfirm","sharedData",function(e,t,a,n,r,o,i,s){var l=r.baseUrl+r.prefixCarleon,c={};return c.getMotionServiceList=function(){return o.httpRequest("GET",l+"service-motion/")},c.getMotionService=function(e){return o.httpRequest("GET",l+"service-motion/"+e)},c.addMotionService=function(e){return o.httpRequest("POST",l+"service-motion/",e)},c.setMotionService=function(e,t){return o.httpRequest("PUT",l+"service-motion/"+e,t)},c.removeMotionService=function(e){return o.httpRequest("DELETE",l+"service-motion/"+e)},c.status=function(e,t){return o.httpRequest("GET",l+"service-motion/"+e+"/status",null,{offset:t})},c.image=function(e,t,a,n){var r={};return n&&(r.thumbnail=""),o.httpRequest("GET",l+"service-motion/"+e+"/image/"+t+"/"+a,null,r)},c.stream=function(e,t){return o.httpRequest("GET",l+"service-motion/"+e+"/stream/"+t)},c.snapshot=function(e,t){return o.httpRequest("PUT",l+"service-motion/"+e+"/stream/"+t+"/snapshot")},c.addService=function(){t.open({animation:!0,templateUrl:"components/carleonMotion/carleonMotion.modal.html",controller:"carleonMotionModalCtrl",controllerAs:"carleonMotionModalCtrl",size:"md",resolve:{motion:function(){return null}}})},c.editService=function(e){t.open({animation:!0,templateUrl:"components/carleonMotion/carleonMotion.modal.html",controller:"carleonMotionModalCtrl",controllerAs:"carleonMotionModalCtrl",size:"md",resolve:{motion:function(){return e}}})},c.removeService=function(e){return i.open(a.instant("carleon_motion_remove"),a.instant("carleon_motion_confirm")).then(function(){return c.removeMotionService(e.name).then(function(){var t=s.get("carleonServices","service-motion");_.remove(t.element,function(t){return t.name===e.name}),s.add("carleonServices","service-motion",t),n.pop("success",a.instant("carleon_motion_remove"),a.instant("carleon_motion_remove_success"))},function(){n.pop("error",a.instant("carleon_motion_remove"),a.instant("carleon_motion_remove_error"))})})},c.imagePopup=function(e,a){t.open({animation:!0,templateUrl:"components/carleonMotion/carleonMotion.image.modal.html",controller:"carleonMotionImageModalCtrl",controllerAs:"carleonMotionImageModalCtrl",size:"lg",resolve:{imgArray:function(){return e},index:function(){return a}}})},c}]).config(["$translatePartialLoaderProvider",function(e){e.addPart("carleonMotion")}]).run(["sagGenericInjectorManager","carleonMotionFactory",function(e,t){e.add({type:"service-motion",directive:"service-motion",groupTitle:"carleon_motion_title",service:t,carleonService:!0,size:3,leftMenu:{title:"carleon_motion_title",target:"carleonMotion"},widgetHeight:5,widgetWidth:6,icon:"camera",commands:{online:{title:"carleon_motion_command_online_title",parameters:{},result:{type:"boolean",title:"carleon_motion_command_online_result_title"}},snapshot:{title:"carleon_motion_command_snapshot_title",parameters:{stream:"carleon_motion_command_snapshot_parameter_stream_title"},result:{type:"boolean",title:"carleon_motion_command_snapshot_result_title"}}}})}]),angular.module("sagremorApp").controller("carleonMotionImageModalCtrl",["$scope","$uibModalInstance","$translate","toaster","carleonMotionFactory","imgArray","index",function(e,t,a,n,r,o,i){function s(){l.currentImage=l.imgArray[l.index],e.$broadcast("carleonMotionImageIframe",l.currentImage)}var l=this;this.imgArray=o,this.index=i,this.currentImage={name:"",title:"",img:"",stream:"",snapshotUri:""},this.close=function(){t.dismiss("close")},this.displayTitle=function(){return a.instant("image_title")+l.currentImage.title},this.changeImage=function(t){l.index+=t,l.currentImage=l.imgArray[l.index],e.$broadcast("carleonMotionImageIframe",l.currentImage)},this.canPrevious=function(){return l.index>0},this.canNext=function(){return l.index<l.imgArray.length-1},this.snapshot=function(){r.snapshot(l.currentImage.name,l.currentImage.title).then(function(){n.pop("success",a.instant("carleon_motion_snapshot"),a.instant("carleon_motion_snapshot_success"))},function(){n.pop("error",a.instant("carleon_motion_snapshot"),a.instant("carleon_motion_snapshot_error"))})},this.showIndex=function(){return l.index+1+" / "+l.imgArray.length},s()}]),angular.module("sagremorApp").controller("carleonMotionModalCtrl",["$rootScope","$uibModalInstance","$translate","sharedData","toaster","carleonMotionFactory","motion",function(e,t,a,n,r,o,i){function s(){i?(l.motion=_.find(n.get("carleonServices","service-motion").element,function(e){return e.name===i.name}),l.add=!1):l.motion={file_list:[],stream_list:[]}}var l=this;this.messages={},this.add=!0,this.addFileList=!1,this.addStream=!1,this.newFileList={},this.newStream={},this.addNewFileList=function(){l.addFileList=!0},this.removeFileList=function(e){l.motion.file_list.splice(e,1)},this.saveNewFileList=function(){l.motion.file_list.push(l.newFileList),l.newFileList={},l.addFileList=!1},this.cancelNewFileList=function(){l.newFileList={},l.addFileList=!1},this.isFileListValid=function(){return!!l.newFileList.name&&!!l.newFileList.path&&!!l.newFileList.thumbnail_path},this.addNewStream=function(){l.addStream=!0},this.removeStream=function(e){l.motion.stream_list.splice(e,1)},this.saveNewStream=function(){l.motion.stream_list.push(l.newStream),l.newStream={},l.addStream=!1},this.cancelNewStream=function(){l.newStream={},l.addStream=!1},this.isStreamValid=function(){return!!l.newStream.name&&!!l.newStream.uri},this.isCameraValid=function(){var e=_.find(n.get("carleonServices","service-motion").element,function(e){return e.name===l.motion.name});return!(e&&l.add||!l.motion.name||!l.motion.config_uri)},this.cancel=function(){t.dismiss("close")},this.save=function(){l.add?o.addMotionService(l.motion).then(function(){l.motion.type="service-motion",l.motion.service=o,n.get("carleonServices","service-motion").element.push(l.motion),e.$broadcast("carleonServicesChanged"),r.pop("success",a.instant("carleon_motion_save"),a.instant("carleon_motion_save_success"))},function(){r.pop("error",a.instant("carleon_motion_save"),a.instant("carleon_motion_save_error"))})["finally"](function(){t.dismiss("close")}):o.setMotionService(l.motion.name,l.motion).then(function(){l.motion.type="service-motion",l.motion.service=o,e.$broadcast("carleonServicesChanged"),r.pop("success",a.instant("carleon_motion_save"),a.instant("carleon_motion_save_success"))},function(){r.pop("error",a.instant("carleon_motion_save"),a.instant("carleon_motion_save_error"))})["finally"](function(){t.dismiss("close")})},s()}]),angular.module("sagremorApp").component("serviceMpd",{templateUrl:"components/carleonMpd/carleonMpd.template.html",controller:carleonMpdController,bindings:{element:"="}}).factory("carleonMpdFactory",["$http","$uibModal","$translate","toaster","angharadConfig","angharadBackendService","sagremorConfirm","sharedData",function(e,t,a,n,r,o,i,s){var l=r.baseUrl+r.prefixCarleon,c={};return c.getMpdServiceList=function(){return o.httpRequest("GET",l+"service-mpd/")},c.getMpdService=function(e){return o.httpRequest("GET",l+"service-mpd/"+e)},c.addMpdService=function(e){return o.httpRequest("POST",l+"service-mpd/",e)},c.setMpdService=function(e,t){return o.httpRequest("PUT",l+"service-mpd/"+e,t)},c.removeMpdService=function(e){return o.httpRequest("DELETE",l+"service-mpd/"+e)},c.getMpdStatus=function(e){return o.httpRequest("GET",l+"service-mpd/"+e+"/status")},c.getMpdPlaylists=function(e){return o.httpRequest("GET",l+"service-mpd/"+e+"/playlists")},c.setMpdAction=function(e,t){return o.httpRequest("PUT",l+"service-mpd/"+e+"/action/"+t)},c.loadMpdPlaylist=function(e,t){return o.httpRequest("PUT",l+"service-mpd/"+e+"/playlist/"+t)},c.setMpdVolume=function(e,t){return o.httpRequest("PUT",l+"service-mpd/"+e+"/volume/"+t)},c.addService=function(){t.open({animation:!0,templateUrl:"components/carleonMpd/carleonMpd.modal.html",controller:"carleonMpdModalCtrl",controllerAs:"carleonMpdModalCtrl",size:"md",resolve:{mpd:function(){return null}}})},c.editService=function(e){t.open({animation:!0,templateUrl:"components/carleonMpd/carleonMpd.modal.html",controller:"carleonMpdModalCtrl",controllerAs:"carleonMpdModalCtrl",size:"md",resolve:{mpd:function(){return e}}})},c.removeService=function(e){return i.open(a.instant("carleon_mpd_remove"),a.instant("carleon_mpd_confirm")).then(function(){return c.removeMpdService(e.name).then(function(){var t=s.get("carleonServices","service-mpd");_.remove(t.element,function(t){return t.name===e.name}),s.add("carleonServices","service-mpd",t),n.pop("success",a.instant("carleon_mpd_remove"),a.instant("carleon_mpd_remove_success"))},function(){n.pop("error",a.instant("carleon_mpd_remove"),a.instant("carleon_mpd_remove_error"))})})},c}]).config(["$translatePartialLoaderProvider",function(e){e.addPart("carleonMpd")}]).run(["sagGenericInjectorManager","carleonMpdFactory",function(e,t){e.add({type:"service-mpd",directive:"service-mpd",groupTitle:"carleon_mpd_title",service:t,carleonService:!0,size:2,leftMenu:{title:"carleon_music_title",target:"music"},widgetHeight:4,widgetWidth:3,icon:"music",commands:{action:{title:"carleon_mpd_command_action_title",parameters:{action:"carleon_mpd_command_action_parameter_action_title"},result:{type:"boolean",title:"carleon_mpd_command_action_result_title"}},load_playlist:{title:"carleon_mpd_command_playlist_title",parameters:{playlist:"carleon_mpd_command_playlist_parameter_plsylist_title"},result:{type:"boolean",title:"carleon_mpd_command_playlist_result_title"}},set_volume:{title:"carleon_mpd_command_volume_title",parameters:{volume:"carleon_mpd_command_volume_parameter_volume_title"},result:{type:"boolean",title:"carleon_mpd_command_volume_result_title"}}}})}]),angular.module("sagremorApp").controller("carleonMpdModalCtrl",["$rootScope","$uibModalInstance","$translate","sharedData","toaster","carleonMpdFactory","mpd",function(e,t,a,n,r,o,i){function s(){i?(l.mpd=_.find(n.get("carleonServices","service-mpd").element,function(e){return e.name===i.name}),l.add=!1):l.mpd={file_list:[],stream_list:[]},_.forEach(n.all("benoicDevices"),function(e){e.enabled&&e.connected&&_.forEach(e.element.switches,function(t,a){var n={device:e.name,type:"switch",name:a,display:t.display};n.name===l.mpd["switch"]&&n.device===l.mpd.device&&(l.switchAttached=n),l.switches.push(n)})})}var l=this;this.messages={},this.add=!0,this.mpd={name:"",description:"",host:"",port:0,password:"",device:"","switch":""},this.switches=[],this.switchAttached={},this.isMpdValid=function(){var e=_.find(n.get("carleonServices","service-mpd").element,function(e){return e.name===l.mpd.name});return!(e&&l.add||!l.mpd.name||!l.mpd.host)},this.save=function(){l.add?o.addMpdService(l.mpd).then(function(){l.mpd.type="service-mpd",l.mpd.service=o,n.get("carleonServices","service-mpd").element.push(l.mpd),e.$broadcast("carleonServicesChanged"),r.pop("success",a.instant("carleon_mpd_save"),a.instant("carleon_mpd_save_success"))},function(){r.pop("error",a.instant("carleon_mpd_save"),a.instant("carleon_mpd_save_error"))})["finally"](function(){t.dismiss("close")}):o.setMpdService(l.mpd.name,l.mpd).then(function(){l.mpd.type="service-mpd",l.mpd.service=o,e.$broadcast("carleonServicesChanged"),r.pop("success",a.instant("carleon_mpd_save"),a.instant("carleon_mpd_save_success"))},function(){r.pop("error",a.instant("carleon_mpd_save"),a.instant("carleon_mpd_save_error"))})["finally"](function(){t.dismiss("close")})},this.cancel=function(){t.dismiss("close")},this.changeSwitch=function(){l.switchAttached&&(l.mpd.device=l.switchAttached.device,l.mpd["switch"]=l.switchAttached.name)},s()}]),angular.module("sagremorApp").component("sagContainer",{templateUrl:"components/container/container.template.html",controller:sagContainerController,transclude:!0,bindings:{type:"=",menu:"=",title:"=",size:"=",element:"=",dashboard:"=",sagParams:"=",icon:"="}}),angular.module("sagremorApp").factory("angharadBackendService",["$http","$q","$rootScope","AccessToken","sagremorParams","sharedData",function(e,t,a,n,r,o){var i={};return i.httpRequest=function(a,r,i,s){var l=t.defer(),c=o.get("oauthToken","token"),d=new Date;return c.expires_at.valueOf()<d.valueOf()?n.forceRefresh().then(function(t){e.defaults.headers.common.Authorization="Bearer "+t.access_token,e({method:a,url:r,data:i,params:s}).then(function(e){l.resolve(e.data)},function(e){l.reject(e)})},function(e){l.reject(e)}):e({method:a,url:r,data:i,params:s}).then(function(e){l.resolve(e.data)},function(e){l.reject(e)}),l.promise},i}]).factory("angharadFactory",["$http","$q","angharadConfig","angharadBackendService","sagremorParams",function(e,t,a,n,r){var o=a.baseUrl+a.prefixAngharad,i={};return i.getSumboduleList=function(){return n.httpRequest("GET",o+"submodule/")},i.getSubmodule=function(e){return n.httpRequest("GET",o+"submodule/"+e)},i.enableSubmodule=function(e,t){return n.httpRequest("GET",o+"submodule/"+e+"/enable/"+(t?"1":"0"))},i.getScriptList=function(){return n.httpRequest("GET",o+"script/")},i.getScript=function(e){return n.httpRequest("GET",o+"script/"+e)},i.addScript=function(e){return n.httpRequest("POST",o+"script/",e)},i.setScript=function(e,t){return n.httpRequest("PUT",o+"script/"+e,t)},i.removeScript=function(e){return n.httpRequest("DELETE",o+"script/"+e)},i.runScript=function(e){return n.httpRequest("GET",o+"script/"+e+"/run")},i.getSchedulerList=function(){return n.httpRequest("GET",o+"scheduler/")},i.getScheduler=function(e){return n.httpRequest("GET",o+"scheduler/"+e)},i.enableScheduler=function(e,t){return n.httpRequest("GET",o+"scheduler/"+e+"/enable/"+(t?"1":"0"))},i.addScheduler=function(e){return n.httpRequest("POST",o+"scheduler/",e)},i.setScheduler=function(e,t){return n.httpRequest("PUT",o+"scheduler/"+e,t)},i.removeScheduler=function(e){return n.httpRequest("DELETE",o+"scheduler/"+e)},i.getTriggerList=function(){return n.httpRequest("GET",o+"trigger/")},i.getTrigger=function(e){return n.httpRequest("GET",o+"trigger/"+e)},i.enableTrigger=function(e,t){return n.httpRequest("GET",o+"trigger/"+e+"/enable/"+(t?"1":"0"))},i.addTrigger=function(e){return n.httpRequest("POST",o+"trigger/",e)},i.setTrigger=function(e,t){return n.httpRequest("PUT",o+"trigger/"+e,t)},i.removeTrigger=function(e){return n.httpRequest("DELETE",o+"trigger/"+e)},i.getProfileList=function(){return n.httpRequest("GET",o+"profile")},i.getProfile=function(e){return n.httpRequest("GET",o+"profile/"+e)},i.setProfile=function(e,t){return n.httpRequest("PUT",o+"profile/"+e,t)},i.removeProfile=function(e){return n.httpRequest("DELETE",o+"profile/"+e)},i.getUserList=function(){return n.httpRequest("GET",o+"user/")},i.addUser=function(e){return n.httpRequest("POST",o+"user/",e)},i.setUser=function(e,t){return n.httpRequest("PUT",o+"user/"+e,t)},i.removeUser=function(e){return n.httpRequest("DELETE",o+"user/"+e)},i.getTokenList=function(e){return n.httpRequest("GET",o+"token/",null,e)},i.revokeToken=function(e){return n.httpRequest("POST",o+"token/",{token:e})},i.saveCurrentProfile=function(){var e=r.currentProfile,a=t.defer();return e?i.setProfile(e.name,e):(a.reject(error),a.promise)},i}]),angular.module("sagremorApp").factory("benoicFactory",["$http","angharadConfig","angharadBackendService",function(e,t,a){
var n=t.baseUrl+t.prefixBenoic,r={};return r.getDeviceTypes=function(){return a.httpRequest("GET",n+"deviceTypes/")},r.reloadDeviceTypes=function(){return a.httpRequest("PUT",n+"deviceTypes/reload")},r.getDeviceList=function(){return a.httpRequest("GET",n+"device/")},r.getDevice=function(e){return a.httpRequest("GET",n+"device/"+e)},r.addDevice=function(e){return a.httpRequest("POST",n+"device/",e)},r.setDevice=function(e){return a.httpRequest("PUT",n+"device/"+e.name,e)},r.removeDevice=function(e){return a.httpRequest("DELETE",n+"device/"+e)},r.connectDevice=function(e){return a.httpRequest("GET",n+"device/"+e+"/connect")},r.disconnectDevice=function(e){return a.httpRequest("GET",n+"device/"+e+"/disconnect")},r.pingDevice=function(e){return a.httpRequest("GET",n+"device/"+e+"/ping")},r.getDeviceOverview=function(e){return a.httpRequest("GET",n+"device/"+e+"/overview")},r.setElement=function(e,t,r,o,i){return a.httpRequest("GET",n+"device/"+e+"/"+t+"/"+r+"/"+o,null,i)},r.updateElement=function(e,t,r,o){return a.httpRequest("PUT",n+"device/"+e+"/"+t+"/"+r,o)},r.getMonitor=function(e,t,r,o){return a.httpRequest("GET",n+"monitor/"+e+"/"+t+"/"+r,null,o?{from:o}:null)},r.addTag=function(e,t,r,o){return a.httpRequest("PUT",n+"device/"+e+"/"+t+"/"+r+"/"+o)},r.removeTag=function(e,t,r,o){return a.httpRequest("DELETE",n+"device/"+e+"/"+t+"/"+r+"/"+o)},r}]),angular.module("sagremorApp").factory("carleonFactory",["$http","$q","angharadConfig","angharadBackendService","sagremorParams",function(e,t,a,n,r){var o=a.baseUrl+a.prefixCarleon,i={};return i.getServiceList=function(){return n.httpRequest("GET",o+"service")},i.reloadServiceList=function(){return n.httpRequest("PUT",o+"service/reload")},i.enableService=function(e,t){return n.httpRequest("PUT",o+"service/"+e+"/enable/"+(t?"1":"0"))},i.elementCleanup=function(e,t){return n.httpRequest("PUT",o+"service/"+e+"/"+t+"/cleanup")},i.addTag=function(e,t,a){return n.httpRequest("PUT",o+"service/"+e+"/"+t+"/"+a)},i.removeTag=function(e,t,a){return n.httpRequest("DELETE",o+"service/"+e+"/"+t+"/"+a)},i}]),angular.module("sagremorApp").factory("garethFactory",["angharadConfig","angharadBackendService","sagremorParams",function(e,t,a){var n=e.baseUrl+e.prefixGareth,r={};return r.getAllMessages=function(e,a){return t.httpRequest("GET",n+"message",null,{limit:e,offset:a})},r.getFilteredMessages=function(e,a,r){return t.httpRequest("GET",n+"message/"+e,null,{limit:a,offset:r})},r.getFilterList=function(){return t.httpRequest("GET",n+"filter")},r.getFilter=function(e){return t.httpRequest("GET",n+"filter/"+e)},r.addFilter=function(e){return t.httpRequest("POST",n+"filter/",e)},r.setFilter=function(e,a){return t.httpRequest("PUT",n+"filter/"+e,a)},r.removeFilter=function(e){return t.httpRequest("DELETE",n+"filter/"+e)},r.getAlertList=function(){return t.httpRequest("GET",n+"alert")},r.getAlert=function(e,a){return t.httpRequest("GET",n+"alert/"+e+"/"+a)},r.addAlert=function(e,a){return t.httpRequest("POST",n+"alert/"+e,a)},r.setAlert=function(e,a,r){return t.httpRequest("PUT",n+"alert/"+e+"/"+a,r)},r.removeAlert=function(e,a){return t.httpRequest("DELETE",n+"alert/"+e+"/"+a)},r}]),angular.module("sagremorApp").controller("sagremorCtrl",["$scope","$rootScope","$interval","$window","$http","$q","$location","$cookies","$translate","toaster","angharadFactory","benoicFactory","carleonFactory","garethFactory","sharedData","sagremorParams","angharadConfig",function(e,t,a,n,r,o,i,s,l,c,d,m,u,p,v,h,g){function f(){l("angharad_loading_title").then(function(e){})}function b(e){c.clear(x.loaderToast),e?c.pop({type:"success",title:l.instant("angharad_loading_title"),body:l.instant("init_message_loading_complete")}):c.pop({type:"error",title:l.instant("angharad_loading_title"),body:l.instant("init_message_loading_error")})}function y(){c.clear(x.loaderToast),x.loaderToast=c.pop({type:"wait",title:l.instant("angharad_loading_title"),body:l.instant("init_message_loading"),timeout:0,showCloseButton:!1})}function C(){y(),M(),x.refreshTimeout=k(),h.adminMode=!1,h.loggedIn=!0,x.isInit=!0}function w(){y(),m.getDeviceList().then(function(e){_.forEach(v.all("benoicDevices"),function(e){e.enabled=!1,e.connected=!1}),_.forEach(e,function(e){v.add("benoicDevices",e.name,e)});var a=(v.all("benoicDevices"),{});_.forEach(v.all("benoicDevices"),function(e,t){e.connected&&(a[t]=m.getDeviceOverview(t).then(function(e){var a=v.get("benoicDevices",t);a&&(a.element=e)},function(){c.pop("error",l.instant("refresh"),l.instant("refresh_device_error",{name:t}))}))}),o.all(a).then(function(e){})["finally"](function(){t.$broadcast("refreshDevices")})},function(){c.pop("error",l.instant("refresh"),l.instant("refresh_device_error"))})["finally"](function(){var a={scripts:d.getScriptList(),schedulers:d.getSchedulerList(),triggers:d.getTriggerList(),profiles:d.getProfileList()};o.all(a).then(function(a){v.removeAll("angharadScripts"),v.removeAll("angharadSchedulers"),v.removeAll("angharadTriggers");for(sc in a.scripts)v.add("angharadScripts",a.scripts[sc].name,a.scripts[sc]);t.$broadcast("refreshAngharadScripts");for(sh in a.schedulers)v.add("angharadSchedulers",a.schedulers[sh].name,a.schedulers[sh]);for(tr in a.triggers)v.add("angharadTriggers",a.triggers[tr].name,a.triggers[tr]);t.$broadcast("refreshAngharadEvents"),h.profiles=a.profiles,e.$broadcast("angharadProfileChanged")},function(e){c.pop("error",l.instant("refresh"),l.instant("refresh_scripts_events_error"))})["finally"](function(){u.getServiceList().then(function(t){v.removeAll("carleonServices");for(key in t)_.forEach(t[key].element,function(e){e.type=t[key].name}),v.add("carleonServices",t[key].name,t[key]);e.$broadcast("refreshCarleonServices")},function(e){c.pop({type:"error",title:l.instant("refresh"),body:l.instant("refresh_carleon_error")})})["finally"](function(){c.clear(x.loaderToast),e.$broadcast("refreshDashboard")})})})}function M(){return x.initAngharadSubmodules().then(function(t){var a=[x.initAngharad()];h.benoicEnabled=!1,h.carleonEnabled=!1,h.garethEnabled=!1;for(key in t)v.add("submodules",t[key].name,t[key]),"benoic"===t[key].name&&t[key].enabled?(h.benoicEnabled=!0,a.push(x.initBenoic())):"carleon"===t[key].name&&t[key].enabled?(h.carleonEnabled=!0,a.push(x.initCarleon())):"gareth"===t[key].name&&t[key].enabled&&(h.garethEnabled=!0,a.push(x.initGareth()));o.all(a).then(function(){e.$broadcast("submodulesChanged")},function(){c.pop({type:"error",title:l.instant("angharad_loading_title"),body:l.instant("init_message_loading_error")})})["finally"](function(){x.initComplete=!0,e.$broadcast("initComplete")})},function(e){c.pop({type:"error",title:l.instant("angharad_loading_title"),body:l.instant("init_message_loading_error")})})}function k(){return a(function(){x.hasFocus?(w(),x.shouldRefresh=!1):x.shouldRefresh=!0},3e5)}var x=this;this.loaderToast,this.initComplete=!1,this.benoicInitError=!1,this.shoudRefresh=!1,this.hasFocus=!0,this.refreshTimeout=null,this.isInit=!1,n.onblur=function(){x.hasFocus=!1},n.onfocus=function(){x.hasFocus=!0,x.shouldRefresh&&(w(),x.shouldRefresh=!1)},this.initAngharadSubmodules=function(){return d.getSumboduleList()},this.initBenoic=function(){var a={deviceTypesResult:m.getDeviceTypes(),deviceResult:m.getDeviceList()};return o.all(a).then(function(a){var n=a.deviceTypesResult,r=a.deviceResult;_.forEach(n,function(e){v.add("benoicDeviceTypes",e.name,e)}),e.$broadcast("benoicDeviceTypesChanged");var i=[];v.removeAll("benoicDevices"),_.forEach(r,function(e){e.connected&&i.push(m.getDeviceOverview(e.name).then(function(t){e.element=t},function(){e.element={},c.pop("error",l.instant("benoic_loading_title"),l.instant("benoic_loading_error",{name:e.name}))})),v.add("benoicDevices",e.name,e)}),o.all(i).then(function(e){})["finally"](function(){t.$broadcast("benoicDevicesChanged")})},function(e){c.pop("error",l.instant("benoic_loading_title"),l.instant("benoic_loading_error"))})},this.initCarleon=function(){return v.removeAll("carleonServices"),u.getServiceList().then(function(e){for(key in e)_.forEach(e[key].element,function(t){t.type=e[key].name}),v.add("carleonServices",e[key].name,e[key])},function(e){c.pop({type:"error",title:l.instant("carleon_loading_title"),body:l.instant("carleon_loading_error")})})["finally"](function(){t.$broadcast("carleonServicesChanged")})},this.initGareth=function(){v.removeAll("garethFilters"),v.removeAll("garethAlertsSmtp"),v.removeAll("garethAlertsHttp");var t={filters:p.getFilterList(),alerts:p.getAlertList()};return o.all(t).then(function(t){for(key in t.filters)v.add("garethFilters",t.filters[key].name,t.filters[key]);for(key in t.alerts.smtp)v.add("garethAlertsSmtp",t.alerts.smtp[key].name,t.alerts.smtp[key]);for(key in t.alerts.http)v.add("garethAlertsHttp",t.alerts.http[key].name,t.alerts.http[key]);e.$broadcast("garethChange")},function(e){c.pop({type:"error",title:l.instant("gareth_loading_title"),body:l.instant("gareth_loading_error")})})},this.setDefaultProfile=function(){if(h.currentProfile=!1,_.forEach(h.profiles,function(e){if(e["default"]){h.currentProfile=e;var t=new n.Date;t=new n.Date(t.getFullYear()+10,t.getMonth(),t.getDate()),s.put("ANGHARAD_PROFILE",e.name,{expires:t})}}),!h.currentProfile){var t={name:l.instant("profile_default"),"default":!0,data:{}};h.profiles=[t],h.currentProfile=t,d.setProfile(l.instant("profile_default"),t).then(function(){c.pop("success",l.instant("profile_save"),l.instant("profile_save_success"))},function(e){c.pop("error",l.instant("profile_save"),l.instant("profile_save_error"))});var a=new n.Date;a=new n.Date(a.getFullYear()+10,a.getMonth(),a.getDate()),s.put("ANGHARAD_PROFILE",l.instant("profile_default"),{expires:a}),e.$broadcast("angharadProfileChanged")}},this.initAngharad=function(){var t={scripts:d.getScriptList(),schedulers:d.getSchedulerList(),triggers:d.getTriggerList(),profiles:d.getProfileList()};return o.all(t).then(function(t){for(sc in t.scripts)v.add("angharadScripts",t.scripts[sc].name,t.scripts[sc]);e.$broadcast("angharadScriptsChanged");for(sh in t.schedulers)v.add("angharadSchedulers",t.schedulers[sh].name,t.schedulers[sh]);e.$broadcast("angharadSchedulersChanged");for(tr in t.triggers)v.add("angharadTriggers",t.triggers[tr].name,t.triggers[tr]);if(e.$broadcast("angharadTriggersChanged"),0===t.profiles.length)x.setDefaultProfile(),e.$broadcast("angharadProfileChanged");else{h.profiles=t.profiles;var a=s.get("ANGHARAD_PROFILE");h.currentProfile=!1,a?(_.forEach(t.profiles,function(t){t.name===a&&(h.currentProfile=t,e.$broadcast("angharadProfileChanged"))}),h.currentProfile||x.setDefaultProfile()):x.setDefaultProfile()}},function(e){c.pop("error",l.instant("angharad_loading_title"),l.instant("angharad_loading_error"))})},this.closeSagremor=function(){h.token=null,h.loggedIn=!1,e.isLogged=!1,h.profiles=[],h.currentProfile=null,x.isInit=!1,t.$broadcast("closeBenoic"),t.$broadcast("closeCarleon"),t.$broadcast("closeGareth"),t.$broadcast("angharadProfileUpdated"),t.$broadcast("refreshDashboard"),v.add("oauthToken","token",!1)},e.$on("reinitBenoic",function(){x.initBenoic()}),e.$on("reinitCarleon",function(){x.initCarleon()}),e.$on("reinitGareth",function(){x.initGareth()}),e.$on("closeBenoic",function(){v.removeAll("benoicDevices")}),e.$on("closeCarleon",function(){v.removeAll("carleonServices"),h.profiles=[],h.currentProfile=!1}),e.$on("closeGareth",function(){v.removeAll("garethFilters"),v.removeAll("garethAlertsSmtp"),v.removeAll("garethAlertsHttp")}),e.$on("refresh",function(){w()}),e.$on("reconnect",function(){e.$broadcast("oauth:external:refresh")}),e.$on("loginSuccess",function(){C()}),e.$on("initComplete",function(){x.initComplete?b(!0):x.benoicInitError&&b(!1)}),e.$on("oauth:login",function(e,t){v.add("oauthToken","token",t),r.defaults.headers.common.Authorization="Bearer "+t.access_token,C()}),e.$on("oauth:refresh",function(e,t){r.defaults.headers.common.Authorization="Bearer "+t.access_token,v.add("oauthToken","token",t),x.isInit||C()}),e.$on("oauth:loggedOut",function(e,t){x.closeSagremor()}),e.$on("oauth:denied",function(e,t){c.pop("error",l.instant("angharad_loading_title"),l.instant("access_denied")),x.closeSagremor()}),e.$on("oauth:expired",function(t,a){e.$broadcast("reconnect")}),e.$on("oauth:invalid",function(e,t){x.closeSagremor()}),f()}]),angular.module("sagremorApp").factory("sagremorService",["$uibModal","$translate","toaster","sharedData","sagremorParams","sagremorConfirm","angharadFactory","benoicFactory","carleonFactory",function(e,t,a,n,r,o,i,s,l){var c={};return c.monitor=function(t){e.open({animation:!0,templateUrl:"components/modals/monitor.modal.html",controller:"MonitorModalCtrl",controllerAs:"MonitorModalCtrl",size:"md",resolve:{element:function(){return t}}})},c.imagePopup=function(t,a){e.open({animation:!0,templateUrl:"components/modals/image.modal.html",controller:"ImageModalCtrl",controllerAs:"ImageModalCtrl",size:"lg",resolve:{title:function(){return t},src:function(){return a}}})},c.addToDashboard=function(e){var n="SGMR$D$0$0",o=r.currentProfile;if(o.addTo||(o.addTo={}),o.addTo.D||(o.addTo.D=[]),e.device){var s={device:e.device,type:e.type,name:e.name,tag:n};o.addTo.D.push(s)}else{var s={type:e.type,name:e.name,tag:n};o.addTo.D.push(s)}return i.setProfile(o.name,o).then(function(){a.pop({type:"success",title:t.instant("angharad_add_to_dashboard"),body:t.instant("angharad_add_to_dashboard_success")})},function(){a.pop({type:"error",title:t.instant("angharad_add_to_dashboard"),body:t.instant("angharad_add_to_dashboard_error")})})},c.bindToElement=function(t){return modalInstance=e.open({animation:!0,templateUrl:"components/modals/scriptBindElement.modal.html",controller:"ScriptBindElementModalCtrl",controllerAs:"ScriptBindElementModalCtrl",size:"md",resolve:{script:function(){return t}}})},c.removeFromDashboard=function(e){var t=r.dashboardWidgets;return void 0!==t&&_.remove(t,function(t){return t.type===e.type&&t.element.device===e.device&&t.element.name===e.name}),r.dashboardWidgets=t,!0},c.editSwitcher=function(t){e.open({animation:!0,templateUrl:"components/switch/switch.modal.html",controller:"SwitchesModalCtrl",controllerAs:"SwitchesModalCtrl",size:"sm",resolve:{switcher:function(){return t}}})},c.editSensor=function(t){e.open({animation:!0,templateUrl:"components/sensor/sensor.modal.html",controller:"SensorsModalCtrl",controllerAs:"SensorsModalCtrl",size:"sm",resolve:{sensor:function(){return t}}})},c.editHeater=function(t){e.open({animation:!0,templateUrl:"components/heater/heater.modal.html",controller:"HeatersModalCtrl",controllerAs:"HeatersModalCtrl",size:"sm",resolve:{heater:function(){return t}}})},c.editDimmer=function(t){e.open({animation:!0,templateUrl:"components/dimmer/dimmer.modal.html",controller:"DimmersModalCtrl",controllerAs:"DimmersModalCtrl",size:"sm",resolve:{dimmer:function(){return t}}})},c.editScript=function(t){e.open({animation:!0,templateUrl:"components/script/script.modal.html",controller:"ScriptModalCtrl",controllerAs:"ScriptModalCtrl",size:"md",resolve:{script:function(){return t}}})},c.removeScript=function(e){return o.open(t.instant("script_remove"),t.instant("script_remove_confirm")).then(function(r){return i.removeScript(e.name).then(function(){n.remove("angharadScripts",e.name),a.pop("success",t.instant("script_remove"),t.instant("script_remove_success"))},function(e){a.pop("error",t.instant("script_remove"),t.instant("script_remove_error"))})})},c.editEvent=function(t,a){e.open({animation:!0,templateUrl:"components/event/event.modal.html",controller:"EventModalCtrl",controllerAs:"EventModalCtrl",size:"md",resolve:{event:function(){return t},eventType:function(){return a}}})},c.removeScheduler=function(e){return o.open(t.instant("scheduler_remove"),t.instant("scheduler_remove_confirm")).then(function(r){return i.removeScheduler(e.name).then(function(){n.remove("angharadSchedulers",e.name),a.pop("success",t.instant("scheduler_remove"),t.instant("scheduler_remove_success"))},function(e){a.pop("error",t.instant("scheduler_remove"),t.instant("scheduler_remove_error"))})})},c.removeTrigger=function(e){return o.open(t.instant("trigger_remove"),t.instant("trigger_remove_confirm")).then(function(r){return i.removeTrigger(e.name).then(function(){n.remove("angharadTriggers",e.name),a.pop("success",t.instant("trigger_remove"),t.instant("trigger_remove_success"))},function(e){a.pop("error",t.instant("trigger_remove"),t.instant("trigger_remove_error"))})})},c.getBenoicElement=function(e,t,a){var r=n.get("benoicDevices",e);if(r&&r.element)switch(t){case"switch":if(r.element.switches&&r.element.switches[a])return r.element.switches[a];break;case"dimmer":if(r.element.dimmers&&r.element.dimmers[a])return r.element.dimmers[a];break;case"heater":if(r.element.heaters&&r.element.heaters[a])return r.element.heaters[a];break;case"sensor":if(r.element.sensors&&r.element.sensors[a])return r.element.sensors[a]}return!1},c.getCarleonElement=function(e,t){if(e&&t){var a=n.get("carleonServices",e),r=_.find(a.element,function(e){return e.name===t});return r||!1}return!1},c.removeMonitor=function(e){return _.remove(r.currentProfile.monitorList,function(t){return t.name===e.name}),i.saveCurrentProfile().then(function(){a.pop("success",t.instant("monitor_save"),t.instant("monitor_save_success"))},function(){a.pop("error",t.instant("monitor_save"),t.instant("monitor_save_error"))})},c}]),angular.module("sagremorApp").component("sagDimmer",{templateUrl:"components/dimmer/dimmer.template.html",controller:sagDimmerController,bindings:{element:"="}}).run(["sagGenericInjectorManager",function(e){e.add({type:"dimmer",directive:"sag-dimmer",carleonService:!1})}]),angular.module("sagremorApp").controller("DimmersModalCtrl",["$scope","$uibModalInstance","$translate","toaster","sagremorConstant","benoicFactory","dimmer",function(e,t,a,n,r,o,i){function s(){l.dimmer.menu=!1,_.forEach(l.monitorEveryEnum,function(e){a(e.label).then(function(t){e.trLabel=t})})}var l=this;this.dimmer=i,this.dimmer.newDisplay=this.dimmer.display,this.monitorEveryEnum=r.monitoredEveryEnum,this.cancel=function(){t.dismiss("cancel")},this.tr=function(e){return a.instant(e)},this.saveDimmer=function(){l.dimmer.display=l.dimmer.newDisplay,l.dimmer.monitor=l.dimmer.monitorChecked?1:0,o.updateElement(l.dimmer.device,"dimmer",l.dimmer.name,l.dimmer).then(function(t){e.$broadcast("benoicDimmersChanged"),n.pop("success",a.instant("dimmer_save"),a.instant("dimmer_save_success"))},function(e){n.pop("error",a.instant("dimmer_save"),a.instant("dimmer_save_error"))})["finally"](function(){t.dismiss("close")})},s()}]),angular.module("sagremorApp").controller("EventModalCtrl",["$scope","$rootScope","$uibModalInstance","$translate","toaster","sagremorConstant","sagremorService","angharadFactory","sharedData","sagGenericInjectorManager","event","eventType",function(e,t,a,n,r,o,i,s,l,c,d,m){function u(){d&&(p.add=!1,"scheduler"===p.eventType?(p.scheduler=angular.copy(d),p.scheduler.repeatSwitch=d.repeat>-1,p.scheduler.repeatEveryDayOfWeek={sunday:!1,monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1},3===d.repeat&&(p.scheduler.repeatEveryDayOfWeek={sunday:0!==(1&d.repeat_value),monday:0!==(2&d.repeat_value),tuesday:0!==(4&d.repeat_value),wednesday:0!==(8&d.repeat_value),thursday:0!==(16&d.repeat_value),friday:0!==(32&d.repeat_value),saturday:0!==(64&d.repeat_value)}),p.myDate=new Date(1e3*d.next_time)):"trigger"===p.eventType&&(p.trigger.submodule=d.submodule,p.trigger.source=d.source,p.trigger.element=d.element),p.scriptList=d.scripts,p.conditionList=d.conditions),_.forEach(l.all("benoicDevices"),function(e){e.enabled&&e.connected&&(_.forEach(e.element.switches,function(t,a){t.options.trigger&&p.globalTriggerElementList.push({submodule:"benoic",source:e.name,element:a,display:t.display});var n={device:e.name,type:"switch",name:a,display:t.display,value:!0};p.benoicElements.switches.push(n)}),_.forEach(e.element.dimmers,function(t,a){t.options.trigger&&p.globalTriggerElementList.push({submodule:"benoic",source:e.name,element:a,display:t.display});var n={device:e.name,type:"dimmer",name:a,display:t.display,value:0};p.benoicElements.dimmers.push(n)}),_.forEach(e.element.heaters,function(t,a){t.options.trigger&&p.globalTriggerElementList.push({submodule:"benoic",source:e.name,element:a,display:t.display});var n={device:e.name,type:"heater",name:a,display:t.display,value:20,options:t.options,availableModes:t.value.availableModes};p.benoicElements.heaters.push(n)}),_.forEach(e.element.sensors,function(t,a){t.options.trigger&&p.globalTriggerElementList.push({submodule:"benoic",source:e.name,element:a,display:t.display});var n={device:e.name,type:"sensor",name:a,display:t.display,value:0,options:t.options};p.benoicElements.sensors.push(n)}))}),_.forEach(l.all("carleonServices"),function(e,t){var a=_.find(c.components,function(a){return a.type===t&&e.enabled});_.forEach(e.element,function(t){t.options&&t.options.trigger&&p.globalTriggerElementList.push({submodule:"carleon",source:e.name,element:t.name,display:t.name})}),a&&_.forEach(a.commands,function(a,r){var o={label:a.title,name:t+"$"+r,submodule:"carleon"};p.globalElementList.push(o),p.carleonConditionElementsList[t+"$"+r]=e.element,e.commands[r]&&(p.carleonConditionCommandsParameters[t+"$"+r]=[],_.forEach(e.commands[r].parameters,function(e,o){var i={name:o,title:a.parameters[o]?n.instant(a.parameters[o]):o,type:e.type,required:e.required};p.carleonConditionCommandsParameters[t+"$"+r].push(i)}),p.carleonConditionResultParameters[t+"$"+r]=[],_.forEach(e.commands[r].result,function(e,o){if("type"===o){var i={title:n.instant("condition_result_one_value"),type:e};p.carleonConditionResultParameters[t+"$"+r].push(i)}else{var i={name:o,title:n.instant(a.result[o].title),type:e.type};p.carleonConditionResultParameters[t+"$"+r].push(i)}}))})}),_.forEach(l.all("carleonServices"),function(e,t){var a=_.find(c.components,function(a){return a.type===t&&e.enabled});a&&_.forEach(a.results,function(a,n){if(a.type&&a.title){var r={label:a.title,name:t+"$"+n,submodule:"carleon",type:a.type};p.globalElementList.push(r),p.carleonConditionElementsList[t+"$"+n]=e.element}else _.forEach(a,function(a,n){var r={label:a.title,name:t+"$"+n,submodule:"carleon",type:a.type,field:n};p.globalElementList.push(r),p.carleonConditionElementsList[t+"$"+n]=e.element})})})}var p=this;this.add=!0,this.error={nameInvalid:!0,message:""},this.globalScriptList=angular.copy(l.all("angharadScripts")),this.globalElementList=angular.copy(o.conditionList),this.globalTriggerElementList=[],this.schedulerRepeatEveryEnum=o.schedulerRepeatEveryEnum,this.event=d||{name:"",description:"",enabled:!0},this.scheduler={repeatSwitch:!1,repeat:-1,repeat_value:0,remove_after:!1,repeatEveryDayOfWeek:{sunday:!1,monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1}},this.trigger={submodule:!1,source:!1,element:!1},this.scriptList=[],this.conditionList=[],this.myDate=new Date,this.benoicElements={switches:[],dimmers:[],heaters:[],sensors:[]},this.carleonConditionElementsList={},this.carleonConditionResultParameters={},this.carleonConditionCommandsParameters={},this.scriptActionElements=[],this.tmpElement=!1,this.tmpResult=!1,this.newCondition={condition:"==",value:0,parameters:{}},this.eventType=m,this.newTrigger={},this.newTriggerTag={},this.datePickerOptions={buttonBar:{show:!0,now:{show:!1,text:n.instant("date_picker_now")},today:{show:!0,text:n.instant("date_picker_today")},clear:{show:!1,text:n.instant("date_picker_clear")},date:{show:!0,text:n.instant("date_picker_date")},time:{show:!0,text:n.instant("date_picker_time")},close:{show:!0,text:n.instant("date_picker_close")}}},this.openCalendar=function(e){e.preventDefault(),e.stopPropagation(),p.isOpen=!0},this.trackBenoicElement=function(e,t){return e&&t?e.device+"$"+t+"$"+e.name:"err$err$err"},this.trackCarleonElement=function(e,t){return e&&t?t+"$"+e.name:"err$err$err"},this.trackTriggerElement=function(e){return e.submodule+"$"+e.source+"$"+e.element},this.tr=function(e){return n.instant(e)},this.isConditionValid=function(){if(p.newConditionType&&"benoic"===p.newConditionType.submodule)switch(p.newConditionType.name){case"switch":case"dimmer":case"sensor":return!!p.tmpElement;case"heater":return!!p.tmpElement&&!(!p.newCondition.condition||!p.newCondition.commandMode&&!p.newCondition.commandHeat)}else if(p.newConditionType&&"carleon"===p.newConditionType.submodule){if(!p.newCondition.condition||!p.newCondition.value&&0!==p.newCondition.value||!p.tmpElement)return!1;var e=!0;return _.forEach(p.carleonConditionCommandsParameters[p.newConditionType.name],function(t){t.required&&!p.newCondition.parameters[t.name]&&0!==p.newCondition.parameters[t.name]&&(e=!1)}),e}return!0},this.heaterModeDisplay=function(e){return n.instant("heater_mode_"+e)},this.setConditionBenoicElement=function(){p.newCondition.submodule="benoic",p.newCondition.element=p.tmpElement.name,p.newCondition.parameters.device=p.tmpElement.device,p.newCondition.parameters.element_type=p.tmpElement.type},this.addCondition=function(){if("benoic"===p.newConditionType.submodule&&p.newCondition.commandMode&&(p.newCondition.field="mode",p.newCondition.value=p.newCondition.commandMode),"benoic"===p.newConditionType.submodule&&p.newCondition.commandHeat&&(p.newCondition.field="command",p.newCondition.value=p.newCondition.commandHeat),"carleon"===p.newConditionType.submodule){var e=p.newConditionType.name.split("$");p.newCondition.field=p.newConditionType.field,p.newCondition.submodule="carleon",p.newCondition.element=p.tmpElement.name,p.newCondition.parameters.service=p.tmpElement.type,p.newCondition.service=e[0],p.newCondition.command=e[1],p.tmpResult.name&&(p.newCondition.field=p.tmpResult.name)}p.conditionList.push(p.newCondition),p.newCondition={condition:"==",value:0,parameters:{}}},this.removeCondition=function(e){p.conditionList.splice(e,1)},this.displayCondition=function(e){if(e&&"benoic"===e.submodule)switch(e.parameters.element_type){case"switch":var t=_.find(p.benoicElements.switches,function(t){return e.parameters.device===t.device&&e.element===t.name});return t?n.instant("switch_title")+" "+t.display+" "+(e.value?n.instant("condition_switch_on"):n.instant("condition_switch_off")):n.instant("switch_title")+" "+n.instant("not_found");case"dimmer":var a=_.find(p.benoicElements.dimmers,function(t){return e.parameters.device===t.device&&e.element===t.name});return a?n.instant("dimmer_title")+" "+a.display+" "+e.condition+" "+e.value:n.instant("dimmer_title")+" "+n.instant("not_found");case"heater":var r=_.find(p.benoicElements.heaters,function(t){return e.parameters.device===t.device&&e.element===t.name});if(!r)return n.instant("not_found");if("command"===e.field)return n.instant("heater_title")+" "+r.display+" "+e.condition+" "+e.value;if("mode"===e.field)return n.instant("heater_title")+" "+r.display+" "+e.condition+" "+n.instant("heater_mode_"+e.value);break;case"sensor":var o=_.find(p.benoicElements.sensors,function(t){return e.parameters.device===t.device&&e.element===t.name});return o?n.instant("sensor_title")+" "+o.display+" "+e.condition+" "+e.value:n.instant("sensor_title")+" "+n.instant("not_found")}else if(e&&"carleon"===e.submodule){var i=_.find(p.globalElementList,function(t){return t.name===e.service+"$"+e.command}),s=n.instant("condition_result_one_value");if(e.field){var l=_.find(p.carleonConditionResultParameters[i.name],function(t){return t.name===e.field});s=l?l.title:n.instant("condition_result_one_value")}return i?n.instant(i.label)+" "+s+" "+e.condition+" "+e.value:n.instant("not_found")}},this.addScript=function(e){p.scriptList.push({name:e.name,enabled:!0}),delete p.globalScriptList[e.name]},this.removeScript=function(e){var t=p.scriptList[e];p.globalScriptList[t.name]=angular.copy(l.get("angharadScripts",t.name)),p.scriptList.splice(e,1)},this.isEventValid=function(){if(!p.event.name)return p.error.message=n.instant("event_name_mandatory"),!1;if(p.add)if("scheduler"===p.eventType){if(l.get("angharadSchedulers",p.event.name))return p.error.message=n.instant("event_name_already_exist"),!1}else if("trigger"===p.eventType&&l.get("angharadTriggers",p.event.name))return p.error.message=n.instant("event_name_already_exist"),!1;if(p.error.nameInvalid=!1,!p.eventType)return p.error.message=n.instant("event_type_mandatory"),!1;if("scheduler"===p.eventType){if(!p.myDate)return p.error.message=n.instant("event_scheduler_date_mandatory"),!1;if(p.myDate<new Date&&!p.event.repeat)return p.error.message=n.instant("event_scheduler_date_future"),!1}else if(!("trigger"!==p.eventType||p.trigger.submodule&&p.trigger.source&&p.trigger.element))return p.error.message=n.instant("event_trigger_no_element"),!1;return 0===p.scriptList.length?(p.error.message=n.instant("event_script_mandatory"),!1):(p.error.message="",!0)},this.save=function(){"scheduler"===p.eventType?(p.scheduler.name=p.event.name,p.scheduler.description=p.event.description,p.scheduler.enabled=p.event.enabled,p.scheduler.next_time=Math.round(p.myDate.getTime()/1e3),3===p.scheduler.repeat&&(p.scheduler.repeat_value=0,p.scheduler.repeatEveryDayOfWeek.sunday&&(p.scheduler.repeat_value+=1),p.scheduler.repeatEveryDayOfWeek.monday&&(p.scheduler.repeat_value+=2),p.scheduler.repeatEveryDayOfWeek.tuesday&&(p.scheduler.repeat_value+=4),p.scheduler.repeatEveryDayOfWeek.wednesday&&(p.scheduler.repeat_value+=8),p.scheduler.repeatEveryDayOfWeek.thursday&&(p.scheduler.repeat_value+=16),p.scheduler.repeatEveryDayOfWeek.friday&&(p.scheduler.repeat_value+=32),p.scheduler.repeatEveryDayOfWeek.saturday&&(p.scheduler.repeat_value+=64)),p.scheduler.scripts=p.scriptList,p.scheduler.conditions=p.conditionList,p.add?s.addScheduler(p.scheduler).then(function(){r.pop("success",n.instant("scheduler_save"),n.instant("scheduler_save_success")),l.add("angharadSchedulers",p.scheduler.name,p.scheduler),t.$broadcast("angharadSchedulersChanged")},function(){r.pop("error",n.instant("scheduler_save"),n.instant("scheduler_save_error"))})["finally"](function(){a.dismiss("close")}):s.setScheduler(p.scheduler.name,p.scheduler).then(function(){r.pop("success",n.instant("scheduler_save"),n.instant("scheduler_save_success")),l.add("angharadSchedulers",p.scheduler.name,p.scheduler),t.$broadcast("angharadSchedulersChanged")},function(){r.pop("error",n.instant("scheduler_save"),n.instant("scheduler_save_error"))})["finally"](function(){a.dismiss("close")})):"trigger"===p.eventType&&(p.trigger.name=p.event.name,p.trigger.description=p.event.description,p.trigger.enabled=p.event.enabled,p.trigger.scripts=p.scriptList,p.trigger.conditions=p.conditionList,p.add?s.addTrigger(p.trigger).then(function(){r.pop("success",n.instant("trigger_save"),n.instant("trigger_save_success")),l.add("angharadTriggers",p.trigger.name,p.trigger),t.$broadcast("angharadTriggersChanged")},function(){r.pop("error",n.instant("trigger_save"),n.instant("trigger_save_error"))})["finally"](function(){a.dismiss("close")}):s.setTrigger(p.trigger.name,p.trigger).then(function(){r.pop("success",n.instant("trigger_save"),n.instant("trigger_save_success")),l.add("angharadTriggers",p.trigger.name,p.trigger),t.$broadcast("angharadTriggersChanged")},function(){r.pop("error",n.instant("trigger_save"),n.instant("trigger_save_error"))})["finally"](function(){a.dismiss("close")}))},this.cancel=function(){a.dismiss("cancel")},u()}]),angular.module("sagremorApp").component("sagScheduler",{templateUrl:"components/event/scheduler.template.html",controller:sagSchedulerController,bindings:{element:"="}}).run(["sagGenericInjectorManager",function(e){e.add({type:"scheduler",directive:"sag-scheduler",carleonService:!1})}]).filter,angular.module("sagremorApp").component("sagTrigger",{templateUrl:"components/event/trigger.template.html",controller:sagTriggerController,bindings:{element:"="}}).run(["sagGenericInjectorManager",function(e){e.add({type:"trigger",directive:"sag-trigger",carleonService:!1})}]).filter,angular.module("sagremorApp").controller("GridstackController",["$scope",function(e){var t=null;this.init=function(e,a){
return t=e.gridstack(a).data("gridstack")},this.removeItem=function(e){return t?t.removeWidget(e,!1):null},this.addItem=function(e){return t?(t.makeWidget(e),e):null}}]),angular.module("sagremorApp").directive("gridstack",["$timeout",function(e){return{restrict:"A",controller:"GridstackController",scope:{onChange:"&",onDragStart:"&",onDragStop:"&",onResizeStart:"&",onResizeStop:"&",options:"="},link:function(t,a,n,r,o){r.init(a,t.options),a.on("change",function(a,n){e(function(){t.$apply(),t.onChange({event:a,items:n})})}),a.on("dragstart",function(e,a){t.onDragStart({event:e,ui:a})}),a.on("dragstop",function(a,n){e(function(){t.$apply(),t.onDragStop({event:a,ui:n})})})}}}]).directive("gridstackItem",["$timeout",function(e){return{restrict:"A",controller:"GridstackController",require:"^gridstack",scope:{gridstackItem:"=",onItemAdded:"&",onItemRemoved:"&",gsItemX:"=",gsItemY:"=",gsItemWidth:"=",gsItemHeight:"=",gsItemAutopos:"="},link:function(t,a,n,r){$(a).attr("data-gs-x",t.gsItemX),$(a).attr("data-gs-y",t.gsItemY),$(a).attr("data-gs-width",t.gsItemWidth),$(a).attr("data-gs-height",t.gsItemHeight),$(a).attr("data-gs-auto-position",t.gsItemAutopos);var o=(r.addItem(a),a.data("_gridstack_node"));e(function(){t.onItemAdded({item:o})}),t.$watch(function(){return $(a).attr("data-gs-x")},function(e){t.gsItemX=e}),t.$watch(function(){return $(a).attr("data-gs-y")},function(e){t.gsItemY=e}),t.$watch(function(){return $(a).attr("data-gs-width")},function(e){t.gsItemWidth=e}),t.$watch(function(){return $(a).attr("data-gs-height")},function(e){t.gsItemHeight=e}),a.bind("$destroy",function(){var e=a.data("_gridstack_node");t.onItemRemoved({item:e}),r.removeItem(a)})}}}]),angular.module("sagremorApp").component("sagHeater",{templateUrl:"components/heater/heater.template.html",controller:sagHeaterController,bindings:{element:"="}}).run(["sagGenericInjectorManager",function(e){e.add({type:"heater",directive:"sag-heater",carleonService:!1})}]),angular.module("sagremorApp").controller("HeatersModalCtrl",["$scope","$uibModalInstance","$translate","toaster","sagremorConstant","benoicFactory","heater",function(e,t,a,n,r,o,i){function s(){l.heater.menu=!1,_.forEach(l.monitorEveryEnum,function(e){a(e.label).then(function(t){e.trLabel=t})})}var l=this;this.heater=i,this.heater.newDisplay=this.heater.display,this.monitorEveryEnum=r.monitoredEveryEnum,this.cancel=function(){t.dismiss("cancel")},this.tr=function(e){return a.instant(e)},this.saveHeater=function(){l.heater.display=l.heater.newDisplay,l.heater.monitor=l.heater.monitorChecked?1:0,o.updateElement(l.heater.device,"heater",l.heater.name,l.heater).then(function(t){e.$broadcast("benoicHeatersChanged"),n.pop("success",a.instant("heater_save"),a.instant("heater_save_success"))},function(e){n.pop("error",a.instant("heater_save"),a.instant("heater_save_error"))})["finally"](function(){t.dismiss("close")})},s()}]),angular.module("sagremorApp").controller("ConfirmModalCtrl",["$uibModalInstance","title","message",function(e,t,a){this.title=t,this.message=a,this.cancel=function(){e.dismiss("cancel")},this.ok=function(){e.close("ok")}}]),angular.module("sagremorApp").controller("EditModalCtrl",["$uibModalInstance","title","message","placeholder",function(e,t,a,n){var r=this;this.title=t,this.message=a,this.placeholder=n,this.value="",this.cancel=function(){e.dismiss("cancel")},this.ok=function(){e.close({reason:"close",value:r.value})}}]),angular.module("sagremorApp").controller("ImageModalCtrl",["$scope","$uibModalInstance","$translate","title","src",function(e,t,a,n,r){function o(){}var i=this;this.title=n,this.src=r,this.close=function(){t.dismiss("close")},this.displayTitle=function(){return a.instant("image_title")+i.title},o()}]),angular.module("sagremorApp").controller("MonitorModalCtrl",["$scope","$uibModalInstance","$translate","toaster","benoicFactory","sagremorConstant","element",function(e,t,a,n,r,o,i){function s(){l.getMonitor()}var l=this;this.element=i,this.data=[],this.durationList=o.durationList,this.duration={value:4},this.options={chart:{type:"lineChart",interpolate:"basis",x:function(e){return e.timestamp},y:function(e){return e.value},showValues:!0,valueFormat:function(e){return d3.format(",.2f")(e)},transitionDuration:500,xScale:d3.time.scale(),xAxis:{axisLabel:a.instant("monitor_date_axis")},yAxis:{axisLabel:i.options.unit,axisLabelDistance:30}}},this.getMonitor=function(){var e=new Date;switch(l.duration.value){case 0:e.setTime(e.getTime()-36e5);break;case 1:e.setTime(e.getTime()-72e5);break;case 2:e.setTime(e.getTime()-216e5);break;case 3:e.setTime(e.getTime()-432e5);break;case 4:e.setTime(e.getTime()-864e5);break;case 5:e.setTime(e.getTime()-1728e5);break;case 6:e.setTime(e.getTime()-2592e5);break;case 7:e.setTime(e.getTime()-6048e5);break;case 8:e.setMonth(e.getMonth()-1)}r.getMonitor(i.device,i.type,i.name,Math.round(e.getTime()/1e3)).then(function(e){l.data=[];var t={key:i.display,values:[]};e&&e.length>0&&(_.forEach(e,function(e){var a=new Date(1e3*e.timestamp),n={timestamp:a,value:parseFloat(e.value)};t.values.push(n)}),l.data.push(t))})},this.tr=function(e){return a.instant(e)},this.close=function(){t.dismiss("close")},this.displayTitle=function(){return a.instant("monitor_title")+i.display},s()}]),angular.module("sagremorApp").controller("ScriptBindElementModalCtrl",["$scope","$uibModalInstance","$translate","toaster","DTOptionsBuilder","sharedData","sagGenericInjectorManager","angharadFactory","script",function(e,t,a,n,r,o,i,s,l){function c(){d.script.options.tags||(d.script.options.tags=[]),a.use()&&(d.options=r.newOptions().withLanguageSource("components/core/i18n/datatables."+a.use()+".json").withOption("order",[]).withOption("scrollY","200px").withOption("paging",!1)),_.forEach(o.all("benoicDevices"),function(e){e.enabled&&e.connected&&(_.forEach(e.element.switches,function(t,n){var r=!!_.find(d.script.options.tags,function(t){return t==="SGMR$SCR$B$"+e.name+"$switch$"+n}),o={submodule:"benoic",device:e.name,type:"switch",typeTitle:a.instant("switch_title"),name:n,display:t.display,selected:r};d.elementList.push(o),d.tmpCheck.push(r)}),_.forEach(e.element.dimmers,function(t,n){var r=!!_.find(d.script.options.tags,function(t){return t==="SGMR$SCR$B$"+e.name+"$dimmer$"+n}),o={submodule:"benoic",device:e.name,type:"dimmer",typeTitle:a.instant("dimmer_title"),name:n,display:t.display,selected:r};d.elementList.push(o),d.tmpCheck.push(r)}),_.forEach(e.element.heaters,function(t,n){var r=!!_.find(d.script.options.tags,function(t){return t==="SGMR$SCR$B$"+e.name+"$heater$"+n}),o={submodule:"benoic",device:e.name,type:"heater",typeTitle:a.instant("heater_title"),name:n,display:t.display,selected:r};d.elementList.push(o),d.tmpCheck.push(r)}),_.forEach(e.element.sensors,function(t,n){var r=!!_.find(d.script.options.tags,function(t){return t==="SGMR$SCR$B$"+e.name+"$sensor$"+n}),o={submodule:"benoic",device:e.name,type:"sensor",typeTitle:a.instant("sensor_title"),name:n,display:t.display,selected:r};d.elementList.push(o),d.tmpCheck.push(r)}))}),_.forEach(o.all("angharadSchedulers"),function(e){var t=!!_.find(d.script.options.tags,function(t){return t==="SGMR$SCR$A$scheduler$"+e.name}),n={submodule:"angharad",type:"scheduler",typeTitle:a.instant("scheduler_title"),name:e.name,display:e.name,selected:t};d.elementList.push(n),d.tmpCheck.push(t)}),_.forEach(o.all("carleonServices"),function(e,t){var n=_.find(i.components,function(a){return a.type===t&&e.enabled});_.forEach(e.element,function(e){var r=!!_.find(d.script.options.tags,function(a){return a==="SGMR$SCR$C$"+t+"$"+e.name}),o={submodule:"carleon",type:t,typeTitle:a.instant(n.groupTitle),name:e.name,display:e.name,selected:r};d.elementList.push(o),d.tmpCheck.push(r)})})}var d=this;this.script=l,this.elementList=[],this.options={},this.tmpCheck=[],this.selectRow=function(e){d.elementList[e].selected=!d.elementList[e].selected,d.tmpCheck[e]=d.elementList[e].selected},this.cancel=function(){t.dismiss("cancel")},this.ok=function(){_.remove(d.script.options.tags,function(e){return e.startsWith("SGMR$SCR$")});var e=_.filter(d.elementList,function(e){return e.selected});_.forEach(e,function(e){var t="SGMR$SCR$";t+="benoic"===e.submodule?"B$"+e.device+"$"+e.type+"$"+e.name:"carleon"===e.submodule?"C$"+e.type+"$"+e.name:"A$"+e.type+"$"+e.name,d.script.options.tags.push(t)}),s.setScript(d.script.name,d.script).then(function(){o.add("angharadScripts",d.script.name,d.script),n.pop("success",a.instant("script_save"),a.instant("script_save_success"))},function(){n.pop("error",a.instant("script_save"),a.instant("script_save_error"))})["finally"](function(){t.dismiss("close")})},c()}]),angular.module("sagremorApp").component("sagMonitor",{templateUrl:"components/monitor/monitor.template.html",controller:sagMonitorController,bindings:{element:"="}}).run(["sagGenericInjectorManager",function(e){e.add({type:"monitor",directive:"sag-monitor",carleonService:!1})}]),angular.module("sagremorApp").component("sagScript",{templateUrl:"components/script/script.template.html",controller:sagScriptController,bindings:{element:"="}}).run(["sagGenericInjectorManager",function(e){e.add({type:"script",directive:"sag-script",carleonService:!1})}]),angular.module("sagremorApp").controller("ScriptModalCtrl",["$scope","$rootScope","$uibModalInstance","$translate","toaster","sagremorConstant","sagremorService","angharadFactory","sharedData","sagGenericInjectorManager","script",function(e,t,a,n,r,o,i,s,l,c,d){function m(){u.script||(u.add=!0,u.script={actions:[],options:{}}),_.forEach(l.all("benoicDevices"),function(e){e.enabled&&e.connected&&(_.forEach(e.element.switches,function(t,a){var n={device:e.name,type:"switch",name:a,display:t.display,value:!0};u.benoicElements.switches.push(n)}),_.forEach(e.element.dimmers,function(t,a){var n={device:e.name,type:"dimmer",name:a,display:t.display,value:0};u.benoicElements.dimmers.push(n)}),_.forEach(e.element.heaters,function(t,a){var n={device:e.name,type:"heater",name:a,display:t.display,value:20,availableModes:t.value.availableModes};u.benoicElements.heaters.push(n)}))}),_.forEach(l.all("carleonServices"),function(e,t){var a=_.find(c.components,function(a){return a.type===t&&e.enabled});a&&_.forEach(a.commands,function(a,r){var o={label:a.title,name:t+"$"+r,submodule:"carleon"};u.carleonConditionElementsList[t+"$"+r]=e.element,u.scriptActionElements.push(o),e.commands&&e.commands[r]&&(u.carleonConditionCommandsParameters[t+"$"+r]=[],_.forEach(e.commands[r].parameters,function(e,o){var i={name:o,title:a.parameters[o]?n.instant(a.parameters[o]):o,type:e.type,required:e.required};u.carleonConditionCommandsParameters[t+"$"+r].push(i)}))})})}var u=this;this.script=d,this.add=!1,this.newAction=!1,this.newActionType=!1,this.tmpElement={},this.scriptActionElements=angular.copy(o.scriptActionElements),this.benoicElements={switches:[],dimmers:[],heaters:[]},this.error={message:""},this.carleonConditionCommandsParameters={},this.carleonConditionElementsList={},this.setActionBenoicElement=function(){u.newAction.element=u.tmpElement.name,u.newAction.parameters.device=u.tmpElement.device,u.newAction.parameters.element_type=u.tmpElement.type},this.setActionCarleonElement=function(){u.newAction.element=u.tmpElement.name},this.trackBenoicElement=function(e,t){return e&&t?e.device+"$"+t+"$"+e.name:"err$err$err"},this.trackCarleonElement=function(e,t){return e&&t?t+"$"+e.name:"err$err$err"},this.addAction=function(){u.newAction={}},this.changeActionType=function(){switch(u.newAction={submodule:"",element:"",parameters:{}},u.newActionType.name){case"switch":u.newAction.submodule="benoic",u.newAction.command=1,u.newAction.parameters.element_type="switch";break;case"dimmer":u.newAction.submodule="benoic",u.newAction.command=0,u.newAction.parameters.element_type="dimmer";break;case"heater":u.newAction.submodule="benoic",u.newAction.command=20,u.newAction.parameters.element_type="heater",u.newAction.parameters.mode="auto";break;default:var e=u.newActionType.name.split("$");u.newAction.parameters.service=e[0],u.newAction.command=e[1],u.newAction.submodule="carleon"}},this.removeAction=function(e){u.script.actions.splice(e,1)},this.cancel=function(){a.dismiss("cancel")},this.tr=function(e){return n.instant(e)},this.heaterModeDisplay=function(e){return n.instant("heater_mode_"+e)},this.save=function(){u.add?s.addScript(u.script).then(function(){r.pop("success",n.instant("script_save"),n.instant("script_save_success")),l.add("angharadScripts",u.script.name,u.script),t.$broadcast("angharadScriptsChanged")},function(e){r.pop("error",n.instant("script_save"),n.instant("script_save_error"))})["finally"](function(){a.dismiss("close")}):s.setScript(u.script.name,u.script).then(function(){r.pop("success",n.instant("script_save"),n.instant("script_save_success")),l.add("angharadScripts",u.script.name,u.script),t.$broadcast("angharadScriptsChanged")},function(e){r.pop("error",n.instant("script_save"),n.instant("script_save_error"))})["finally"](function(){a.dismiss("close")})},this.getBenoicElementDisplay=function(e){var t=i.getBenoicElement(e.parameters.device,e.parameters.element_type,e.element);return t?t.display:n.instant("not_found")},this.getCarleonElementDisplay=function(e){var t=i.getCarleonElement(e.parameters.service,e.element);return t?t.name:n.instant("not_found")},this.getCarleonElementParameters=function(e){var t=[];return _.forEach(e.parameters,function(e,a){"service"!==a&&t.push({name:a,value:e})}),t},this.getBenoicElementValue=function(e){switch(e.parameters.element_type){case"switch":return 1===e.command?n.instant("switch_on"):n.instant("switch_off");case"dimmer":return e.command+" %";case"heater":var t=i.getBenoicElement(e.parameters.device,"heater",e.element);if(t){var a=t.options.unit||"";return e.command+" "+a+" ("+e.parameters.mode+")"}return"error"}},this.cancelAddAction=function(){u.newAction=!1},this.saveNewAction=function(){u.script.actions.push(u.newAction),u.newActionType=!1},this.isScriptValid=function(){if(!u.script.name)return!1;var e=_.find(l.all("angharadScripts"),function(e){return e.name===u.script.name});return e&&u.add?(u.error.message=n.instant("script_error_name_exist"),!1):0!==u.script.actions.length},this.isActionValid=function(){if(!u.newActionType)return!1;if(!u.newAction.element)return!1;if("carleon"===u.newActionType.submodule){if(!u.tmpElement)return!1;var e=!0;if(_.forEach(u.carleonConditionCommandsParameters[u.newActionType.name],function(t,a){t.required&&!u.newAction.parameters[t.name]&&(e=!1)}),!e)return!1}return!0},this.carleonCommand=function(e,t){var a=_.find(u.scriptActionElements,function(a){return a.name===t+"$"+e});return a?n.instant(a.label):"not found"},this.carleonParameter=function(e,t,a){if(u.carleonConditionCommandsParameters){var n=_.find(u.carleonConditionCommandsParameters[t+"$"+a],function(t){return t.name===e});return n?n.title:"not found"}},m()}]),angular.module("sagremorApp").component("sagSensor",{templateUrl:"components/sensor/sensor.template.html",controller:sagSensorController,bindings:{element:"="}}).run(["sagGenericInjectorManager",function(e){e.add({type:"sensor",directive:"sag-sensor",carleonService:!1})}]),angular.module("sagremorApp").controller("SensorsModalCtrl",["$scope","$uibModalInstance","$translate","toaster","sagremorConstant","benoicFactory","sensor",function(e,t,a,n,r,o,i){function s(){l.sensor.menu=!1,_.forEach(l.monitorEveryEnum,function(e){a(e.label).then(function(t){e.trLabel=t})})}var l=this;this.sensor=i,this.sensor.newDisplay=this.sensor.display,this.monitorEveryEnum=r.monitoredEveryEnum,this.tr=function(e){return a.instant(e)},this.cancel=function(){t.dismiss("cancel")},this.saveSensor=function(){l.sensor.display=l.sensor.newDisplay,l.sensor.monitor=l.sensor.monitorChecked?1:0,o.updateElement(l.sensor.device,"sensor",l.sensor.name,l.sensor).then(function(t){e.$broadcast("benoicSensorsChanged"),n.pop("success",a.instant("sensor_save"),a.instant("sensor_save_success"))},function(e){n.pop("error",a.instant("sensor_save"),a.instant("sensor_save_error"))})["finally"](function(){t.dismiss("close")})},s()}]),angular.module("sagremorApp").component("sagSwitch",{templateUrl:"components/switch/switch.template.html",controller:sagSwitchController,bindings:{element:"="}}).run(["sagGenericInjectorManager",function(e){e.add({type:"switch",directive:"sag-switch",carleonService:!1})}]),angular.module("sagremorApp").controller("SwitchesModalCtrl",["$scope","$uibModalInstance","$translate","toaster","sagremorConstant","benoicFactory","switcher",function(e,t,a,n,r,o,i){function s(){l.switcher.menu=!1,_.forEach(l.monitorEveryEnum,function(e){a(e.label).then(function(t){e.trLabel=t})})}var l=this;this.switcher=i,this.switcher.newDisplay=this.switcher.display,this.monitorEveryEnum=r.monitoredEveryEnum,this.cancel=function(){t.dismiss("cancel")},this.tr=function(e){return a.instant(e)},this.saveSwitcher=function(){l.switcher.display=l.switcher.newDisplay,l.switcher.monitor=l.switcher.monitorChecked?1:0,o.updateElement(l.switcher.device,"switch",l.switcher.name,l.switcher).then(function(t){e.$broadcast("benoicSwitchesChanged"),n.pop("success",a.instant("switch_save"),a.instant("switch_save_success"))},function(e){n.pop("error",a.instant("switch_save"),a.instant("switch_save_error"))})["finally"](function(){t.dismiss("close")})},s()}]),angular.module("sagremorApp").component("topLeftMenu",{templateUrl:"components/topLeftMenu/topLeftMenu.template.html",controller:topLeftMenuCtrl,controllerAs:"topLeftMenuCtrl"}),angular.module("sagremorApp").component("topRightMenu",{templateUrl:"components/topRightMenu/topRightMenu.template.html",controller:topRightMenuCtrl,controllerAs:"topRightMenuCtrl"}),angular.module("sagremorApp").run(["$templateCache",function(e){e.put("app/dashboard/dashboard.html",'<div><h1 data-translate="dashboard_title"></h1><h2 data-ng-bind="DashboardCtrl.profileName"></h2><div class="row" data-ng-if="DashboardCtrl.sagremorParams.adminMode"><button type="button" class="btn btn-primary" name="addTitleLine" id="addTitleLine" data-ng-click="DashboardCtrl.addTitleLine()" data-translate="dashboard_button_add_title_line"></button><hr></div><div class="row"><div class="col-md-12"><div data-gridstack="" class="grid-stack grid1" data-options="DashboardCtrl.options" data-on-change="DashboardCtrl.onChange(event, items)"><div data-gridstack-item="" data-ng-repeat="w in DashboardCtrl.dashboardWidgetsDisplay" class="grid-stack-item" data-gs-no-resize="true" data-gs-item-x="w.x" data-gs-item-y="w.y" data-gs-item-width="w.width" data-gs-item-height="w.height" data-gs-min-width="3" data-gs-item-autopos="0" data-sag-type="{{w.type}}" data-sag-device="{{w.device}}" data-sag-name="{{w.name}}" data-sag-profile="{{w.profile}}"><div class="grid-stack-item-content" data-ng-if="w.type !== \'separator\'"><data-sag-container data-menu="DashboardCtrl.menu" data-size="1" data-title="w.element.display || w.element.name" data-element="w" data-dashboard="true" data-type="w.type" data-sag-params="DashboardCtrl.sagremorParams" data-icon="w.icon"><div data-sag-generic-injector="" data-type="w.type" data-elt="w.element"></div></data-sag-container></div><div data-ng-if="w.type === \'separator\'"><div class="sag-container-header-menu" data-uib-dropdown=""><button class="btn btn-primary text-left" data-ng-if="DashboardCtrl.sagremorParams.adminMode" type="button" data-uib-dropdown-toggle="" data-ng-click="">#</button><ul data-uib-dropdown-menu=""><li><a href="" data-ng-click="DashboardCtrl.removeFromDashboard(w)" data-translate="remove_from_dashboard"></a></li></ul><fieldset class="grid-stack-item-content" dir="ltr"><legend data-ng-bind="w.name" class="sag-separator"></legend></fieldset></div></div></div></div></div></div><div class="row" data-ng-if="!DashboardCtrl.connected"><div class="col-md-12"><h3 data-translate="connect_message"></h3></div></div></div>'),e.put("app/events/events.html",'<div><h1 data-translate="events_title"></h1><div class="row" data-ng-if="eventsCtrl.sagremorParams.adminMode"><button type="button" class="btn btn-primary" name="addEvent" id="addEvent" data-ng-click="eventsCtrl.newEvent()" data-translate="events_button_add"></button></div><hr data-ng-if="eventsCtrl.schedulerList.length > 0"><h2 data-translate="schedulers_title" data-ng-if="eventsCtrl.schedulerList.length > 0"></h2><div class="row"><div data-ng-repeat="scheduler in eventsCtrl.schedulerList track by $index" class="col-sm-3"><data-sag-container data-menu="eventsCtrl.menuScheduler" data-size="1" data-title="scheduler.name" data-type="\'scheduler\'" data-element="scheduler" data-icon="\'calendar\'"><data-sag-scheduler data-element="scheduler"></data-sag-scheduler></data-sag-container></div></div><hr data-ng-if="eventsCtrl.triggerList.length > 0"><h2 data-translate="triggers_title" data-ng-if="eventsCtrl.triggerList.length > 0"></h2><div class="row"><div data-ng-repeat="trigger in eventsCtrl.triggerList track by $index" class="col-sm-3"><data-sag-container data-menu="eventsCtrl.menuTrigger" data-size="1" data-title="trigger.name" data-type="\'trigger\'" data-element="trigger" data-icon="\'bell\'"><data-sag-trigger data-element="trigger"></data-sag-trigger></data-sag-container></div></div></div>'),e.put("app/error/error.html",'<div><div class="container"><h1 data-translate="{{ErrorCtrl.errorMessage}}"></h1></div></div>'),e.put("app/heaters/heaters.html",'<div><h1 data-translate="heaters_title"></h1><div class="row"><div data-ng-repeat="heater in heatersCtrl.heaterList" class="col-sm-3" data-ng-if="heater.enabled || heatersCtrl.sagremorParams.adminMode"><data-sag-container data-menu="heatersCtrl.menuSensor" data-size="1" data-title="heater.display" data-type="\'heater\'" data-element="heater" data-icon="\'fire\'"><data-sag-heater data-element="heater"></data-sag-heater></data-sag-container></div></div></div>'),e.put("app/login/login.html",'<div class="col-xs-6 controls"><label data-translate="top_right_menu_login" data-ng-if="responseType !== \'password\' && show==\'logged-out\'"></label> <label data-translate="top_right_menu_logout" data-ng-if="show==\'logged-in\'"></label> <label data-translate="top_right_menu_access_denied" data-ng-if="responseType !== \'password\' && show==\'denied\'"></label></div><div class="col-xs-6 controls"><button type="button" class="btn btn-primary btn-sm" data-ng-if="responseType !== \'password\' && show==\'logged-out\' || show==\'denied\'" data-ng-click="login()"><i class="fa fa-sign-in" aria-hidden="true"></i></button> <button type="button" class="btn btn-primary btn-sm" data-ng-if="show==\'logged-in\'" data-ng-click="logout()"><i class="fa fa-sign-out" aria-hidden="true"></i></button></div><div class="col-xs-12"><div data-ng-show="responseType === \'password\' && show !== \'logged-in\'"><form><div><label>Login</label> <input type="text" data-ng-model="typedLogin" placeholder="login"></div><div><label>Password</label> <input type="password" data-ng-model="typedPassword" placeholder="password"></div><div><label>Keep connection</label> <input type="checkbox" data-ng-model="typedKeepConnection"></div><input type="submit" class="btn btn-primary btn-sm" value="Submit" data-ng-click="checkPassword()"></form></div></div>'),e.put("app/logs/filters.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal_title" data-translate="logs_filter_modal_title"></h3></div><div class="modal-body"><div class="row control-group"><div class="col-xs-4 controls" data-ng-if="!FiltersModalCtrl.displayAlert"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.newFilter()"><i class="fa fa-plus" aria-hidden="true"></i> <span data-translate="logs_filter_new_button"></span></button></div><div class="col-xs-4 controls" data-ng-if="!FiltersModalCtrl.displayAlert"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.showAlerts()"><i class="fa fa-bolt" aria-hidden="true"></i> <span data-translate="logs_alerts_delete_button"></span></button></div><div class="col-xs-4 controls" data-ng-if="FiltersModalCtrl.displayAlert"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.showFilters()"><i class="fa fa-bolt" aria-hidden="true"></i> <span data-translate="logs_filters_show_button"></span></button></div></div><div data-ng-if="FiltersModalCtrl.editFilter && !FiltersModalCtrl.displayAlert"><hr><h3 data-translate="filter_table_edit" data-ng-if="!FiltersModalCtrl.addFilter"></h3><h3 data-translate="filter_table_new" data-ng-if="FiltersModalCtrl.addFilter"></h3><table class="table table-hover"><thead><tr><th data-translate="filter_table_name"></th><th data-translate="filter_table_description"></th></tr></thead><tbody><tr><td><input type="text" class="form-control" name="filterName" id="filterName" data-ng-model="FiltersModalCtrl.customFilter.name" data-ng-disabled="!FiltersModalCtrl.addFilter"></td><td><input type="text" class="form-control" name="filterDescription" id="filterDescription" data-ng-model="FiltersModalCtrl.customFilter.description"></td></tr></tbody></table><div class="row control-group"><div class="col-xs-4 controls"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.addClause()"><i class="fa fa-plus" aria-hidden="true"></i> <span data-translate="logs_clause_new_button"></span></button></div><div class="col-xs-4 controls"><div data-uib-dropdown=""><button type="button" class="btn" data-ng-click="FiltersModalCtrl.addAlert()" data-uib-dropdown-toggle=""><i class="fa fa-plus" aria-hidden="true"></i> <span data-translate="logs_alert_new_button"></span></button><ul data-uib-dropdown-menu=""><li data-ng-repeat="menuItem in FiltersModalCtrl.menu"><a href="" data-ng-click="FiltersModalCtrl.menuSelect(menuItem, $ctrl.element)" data-ng-bind="menuItem.display"></a></li></ul></div></div></div><h3 data-translate="filter_table_clauses"></h3><table class="table table-hover"><thead><tr><th data-translate="clause_table_element"></th><th data-translate="clause_table_operator"></th><th data-translate="clause_table_value"></th><th></th><th></th></tr></thead><tbody><tr data-ng-if="FiltersModalCtrl.newClause"><td><select class="form-control" data-ng-model="FiltersModalCtrl.customClause.element"><option value="priority" data-translate="clause_option_priority"></option><option value="source" data-translate="clause_option_source"></option><option value="message" data-translate="clause_option_message"></option><option value="tag" data-translate="clause_option_tag"></option></select></td><td><select class="form-control" data-ng-model="FiltersModalCtrl.customClause.operator"><option value="=" data-translate="clause_operator_equal"></option><option value="!=" data-translate="clause_operator_different"></option><option value="<" data-translate="clause_operator_lower"></option><option value="<=" data-translate="clause_operator_lower_equal"></option><option value=">" data-translate="clause_operator_higher"></option><option value=">=" data-translate="clause_operator_higher_equal"></option><option value="contains" data-translate="clause_operator_contains"></option><option value="notcontains" data-translate="clause_operator_notcontains"></option></select></td><td><select class="form-control" data-ng-model="FiltersModalCtrl.customClause.value" data-ng-if="FiltersModalCtrl.customClause.element === \'priority\'"><option value="0" data-translate="logs_priority_none"></option><option value="1" data-translate="logs_priority_low"></option><option value="2" data-translate="logs_priority_medium"></option><option value="3" data-translate="logs_priority_high"></option><option value="4" data-translate="logs_priority_critical"></option></select><input type="text" data-ng-model="FiltersModalCtrl.customClause.value" data-ng-if="FiltersModalCtrl.customClause.element !== \'priority\'"></td><td><button type="button" class="btn" data-ng-click="FiltersModalCtrl.addNewClause()" data-ng-disabled="!FiltersModalCtrl.isClauseValid()"><i class="fa fa-check" aria-hidden="true"></i></button></td><td><button type="button" class="btn" data-ng-click="FiltersModalCtrl.cancelAddClause()"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr><tr data-ng-repeat="clause in FiltersModalCtrl.customFilter.filter_clauses track by $index"><td data-ng-bind="FiltersModalCtrl.getClauseElement(clause.element)"></td><td data-ng-bind="FiltersModalCtrl.getClauseOperator(clause.operator)"></td><td data-ng-bind="FiltersModalCtrl.getClauseValue(clause)"></td><td></td><td><button type="button" class="btn" data-ng-click="FiltersModalCtrl.removeClause($index)"><i class="fa fa-trash" aria-hidden="true"></i></button></td></tr></tbody></table><h3 data-translate="filter_table_alerts"></h3><table class="table table-hover"><thead><tr><th data-translate="alert_table_name"></th><th data-translate="alert_table_type"></th><th></th></tr></thead><tbody><tr data-ng-repeat="alert in FiltersModalCtrl.customFilter.filter_alerts.smtp track by $index"><td data-ng-bind="alert"></td><td>SMTP</td><td><button type="button" class="btn" data-ng-click="FiltersModalCtrl.removeAlert(\'smtp\', $index)"><i class="fa fa-trash" aria-hidden="true"></i></button></td></tr><tr data-ng-repeat="alert in FiltersModalCtrl.customFilter.filter_alerts.http track by $index"><td data-ng-bind="alert"></td><td>HTTP</td><td><button type="button" class="btn" data-ng-click="FiltersModalCtrl.removeAlert(\'http\', $index)"><i class="fa fa-trash" aria-hidden="true"></i></button></td></tr></tbody></table><div data-ng-if="FiltersModalCtrl.newAlertSmtp"><div class="row control-group"><h3 data-translate="alert_smtp_title"></h3><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_select"></label></div><div class="controls col-xs-6"><select id="logsSearchFilter" class="form-control" data-ng-model="FiltersModalCtrl.existingSmtpAlert" data-ng-options="alert.name for alert in FiltersModalCtrl.AlertSmtpList" data-ng-disabled="!FiltersModalCtrl.AlertSmtpList || FiltersModalCtrl.AlertSmtpList.length === 0"><option value=""></option></select></div></div><div class="row control-group"><div class="controls col-xs-12 text-center"><label class="control-label" data-translate="alert_or"></label></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_name"></label></div><div class="controls col-xs-6"><input required="" type="text" data-ng-model="FiltersModalCtrl.customSmtpAlert.name" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_host"></label></div><div class="controls col-xs-6"><input type="text" required="" data-ng-model="FiltersModalCtrl.customSmtpAlert.host" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_port"></label></div><div class="controls col-xs-6"><input type="number" data-ng-model="FiltersModalCtrl.customSmtpAlert.port" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_tls"></label></div><div class="controls col-xs-6"><input type="checkbox" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="FiltersModalCtrl.customSmtpAlert.tls" data-ng-checked="false" data-switch-active="{{!FiltersModalCtrl.existingSmtpAlert}}"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_check_ca"></label></div><div class="controls col-xs-6"><input type="checkbox" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="FiltersModalCtrl.customSmtpAlert.check_ca" data-ng-checked="false" data-switch-active="{{!FiltersModalCtrl.existingSmtpAlert}}"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_user"></label></div><div class="controls col-xs-6"><input type="text" data-ng-model="FiltersModalCtrl.customSmtpAlert.user" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_password"></label></div><div class="controls col-xs-6"><input type="text" data-ng-model="FiltersModalCtrl.customSmtpAlert.password" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_from"></label></div><div class="controls col-xs-6"><input type="text" data-uib-tooltip="{{\'alert_smtp_emails_tooltip\' | translate}}" required="" data-ng-model="FiltersModalCtrl.customSmtpAlert.from" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_to"></label></div><div class="controls col-xs-6"><input type="text" required="" data-uib-tooltip="{{\'alert_smtp_emails_tooltip\' | translate}}" data-ng-model="FiltersModalCtrl.customSmtpAlert.to" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_cc"></label></div><div class="controls col-xs-6"><input type="text" data-uib-tooltip="{{\'alert_smtp_emails_tooltip\' | translate}}" data-ng-model="FiltersModalCtrl.customSmtpAlert.cc" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_bcc"></label></div><div class="controls col-xs-6"><input type="text" data-uib-tooltip="{{\'alert_smtp_emails_tooltip\' | translate}}" data-ng-model="FiltersModalCtrl.customSmtpAlert.bcc" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_subject"></label></div><div class="controls col-xs-6"><input type="text" data-uib-tooltip="{{\'alert_subject_body_tooltip\' | translate}}" required="" data-ng-model="FiltersModalCtrl.customSmtpAlert.subject" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_smtp_body"></label></div><div class="controls col-xs-6"><input type="text" data-uib-tooltip="{{\'alert_subject_body_tooltip\' | translate}}" required="" data-ng-model="FiltersModalCtrl.customSmtpAlert.body" class="form-control" data-ng-disabled="FiltersModalCtrl.existingSmtpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"></div><div class="controls col-xs-6"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.postNewSmtpAlert()" data-ng-disabled="!FiltersModalCtrl.isSmtpAlertValid()"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="FiltersModalCtrl.cancelAddSmtpAlert()"><i class="fa fa-times" aria-hidden="true"></i></button></div></div><hr></div><div data-ng-if="FiltersModalCtrl.newAlertHttp"><h3 data-translate="alert_http_title"></h3><div class="row control-group required"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_http_select"></label></div><div class="controls col-xs-6"><select id="logsSearchFilter" class="form-control" data-ng-model="FiltersModalCtrl.existingHttpAlert" data-ng-options="alert.name for alert in FiltersModalCtrl.AlertHttpList" data-ng-disabled="!FiltersModalCtrl.AlertHttpList || FiltersModalCtrl.AlertHttpList.length === 0"><option value=""></option></select></div></div><div class="row control-group"><div class="controls col-xs-12 text-center"><label class="control-label" data-translate="alert_or"></label></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_http_name"></label></div><div class="controls col-xs-6"><input required="" type="text" data-ng-model="FiltersModalCtrl.customHttpAlert.name" class="form-control" data-ng-disabled="FiltersModalCtrl.existingHttpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_http_method"></label></div><div class="controls col-xs-6"><select required="" data-ng-model="FiltersModalCtrl.customHttpAlertMethodSelect" class="form-control" data-ng-disabled="FiltersModalCtrl.existingHttpAlert"><option value="GET">GET</option><option value="POST">POST</option><option value="PUT">PUT</option><option value="DELETE">DELETE</option><option value="custom" data-translate="alert_http_method_other"></option></select></div></div><div class="row control-group" data-ng-if="FiltersModalCtrl.customHttpAlertMethodSelect === \'custom\'"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_http_method_custom"></label></div><div class="controls col-xs-6"><input type="text" data-ng-model="FiltersModalCtrl.customHttpAlert.method" class="form-control" data-ng-disabled="FiltersModalCtrl.existingHttpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_http_url"></label></div><div class="controls col-xs-6"><input required="" type="text" data-ng-model="FiltersModalCtrl.customHttpAlert.url" class="form-control" data-ng-disabled="FiltersModalCtrl.existingHttpAlert"></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_http_body"></label></div><div class="controls col-xs-6"><textarea data-uib-tooltip="{{\'alert_subject_body_tooltip\' | translate}}" required="" class="form-control" data-ng-model="FiltersModalCtrl.customHttpAlert.body">\n\t\t\t\t\t\t</textarea></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_http_headers"></label></div><div class="controls col-xs-6"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.addAlertHttpHeader()"><i class="fa fa-plus" aria-hidden="true"></i></button></div></div><div class="row control-group"><div class="controls col-xs-6"><label class="control-label" data-translate="alert_http_header_key"></label></div><div class="controls col-xs-6"><label data-translate="alert_http_header_value"></label></div></div><div class="row control-group" data-ng-if="FiltersModalCtrl.newAlertHttpHeader && !FiltersModalCtrl.existingHttpAlert"><div class="controls col-xs-4"><input type="text" data-ng-model="FiltersModalCtrl.customHttpAlertHeader.key" class="form-control"></div><div class="controls col-xs-4"><input type="text" data-ng-model="FiltersModalCtrl.customHttpAlertHeader.value" class="form-control"></div><div class="controls col-xs-4"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.addNewAlertHttpHeader()" data-ng-disabled="!FiltersModalCtrl.customHttpAlertHeader.key || !FiltersModalCtrl.customHttpAlertHeader.value"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="FiltersModalCtrl.cancelAddAlertHttpHeader()"><i class="fa fa-times" aria-hidden="true"></i></button></div></div><div class="row control-group" data-ng-repeat="header in FiltersModalCtrl.customHttpAlert.http_headers"><div class="controls col-xs-6"><label class="control-label" data-ng-bind="header.key"></label></div><div class="controls col-xs-6"><label class="control-label" data-ng-bind="header.value"></label></div></div><div class="row control-group"><div class="controls col-xs-6"></div><div class="controls col-xs-6"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.postNewHttpAlert()" data-ng-disabled="!FiltersModalCtrl.isHttpAlertValid()"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="FiltersModalCtrl.cancelAddHttpAlert()"><i class="fa fa-times" aria-hidden="true"></i></button></div></div><hr></div><div class="row control-group"><div class="col-xs-6"></div><div class="col-xs-3"><button type="button" class="btn btn-primary pull-right" data-ng-click="FiltersModalCtrl.postNewFilter()" data-ng-disabled="!FiltersModalCtrl.isFilterValid()"><i class="fa fa-check" aria-hidden="true"></i> <span data-translate="btn_ok"></span></button></div><div class="col-xs-3"><button type="button" class="btn btn-primary pull-right" data-ng-click="FiltersModalCtrl.cancelNewFilter()"><i class="fa fa-times" aria-hidden="true"></i> <span data-translate="btn_cancel"></span></button></div></div></div><div data-ng-if="!FiltersModalCtrl.editFilter && !FiltersModalCtrl.displayAlert"><table class="table table-hover"><thead><tr><th data-translate="filter_table_name"></th><th data-translate="filter_table_description"></th><th data-translate="filter_table_clauses"></th><th data-translate="filter_table_alerts"></th><th></th></tr></thead><tr data-ng-repeat="filter in FiltersModalCtrl.filterList track by $index"><td data-ng-bind="filter.name"></td><td data-ng-bind="filter.description"></td><td><div class="row-fluid" data-ng-repeat="clause in filter.filter_clauses"><span data-ng-bind="FiltersModalCtrl.getClauseElement(clause.element)"></span> <span data-ng-bind="FiltersModalCtrl.getClauseOperator(clause.operator)"></span> <span data-ng-bind="FiltersModalCtrl.getClauseValue(clause)"></span></div></td><td><div class="row" data-ng-if="filter.filter_alerts.smtp.length"><div class="col-xs-3"><strong><span data-translate="logs_alert_list_smtp"></span></strong></div><div class="col-xs-9"><span class="pull-right" data-ng-bind="filter.filter_alerts.smtp.join(\', \')"></span></div></div><div class="row" data-ng-if="filter.filter_alerts.http.length"><div class="col-xs-3"><strong><span data-translate="logs_alert_list_http"></span></strong></div><div class="col-xs-9"><span class="pull-right" data-ng-bind="filter.filter_alerts.http.join(\', \')"></span></div></div></td><td><button type="button" class="btn" data-ng-click="FiltersModalCtrl.editCustomFilter(filter)"><i class="fa fa-pencil" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="FiltersModalCtrl.removeCustomFilter(filter)"><i class="fa fa-trash" aria-hidden="true"></i></button></td></tr></table></div><div data-ng-if="FiltersModalCtrl.displayAlert"><h4 data-translate="logs_menu_smtp"></h4><div class="row" data-ng-repeat="alertSmtp in FiltersModalCtrl.AlertSmtpList"><div class="col-xs-2"></div><div class="col-xs-4" data-ng-bind="alertSmtp.name"></div><div class="col-xs-4"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.removeSmtpAlert(alertSmtp)"><i class="fa fa-trash" aria-hidden="true"></i></button></div></div><h4 data-translate="logs_menu_http"></h4><div class="row" data-ng-repeat="alertHttp in FiltersModalCtrl.AlertHttpList"><div class="col-xs-2"></div><div class="col-xs-4" data-ng-bind="alertHttp.name"></div><div class="col-xs-4"><button type="button" class="btn" data-ng-click="FiltersModalCtrl.removeHttpAlert(alertHttp)"><i class="fa fa-trash" aria-hidden="true"></i></button></div></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="FiltersModalCtrl.close()" data-translate="btn_close"></button></div></div>'),
e.put("app/logs/logs.html",'<div><h1 data-translate="logs_title"></h1><div class="row control-group"><div class="col-xs-1 controls"><label for="logsSearchLimit" data-translate="logs_search_limit"></label></div><div class="col-xs-2 controls"><input type="number" min="1" class="form-control" name="logsSearchLimit" id="logsSearchLimit" data-ng-model="logsCtrl.searchOptions.limit"></div><div class="col-xs-1 controls"><label for="logsSearchOffset" data-translate="logs_search_offset"></label></div><div class="col-xs-2 controls"><input type="number" min="0" class="form-control" name="logsSearchOffset" id="logsSearchOffset" data-ng-model="logsCtrl.searchOptions.offset"></div><div class="col-xs-1 controls"><label for="logsSearchFilter" data-translate="logs_search_filter"></label></div><div class="col-xs-2 controls"><select id="logsSearchFilter" class="form-control" data-ng-model="logsCtrl.searchOptions.filter" data-ng-options="filter.name for filter in logsCtrl.filterList" data-ng-disabled="logsCtrl.filterList.length === 0"><option value=""></option></select></div><div class="col-xs-3"><button type="button" class="btn btn-primary pull-right" data-ng-click="logsCtrl.search()" style="margin-left: 5px; margin-bottom: 5px;"><i class="fa fa-search" aria-hidden="true"></i> <span data-translate="logs_search_button"></span></button> <button type="button" class="btn btn-primary pull-right" data-ng-click="logsCtrl.filterManagement()" style="margin-left: 5px; margin-bottom: 5px;"><i class="fa fa-filter" aria-hidden="true"></i> <span data-translate="logs_filter_button"></span></button></div></div><hr><table data-datatable="ng" data-dt-options="logsCtrl.options" class="table table-hover table-striped table-bordered dataTable"><thead><tr><th data-translate="logs_table_date"></th><th data-translate="logs_table_priority"></th><th data-translate="logs_table_source"></th><th data-translate="logs_table_text"></th><th data-translate="logs_table_tags"></th></tr></thead><tbody><tr data-ng-repeat="message in logsCtrl.messageList"><td>{{message.date | date : \'medium\'}}</td><td>{{logsCtrl.getPriority(message)}}</td><td>{{message.source}}</td><td>{{message.text}}</td><td><span data-ng-repeat="tag in message.tags">{{tag}}</span></td></tr></tbody></table></div>'),e.put("app/monitors/monitors.html",'<div><h1 data-translate="monitors_title"></h1><div class="row" data-ng-if="monitorsCtrl.sagremorParams.adminMode"><button type="button" class="btn btn-primary" name="addMonitor" id="addMonitor" data-ng-click="monitorsCtrl.newMonitor()" data-translate="monitors_button_add"></button></div><hr><div class="row"><div data-ng-repeat="monitor in monitorsCtrl.monitorList track by monitor.name" class="col-sm-6"><data-sag-container data-menu="monitorsCtrl.menu" data-title="monitor.name" data-type="\'monitor\'" data-element="monitor" data-icon="\'bar-chart\'"><data-sag-monitor data-element="monitor"></data-sag-monitor></data-sag-container></div></div></div>'),e.put("app/parameters/parameters.html",'<div><h1 data-translate="parameters_title"></h1><h3 data-translate="param_submodule_title"></h3><div class="row"><div class="col-xs-2"><label for="submodule-benoic" data-translate="param_submodule_benoic"></label></div></div><h4 data-translate="param_benoic_device_type_list"></h4><div class="row" data-ng-repeat="type in ParametersCtrl.deviceTypes track by $index"><div class="col-xs-2" data-ng-bind="type.name"></div><div class="col-xs-2"><input data-toggle="toggle" data-bs-switch="" data-switch-size="mini" type="checkbox" data-ng-model="type.enabled" data-switch-active="false"></div></div><hr><div class="row"><div class="col-xs-2"><label for="submodule-carleon" data-translate="param_submodule_carleon"></label></div></div><h4 data-translate="param_carleon_service_list"></h4><div class="row" data-ng-repeat="service in ParametersCtrl.serviceList track by $index"><div class="col-xs-2" data-ng-bind="service.name"></div><div class="col-xs-2"><input data-toggle="toggle" data-bs-switch="" data-switch-size="mini" type="checkbox" data-ng-model="service.enabled" data-switch-active="false"></div></div><hr><div class="row"><div class="col-xs-2"><label for="submodule-gareth" data-translate="param_submodule_gareth"></label></div></div><div data-ng-if="ParametersCtrl.sagremorParams.benoicEnabled"><h3 data-translate="param_device_list"></h3><form name="deviceList" class="css-form"><button type="button" data-ng-click="ParametersCtrl.addDevice()" class="btn"><i class="fa fa-plus" aria-hidden="true"></i></button><table class="table table-hover"><thead><tr><th data-translate="device_name"></th><th data-translate="device_description"></th><th data-translate="device_type"></th><th data-translate="device_connected"></th><th data-translate="device_action"></th></tr></thead><tbody><tr data-ng-repeat="(name, device) in ParametersCtrl.deviceList track by name" data-ng-class="{\'device-disabled\': !device.enabled}"><td>{{device.name}}</td><td data-ng-if="!device.update">{{device.description}}</td><td data-ng-if="device.update"><input type="text" name="deviceDesc" id="deviceDesc" data-ng-model="device.newDescription" value="{{device.newDescription}}"></td><td>{{device.type_uid + \'_device_type\' | translate}}</td><td><input data-toggle="toggle" data-bs-switch="" data-switch-size="mini" type="checkbox" data-ng-model="device.connected" data-ng-change="ParametersCtrl.connectDevice(device)"></td><td data-ng-if="!device.update"><button type="button" class="btn" data-ng-click="ParametersCtrl.editDevice(device)"><i class="fa fa-pencil" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="ParametersCtrl.removeDevice(device)"><i class="fa fa-trash" aria-hidden="true"></i></button></td><td data-ng-if="device.update"><button type="button" class="btn" data-ng-click="ParametersCtrl.saveDevice(device)"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="ParametersCtrl.cancelEditDevice(device)"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr><tr data-ng-if="ParametersCtrl.deviceAdded"><td><input type="text" data-ng-model="ParametersCtrl.newDeviceName" data-ng-required="" data-ng-maxlength="64" maxlength="64" placeholder="{{\'device_name_placeholder\' | translate}}"></td><td><input type="text" data-ng-model="ParametersCtrl.newDeviceDescription" data-ng-maxlength="128" maxlength="128" placeholder="{{\'device_description_placeholder\' | translate}}"></td><td><select data-ng-required="" data-ng-model="ParametersCtrl.newDeviceType" data-ng-options="device.uid as device.translate for device in ParametersCtrl.deviceTypesEnabled" data-ng-change="ParametersCtrl.setDeviceOptions()"></select></td><td><input data-toggle="toggle" data-bs-switch="" data-switch-size="mini" type="checkbox" data-ng-model="ParametersCtrl.newDeviceConnect"></td><td></td><td><button type="button" class="btn" data-ng-click="ParametersCtrl.postNewDevice()" data-ng-disabled="!ParametersCtrl.isDeviceValid()"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="ParametersCtrl.cancelNewDevice()"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr></tbody></table><h3 data-ng-if="(ParametersCtrl.deviceAdded || ParametersCtrl.deviceUpdated) && ParametersCtrl.deviceOptionListDisplay" data-translate="device_options_title"></h3><div data-ng-if="(ParametersCtrl.deviceAdded || ParametersCtrl.deviceUpdated) && ParametersCtrl.deviceOptionListDisplay" data-ng-repeat="(optionName, option) in ParametersCtrl.deviceOptionList track by optionName" class="container"><div class="row"><div class="col-xs-3" data-ng-class="{\'device-option-required\': !option.optional}">{{ParametersCtrl.newDeviceType + "_" + option.name | translate}}</div><div class="col-xs-3" data-ng-if="option.type === \'string\'"><input type="text" data-ng-model="option.value" data-ng-required="!option.optional" placeholder="{{ParametersCtrl.newDeviceType + \'_\' + option.name + \'_placeholder\' | translate}}"></div><div class="col-xs-3" data-ng-if="option.type === \'numeric\'"><input type="number" data-ng-model="option.value" data-ng-required="!option.optional" placeholder="{{ParametersCtrl.newDeviceType + \'_\' + option.name + \'_placeholder\' | translate}}"></div><div class="col-xs-3" data-ng-if="option.type === \'boolean\'"><input data-toggle="toggle" type="checkbox" data-ng-model="option.value" data-ng-required="!option.optional"></div></div></div></form></div><div data-ng-if="ParametersCtrl.sagremorParams.carleonEnabled"><h3 data-translate="param_profiles_list"></h3><button type="button" data-ng-click="ParametersCtrl.addProfile()" class="btn"><i class="fa fa-plus" aria-hidden="true"></i></button><table class="table table-hover"><thead><tr><th data-translate="profile_name"></th><th data-translate="profile_description"></th><th data-translate="profile_default"></th><th data-translate="profile_use"></th><th data-translate="profile_action"></th></tr></thead><tbody><tr data-ng-repeat="profile in ParametersCtrl.profileList track by profile.name"><td data-ng-if="!profile.update">{{profile.name}}</td><td data-ng-if="!profile.update">{{profile.description}}</td><td data-ng-if="profile.update"><input type="text" name="profileName" id="profileName" data-ng-model="profile.newName" placeholder="{{\'profile_name_placeholder\' | translate}}"></td><td data-ng-if="profile.update"><input type="text" name="profileDescription" id="profileDescription" data-ng-model="profile.newDescription" placeholder="{{\'profile_description_placeholder\' | translate}}"></td><td><input data-toggle="toggle" data-bs-switch="" data-switch-size="mini" type="checkbox" data-ng-model="profile.default" data-ng-change="ParametersCtrl.setDefaultProfile(profile)"></td><td><button type="button" class="btn" name="useProfile" id="useProfile" data-ng-click="ParametersCtrl.useProfile(profile)" data-ng-if="profile.name !== ParametersCtrl.currentProfile.name"><i class="fa fa-check" aria-hidden="true"></i></button> <span data-ng-if="profile.name === ParametersCtrl.currentProfile.name" data-translate="profile_used"></span></td><td data-ng-if="!profile.update"><button type="button" class="btn" data-ng-click="ParametersCtrl.editProfile(profile)"><i class="fa fa-pencil" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="ParametersCtrl.cleanProfile(profile)"><i class="fa fa-eraser" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="ParametersCtrl.removeProfile(profile)"><i class="fa fa-trash" aria-hidden="true"></i></button></td><td data-ng-if="profile.update"><button type="button" class="btn" data-ng-click="ParametersCtrl.saveProfile(profile)" data-ng-disabled="!ParametersCtrl.isUpdateProfileValid(profile)"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="ParametersCtrl.cancelEditProfile(profile)"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr><tr data-ng-if="ParametersCtrl.profileAdded"><td><input type="text" data-ng-model="ParametersCtrl.newProfileName" data-ng-required="" data-ng-maxlength="64" maxlength="64" placeholder="{{\'profile_name_placeholder\' | translate}}"></td><td><input type="text" data-ng-model="ParametersCtrl.newProfileDescription" data-ng-maxlength="128" maxlength="128" placeholder="{{\'profile_description_placeholder\' | translate}}"></td><td><input data-toggle="toggle" data-bs-switch="" data-switch-size="mini" type="checkbox" data-ng-model="ParametersCtrl.newProfileDefault"></td><td></td><td><button type="button" class="btn" data-ng-click="ParametersCtrl.saveNewProfile()" data-ng-disabled="!ParametersCtrl.isProfileValid()"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="ParametersCtrl.cancelNewProfile()"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr></tbody></table></div></div>'),e.put("app/scripts/scripts.html",'<div><h1 data-translate="scripts_title"></h1><div class="row" data-ng-if="scriptsCtrl.sagremorParams.adminMode"><button type="button" class="btn btn-primary" name="addScript" id="addScript" data-ng-click="scriptsCtrl.newScript()" data-translate="scripts_button_add"></button></div><hr><div class="row"><div data-ng-repeat="script in scriptsCtrl.scriptList track by script.name" class="col-sm-3"><data-sag-container data-menu="scriptsCtrl.menuScript" data-size="1" data-title="script.name" data-type="\'script\'" data-element="script" data-icon="\'tasks\'"><data-sag-script data-element="script"></data-sag-script></data-sag-container></div></div></div>'),e.put("app/sensors/sensors.html",'<div><h1 data-translate="sensors_title"></h1><div class="row"><div data-ng-repeat="sensor in sensorsCtrl.sensorList" class="col-sm-3" data-ng-if="sensor.enabled || sensorsCtrl.sagremorParams.adminMode"><data-sag-container data-menu="sensorsCtrl.menuSensor" data-size="1" data-title="sensor.display" data-type="\'sensor\'" data-element="sensor" data-icon="\'line-chart\'"><data-sag-sensor data-element="sensor"></data-sag-sensor></data-sag-container></div></div></div>'),e.put("app/service/service.html",'<div><h1 data-translate="{{serviceCtrl.title}}"></h1><div data-ng-repeat="service in serviceCtrl.serviceList"><h3 data-translate="{{service.serviceGroup.title}}"></h3><div class="row" data-ng-if="serviceCtrl.sagremorParams.adminMode"><div class="span6"><button class="btn btn-primary" type="button" data-ng-click="serviceCtrl.addService(service.serviceGroup.service)" data-translate="service_add"></button></div></div><div class="row"><data-sag-container data-ng-repeat="element in service.list" data-menu="service.menu" data-title="element.display || element.name" data-type="element.type" data-element="element" data-icon="service.currentInjector.icon" data-ng-class="{\'col-md-2\': !service.size || service.size === 1, \'col-md-4\': service.size === 2, \'col-md-6\': service.size === 3}"><div data-sag-generic-injector="" data-type="element.type" data-elt="element"></div></data-sag-container></div></div></div>'),e.put("app/switches/switches.html",'<div><h1 data-translate="switches_title"></h1><h2 data-translate="switch_title"></h2><div class="row"><div data-ng-repeat="switcher in switchesCtrl.switchList" class="col-sm-3" data-ng-if="switcher.enabled || switchesCtrl.sagremorParams.adminMode"><data-sag-container data-menu="switchesCtrl.menuSwitcher" data-size="1" data-title="switcher.display" data-type="\'switch\'" data-element="switcher" data-icon="\'toggle-on\'"><data-sag-switch data-element="switcher"></data-sag-switch></data-sag-container></div></div><h2 data-translate="dimmer_title"></h2><div class="row"><div data-ng-repeat="dimmer in switchesCtrl.dimmerList" class="col-sm-3" data-ng-if="dimmer.enabled || switchesCtrl.sagremorParams.adminMode"><data-sag-container data-menu="switchesCtrl.menuDimmer" data-size="1" data-title="dimmer.display" data-type="\'dimmer\'" data-element="dimmer" data-icon="\'lightbulb-o\'"><data-sag-dimmer data-element="dimmer"></data-sag-dimmer></data-sag-container></div></div></div>'),e.put("app/users/users.html",'<div class="container"><h1 data-translate="users_title"></h1><h2 data-translate="users_user_list"></h2><h4 data-ng-if="!usersCtrl.usersEnabled" data-translate="users_user_disabled"></h4><button type="button" data-ng-click="usersCtrl.addUser()" class="btn btn-primary" data-translate="users_add_user" data-ng-if="usersCtrl.usersEnabled"></button><table class="table table-hover" data-ng-if="usersCtrl.usersEnabled"><thead><tr><th data-translate="users_table_login"></th><th data-translate="users_table_password"></th><th data-translate="users_table_enabled"></th><th></th></tr></thead><tbody><tr data-ng-repeat="user in usersCtrl.userList"><td data-ng-bind="user.login"></td><td data-ng-if="!user.changePassword">***</td><td data-ng-if="!!user.changePassword"><input type="password" data-ng-model="user.password" maxlength="128"></td><td><input type="checkbox" data-bs-switch="" class="form-control" data-toggle="toggle" data-switch-size="mini" data-ng-change="usersCtrl.enableUser(user)" data-ng-model="user.enabled"></td><td><button type="button" class="btn" data-ng-click="usersCtrl.displayChangePassword(user)" data-ng-if="!user.changePassword" title="{{ \'users_user_change_password\' | translate }}"><i class="fa fa-key" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="usersCtrl.removeUser(user)" data-ng-if="!user.changePassword" title="{{ \'users_user_delete\' | translate }}"><i class="fa fa-trash" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="usersCtrl.changePassword(user)" data-ng-disabled="user.password.length === 0" data-ng-if="!!user.changePassword"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="usersCtrl.cancelChangePassword(user)" data-ng-if="!!user.changePassword"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr><tr data-ng-if="usersCtrl.newUser"><td><input type="text" data-ng-model="usersCtrl.user.login" maxlength="128"></td><td><input type="password" data-ng-model="usersCtrl.user.password" maxlength="128"></td><td><input type="checkbox" data-bs-switch="" class="form-control" data-toggle="toggle" data-switch-size="mini" data-ng-model="usersCtrl.user.enabled"></td><td><button type="button" class="btn" data-ng-click="usersCtrl.createNewUser()" data-ng-disabled="!usersCtrl.isNewUserValid()"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="usersCtrl.cancelNewUser()"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr></tbody></table><hr><h2 data-translate="users_token_list"></h2><div class="row control-group"><div class="col-xs-1 controls"><label for="tokenSearchLogin" data-translate="users_token_search_login"></label></div><div class="col-xs-2 controls"><input type="text" min="1" class="form-control" name="tokenSearchLogin" id="tokenSearchLogin" data-ng-model="usersCtrl.searchOptions.login" maxlength="128"></div><div class="col-xs-1 controls"><label for="tokenSearchEnabled" data-translate="users_token_search_enabled"></label></div><div class="col-xs-2 controls"><select id="tokenSearchEnabled" class="form-control" data-ng-model="usersCtrl.searchOptions.enabled"><option value="" data-translate="users_token_search_enabled_all"></option><option value="true" data-translate="users_token_search_enabled_true"></option><option value="false" data-translate="users_token_search_enabled_false"></option></select></div><div class="col-xs-3"><button type="button" class="btn btn-primary pull-right" data-ng-click="usersCtrl.getTokenList()" style="margin-left: 5px; margin-bottom: 5px;"><i class="fa fa-search" aria-hidden="true"></i> <span data-translate="users_search_button"></span></button></div></div><table class="table table-hover dataTable table-striped" data-dt-options="usersCtrl.options" data-datatable="ng"><thead><tr><th data-translate="users_table_token_login"></th><th data-translate="users_table_token_value"></th><th data-translate="users_table_token_validity"></th><th data-translate="users_table_token_lastseen"></th><th data-translate="users_table_token_revoke"></th></tr></thead><tbody><tr data-ng-repeat="token in usersCtrl.tokenList" data-ng-class="{ \'text-muted\' : !token.enabled}"><td data-ng-bind="token.login"></td><td data-ng-bind="usersCtrl.displayToken(token.token)"></td><td data-ng-bind="token.validity | date : \'medium\'" data-ng-if="token.enabled"></td><td data-translate="users_token_revoked" data-ng-if="!token.enabled"></td><td data-ng-bind="token.last_seen | date : \'medium\'"></td><td><button type="button" class="btn" data-ng-click="usersCtrl.revokeToken(token)" title="{{ \'users_token_revoke\' | translate }}" data-ng-disabled="!token.enabled"><i class="fa fa-trash" aria-hidden="true"></i></button></td></tr></tbody></table></div>'),e.put("components/carleonLiquidsoap/carleonLiquidsoap.modal.html",'<div class="modal-content"><div class="modal-carleon-liquidsoap"><h3 class="modal-title" data-translate="carleon_liquidsoap_modal_title"></h3></div><div class="modal-body"><div class="row control-group"><span class="col-xs-6" data-translate="carleon_liquidsoap_modal_name"></span><div class="col-xs-6 controls"><input type="text" name="carleonLiquidsoapName" id="carleonLiquidsoapName" class="modal-input-text form-control" data-ng-model="carleonLiquidsoapModalCtrl.element.name" data-ng-disabled="!carleonLiquidsoapModalCtrl.add" size="10" maxlength="64"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_liquidsoap_modal_description"></span><div class="col-xs-6 controls"><input type="text" name="carleonLiquidsoapDescription" id="carleonLiquidsoapDescription" class="modal-input-text form-control" data-ng-model="carleonLiquidsoapModalCtrl.element.description" size="10" maxlength="128"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_liquidsoap_radio_url"></span><div class="col-xs-6 controls"><input type="text" name="carleonLiquidsoapRadioUrl" id="carleonLiquidsoapRadioUrl" class="modal-input-text form-control" data-ng-model="carleonLiquidsoapModalCtrl.element.radio_url" size="10" maxlength="512"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_liquidsoap_radio_type"></span><div class="col-xs-6 controls"><input type="text" name="carleonLiquidsoapRadioType" id="carleonLiquidsoapRadioType" class="modal-input-text form-control" data-ng-model="carleonLiquidsoapModalCtrl.element.radio_type" size="10" maxlength="64"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_liquidsoap_control_enabled"></span><div class="col-xs-6 controls"><input class="form-control" id="carleonLiquidsoapControlEnabled" name="carleonLiquidsoapControlEnabled" data-toggle="toggle" data-bs-switch="" data-switch-size="mini" type="checkbox" data-ng-model="carleonLiquidsoapModalCtrl.element.control_enabled"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_liquidsoap_control_host"></span><div class="col-xs-6 controls"><input type="text" name="carleonLiquidsoapControlHost" id="carleonLiquidsoapControlHost" class="modal-input-text form-control" data-ng-model="carleonLiquidsoapModalCtrl.element.control_host" size="10" maxlength="128" data-ng-disabled="!carleonLiquidsoapModalCtrl.element.control_enabled"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_liquidsoap_control_port"></span><div class="col-xs-6 controls"><input type="number" name="carleonLiquidsoapControlPort" id="carleonLiquidsoapControlPort" class="modal-input-text form-control" data-ng-model="carleonLiquidsoapModalCtrl.element.control_port" size="10" step="1" data-ng-disabled="!carleonLiquidsoapModalCtrl.element.control_enabled"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_liquidsoap_control_request_name"></span><div class="col-xs-6 controls"><input type="text" name="carleonLiquidsoapControlRequestName" id="carleonLiquidsoapControlRequestName" class="modal-input-text form-control" data-ng-model="carleonLiquidsoapModalCtrl.element.control_request_name" size="10" maxlength="128" data-ng-disabled="!carleonLiquidsoapModalCtrl.element.control_enabled"></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="carleonLiquidsoapModalCtrl.save()" data-translate="btn_ok" data-ng-disabled="!carleonLiquidsoapModalCtrl.isLiquidsoapValid()"></button> <button class="btn btn-warning" type="button" data-ng-click="carleonLiquidsoapModalCtrl.cancel()" data-dismiss="modal" data-translate="btn_cancel"></button></div></div>'),e.put("components/carleonLiquidsoap/carleonLiquidsoap.template.html",'<div class="container-fluid"><div class="row control-group"><div data-radio="" data-src="$ctrl.radio.radio_url"></div></div><div class="row control-group"><data-uib-accordion><div data-uib-accordion-group="" data-heading="{{\'carleon_liquidsoap_control_header\' | translate}}" data-is-open="$ctrl.controlAccordionOpen"><div class="row control-group"><div class="col-xs-6"><button type="button" class="btn" data-ng-click="$ctrl.commandRadio(\'stop\')" data-ng-if="$ctrl.status === \'on\'"><i class="fa fa-stop" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="$ctrl.commandRadio(\'start\')" data-ng-if="$ctrl.status === \'off\'"><i class="fa fa-play" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="$ctrl.commandRadio(\'skip\')" data-ng-if="$ctrl.status === \'on\'"><i class="fa fa-step-forward" aria-hidden="true"></i></button></div></div></div><div data-uib-accordion-group="" data-heading="{{\'carleon_liquidsoap_on_air_header\' | translate}}" data-is-open="$ctrl.onAirAccordionOpen"><div class="row control-group"><dl><dt data-translate="carleon_liquidsoap_song_title"></dt><dd data-ng-bind="$ctrl.onAir.title"></dd><dt data-translate="carleon_liquidsoap_song_artist"></dt><dd data-ng-bind="$ctrl.onAir.artist"></dd><dt data-translate="carleon_liquidsoap_song_album"></dt><dd data-ng-bind="$ctrl.onAir.album"></dd><dt data-translate="carleon_liquidsoap_song_album_artist"></dt><dd data-ng-bind="$ctrl.onAir.albumartist"></dd><dt data-translate="carleon_liquidsoap_song_year"></dt><dd data-ng-bind="$ctrl.onAir.year"></dd></dl></div></div><div data-uib-accordion-group="" data-heading="{{\'carleon_liquidsoap_list_header\' | translate}}" data-is-open="$ctrl.listAccordionOpen"><div class="row control-group"><select class="form-control" data-ng-model="$ctrl.listSelected" data-ng-options="song as song.artist + \' - \' + song.title for song in $ctrl.list track by song.artist + \' - \' + song.title"></select></div><div class="row control-group"><dl><dt data-translate="carleon_liquidsoap_song_title"></dt><dd data-ng-bind="$ctrl.listSelected.title"></dd><dt data-translate="carleon_liquidsoap_song_artist"></dt><dd data-ng-bind="$ctrl.listSelected.artist"></dd><dt data-translate="carleon_liquidsoap_song_album"></dt><dd data-ng-bind="$ctrl.listSelected.album"></dd><dt data-translate="carleon_liquidsoap_song_album_artist"></dt><dd data-ng-bind="$ctrl.listSelected.albumartist"></dd><dt data-translate="carleon_liquidsoap_song_year"></dt><dd data-ng-bind="$ctrl.listSelected.year"></dd></dl></div></div></data-uib-accordion></div></div>'),e.put("components/carleonMock/carleonMock.modal.html",'<div class="modal-content"><div class="modal-carleon-mock"><h3 class="modal-title" data-translate="carleon_mock_modal_title"></h3></div><div class="modal-body"><div class="row-fluid"><span class="col-xs-6" data-translate="carleon_mock_modal_name"></span><div class="col-xs-6"><input type="text" name="carleonMockName" id="carleonMockName" data-ng-model="CarleonMockModalCtrl.mock.name" data-ng-disabled="!CarleonMockModalCtrl.add" class="modal-input-text" size="10"></div></div><div class="row"><span class="col-xs-6" data-translate="carleon_mock_modal_description"></span><div class="col-xs-6"><input type="text" name="carleonMockDescription" id="carleonMockDescription" data-ng-model="CarleonMockModalCtrl.mock.description" class="modal-input-text" size="10"></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="CarleonMockModalCtrl.save()" data-translate="btn_ok"></button> <button class="btn btn-warning" type="button" data-ng-click="CarleonMockModalCtrl.cancel()" data-dismiss="modal" data-translate="btn_cancel"></button></div></div></div>'),e.put("components/carleonMock/carleonMock.template.html",'<div class="text-center"><div class="row"><div class="span6">command</div><div class="span6"><select id="mockCommand" data-ng-model="$ctrl.param.command" data-ng-options="command for command in $ctrl.commandList"></select></div></div><div class="row" data-ng-if="$ctrl.param.command === \'exec1\' || $ctrl.param.command === \'exec2\'"><div class="span6">param1</div><div class="span6"><input type="text" data-ng-model="$ctrl.param.param1" size="4"></div></div><div class="row" data-ng-if="$ctrl.param.command === \'exec1\'"><div class="span6">param2</div><div class="span6"><input type="number" data-ng-model="$ctrl.param.param2" style="width: 7em"></div></div><div class="row" data-ng-if="$ctrl.param.command === \'exec1\'"><div class="span6">param3</div><div class="span6"><input type="number" step="0.01" data-ng-model="$ctrl.param.param3" style="width: 7em"></div></div><button type="button" data-ng-click="$ctrl.command()">Execute</button></div>'),e.put("components/carleonMotion/carleonMotion.image.modal.html",'<div class="container-fluid"><div class="modal-content"><div class="modal-header"><h3 class="modal_title" data-ng-bind="carleonMotionImageModalCtrl.displayTitle()"></h3></div><div class="modal-body"><div class="row control-group"><div class="col-xs-12" data-ng-if="!!carleonMotionImageModalCtrl.currentImage.stream"><img data-ng-src="{{carleonMotionImageModalCtrl.currentImage.stream}}" alt="{{carleonMotionImageModalCtrl.currentImage.title}}" class="img-responsive img-thumbnail"></div><div class="col-xs-12" data-ng-if="!!carleonMotionImageModalCtrl.currentImage.img"><img data-http-src="{{carleonMotionImageModalCtrl.currentImage.img}}" alt="{{carleonMotionImageModalCtrl.currentImage.title}}" class="img-responsive img-thumbnail"></div></div><div class="row control-group"><div class="col-xs-5"><button type="button" class="btn pull-right" data-ng-click="carleonMotionImageModalCtrl.changeImage(-1)" data-ng-if="carleonMotionImageModalCtrl.canPrevious()"><i class="fa fa-arrow-left" aria-hidden="true"></i></button></div><div class="col-xs-2 text-center"><span data-ng-bind="carleonMotionImageModalCtrl.showIndex()"></span></div><div class="col-xs-5"><button type="button" class="btn pull-left" data-ng-click="carleonMotionImageModalCtrl.changeImage(1)" data-ng-if="carleonMotionImageModalCtrl.canNext()"><i class="fa fa-arrow-right" aria-hidden="true"></i></button></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="carleonMotionImageModalCtrl.snapshot()" data-ng-if="!!carleonMotionImageModalCtrl.currentImage.snapshotUri"><span data-translate="carleon_motion_snapshot"></span> <i class="fa fa-camera" aria-hidden="true"></i></button> <button class="btn btn-primary" type="button" data-ng-click="carleonMotionImageModalCtrl.close()" data-translate="monitor_close"></button></div></div></div>'),e.put("components/carleonMotion/carleonMotion.modal.html",'<div class="modal-content"><div class="modal-carleon-motion"><h3 class="modal-title" data-translate="carleon_motion_modal_title"></h3></div><div class="modal-body"><div class="row control-group"><span class="col-xs-6" data-translate="carleon_motion_modal_name"></span><div class="col-xs-6 controls"><input type="text" name="carleonMotionName" id="carleonMotionName" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.motion.name" data-ng-disabled="!carleonMotionModalCtrl.add" size="10" maxlength="64"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_motion_modal_description"></span><div class="col-xs-6 controls"><input type="text" name="carleonMotionDescription" id="carleonMotionDescription" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.motion.description" size="10" maxlength="128"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_motion_modal_config_uri"></span><div class="col-xs-6 controls"><input type="text" name="carleonMotionDescription" id="carleonMotionDescription" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.motion.config_uri" size="10" maxlength="128"></div></div><hr><div class="row"><h3 data-translate="carleon_motion_modal_file_list"></h3><button type="button" data-ng-click="carleonMotionModalCtrl.addNewFileList()" class="btn"><i class="fa fa-plus" aria-hidden="true"></i></button></div><div class="row control-group"><table class="table table-hover controls"><thead><tr><th data-translate="carleon_motion_file_list_name"></th><th data-translate="carleon_motion_file_list_path"></th><th data-translate="carleon_motion_file_list_thumbnail_path"></th><th></th></tr></thead><tbody><tr data-ng-repeat="fileList in carleonMotionModalCtrl.motion.file_list track by $index"><td data-ng-bind="fileList.name"></td><td data-ng-bind="fileList.path"></td><td data-ng-bind="fileList.thumbnail_path"></td><td><button type="button" class="btn" data-ng-click="carleonMotionModalCtrl.removeFileList($index)"><i class="fa fa-trash" aria-hidden="true"></i></button></td></tr><tr data-ng-if="carleonMotionModalCtrl.addFileList"><td><input type="text" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.newFileList.name" data-ng-required="" data-ng-maxlength="64" maxlength="64"></td><td><input type="text" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.newFileList.path" data-ng-required="" data-ng-maxlength="512" maxlength="512"></td><td><input type="text" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.newFileList.thumbnail_path" data-ng-required="" data-ng-maxlength="512" maxlength="512"></td><td><button type="button" class="btn" data-ng-click="carleonMotionModalCtrl.saveNewFileList()" data-ng-disabled="!carleonMotionModalCtrl.isFileListValid()"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="carleonMotionModalCtrl.cancelNewFileList()"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr></tbody></table></div><hr><div class="row"><h3 data-translate="carleon_motion_modal_stream_list"></h3><button type="button" data-ng-click="carleonMotionModalCtrl.addNewStream()" class="btn"><i class="fa fa-plus" aria-hidden="true"></i></button></div><div class="row control-group"><table class="table table-hover controls"><thead><tr><th data-translate="carleon_motion_stream_list_name"></th><th data-translate="carleon_motion_stream_list_uri"></th><th data-translate="carleon_motion_stream_list_snapshot_uri"></th><th></th></tr></thead><tbody><tr data-ng-repeat="streamList in carleonMotionModalCtrl.motion.stream_list track by $index"><td data-ng-bind="streamList.name"></td><td data-ng-bind="streamList.uri"></td><td data-ng-bind="streamList.snapshot_uri"></td><td><button type="button" class="btn" data-ng-click="carleonMotionModalCtrl.removeStream($index)"><i class="fa fa-trash" aria-hidden="true"></i></button></td></tr><tr data-ng-if="carleonMotionModalCtrl.addStream"><td><input type="text" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.newStream.name" data-ng-required="" data-ng-maxlength="64" maxlength="64"></td><td><input type="text" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.newStream.uri" data-ng-required="" data-ng-maxlength="512" maxlength="512"></td><td><input type="text" class="modal-input-text form-control" data-ng-model="carleonMotionModalCtrl.newStream.snapshot_uri" data-ng-maxlength="512" maxlength="512"></td><td><button type="button" class="btn" data-ng-click="carleonMotionModalCtrl.saveNewStream()" data-ng-disabled="!carleonMotionModalCtrl.isStreamValid()"><i class="fa fa-check" aria-hidden="true"></i></button> <button type="button" class="btn" data-ng-click="carleonMotionModalCtrl.cancelNewStream()"><i class="fa fa-times" aria-hidden="true"></i></button></td></tr></tbody></table></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="carleonMotionModalCtrl.save()" data-translate="btn_ok" data-ng-disabled="!carleonMotionModalCtrl.isCameraValid()"></button> <button class="btn btn-warning" type="button" data-ng-click="carleonMotionModalCtrl.cancel()" data-dismiss="modal" data-translate="btn_cancel"></button></div></div>'),
e.put("components/carleonMotion/carleonMotion.template.html",'<div class="container-fluid"><div class="row control-group"><div class="col-xs-4 controls" data-ng-class="{\'text-success\': $ctrl.online, \'text-danger\': !$ctrl.online}"><label data-translate="carleon_motion_online" data-ng-if="$ctrl.online"></label> <label data-translate="carleon_motion_offline" data-ng-if="!$ctrl.online"></label> <i class="fa fa-power-off" aria-hidden="true"></i></div><div class="col-xs-4 controls" data-ng-if="$ctrl.fileListName.length > 1"><div><label for="motionImagesList" data-translate="carleon_motion_file_list"></label></div></div><div class="col-xs-4 controls" data-ng-if="$ctrl.fileListName.length > 1"><select id="motionImagesList" class="form-control" data-ng-change="$ctrl.changeSelectedFileList()" data-ng-model="$ctrl.selectedFileList" data-ng-options="fileListName as fileListName for fileListName in $ctrl.fileListName track by fileListName"></select></div><div class="col-xs-8 controls" data-ng-if="$ctrl.fileListName.length <= 1"><span data-ng-bind="$ctrl.selectedFileList"></span></div></div><div class="row control-group"><div class="col-xs-4"><button type="button" class="btn btn-primary" data-ng-click="$ctrl.refresh()"><span data-translate="carleon_motion_refresh"></span> <i class="fa fa-refresh" aria-hidden="true"></i></button></div><div class="col-xs-4 controls"><button type="button" class="btn btn-primary" data-ng-click="$ctrl.openStream()"><span data-translate="carleon_motion_stream_open"></span> <i class="fa fa-video-camera" aria-hidden="true"></i></button></div></div><hr><div class="row control-group" data-ng-if="!!$ctrl.selectedFileList"><div class="col-xs-3" data-ng-repeat="image in $ctrl.images track by $index"><a href="" data-ng-click="$ctrl.openPopupImage($ctrl.images, $index)" alt="{{image.title}}"><img data-http-src="{{image.thumb}}" title="{{image.title}}" class="img-responsive"></a> <span class="small text-center" data-ng-bind="image.title"></span></div></div><div class="row control-group" data-ng-if="!!$ctrl.selectedFileList"><div class="col-xs-5"><button type="button" class="btn pull-right" data-ng-click="$ctrl.previousList()" data-ng-if="$ctrl.canPrevious()"><i class="fa fa-arrow-left" aria-hidden="true"></i></button></div><div class="col-xs-2 text-center"><span data-ng-bind="$ctrl.offset"></span></div><div class="col-xs-5"><button type="button" class="btn pull-left" data-ng-click="$ctrl.nextList()" data-ng-if="$ctrl.canNext()"><i class="fa fa-arrow-right" aria-hidden="true"></i></button></div></div></div>'),e.put("components/carleonMpd/carleonMpd.modal.html",'<div class="modal-content"><div class="modal-carleon-mpd"><h3 class="modal-title" data-translate="carleon_mpd_modal_title"></h3></div><div class="modal-body"><div class="row control-group"><span class="col-xs-6" data-translate="carleon_mpd_modal_name"></span><div class="col-xs-6 controls"><input type="text" name="carleonMpdName" id="carleonMpdName" class="modal-input-text form-control" data-ng-model="carleonMpdModalCtrl.mpd.name" data-ng-disabled="!carleonMpdModalCtrl.add" size="10" maxlength="64"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_mpd_modal_description"></span><div class="col-xs-6 controls"><input type="text" name="carleonMpdDescription" id="carleonMpdDescription" class="modal-input-text form-control" data-ng-model="carleonMpdModalCtrl.mpd.description" size="10" maxlength="128"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_mpd_modal_host"></span><div class="col-xs-6 controls"><input type="text" name="carleonMpdDescription" id="carleonMpdDescription" class="modal-input-text form-control" data-ng-model="carleonMpdModalCtrl.mpd.host" size="10" maxlength="128"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_mpd_modal_port"></span><div class="col-xs-6 controls"><input type="number" name="carleonMpdDescription" id="carleonMpdDescription" class="modal-input-text form-control" data-ng-model="carleonMpdModalCtrl.mpd.port" size="10" step="1" maxlength="5"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_mpd_modal_password"></span><div class="col-xs-6 controls"><input type="text" name="carleonMpdDescription" id="carleonMpdDescription" class="modal-input-text form-control" data-ng-model="carleonMpdModalCtrl.mpd.password" size="10" maxlength="128"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="carleon_mpd_modal_switch"></span><div class="col-xs-6 controls"><select id="newActionSwitch" name="newActionSwitch" class="form-control" data-ng-model="carleonMpdModalCtrl.switchAttached" data-ng-options="switch as switch.display for switch in carleonMpdModalCtrl.switches" data-ng-change="carleonMpdModalCtrl.changeSwitch()"></select></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="carleonMpdModalCtrl.save()" data-translate="btn_ok" data-ng-disabled="!carleonMpdModalCtrl.isMpdValid()"></button> <button class="btn btn-warning" type="button" data-ng-click="carleonMpdModalCtrl.cancel()" data-dismiss="modal" data-translate="btn_cancel"></button></div></div>'),e.put("components/carleonMpd/carleonMpd.template.html",'<div class="container-fluid"><div class="row control-group"><div class="row control-group" data-ng-if="!!$ctrl.mpd.name && ($ctrl.mpd.state == \'pause\' || $ctrl.mpd.state == \'play\')"><div class="col-xs-12 controls text-center"><strong><span data-ng-bind="$ctrl.mpd.name"></span></strong></div></div><div class="row control-group" data-ng-if="!!$ctrl.mpd.title && ($ctrl.mpd.state == \'pause\' || $ctrl.mpd.state == \'play\')"><div class="col-xs-2 controls"><strong><span data-translate="carleon_mpd_playing_title"></span></strong></div><div class="col-xs-10 controls"><span data-ng-bind="$ctrl.mpd.title"></span></div></div><div class="row control-group" data-ng-if="!!$ctrl.mpd.artist && ($ctrl.mpd.state == \'pause\' || $ctrl.mpd.state == \'play\')"><div class="col-xs-2 controls"><strong><span data-translate="carleon_mpd_playing_artist"></span></strong></div><div class="col-xs-10 controls"><span data-ng-bind="$ctrl.mpd.artist"></span></div></div><div class="row control-group" data-ng-if="!!$ctrl.mpd.album && ($ctrl.mpd.state == \'pause\' || $ctrl.mpd.state == \'play\')"><div class="col-xs-2 controls"><strong><span data-translate="carleon_mpd_playing_album"></span></strong></div><div class="col-xs-10 controls"><span data-ng-bind="$ctrl.mpd.album"></span></div></div><div class="row control-group" data-ng-if="!!$ctrl.mpd.date && ($ctrl.mpd.state == \'pause\' || $ctrl.mpd.state == \'play\')"><div class="col-xs-2 controls"><strong><span data-translate="carleon_mpd_playing_date"></span></strong></div><div class="col-xs-10 controls"><span data-ng-bind="$ctrl.mpd.date"></span></div></div><hr class="heater-hr"><div class="clearfix control-group"><div class="col-xs-4 controls"><label for="mpdPlaylists" data-translate="carleon_mpd_playlists_title"></label></div><div class="col-xs-4 controls"><select class="form-control" name="mpdPlaylists" value="mpdPlaylists" data-ng-model="$ctrl.selectedPlaylist" data-ng-options="playlist as playlist for playlist in $ctrl.playlists"></select></div><div class="col-xs-4 controls"><button type="button" class="btn btn-primary" data-ng-click="$ctrl.loadPlaylist()" data-translate="carleon_mpd_playlist_load"></button></div></div><hr class="heater-hr"><div class="row control-group"><div class="clearfix input-group"><span class="input-group-btn"><button type="button" class="btn btn-default" data-ng-click="$ctrl.setAction(\'previous\')"><i class="fa fa-backward" aria-hidden="true"></i></button></span> <span class="input-group-btn" data-ng-if="$ctrl.mpd.state == \'pause\' || $ctrl.mpd.state == \'play\'"><button type="button" class="btn btn-default" data-ng-click="$ctrl.setAction(\'stop\')"><i class="fa fa-stop" aria-hidden="true"></i></button></span> <span class="input-group-btn" data-ng-if="$ctrl.mpd.state == \'pause\' || $ctrl.mpd.state == \'stop\'"><button type="button" class="btn btn-default" data-ng-click="$ctrl.setAction(\'play\')"><i class="fa fa-play" aria-hidden="true"></i></button></span> <span class="input-group-btn" data-ng-if="$ctrl.mpd.state == \'play\'"><button type="button" class="btn btn-default" data-ng-click="$ctrl.setAction(\'pause\')"><i class="fa fa-pause" aria-hidden="true"></i></button></span> <span class="input-group-btn"><button type="button" class="btn btn-default" data-ng-click="$ctrl.setAction(\'next\')"><i class="fa fa-forward" aria-hidden="true"></i></button></span> <span class="input-group-btn"><button type="button" data-ng-class="{\'btn btn-primary\': $ctrl.mpd.repeat, \'btn btn-default\': !$ctrl.mpd.repeat}" data-ng-click="$ctrl.setAction(\'repeat\')"><i class="fa fa-refresh" aria-hidden="true"></i></button> <button type="button" data-ng-class="{\'btn btn-primary\': $ctrl.mpd.random, \'btn btn-default\': !$ctrl.mpd.random}" data-ng-click="$ctrl.setAction(\'random\')"><i class="fa fa-random" aria-hidden="true"></i></button></span></div></div><hr class="heater-hr"><div class="row control-group" data-ng-if="!!$ctrl.mpd.name"><div class="col-xs-12 controls text-center"><strong><span data-translate="carleon_mpd_control_volume"></span></strong></div></div><div class="row control-group"><div class="ring control-group"><div class="quarter quarter-plus-1" data-ng-click="$ctrl.setVolume(1)"><span class="quarter-value" data-ng-bind="$ctrl.displayVolumeCommand(1)"></span></div><div class="quarter quarter-plus-5" data-ng-click="$ctrl.setVolume(5)"><span class="quarter-value" data-ng-bind="$ctrl.displayVolumeCommand(5)"></span></div><div class="quarter quarter-minus-1" data-ng-click="$ctrl.setVolume(-1)"><span class="quarter-value" data-ng-bind="$ctrl.displayVolumeCommand(-1)"></span></div><div class="quarter quarter-minus-5" data-ng-click="$ctrl.setVolume(-5)"><span class="quarter-value" data-ng-bind="$ctrl.displayVolumeCommand(-5)"></span></div><div class="cutout-heater"><div class="ring-value" data-ng-bind="$ctrl.displayVolume()"></div></div></div></div></div></div>'),e.put("components/container/container.template.html",'<div data-ng-class="{\'sag-container\': !$ctrl.dashboard, \'sag-container-dashboard\': ($ctrl.dashboard && $ctrl.element.type !== \'script\')}"><div class="row"><div class="sag-container-header-menu col-xs-2" data-ng-if="(!!$ctrl.menu && !$ctrl.dashboard) || $ctrl.dashboard && $ctrl.sagParams.adminMode" data-uib-dropdown=""><button class="btn btn-primary text-left" type="button" data-uib-dropdown-toggle="" data-ng-click=""><i data-ng-class="{\'fa fa-{{$ctrl.icon}} fa-fw\': !!$ctrl.icon, \'fa fa-bars\': !$ctrl.icon}" aria-hidden="true"></i></button><ul data-uib-dropdown-menu=""><li data-ng-repeat="menuItem in $ctrl.menu" data-ng-if="menuItem.name !== \'monitor\' || $ctrl.element.monitored"><a href="" data-ng-click="$ctrl.menuSelect(menuItem, $ctrl.element)" data-ng-bind="menuItem.display"></a></li></ul></div><div data-ng-if="$ctrl.element.type !== \'script\'" class="sag-container-header-title col-xs-10" data-ng-class="{\'sag-container-header-title-dashboard\': $ctrl.dashboard}"><i data-ng-class="{\'fa fa-{{$ctrl.icon}}\': !!$ctrl.icon}" aria-hidden="true" data-ng-if="$ctrl.dashboard"></i> <span data-toggle="tooltip" data-ng-attr-title="{{$ctrl.title + \'\\n\' + $ctrl.element.description}}"><span data-ng-bind="$ctrl.title" class="text-center"></span></span></div></div><div data-ng-transclude="" class="sag-container-element"></div><div class="row"><div class="col-md-12"><span data-ng-repeat="script in $ctrl.scripts" class="script-small"><button type="button" class="btn btn-xs btn-primary" data-ng-bind="script.name" data-ng-click="$ctrl.runScript(script)"></button></span></div></div></div>'),e.put("components/dimmer/dimmer.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title" data-translate="dimmer_update_title"></h3></div><div class="modal-body"><div class="row control-group"><span class="col-xs-6" data-translate="dimmer_update_name"></span><div class="col-xs-6 controls"><input type="text" name="dimmerDisplay" id="dimmerDisplay" data-ng-model="DimmersModalCtrl.dimmer.newDisplay" class="modal-input-text form-control"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="dimmer_update_enabled"></span><div class="col-xs-6 controls"><input type="checkbox" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="DimmersModalCtrl.dimmer.enabled"></div></div><div class="row"><hr></div><div class="row control-group"><span class="col-xs-6" data-translate="dimmer_update_monitor"></span><div class="col-xs-6 controls"><input type="checkbox" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="DimmersModalCtrl.dimmer.monitored"></div></div><div class="row control-group" data-ng-if="DimmersModalCtrl.dimmer.monitored"><span class="col-xs-6" data-translate="dimmer_update_monitor_every"></span><div class="col-xs-6 controls"><select id="bddAddUserGrant" class="form-control" data-ng-model="DimmersModalCtrl.dimmer.monitored_every" data-ng-options="monitorEvery.value as DimmersModalCtrl.tr(monitorEvery.label) for monitorEvery in DimmersModalCtrl.monitorEveryEnum"></select></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="DimmersModalCtrl.saveDimmer()" data-translate="dimmer_btn_ok"></button> <button class="btn btn-warning" type="button" data-ng-click="DimmersModalCtrl.cancel()" data-dismiss="modal" data-translate="dimmer_btn_cancel"></button></div></div>'),e.put("components/dimmer/dimmer.template.html",'<div data-ng-if="$ctrl.element.enabled || $ctrl.adminMode"><div class="text-center" data-ng-class="{\'text-italic\': $ctrl.adminMode}"><div class="ring"><div class="quarter quarter1" data-ng-click="$ctrl.setDimmer(100)" data-ng-class="{\'quarter-off\': $ctrl.element.value <= 75, \'quarter-almost-on\': $ctrl.element.value < 100 && $ctrl.element.value > 75, \'quarter-on\': $ctrl.element.value === 100}"><span class="quarter-value">100%</span></div><div class="quarter quarter2" data-ng-click="$ctrl.setDimmer(25)" data-ng-class="{\'quarter-off\': $ctrl.element.value === 0, \'quarter-almost-on\': $ctrl.element.value < 25 && $ctrl.element.value > 0, \'quarter-on\': $ctrl.element.value >= 25}"><span class="quarter-value">25%</span></div><div class="quarter quarter3" data-ng-click="$ctrl.setDimmer(75)" data-ng-class="{\'quarter-off\': $ctrl.element.value <= 50, \'quarter-almost-on\': $ctrl.element.value < 75 && $ctrl.element.value > 50, \'quarter-on\': $ctrl.element.value >= 75}"><span class="quarter-value"><br>75%</span></div><div class="quarter quarter4" data-ng-click="$ctrl.setDimmer(50)" data-ng-class="{\'quarter-off\': $ctrl.element.value <= 25, \'quarter-almost-on\': $ctrl.element.value < 50 && $ctrl.element.value > 25, \'quarter-on\': $ctrl.element.value >= 50}"><span class="quarter-value"><br>50%</span></div><div class="cutout"><div class="ring-value" data-ng-bind="$ctrl.Dimmervalue()"></div></div></div><hr class="dimmer-hr"><div class="clearfix input-group"><span class="input-group-btn"><button type="button" class="btn btn-default" data-ng-click="$ctrl.addDimmer(-1)"><i class="fa fa-minus"></i></button></span> <span class="input-group-btn"><button type="button" data-ng-click="$ctrl.setDimmer(0)" class="btn btn-default"><i class="fa fa-power-off" aria-hidden="true"></i></button></span> <span class="input-group-btn"><button type="button" class="btn btn-default" data-ng-click="$ctrl.addDimmer(1)"><i class="fa fa-plus"></i></button></span></div></div></div>'),e.put("components/event/event.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title" data-translate="event_modal_title"></h3></div><div class="modal-body"><div class="row control-group" data-ng-class="{\'has-error\': !!EventModalCtrl.error.nameInvalid}"><label for="eventName" class="col-xs-5" data-translate="event_name"></label><div class="col-xs-7 controls"><input type="text" name="eventName" id="eventName" data-ng-model="EventModalCtrl.event.name" class="modal-input-text form-control" size="16" maxlength="64" data-ng-disabled="!EventModalCtrl.add" placeholder="{{\'event_name_placeholder\' | translate}}"></div></div><div class="row control-group"><label for="eventDecription" class="col-xs-5" data-translate="event_description"></label><div class="col-xs-7 controls"><input type="text" name="eventDecription" id="eventDecription" data-ng-model="EventModalCtrl.event.description" class="modal-input-text form-control" size="16" maxlength="128" placeholder="{{\'event_description_placeholder\' | translate}}"></div></div><div class="row control-group"><label for="eventEnabled" class="col-xs-5" data-translate="event_enabled"></label><div class="col-xs-7 controls"><input type="checkbox" id="eventEnabled" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.event.enabled"></div></div><hr><div class="row control-group"><label for="eventType" class="col-xs-5" data-translate="event_type_select"></label><div class="col-xs-7 controls"><select id="eventType" class="form-control" data-ng-model="EventModalCtrl.eventType"><option value="scheduler" data-translate="event_type_scheduler"></option><option value="trigger" data-translate="event_type_trigger"></option></select></div></div><div class="row control-group" data-ng-if="EventModalCtrl.eventType === \'scheduler\'"><label for="schedulerDate" class="col-xs-5" data-translate="event_scheduler_date_select"></label><div class="col-xs-7"><div class="input-group"><input type="text" id="schedulerDate" class="form-control" data-datetime-picker="yyyy/MM/dd HH:mm" data-ng-model="EventModalCtrl.myDate" data-is-open="EventModalCtrl.isOpen" data-button-bar="EventModalCtrl.datePickerOptions.buttonBar"> <span class="input-group-btn"><button type="button" class="btn btn-default" data-ng-click="EventModalCtrl.openCalendar($event, prop)"><i class="fa fa-calendar"></i></button></span></div></div></div><div class="row control-group" data-ng-if="EventModalCtrl.eventType === \'scheduler\'"><label for="schedulerRepeat" class="col-xs-5" data-translate="event_scheduler_repeat"></label><div class="col-xs-7 controls"><input type="checkbox" id="schedulerRepeat" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.repeatSwitch"></div></div><div class="row control-group" data-ng-if="EventModalCtrl.eventType === \'scheduler\' && EventModalCtrl.scheduler.repeatSwitch"><label for="schedulerRepeatEvery" class="col-xs-5" data-translate="event_scheduler_repeat_every"></label><div class="col-xs-7 controls"><select id="schedulerRepeatEvery" class="form-control" data-ng-model="EventModalCtrl.scheduler.repeat" data-ng-options="repeatEvery.value*1 as EventModalCtrl.tr(repeatEvery.label) for repeatEvery in EventModalCtrl.schedulerRepeatEveryEnum"></select></div></div><div class="row control-group" data-ng-if="EventModalCtrl.eventType === \'scheduler\' && EventModalCtrl.scheduler.repeatSwitch && EventModalCtrl.scheduler.repeat !== 3"><label for="schedulerRepeatEveryValue" class="col-xs-5" data-translate="event_scheduler_repeat_every_value"></label><div class="col-xs-7 controls"><input type="number" id="schedulerRepeatEveryValue" min="0" step="1" data-ng-model="EventModalCtrl.scheduler.repeat_value"></div></div><div class="row control-group" data-ng-if="EventModalCtrl.eventType === \'scheduler\' && EventModalCtrl.scheduler.repeatSwitch && EventModalCtrl.scheduler.repeat === 3"><label for="schedulerRepeatEveryDayOfWeek" class="col-xs-5" data-translate="event_scheduler_repeat_every_value"></label><div class="col-xs-7 controls"><div class="row"><div class="col-xs-6"><label for="schedulerRepeatMonday" data-translate="event_scheduler_repeat_every_day_of_week_monday"></label></div><div class="col-xs-6"><input type="checkbox" id="schedulerRepeatMonday" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.repeatEveryDayOfWeek.monday"></div></div><div class="row"><div class="col-xs-6"><label for="schedulerRepeatTuesday" data-translate="event_scheduler_repeat_every_day_of_week_tuesday"></label></div><div class="col-xs-6"><input type="checkbox" id="schedulerRepeatTuesday" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.repeatEveryDayOfWeek.tuesday"></div></div><div class="row"><div class="col-xs-6"><label for="schedulerRepeatWednesday" data-translate="event_scheduler_repeat_every_day_of_week_wednesday"></label></div><div class="col-xs-6"><input type="checkbox" id="schedulerRepeatWednesday" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.repeatEveryDayOfWeek.wednesday"></div></div><div class="row"><div class="col-xs-6"><label for="schedulerRepeatThursday" data-translate="event_scheduler_repeat_every_day_of_week_thursday"></label></div><div class="col-xs-6"><input type="checkbox" id="schedulerRepeatThursday" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.repeatEveryDayOfWeek.thursday"></div></div><div class="row"><div class="col-xs-6"><label for="schedulerRepeatFriday" data-translate="event_scheduler_repeat_every_day_of_week_friday"></label></div><div class="col-xs-6"><input type="checkbox" id="schedulerRepeatFriday" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.repeatEveryDayOfWeek.friday"></div></div><div class="row"><div class="col-xs-6"><label for="schedulerRepeatSaturday" data-translate="event_scheduler_repeat_every_day_of_week_saturday"></label></div><div class="col-xs-6"><input type="checkbox" id="schedulerRepeatSaturday" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.repeatEveryDayOfWeek.saturday"></div></div><div class="row"><div class="col-xs-6"><label for="schedulerRepeatSunday" data-translate="event_scheduler_repeat_every_day_of_week_sunday"></label></div><div class="col-xs-6"><input type="checkbox" id="schedulerRepeatSunday" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.repeatEveryDayOfWeek.sunday"></div></div></div></div><div class="row control-group" data-ng-if="EventModalCtrl.eventType === \'scheduler\' && !EventModalCtrl.scheduler.repeatSwitch"><label for="schedulerRemoveAfter" class="col-xs-5" data-translate="event_scheduler_remove_after"></label><div class="col-xs-7 controls"><input type="checkbox" id="schedulerRemoveAfter" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.scheduler.remove_after"></div></div><div class="row control-group" data-ng-if="EventModalCtrl.eventType === \'trigger\'"><label for="triggerSource" class="col-xs-5" data-translate="event_trigger_source"></label><div class="col-xs-7 controls"><select id="triggerSource" class="form-control" data-ng-model="EventModalCtrl.trigger" data-ng-options="element as element.display for element in EventModalCtrl.globalTriggerElementList track by EventModalCtrl.trackTriggerElement(element)"></select></div><div class="control-group"><label for="newTriggerMessage" class="col-xs-5" data-translate="event_trigger_message"></label><div class="col-xs-5 controls"></div><div class="col-xs-3"><select id="newTriggerMessageOperator" name="newTriggerMessageOperator" class="form-control" data-ng-model="EventModalCtrl.event.message_match"><option value="0"></option><option value="1" data-translate="message_match_equal"></option><option value="2" data-translate="message_match_different"></option><option value="3" data-translate="message_match_contains"></option><option value="4" data-translate="message_match_not_contains"></option><option value="5" data-translate="message_match_empty"></option><option value="6" data-translate="message_match_not_empty"></option></select></div><div class="col-xs-4" data-ng-if="EventModalCtrl.event.message_match <= 4"><input type="text" class="form-control" name="newTriggerMessageValue" id="newTriggerMessageValue" data-ng-model="EventModalCtrl.event.message" placeholder="{{\'event_message_match_placeholder\' | translate}}"></div></div></div><hr><div class="row control-group"><label class="col-xs-5" data-translate="event_script_list"></label><div class="col-xs-7"><div class="row" data-ng-repeat="script in EventModalCtrl.scriptList track by $index"><strong data-ng-bind="script.name"></strong> <input type="checkbox" id="scriptEnabled" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="script.enabled"> <button type="button" class="btn btn-default pull-right" data-ng-click="EventModalCtrl.removeScript($index)"><i class="fa fa-trash"></i></button></div></div></div><div class="row control-group"><label for="eventScriptSelect" class="col-xs-5" data-translate="event_script_select"></label><div class="col-xs-7"><select id="eventScriptSelect" class="form-control" data-ng-model="EventModalCtrl.newScript" data-ng-options="script.name for script in EventModalCtrl.globalScriptList"></select></div></div><div class="row control-group"><label for="eventScriptAdd" class="col-xs-5" data-translate="event_add"></label><div class="col-xs-7"><button type="button" class="btn btn-default" data-ng-click="EventModalCtrl.addScript(EventModalCtrl.newScript)"><i class="fa fa-plus"></i></button></div></div><hr><div class="row control-group"><label class="col-xs-5" data-translate="event_condition_list"></label><div class="col-xs-7"><div class="row" data-ng-repeat="condition in EventModalCtrl.conditionList track by $index"><strong data-ng-bind="EventModalCtrl.displayCondition(condition)"></strong> <button type="button" class="btn btn-default pull-right" data-ng-click="EventModalCtrl.removeCondition($index)"><i class="fa fa-trash"></i></button></div></div></div><div class="row control-group"><label for="eventScriptAdd" class="col-xs-5" data-translate="event_condition_select"></label><div class="col-xs-7"><select id="eventconditionAdd" class="form-control" data-ng-model="EventModalCtrl.newConditionType" data-ng-options="condition as EventModalCtrl.tr(condition.label) for condition in EventModalCtrl.globalElementList"></select></div></div><div class="row control-group"><div data-ng-if="EventModalCtrl.newConditionType.name === \'switch\'"><div data-ng-class="{\'has-error\': !EventModalCtrl.tmpElement}"><label for="newConditionSwitch" class="col-xs-5" data-translate="script_switch_select"></label><div class="col-xs-7 controls"><select id="newConditionSwitch" name="newConditionSwitch" class="form-control" data-ng-model="EventModalCtrl.tmpElement" data-ng-change="EventModalCtrl.setConditionBenoicElement()" data-ng-options="switch as switch.display for switch in EventModalCtrl.benoicElements.switches track by EventModalCtrl.trackBenoicElement(switch, \'switch\')"></select></div></div><div><label for="newConditionSwitchValue" class="col-xs-5" data-translate="script_switch_value"></label><div class="col-xs-7"><input type="checkbox" id="newConditionSwitchValue" name="newConditionSwitchValue" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.newCondition.value" data-ng-checked="false" data-ng-true-value="1" data-ng-false-value="0"></div></div></div><div data-ng-if="EventModalCtrl.newConditionType.name === \'dimmer\'"><div class="control-group" data-ng-class="{\'has-error\': !EventModalCtrl.tmpElement}"><label for="newConditionDimmer" class="col-xs-5" data-translate="script_dimmer_select"></label><div class="col-xs-7 controls"><select id="newConditionDimmer" name="newConditionDimmer" class="form-control" data-ng-model="EventModalCtrl.tmpElement" data-ng-change="EventModalCtrl.setConditionBenoicElement()" data-ng-options="dimmer as dimmer.display for dimmer in EventModalCtrl.benoicElements.dimmers track by EventModalCtrl.trackBenoicElement(dimmer, \'dimmer\')"></select></div></div><div class="form-group"><label for="newConditionDimmerValue" class="col-xs-5" data-translate="script_dimmer_value"></label><div class="col-xs-3"><select id="newConditionOperator" name="newConditionOperator" class="form-control" data-ng-model="EventModalCtrl.newCondition.condition"><option value="==">==</option><option value="<">&lt;</option><option value="<=">&lt;=</option><option value=">">&gt;</option><option value=">=">&gt;=</option></select></div><div class="col-xs-4"><input id="newConditionDimmerValue" class="form-control" name="newConditionDimmerValue" type="number" min="0" max="100" size="3" data-ng-model="EventModalCtrl.newCondition.value"></div></div></div><div data-ng-if="EventModalCtrl.newConditionType.name === \'heater\'"><div class="control-group"><label for="newConditionHeater" class="col-xs-5" data-translate="script_heater_select"></label><div class="col-xs-7 controls"><select id="newConditionHeater" name="newConditionHeater" class="form-control" data-ng-model="EventModalCtrl.tmpElement" data-ng-change="EventModalCtrl.setConditionBenoicElement()" data-ng-options="heater as heater.display for heater in EventModalCtrl.benoicElements.heaters track by EventModalCtrl.trackBenoicElement(heater, \'heater\')"></select></div></div><div><label for="newConditionHeaterValue" class="col-xs-5" data-translate="script_heater_command"></label><div class="col-xs-3"><select id="newConditionOperator" name="newConditionOperator" class="form-control" data-ng-disabled="!!EventModalCtrl.newCondition.commandMode" data-ng-model="EventModalCtrl.newCondition.condition"><option value="==">==</option><option value="<"><</option><option value="<="><=< option=""><option value=">">&gt;</option><option value=">=">&gt;=</option></=<></option></select></div><div class="col-xs-4"><input id="newConditionHeaterValue" class="form-control" name="newConditionHeaterValue" type="number" min="0" max="100" data-ng-disabled="!!EventModalCtrl.newCondition.commandMode" data-ng-model="EventModalCtrl.newCondition.commandHeat"></div></div><div class="control-group"><div class="col-xs-12 text-center"><label data-translate="condition_or"></label></div></div><div class="control-group"><label for="newConditionHeaterMode" class="col-xs-5" data-translate="script_heater_mode_title"></label><div class="col-xs-3"><select id="newConditionOperator" name="newConditionOperator" class="form-control" data-ng-disabled="!!EventModalCtrl.newCondition.commandHeat" data-ng-model="EventModalCtrl.newCondition.condition"><option value="==">=</option><option value="!=">!=</option></select></div><div class="col-xs-4 controls"><select class="form-control" id="newConditionHeaterMode" name="newConditionHeaterMode" data-ng-disabled="!!EventModalCtrl.newCondition.commandHeat" data-ng-model="EventModalCtrl.newCondition.commandMode" data-ng-options="mode as EventModalCtrl.heaterModeDisplay(mode) for mode in EventModalCtrl.tmpElement.availableModes"><option value=""></option></select></div></div></div><div data-ng-if="EventModalCtrl.newConditionType.name === \'sensor\'"><div class="control-group" data-ng-class="{\'has-error\': !EventModalCtrl.tmpElement}"><label for="newConditionSensor" class="col-xs-5" data-translate="script_sensor_select"></label><div class="col-xs-7 controls"><select id="newConditionSensor" name="newConditionSensor" class="form-control" data-ng-model="EventModalCtrl.tmpElement" data-ng-change="EventModalCtrl.setConditionBenoicElement()" data-ng-options="sensor as sensor.display for sensor in EventModalCtrl.benoicElements.sensors track by EventModalCtrl.trackBenoicElement(sensor, \'sensor\')"></select></div></div><div class="form-group"><label for="newConditionSensorValue" class="col-xs-5" data-translate="script_sensor_value"></label><div class="col-xs-3"><select id="newConditionOperator" name="newConditionOperator" class="form-control" data-ng-model="EventModalCtrl.newCondition.condition"><option value="==">==</option><option value="<">&lt;</option><option value="<=">&lt;=</option><option value=">">&gt;</option><option value=">=">&gt;=</option></select></div><div class="col-xs-4"><input id="newConditionSensorValue" class="form-control" name="newConditionSensorValue" type="number" min="0" max="100" size="3" step=".1" data-ng-model="EventModalCtrl.newCondition.value"></div></div></div><div data-ng-if="EventModalCtrl.newConditionType.submodule === \'carleon\'"><div class="control-group" data-ng-class="{\'has-error\': !EventModalCtrl.tmpElement}"><label for="newConditionCarleonElement" class="col-xs-5" data-translate="script_element_select"></label><div class="col-xs-7 controls"><select id="newConditionCarleonElement" name="newConditionCarleonElement" class="form-control" data-ng-model="EventModalCtrl.tmpElement" data-ng-change="EventModalCtrl.setActionCarleonElement()" data-ng-options="element as element.name for element in EventModalCtrl.carleonConditionElementsList[EventModalCtrl.newConditionType.name] track by EventModalCtrl.trackCarleonElement(element, EventModalCtrl.newConditionType.name)"></select></div></div><div class="control-group" data-ng-repeat="parameter in EventModalCtrl.carleonConditionCommandsParameters[EventModalCtrl.newConditionType.name]"><label for="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" class="col-xs-5" data-ng-bind="parameter.title"></label><div class="col-xs-7 controls" data-ng-class="{\'has-error\': (parameter.required && !EventModalCtrl.newCondition.parameters[parameter.name] && EventModalCtrl.newCondition.parameters[parameter.name] !== 0)}"><input type="text" class="form-control" name="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" id="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" data-ng-if="parameter.type === \'string\'" data-ng-model="EventModalCtrl.newCondition.parameters[parameter.name]"> <input type="number" class="form-control" name="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" id="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" data-ng-if="parameter.type === \'integer\'" data-ng-model="EventModalCtrl.newCondition.parameters[parameter.name]"> <input type="number" class="form-control" name="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" id="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" data-ng-if="parameter.type === \'real\'" step=".01" data-ng-model="EventModalCtrl.newCondition.parameters[parameter.name]"> <input type="checkbox" id="newConditionSwitchValue" name="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.newCondition.parameters[parameter.name]" data-ng-checked="false" data-ng-if="parameter.type === \'boolean\'"></div></div><div class="control-group"><label for="newConditionCarleonParameter" class="col-xs-5" data-translate="condition_result_select"></label><div class="col-xs-7 controls"><select id="newConditionCarleonParameter" name="newConditionCarleonParameter" class="form-control" data-ng-init="EventModalCtrl.tmpResult = EventModalCtrl.carleonConditionResultParameters[EventModalCtrl.newConditionType.name][0]" data-ng-model="EventModalCtrl.tmpResult" data-ng-options="parameter as EventModalCtrl.tr(parameter.title) for parameter in EventModalCtrl.carleonConditionResultParameters[EventModalCtrl.newConditionType.name]"></select></div></div><div class="control-group" data-ng-if="EventModalCtrl.tmpResult"><label for="{{EventModalCtrl.tmpResult.title}}" class="col-xs-5" data-translate="scheduler_condition_value"></label><div class="col-xs-5 controls"></div><div class="col-xs-3"><select id="{{EventModalCtrl.tmpResult.title}}" name="{{EventModalCtrl.tmpResult.title}}" class="form-control" data-ng-model="EventModalCtrl.newCondition.condition" data-ng-if="EventModalCtrl.tmpResult.type === \'real\' || EventModalCtrl.tmpResult.type === \'integer\'"><option value="==">==</option><option value="<">&lt;</option><option value="<=">&lt;=</option><option value=">">&gt;</option><option value=">=">&gt;=</option></select><select id="newConditionOperator" name="newConditionOperator" class="form-control" data-ng-model="EventModalCtrl.newCondition.condition" data-ng-if="EventModalCtrl.tmpResult.type === \'string\'"><option value="==">==</option><option value="!=">!=</option><option value="contains" data-translate="condition_contains"></option><option value="not contains" data-translate="condition_not_contains"></option></select><input type="checkbox" id="{{EventModalCtrl.newConditionType.name}}" name="{{EventModalCtrl.newConditionType.name}" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="EventModalCtrl.newCondition.value" data-ng-checked="false" data-ng-if="EventModalCtrl.tmpResult.type === \'boolean\'"></div><div class="col-xs-4"><input type="text" class="form-control" name="{{EventModalCtrl.newConditionType.name}}" id="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" data-ng-if="EventModalCtrl.tmpResult.type === \'string\'" data-ng-model="EventModalCtrl.newCondition.value"> <input type="number" class="form-control" name="{{EventModalCtrl.newConditionType.name}}" id="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" data-ng-if="EventModalCtrl.tmpResult.type === \'integer\'" data-ng-model="EventModalCtrl.newCondition.value"> <input type="number" class="form-control" name="{{EventModalCtrl.newConditionType.name}}" id="{{EventModalCtrl.newConditionType.name + \'$\' + parameter.name}}" data-ng-if="EventModalCtrl.tmpResult.type === \'real\'" step=".01" data-ng-model="EventModalCtrl.newCondition.value"></div></div></div></div><div class="row control-group"><label for="eventScriptAdd" class="col-xs-5" data-translate="event_add"></label><div class="col-xs-7"><button type="button" class="btn btn-default" data-ng-click="EventModalCtrl.addCondition()" data-ng-disabled="!EventModalCtrl.isConditionValid()"><i class="fa fa-plus"></i></button></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="EventModalCtrl.save()" data-translate="btn_ok" data-ng-disabled="!EventModalCtrl.isEventValid()" data-uib-tooltip="{{EventModalCtrl.error.message}}"></button> <button class="btn btn-warning" type="button" data-ng-click="EventModalCtrl.cancel()" data-dismiss="modal" data-translate="btn_cancel"></button></div></div>'),
e.put("components/event/scheduler.template.html",'<div class="text-center"><div class="row"><div class="span6"><label for="schedulerEnabled" data-translate="scheduler_enable_button"></label> <input type="checkbox" id="schedulerEnabled" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-change="$ctrl.enableScheduler()" data-ng-model="$ctrl.element.enabled"></div></div><div class="row"><div class="span6"><label data-translate="scheduler_next_time"></label></div><div class="span6"><span data-ng-bind="$ctrl.element.next_time * 1000 | date:\'yyyy/MM/dd HH:mm\'" data-ng-if="$ctrl.element.enabled"></span> <span data-translate="scheduler_disabled" data-ng-if="!$ctrl.element.enabled"></span></div></div></div>'),e.put("components/event/trigger.template.html",'<div class="text-center"><div class="row"><div class="span6"><label for="schedulerEnabled" data-translate="scheduler_enable_button"></label> <input type="checkbox" id="schedulerEnabled" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-change="$ctrl.enableTrigger()" data-ng-model="$ctrl.element.enabled"></div></div></div>'),e.put("components/heater/heater.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title" data-translate="heater_update_title"></h3></div><div class="modal-body"><div class="row control-group"><span class="col-xs-6" data-translate="heater_update_name"></span><div class="col-xs-6 controls"><input type="text" name="heaterDisplay" id="heaterDisplay" data-ng-model="HeatersModalCtrl.heater.newDisplay" class="modal-input-text form-control"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="heater_update_unit"></span><div class="col-xs-6 controls"><input type="text" name="heaterUnit" id="heaterUnit" data-ng-model="HeatersModalCtrl.heater.options.unit" class="modal-input-text form-control" placeholder="{{\'heater_unit_placeholder\' | translate}}"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="heater_update_enabled"></span><div class="col-xs-6 controls"><input type="checkbox" data-bs-switch="" class="form-control" data-toggle="toggle" data-switch-size="mini" data-ng-model="HeatersModalCtrl.heater.enabled"></div></div><div class="row"><hr></div><div class="row control-group"><span class="col-xs-6" data-translate="heater_update_monitor"></span><div class="col-xs-6 controls"><input type="checkbox" data-bs-switch="" class="form-control" data-toggle="toggle" data-switch-size="mini" data-ng-model="HeatersModalCtrl.heater.monitored"></div></div><div class="row control-group" data-ng-if="HeatersModalCtrl.heater.monitored"><span class="col-xs-6" data-translate="heater_update_monitor_every"></span><div class="col-xs-6 controls"><select id="bddAddUserGrant" class="form-control" data-ng-model="HeatersModalCtrl.heater.monitored_every" data-ng-options="monitorEvery.value as HeatersModalCtrl.tr(monitorEvery.label) for monitorEvery in HeatersModalCtrl.monitorEveryEnum"></select></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="HeatersModalCtrl.saveHeater()" data-translate="heater_btn_ok"></button> <button class="btn btn-warning" type="button" data-ng-click="HeatersModalCtrl.cancel()" data-dismiss="modal" data-translate="heater_btn_cancel"></button></div></div>'),e.put("components/heater/heater.template.html",'<div class="container-fluid" data-ng-class="{\'text-italic\': $ctrl.adminMode}" data-ng-if="$ctrl.element.enabled || $ctrl.adminMode"><div class="text-center row control-group"><span class="heater-on"><i class="fa fa-fire" aria-hidden="true" data-ng-if="$ctrl.element.value.on"></i></span></div><div class="row control-group"><div class="ring control-group"><div class="quarter quarter-plus-1" data-ng-click="$ctrl.setHeater(1)"><span class="quarter-value" data-ng-bind="$ctrl.displayCommand(1)"></span></div><div class="quarter quarter-plus-5" data-ng-click="$ctrl.setHeater(5)"><span class="quarter-value" data-ng-bind="$ctrl.displayCommand(5)"></span></div><div class="quarter quarter-minus-1" data-ng-click="$ctrl.setHeater(-1)"><span class="quarter-value" data-ng-bind="$ctrl.displayCommand(-1)"></span></div><div class="quarter quarter-minus-5" data-ng-click="$ctrl.setHeater(-5)"><span class="quarter-value" data-ng-bind="$ctrl.displayCommand(-5)"></span></div><div class="cutout-heater"><div class="ring-value" data-ng-bind="$ctrl.displayCommandValue()"></div></div></div></div><hr class="heater-hr"><div class="row control-group"><div class="col-xs-4 controls"><label for="heaterMode" data-translate="heater_mode_title"></label></div><div class="col-xs-8 controls"><select class="form-control" name="heaterMode" value="heaterMode" data-ng-model="$ctrl.element.value.mode" data-ng-change="$ctrl.setHeater(null)" data-ng-options="mode as $ctrl.modeDisplay(mode) for mode in $ctrl.availableModes"></select></div></div></div>'),e.put("components/modals/confirm.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title">{{ConfirmModalCtrl.title}}</h3></div><div class="modal-body"><div class="row" style="margin: 5px;"><span>{{ConfirmModalCtrl.message}}</span></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="ConfirmModalCtrl.ok()">OK</button> <button class="btn btn-warning" type="button" data-ng-click="ConfirmModalCtrl.cancel()">Cancel</button></div></div></div>'),e.put("components/modals/edit.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title" data-ng-bind="EditModalCtrl.title"></h3></div><div class="modal-body"><div class="row" style="margin: 5px;"><span data-ng-bind="EditModalCtrl.message"></span></div><div class="row control-group" style="margin: 5px;"><div class="controls"><input type="text" name="editInput" id="editInput" class="form-control" data-ng-model="EditModalCtrl.value" placeholder="{{EditModalCtrl.placeholder}}"></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="EditModalCtrl.ok()" data-translate="modal_button_ok"></button> <button class="btn btn-warning" type="button" data-ng-click="EditModalCtrl.cancel()" data-translate="modal_button_cancel"></button></div></div></div>'),e.put("components/modals/image.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal_title" data-ng-bind="ImageModalCtrl.displayTitle()"></h3></div><div class="modal-body"><div class="row control-group"><div class="col-xs-1"></div><div class="col-xs-10"><img data-ng-src="{{ImageModalCtrl.src}}" alt="{{ImageModalCtrl.title}}" class="img-responsive img-thumbnail"></div><div class="col-xs-1"></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="ImageModalCtrl.close()" data-translate="monitor_close"></button></div></div>'),e.put("components/modals/monitor.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal_title" data-ng-bind="MonitorModalCtrl.displayTitle()"></h3></div><div class="modal-body"><div class="row control-group"><div class="col-xs-6"><label for="monitorSelectDuration" data-translate="monitor_select_duration"></label></div><div class="col-xs-6 controls"><select id="monitorSelectDuration" class="form-control" data-ng-model="MonitorModalCtrl.duration" data-ng-change="MonitorModalCtrl.getMonitor()" data-ng-options="duration as MonitorModalCtrl.tr(duration.label) for duration in MonitorModalCtrl.durationList track by duration.value"></select></div></div><div class="row"><data-nvd3 data-options="MonitorModalCtrl.options" data="MonitorModalCtrl.data"></data-nvd3></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="MonitorModalCtrl.close()" data-translate="monitor_close"></button></div></div>'),e.put("components/modals/scriptBindElement.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title" data-translate="script_bind_element_title"></h3></div><div class="modal-body"><div class="row"><span data-translat="script_bind_element_list"></span></div><div class="row" style="padding: 5px;"><table data-datatable="ng" data-dt-options="ScriptBindElementModalCtrl.options" class="table table-hover table-striped table-bordered dataTable"><thead><tr><th data-translate="script_bind_table_select"></th><th data-translate="script_bind_table_type"></th><th data-translate="script_bind_table_display"></th></tr></thead><tbody><tr data-ng-repeat="element in ScriptBindElementModalCtrl.elementList track by $index" data-ng-click="ScriptBindElementModalCtrl.selectRow($index)" data-ng-class="{\'selected\': element.selected}"><td><input class="text-center" id="elementSelect" type="checkbox" data-ng-model="ScriptBindElementModalCtrl.tmpCheck[$index]"></td><td data-ng-bind="element.typeTitle"></td><td data-ng-bind="element.display"></td></tr></tbody></table></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="ScriptBindElementModalCtrl.ok()" data-translate="modal_button_ok"></button> <button class="btn btn-warning" type="button" data-ng-click="ScriptBindElementModalCtrl.cancel()" data-translate="modal_button_cancel"></button></div></div></div>'),e.put("components/monitor/monitor.template.html",'<div class="container-fluid"><div class="row control-group"><div class="col-xs-5"><label for="monitorSelectDuration" data-translate="monitor_select_duration"></label></div><div class="col-xs-5 controls"><select id="monitorSelectDuration" class="form-control" data-ng-model="$ctrl.duration" data-ng-change="$ctrl.displayMonitor()" data-ng-options="duration as $ctrl.tr(duration.label) for duration in $ctrl.durationList track by duration.value"></select></div></div><div class="row control-group"><div class="col-xs-1"></div><div class="col-xs-2"><label for="monitorNewElement" data-translate="monitor_new_element"></label></div><div class="col-xs-3 controls"><select id="monitorNewElement" class="form-control" data-ng-model="$ctrl.newElement" data-ng-options="element.display for element in $ctrl.elementListDisplayed"></select></div><div class="col-xs-3 controls"><button type="button" data-ng-click="$ctrl.addElement()" class="btn btn-primary" data-ng-disabled="!$ctrl.newElementValid()" data-translate="monitor_new_element_button"></button></div></div><div class="row text-center"><div class="col-xs-12"><data-nvd3 data-options="$ctrl.options" data="$ctrl.data"></data-nvd3></div></div><div class="row text-center"><span data-ng-repeat="serie in $ctrl.element.elements" style="margin: 5px; color: white;"><button type="button" class="btn btn-primary" data-ng-click="$ctrl.removeSerie(serie)" data-ng-disabled="$ctrl.element.elements.length <= 1"><i class="fa fa-trash-o" aria-hidden="true"></i> <span data-ng-bind="serie.display"></span></button></span></div></div>'),e.put("components/script/script.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title" data-translate="script_modal_title"></h3></div><div class="modal-body"><div class="row control-group" data-ng-class="{\'has-error\': !!ScriptModalCtrl.error.message}"><label for="scriptName" class="col-xs-4" data-translate="script_name"></label><div class="col-xs-8 controls"><input type="text" name="scriptName" id="scriptName" data-ng-model="ScriptModalCtrl.script.name" class="modal-input-text form-control" size="16" maxlength="64" data-ng-disabled="!ScriptModalCtrl.add" placeholder="{{\'script_name_placeholder\' | translate}}"></div></div><div class="row control-group"><label for="scriptDecription" class="col-xs-4" data-translate="script_description"></label><div class="col-xs-8 controls"><input type="text" name="scriptDecription" id="scriptDecription" data-ng-model="ScriptModalCtrl.script.description" class="modal-input-text form-control" size="16" maxlength="128" placeholder="{{\'script_description_placeholder\' | translate}}"></div></div><hr><h4 data-translate="script_actions"></h4><div data-ng-repeat="action in ScriptModalCtrl.script.actions"><div class="row" data-ng-if="action.submodule === \'benoic\'"><div class="col-xs-4"><strong data-ng-bind="ScriptModalCtrl.getBenoicElementDisplay(action)"></strong></div><div class="col-xs-4"><strong data-ng-bind="ScriptModalCtrl.getBenoicElementValue(action)"></strong></div><div class="col-xs-2"><button type="button" class="btn" data-ng-click="ScriptModalCtrl.removeAction($index)"><i class="fa fa-trash" aria-hidden="true"></i></button></div></div><div class="row" data-ng-if="action.submodule === \'carleon\'"><div class="col-xs-4"><strong data-ng-bind="ScriptModalCtrl.carleonCommand(action.command, action.parameters.service)"></strong></div><div class="col-xs-4"><div class="row" data-ng-repeat="(name, value) in action.parameters" data-ng-if="name !== \'service\'"><strong><span data-ng-bind="ScriptModalCtrl.carleonParameter(name, action.parameters.service, action.command)"></span> <span>:</span> <span data-ng-bind="value"></span></strong></div></div><div class="col-xs-2"><button type="button" class="btn" data-ng-click="ScriptModalCtrl.removeAction($index)"><i class="fa fa-trash" aria-hidden="true"></i></button></div></div></div><hr><div class="row"><div class="col-xs-12"><button type="button" class="btn btn-primary" data-ng-click="ScriptModalCtrl.addAction()" data-translate="script_add_action"></button></div></div><div data-ng-if="ScriptModalCtrl.newAction"><hr><div class="row control-group" data-ng-class="{\'has-error\': !ScriptModalCtrl.newActionType}"><label for="newActionElement" class="col-xs-4" data-translate="script_action"></label><div class="col-xs-8 controls"><select id="newActionElement" name="newActionElement" class="form-control" data-ng-model="ScriptModalCtrl.newActionType" data-ng-options="element as ScriptModalCtrl.tr(element.label) for element in ScriptModalCtrl.scriptActionElements track by element.name" data-ng-change="ScriptModalCtrl.changeActionType()"></select></div></div><div data-ng-if="ScriptModalCtrl.newActionType.name === \'switch\'"><div class="row control-group" data-ng-class="{\'has-error\': !ScriptModalCtrl.newAction.switcher.name}"><label for="newActionSwitch" class="col-xs-4" data-translate="script_switch_select"></label><div class="col-xs-8 controls"><select id="newActionSwitch" name="newActionSwitch" class="form-control" data-ng-model="ScriptModalCtrl.tmpElement" data-ng-change="ScriptModalCtrl.setActionBenoicElement()" data-ng-options="switch as switch.display for switch in ScriptModalCtrl.benoicElements.switches track by ScriptModalCtrl.trackBenoicElement(switch, \'switch\')"></select></div></div><div class="row"><label for="newActionSwitchValue" class="col-xs-4" data-translate="script_switch_value"></label><div class="col-xs-8"><input type="checkbox" id="newActionSwitchValue" name="newActionSwitchValue" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="ScriptModalCtrl.newAction.command" data-ng-checked="false" data-ng-true-value="1" data-ng-false-value="0"></div></div></div><div data-ng-if="ScriptModalCtrl.newActionType.name === \'dimmer\'"><div class="row control-group" data-ng-class="{\'has-error\': !ScriptModalCtrl.newAction.dimmer.name}"><label for="newActionDimmer" class="col-xs-4" data-translate="script_dimmer_select"></label><div class="col-xs-8 controls"><select id="newActionDimmer" name="newActionDimmer" class="form-control" data-ng-model="ScriptModalCtrl.tmpElement" data-ng-change="ScriptModalCtrl.setActionBenoicElement()" data-ng-options="dimmer as dimmer.display for dimmer in ScriptModalCtrl.benoicElements.dimmers track by ScriptModalCtrl.trackBenoicElement(dimmer, \'dimmer\')"></select></div></div><div class="row"><label for="newActionDimmerValue" class="col-xs-4" data-translate="script_dimmer_value"></label><div class="col-xs-8"><input id="newActionDimmerValue" class="form-control" name="newActionDimmerValue" type="number" min="0" max="100" data-ng-model="ScriptModalCtrl.newAction.command"></div></div></div><div data-ng-if="ScriptModalCtrl.newActionType.name === \'heater\'"><div class="row control-group" data-ng-class="{\'has-error\': !ScriptModalCtrl.newAction.heater.name}"><label for="newActionHeater" class="col-xs-4" data-translate="script_heater_select"></label><div class="col-xs-8 controls"><select id="newActionHeater" name="newActionHeater" class="form-control" data-ng-model="ScriptModalCtrl.tmpElement" data-ng-change="ScriptModalCtrl.setActionBenoicElement()" data-ng-options="heater as heater.display for heater in ScriptModalCtrl.benoicElements.heaters track by ScriptModalCtrl.trackBenoicElement(heater, \'heater\')"></select></div></div><div class="row"><label for="newActionHeaterValue" class="col-xs-4" data-translate="script_heater_command"></label><div class="col-xs-8"><input id="newActionHeaterValue" class="form-control" name="newActionHeaterValue" type="number" min="0" max="100" data-ng-model="ScriptModalCtrl.newAction.command"> <span data-ng-bind="ScriptModalCtrl.tmpElement.options.unit"></span></div></div><div class="row control-group" data-ng-class="{\'has-error\': !ScriptModalCtrl.newAction.heater.mode}"><label for="newActionHeaterMode" class="col-xs-4" data-translate="script_heater_mode_title"></label><div class="col-xs-8 controls"><select class="form-control" id="newActionHeaterMode" name="newActionHeaterMode" data-ng-model="ScriptModalCtrl.newAction.parameters.mode" data-ng-options="mode as ScriptModalCtrl.heaterModeDisplay(mode) for mode in ScriptModalCtrl.tmpElement.availableModes"><option value="" data-translate="heater_mode_keep"></option></select></div></div></div><div data-ng-if="ScriptModalCtrl.newActionType.submodule === \'carleon\'"><div class="row control-group" data-ng-class="{\'has-error\': false}"><label for="newActionCarleonElement" class="col-xs-4" data-translate="script_element_select"></label><div class="col-xs-8 controls"><select id="newActionCarleonElement" name="newActionCarleonElement" class="form-control" data-ng-model="ScriptModalCtrl.tmpElement" data-ng-change="ScriptModalCtrl.setActionCarleonElement()" data-ng-options="element as element.name for element in ScriptModalCtrl.carleonConditionElementsList[ScriptModalCtrl.newActionType.name] track by ScriptModalCtrl.trackCarleonElement(element, ScriptModalCtrl.newActionType.name)"></select></div></div><div class="row control-group" data-ng-class="{\'has-error\': false}" data-ng-repeat="parameter in ScriptModalCtrl.carleonConditionCommandsParameters[ScriptModalCtrl.newActionType.name]"><label for="{{ScriptModalCtrl.newActionType.name + \'$\' + parameter.name}}" class="col-xs-4" data-ng-bind="parameter.title"></label><div class="col-xs-8 controls"><input type="text" class="form-control" name="{{ScriptModalCtrl.newActionType.name + \'$\' + parameter.name}}" id="{{ScriptModalCtrl.newActionType.name + \'$\' + parameter.name}}" data-ng-if="parameter.type === \'string\'" data-ng-model="ScriptModalCtrl.newAction.parameters[parameter.name]"> <input type="number" class="form-control" name="{{ScriptModalCtrl.newActionType.name + \'$\' + parameter.name}}" id="{{ScriptModalCtrl.newActionType.name + \'$\' + parameter.name}}" data-ng-if="parameter.type === \'integer\'" data-ng-model="ScriptModalCtrl.newAction.parameters[parameter.name]"> <input type="number" class="form-control" name="{{ScriptModalCtrl.newActionType.name + \'$\' + parameter.name}}" id="{{ScriptModalCtrl.newActionType.name + \'$\' + parameter.name}}" data-ng-if="parameter.type === \'real\'" step=".01" data-ng-model="ScriptModalCtrl.newAction.parameters[parameter.name]"></div></div></div><hr><div class="row"><div class="col-xs-6"><button type="button" class="btn btn-primary" data-ng-click="ScriptModalCtrl.saveNewAction()" data-translate="btn_add" data-ng-disabled="!ScriptModalCtrl.isActionValid()" data-uib-tooltip="{{ScriptModalCtrl.error.messageAction}}"></button></div><div class="col-xs-6"><button type="button" class="btn btn-primary" data-ng-click="ScriptModalCtrl.cancelAddAction()" data-translate="btn_cancel"></button></div></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="ScriptModalCtrl.save()" data-translate="btn_ok" data-ng-disabled="!ScriptModalCtrl.isScriptValid()" data-uib-tooltip="{{ScriptModalCtrl.error.message}}"></button> <button class="btn btn-warning" type="button" data-ng-click="ScriptModalCtrl.cancel()" data-dismiss="modal" data-translate="btn_cancel"></button></div></div>'),e.put("components/script/script.template.html",'<div class="text-center"><button type="button" data-ng-click="$ctrl.runScript()" class="btn btn-primary script-button" data-ng-bind="$ctrl.element.name"></button></div>'),e.put("components/sensor/sensor.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title" data-translate="sensor_update_title"></h3></div><div class="modal-body"><div class="row control-group"><span class="col-xs-6" data-translate="sensor_update_name"></span><div class="col-xs-6 controls"><input type="text" name="sensorDisplay" id="sensorDisplay" data-ng-model="SensorsModalCtrl.sensor.newDisplay" class="modal-input-text form-control"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="sensor_update_unit"></span><div class="col-xs-6 controls"><input type="text" name="sensorUnit" id="sensorUnit" data-ng-model="SensorsModalCtrl.sensor.options.unit" class="modal-input-text form-control" placeholder="{{\'sensor_unit_placeholder\' | translate}}"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="sensor_update_enabled"></span><div class="col-xs-6 controls"><input type="checkbox" data-bs-switch="" class="form-control" data-toggle="toggle" data-switch-size="mini" data-ng-model="SensorsModalCtrl.sensor.enabled"></div></div><div class="row"><hr></div><div class="row control-group"><span class="col-xs-6" data-translate="sensor_update_monitor"></span><div class="col-xs-6"><input type="checkbox" data-bs-switch="" class="form-control" data-toggle="toggle" data-switch-size="mini" data-ng-model="SensorsModalCtrl.sensor.monitored"></div></div><div class="row control-group" data-ng-if="SensorsModalCtrl.sensor.monitored"><span class="col-xs-6" data-translate="sensor_update_monitor_every"></span><div class="col-xs-6"><select id="bddAddUserGrant" class="form-control" data-ng-model="SensorsModalCtrl.sensor.monitored_every" data-ng-options="monitorEvery.value as SensorsModalCtrl.tr(monitorEvery.label) for monitorEvery in SensorsModalCtrl.monitorEveryEnum"></select></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="SensorsModalCtrl.saveSensor()" data-translate="sensor_btn_ok"></button> <button class="btn btn-warning" type="button" data-ng-click="SensorsModalCtrl.cancel()" data-dismiss="modal" data-translate="sensor_btn_cancel"></button></div></div>'),e.put("components/sensor/sensor.template.html",'<div data-ng-if="$ctrl.element.enabled || $ctrl.adminMode"><div class="text-center" data-ng-class="{\'text-italic\': $ctrl.adminMode}"><div data-ng-bind="$ctrl.elementDisplayValue()"></div></div></div>'),e.put("components/switch/switch.modal.html",'<div class="modal-content"><div class="modal-header"><h3 class="modal-title" data-translate="switch_update_title"></h3></div><div class="modal-body"><div class="row control-group"><span class="col-xs-6" data-translate="switch_update_name"></span><div class="col-xs-6 controls"><input type="text" name="switcherDisplay" id="switcherDisplay" data-ng-model="SwitchesModalCtrl.switcher.newDisplay" class="modal-input-text form-control"></div></div><div class="row control-group"><span class="col-xs-6" data-translate="switch_update_enabled"></span><div class="col-xs-6 controls"><input type="checkbox" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="SwitchesModalCtrl.switcher.enabled"></div></div><div class="row"><hr></div><div class="row control-group"><span class="col-xs-6" data-translate="switch_update_monitor"></span><div class="col-xs-6 controls"><input type="checkbox" class="form-control" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="SwitchesModalCtrl.switcher.monitored"></div></div><div class="row control-group" data-ng-if="SwitchesModalCtrl.switcher.monitored"><span class="col-xs-6" data-translate="switch_update_monitor_every"></span><div class="col-xs-6 controls"><select id="bddAddUserGrant" class="form-control" data-ng-model="SwitchesModalCtrl.switcher.monitored_every" data-ng-options="monitorEvery.value as SwitchesModalCtrl.tr(monitorEvery.label) for monitorEvery in SwitchesModalCtrl.monitorEveryEnum"></select></div></div></div><div class="modal-footer"><button class="btn btn-primary" type="button" data-ng-click="SwitchesModalCtrl.saveSwitcher()" data-translate="switch_btn_ok"></button> <button class="btn btn-warning" type="button" data-ng-click="SwitchesModalCtrl.cancel()" data-dismiss="modal" data-translate="switch_btn_cancel"></button></div></div>'),e.put("components/switch/switch.template.html",'<div data-ng-if="$ctrl.element.enabled || $ctrl.adminMode"><div class="text-center" data-ng-class="{\'text-italic\': $ctrl.adminMode}"><input type="checkbox" data-bs-switch="" data-toggle="toggle" data-switch-size="mini" data-ng-model="$ctrl.element.valueChecked" data-ng-change="$ctrl.toggleSwitcher()"></div></div>'),e.put("components/topLeftMenu/topLeftMenu.template.html",'<div data-ng-if="topLeftMenuCtrl.sagremorParams.loggedIn"><ul class="nav nav-tabs nav-stacked nav-pills topnav"><li id="tabDashboard" class="sag-menu active text-center"><a data-ui-sref="dashboard" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabDashboard\')" title="{{\'menu_home\'|translate}}"><i class="fa fa-home fa-fw fa-3x"></i></a></li><li id="tabSwitches" class="sag-menu text-center" data-ng-if="topLeftMenuCtrl.sagremorParams.benoicEnabled"><a data-ui-sref="switches" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabSwitches\')" title="{{\'menu_lights\'|translate}}"><i class="fa fa-lightbulb-o fa-fw fa-3x"></i></a></li><li id="tabHeaters" class="sag-menu text-center" data-ng-if="topLeftMenuCtrl.sagremorParams.benoicEnabled"><a data-ui-sref="heaters" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabHeaters\')" title="{{\'menu_heaters\'|translate}}"><i class="fa fa-fire fa-3x"></i></a></li><li id="tabSensors" class="sag-menu text-center" data-ng-if="topLeftMenuCtrl.sagremorParams.benoicEnabled"><a data-ui-sref="sensors" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabSensors\')" title="{{\'menu_sensors\'|translate}}"><i class="fa fa-line-chart fa-fw fa-3x"></i></a></li><li id="tabService{{service.target}}" class="sag-menu text-center" data-ng-repeat="service in topLeftMenuCtrl.serviceList" data-ng-if="topLeftMenuCtrl.sagremorParams.carleonEnabled"><a data-ui-sref="service({service: service.target})" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabService\' + service.target)" title="{{service.name|translate}}"><i data-ng-class="{\'fa fa-{{service.icon}} fa-fw fa-3x\': true}"></i></a></li><li id="tabScripts" class="sag-menu text-center"><a data-ui-sref="scripts" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabScripts\')" title="{{\'menu_scripts\'|translate}}"><i class="fa fa-tasks fa-fw fa-3x"></i></a></li><li id="tabEvents" class="sag-menu text-center"><a data-ui-sref="events" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabEvents\')" title="{{\'menu_events\'|translate}}"><i class="fa fa-calendar fa-fw fa-3x"></i></a></li><li id="tabMonitors" class="sag-menu text-center"><a data-ui-sref="monitors" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabMonitors\')" title="{{\'menu_monitor\'|translate}}"><i class="fa fa-bar-chart fa-fw fa-3x"></i></a></li><li id="tabLogs" class="sag-menu text-center" data-ng-if="topLeftMenuCtrl.sagremorParams.garethEnabled" title="{{\'menu_logs\'|translate}}"><a data-ui-sref="logs" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabLogs\')"><i class="fa fa-history fa-fw fa-3x"></i></a></li><li id="tabParameters" class="sag-menu text-center"><a data-ui-sref="parameters" data-toggle="tab" data-ng-click="topLeftMenuCtrl.selectTab(\'#tabParameters\')" title="{{\'menu_parameters\'|translate}}"><i class="fa fa-cogs fa-fw fa-3x"></i></a></li></ul></div>'),e.put("components/topRightMenu/topRightMenu.template.html",'<div class="top-right-menu" data-uib-dropdown=""><button class="btn btn-primary text-left" type="button" data-uib-dropdown-toggle=""><i class="fa fa-user fa-3x" aria-hidden="true"></i></button><ul class="container-fluid dropdown-menu dropdown-menu-right top-right-menu-list" data-uib-dropdown-menu="" data-uib-dropdown-menu-auto-close="outsideClick" data-ng-click="$event.stopPropagation()"><li class="row control-group" data-ng-if="topRightMenuCtrl.sagremorParams.loggedIn"><div class="col-xs-6 controls"><label for="admin-mode" data-translate="top_right_menu_admin_mode"></label></div><div class="col-xs-6 controls"><input class="form-control" id="admin-mode" name="admin-mode" data-toggle="toggle" data-bs-switch="" data-switch-size="mini" type="checkbox" data-ng-model="topRightMenuCtrl.sagremorParams.adminMode"></div></li><li class="row control-group"><div class="col-xs-6 controls"><label for="sag-lang" data-translate="top_right_menu_lang"></label></div><div class="col-xs-6 controls"><select class="form-control" id="sag-lang" name="sag-lang" data-ng-model="topRightMenuCtrl.selectedLang" data-ng-options="lang.name as lang.display for lang in topRightMenuCtrl.langList" data-ng-change="topRightMenuCtrl.changeLang()"></select></div></li><li class="row control-group" data-ng-if="topRightMenuCtrl.sagremorParams.loggedIn"><div class="col-xs-6 controls"><label for="sag-lang" data-translate="top_right_menu_profile"></label></div><div class="col-xs-6 controls"><select class="form-control" id="sag-lang" name="sag-lang" data-ng-model="topRightMenuCtrl.currentProfileName" data-ng-options="profile.name as profile.name for profile in topRightMenuCtrl.profiles" data-ng-change="topRightMenuCtrl.changeProfile()"></select></div></li><li class="row control-group" data-ng-if="topRightMenuCtrl.sagremorParams.loggedIn"><div class="col-xs-6 controls"><label for="sag-refresh" data-translate="top_right_menu_refresh"></label></div><div class="col-xs-6 controls"><button id="sag-refresh" name="sag-refresh" type="button" class="btn btn-primary btn-sm" data-ng-click="topRightMenuCtrl.refresh()"><i class="fa fa-refresh" aria-hidden="true"></i></button></div></li><li class="row control-group"><data-oauth data-site="{{topRightMenuCtrl.oauth2.site}}" data-client-id="{{topRightMenuCtrl.oauth2.clientId}}" data-response-type="{{topRightMenuCtrl.oauth2.responseType}}" data-redirect-uri="{{topRightMenuCtrl.oauth2.redirectUri}}" data-profile-uri="{{topRightMenuCtrl.oauth2.profileUri}}" data-scope="{{topRightMenuCtrl.oauth2.scope}}" data-authorize-path="{{topRightMenuCtrl.oauth2.authorizePath}}" data-token-path="{{topRightMenuCtrl.oauth2.tokenPath}}" data-template="/app/login/login.html" data-storage="localStorage" data-disable-check-session="true"></data-oauth></li></ul></div>')}]);
//# sourceMappingURL=../maps/scripts/app-52128775ca.js.map
